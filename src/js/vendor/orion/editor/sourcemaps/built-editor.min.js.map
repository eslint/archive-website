{"version":3,"file":"built-editor.min.js","sources":["requirejs/almond.js","requirejs/i18n.js","orion/editor/nls/messages.js","orion/editor/nls/root/messages.js","orion/editor/eventTarget.js","orion/regex.js","orion/util.js","orion/editor/textModel.js","orion/keyBinding.js","orion/editor/keyModes.js","orion/editor/textTheme.js","orion/editor/util.js","orion/bidiUtils.js","orion/metrics.js","orion/editor/textView.js","orion/editor/projectionTextModel.js","orion/Deferred.js","orion/webui/littlelib.js","orion/editor/tooltip.js","orion/editor/annotations.js","orion/objects.js","orion/editor/editor.js","orion/editor/find.js","orion/editor/findUI.js","orion/editor/actions.js","orion/editor/undoStack.js","orion/editor/rulers.js","orion/editor/textDND.js","orion/editor/linkedMode.js","orion/editor/factories.js","orion/editor/editorFeatures.js","orion/editor/contentAssist.js","orion/editor/textStyler.js","orion/editor/edit.js"],"names":["requirejs","require","define","undef","hasProp","obj","prop","hasOwn","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","config","starMap","charAt","slice","length","concat","splice","join","indexOf","substring","makeRequire","relName","forceSync","req","apply","aps","arguments","makeNormalize","makeLoad","depName","value","defined","callDep","waiting","args","defining","main","Error","splitPrefix","prefix","index","makeConfig","makeMap","handlers","Object","prototype","hasOwnProperty","plugin","parts","f","n","pr","p","exports","e","module","id","uri","deps","callback","cjsModule","ret","usingExports","load","alt","setTimeout","cfg","amd","jQuery","addPart","locale","master","needed","toLoad","suffix","push","addIfExists","fullName","_fileExists","toUrl","mixin","target","source","force","nlsRegExp","masterConfig","version","onLoad","masterName","match","exec","current","navigator","languages","language","userLanguage","toLowerCase","isBuild","locales","k","partBundle","root","multipleAnnotations","line","breakpoint","bookmark","task","error","warning","info","currentSearch","currentLine","matchingBracket","currentBracket","diffAdded","diffDeleted","diffModified","lineUp","lineDown","lineStart","lineEnd","charPrevious","charNext","pageUp","pageDown","scrollPageUp","scrollPageDown","scrollLineUp","scrollLineDown","wordPrevious","wordNext","textStart","textEnd","scrollTextStart","scrollTextEnd","centerLine","selectLineUp","selectLineDown","selectWholeLineUp","selectWholeLineDown","selectLineStart","selectLineEnd","selectCharPrevious","selectCharNext","selectPageUp","selectPageDown","selectWordPrevious","selectWordNext","selectTextStart","selectTextEnd","deletePrevious","deleteNext","deleteWordPrevious","deleteWordNext","deleteLineStart","deleteLineEnd","tab","enter","enterNoCursor","escape","selectAll","copy","cut","paste","uppercase","lowercase","capitalize","reversecase","toggleWrapMode","toggleTabMode","toggleOverwriteMode","committerOnTime","emacs","exchangeMarkPoint","setMarkCommand","clearMark","digitArgument","negativeArgument","Comment","Flat outline","incrementalFindStr","incrementalFindStrNotFound","incrementalFindReverseStr","incrementalFindReverseStrNotFound","findReplace","find","undo","redo","cancelMode","findNext","findPrevious","incrementalFind","incrementalFindReverse","indentLines","unindentLines","moveLinesUp","moveLinesDown","copyLinesUp","copyLinesDown","deleteLines","gotoLine","gotoLinePrompty","nextAnnotation","prevAnnotation","expand","collapse","expandAll","collapseAll","lastEdit","trimTrailingWhitespaces","toggleLineComment","addBlockComment","removeBlockComment","linkedModeEntered","linkedModeExited","syntaxError","contentAssist","noProposals","computingProposals","lineColumn","lineColumnOffset","multiSelections","vi","vimove","viyank","videlete","vichange","viLeft","viRight","viUp","viDown","viw","vib","viW","viB","vie","viE","vi$","vi^_","vi+","vi-","vi|","viH","viM","viL","vi/","vi?","vin","viN","vif","viF","vit","viT","vi,","vi;","viG","viycd","via","viA","vii","viI","viO","vio","viR","vis","viS","viC","vip","viP","viStar","next","previous","replace","replaceAll","findWith","replaceWith","caseInsensitive","selectedLines","regex","wholeWord","caseInsensitiveTooltip","selectedLinesTooltip","regexTooltip","wholeWordTooltip","closeTooltip","replacingAll","replacedMatches","nothingReplaced","notFound","EventTarget","addMixin","object","proto","addEventListener","type","listener","useCapture","this","_eventTypes","state","level","listeners","dispatchEvent","evt","_dispatchEvent","len","l","handleEvent","compact","isListening","undefined","removeEventListener","str","parse","regexp","pattern","flags","formatMessage","msg","createElement","document","tagName","createElementNS","XHTML","confineDialogTab","firstElement","lastElement","keyCode","shiftKey","preventDefault","focus","userAgent","isIE","documentMode","isFirefox","parseFloat","isOpera","isChrome","isSafari","isWebkit","isAndroid","isIPad","isIPhone","isIOS","isElectron","isMac","platform","isWindows","isLinux","isTouch","platformDelimiter","mEventTarget","mRegex","util","TextModel","text","lineDelimiter","_lastLineIndex","_text","_lineOffsets","setText","setLineDelimiter","destroy","options","string","parsed","skip","reverse","wrap","start","rangeStart","rangeEnd","isRange","result","lastIndex","offset","s","re","RegExp","end","hasNext","getCharCount","count","getLine","lineIndex","includeDelimiter","lineCount","getLineCount","getText","c","charCodeAt","getLineAtOffset","charCount","high","low","Math","floor","getLineDelimiter","_lineDelimiter","getLineEnd","max","getLineStart","chunk","firstOffset","firstChunk","lastOffset","lastChunk","beforeText","afterText","onChanging","modelChangingEvent","onChanged","modelChangedEvent","all","lines","Array","startLine","endLine","eventStart","removedCharCount","removedLineCount","addedCharCount","addedLineCount","cr","lf","newLineOffsets","endLineOffset","startLineOffset","changeCount","SPLICE_LIMIT","limit","min","firstText","lastText","params","KeyStroke","mod1","mod2","mod3","mod4","toUpperCase","KeySequence","keys","getKeys","String","fromCharCode","which","charCode","metaKey","ctrlKey","altKey","equals","kb","KeyBinding","mKeyBinding","KeyMode","view","_view","_keyBindings","createKeyBindings","_keyBindingIndex","DefaultKeyMode","getKeyBindings","actionID","keyBindings","keyBinding","getView","isActive","getKeyModes","keyBindingIndex","_matchingKeyBindings","matchingKeyBindings","setKeyBinding","predefined","setView","bindings","isMacChrome","TextTheme","_document","THEME_PREFIX","Themes","getTheme","theme","getThemeClass","_themeClass","setThemeClass","className","styleSheet","self","oldThemeClass","_load","onThemeChanged","oldValue","newValue","themeChangedEvent","buildStyleSheet","themeClass","settings","convertCSSname","_capitalRegEx","bind","parseStyles","ancestors","isTopLevel","localResult","forEach","key","styles","_createStyle","link","node","getElementById","firstChild","data","removeChild","appendChild","createTextNode","rel","href","head","getElementsByTagName","documentElement","extension","test","cssText","handler","capture","attachEvent","detachEvent","compare","s1","s2","constructor","contains","topNode","compareDocumentPosition","temp","parentNode","getNodeStyle","defaultValue","style","currentStyle","css","ownerDocument","defaultView","getComputedStyle","getPropertyValue","Animation","play","onFrame","startedAt","Date","now","percentDone","duration","eased","easing","propertyValue","range","onAnimate","stop","rate","defaultEasing","curve","interval","window","setInterval","clearInterval","onEnd","x","sin","PI","setBrowserLangDirection","lang","dojoConfig","isBidi","isBidiEnabled","htmlElement","setAttribute","bidiEnabled","localStorage","getItem","bidiEnabledStorage","getBidiLayout","_bidiLayout","bidiLayoutStorage","getTextDirection","bidiLayout","checkContextual","enforceTextDirWithUcc","trim","dir","LRE","RLE","PDF","fdc","addBidiEventListeners","input","_hasBidiEventListeners","eventTypes","handleInputEvent","event","textContent","initInputField","enforceTextDir","comments","styleClass","startsWith","newStyle","attributes","Metrics","serviceRegistry","serviceArray","services","refs","getServiceReferences","getService","location","protocol","hostname","pathname","search","page","title","_services","pageLoad","registerService","_logTiming","timingCategory","timingVar","timingValue","timingLabel","logTiming","_logEvent","category","action","label","details","logEvent","_logPageLoadTiming","performance","getEntriesByName","mark","timingVars","create","logPageLoadTiming","messages","mTextModel","mKeyModes","mTextTheme","textUtil","bidiUtils","mMetrics","getWindow","doc","parentWindow","newArray","applyStyle","reset","attrs","specified","removeAttribute","properties","a","clone","merge","obj1","obj2","convertDelimiter","addTextFunc","addDelimiterFunc","getBorder","left","_top","right","bottom","win","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","parseInt","top","getPadding","paddingLeft","paddingTop","paddingRight","paddingBottom","getLineTrim","_trim","border","DOMReady","_parent","insertListener","animationName","__DOMReady","template","props","_frames","classRule","addHandler","insertBefore","Selection","caret","_columnX","DOMSelection","_divs","_clipDiv","_rootDiv","div","_createSelectionDiv","TextRect","rect","TextLine","lineDiv","_lineDiv","TextView","_init","removeHandler","editing","selections","back","_editing","convert","some","selection","sort","b","_docX","extend","tmp","setCaret","getCaret","getAnchor","getOrientedSelection","toString","isEmpty","setPrimary","enabled","primary","update","focused","_hasFocus","visible","_cursorVisible","cursor","_selection","visibility","zIndex","background","setSelection","model","_model","firstNode","_getLineNext","bottomNode","topOffset","bottomOffset","lastNode","_getLinePrevious","_getLineNode","_setDOMSelection","startNode","startOffset","endNode","endOffset","startCaret","_setDOMFullSelection","_line","getNodeOffset","_getWindow","getSelection","sel","createRange","setStart","setEnd","anchorNode","anchorOffset","focusNode","focusOffset","_anchorNode","_anchorOffset","_focusNode","_focusOffset","_ignoreSelect","rangeCount","removeAllRanges","addRange","_cursorDiv","getClientRects","cursorParent","clientRect","getBoundingClientRect","scrollTop","scrollLeft","body","child","createTextRange","moveToElementText","moveStart","endRange","setEndPoint","select","width","height","_fullSelection","viewPad","_getViewPadding","_clientDiv","viewRect","_viewDiv","hd","vd","clipRect","rootpRect","_ignoreDOMSelection","endRect","startRect","r","sel1Div","sel1Left","sel1Top","sel1Right","sel1Bottom","sel3Left","sel3Top","sel3Right","sel3Bottom","sel3Div","abs","sel2Div","drawing","_createLine","lineText","textView","onLineStyle","viewStyle","viewLineText","ranges","viewRanges","tabOffset","_createRanges","_metrics","largestFontStyle","ignoreChars","span","oldSpan","oldStyle","oldText","oldEnd","innerHTML","lineWidth","frag","createDocumentFragment","_createSpan","changeStart","_rectsCache","nextSibling","spanEnd","t","styleStart","styleEnd","_createRange","unmergeable","tabSize","_customTabSize","bidiStyle","bidi","unicodeBidi","direction","bidiRange","tabIndex","spacesCount","spaces","isLink","hasLink","_linksVisible","html","ignore","cloneNode","_handleLinkClick","_ensureCreated","_createdDiv","absolute","_getLineBoundingClientRect","lineOffset","lineChild","textNode","nodeLength","_nodeLength","_isRangeRects","fixIE8","moveEnd","_getSelections","_updateDOMSelection","xFactor","screen","logicalXDPI","deviceXDPI","yFactor","logicalYDPI","deviceYDPI","_wrapMode","rects","_getClientRects","element","parentRect","newRects","center","noTrim","lastChild","previousSibling","lastRect","padding","getLineIndex","getOffset","getModelOffset","modelOffset","lineNode","lineNodeOffset","offsetNode","ignored","childText","childOffset","ch","y","hitChild","rangeLeft","rangeTop","rangeRight","rangeBottom","rects1","that","rl","lineRect","mid","move","found","trailing","offsetInLine","newText","q","rangeChild","hitRects","rect1","_lastHitChild","_lastHitOffset","previousOffset","nextOffset","previousChild","nextChild","getNextOffset","unit","_getNextOffset_W3C","_getNextOffset_IE","_isPunctuation","_isWhitespace","lineLength","step","previousPunctuation","previousLetterOrDigit","punctuation","letterOrDigit","updateLinks","replaceChild","addKeyMode","mode","keyModes","_keyModes","_modeAdded","addRuler","ruler","rulers","_rulers","sideIndex","getLocation","_createRuler","_update","computeSize","w","h","clientDiv","clientWidth","_getLine","viewPadding","scrollWidth","from","to","_scroll","_getScroll","_doCopy","_doCut","_destroyView","onDestroy","_theme","_doubleClickSelection","_actions","hasFocus","getActionDescription","actionDescription","getActions","defaultAction","actions","defaultHandler","getBottomIndex","fullyVisible","_getBottomIndex","getBottomPixel","_getClientHeight","getCaretOffset","_getSelection","getClientArea","_getClientWidth","getHorizontalPixel","getLineHeight","_getLineHeight","_getLineIndex","isValidTextPosition","getOffsetAtLocation","bounds","getLinePixel","_getLinePixel","getLocationAtOffset","_doMove","getOptions","_defaultOptions","arg","option","getModel","getRulers","getSelections","getSelectionText","delimiter","_getBaseText","getTopIndex","_getTopIndex","getTopPixel","invokeAction","actionOptions","isDestroyed","onContextMenu","contextMenuEvent","onDragStart","dragEvent","onDrag","onDragEnd","onDragEnter","onDragOver","onDragLeave","onDrop","destroyEvent","onSaving","savingEvent","onInputChanged","inputChangedEvent","lineStyleEvent","onKeyDown","keyEvent","onKeyPress","onKeyUp","onModelChanged","onModelChanging","onModify","modifyEvent","onMouseDown","mouseEvent","onMouseUp","onMouseMove","onMouseOver","onMouseOut","onTouchStart","touchEvent","onTouchMove","onTouchEnd","onOptions","optionsEvent","onSelection","selectionEvent","onScroll","scrollEvent","onVerify","verifyEvent","onFocus","focusEvent","onBlur","blurEvent","_doPaste","redraw","_redrawCount","redrawRulers","redrawLines","divRuler","_getRulerParent","_ruler","rulerChanged","_lineHeight","_resetLineHeight","imeLineIndex","_imeOffset","getOverview","lineChanged","_maxLineIndex","_checkMaxLineIndex","_maxLineWidth","_queueUpdate","redrawRange","removeKeyMode","_modeRemoved","removeRuler","_destroyRuler","resize","_handleResize","setAction","setCaretOffset","show","_setSelection","setHorizontalPixel","pixel","_scrollView","setRedraw","setModel","_modelListener","oldLineCount","oldCharCount","newLineCount","newCharCount","_reset","setOptions","defaultOptions","setSelections","_rangesToSelections","edit","isSingle","_code","_variableLineHeight","_modifyContent","_fixCaret","setTopIndex","topIndex","_scrollViewAnimated","setTopPixel","showSelection","_showCaret","styleChanged","sync","invalid","_updateStyle","_handleRootMouseDown","_cancelCheckSelection","_ignoreEvent","contentEditable","_overlayDiv","draggable","_ignoreBlur","srcElement","stopPropagation","_isW3CEvents","_handleRootMouseUp","_handleBlur","_commitIME","rootDiv","display","_domSelection","domSelection","parentElement","empty","_ignoreFocus","_handleCompositionStart","_imeTimeout","clearTimeout","_imeText","_startIME","_mutationObserver","disconnect","_handleCompositionUpdate","_handleCompositionEnd","_handleContextMenu","_lastMouseButton","_createMouseEvent","screenX","screenY","defaultPrevented","button","_contextMenuOpen","_checkSelectionChange","_pollSelectionChange","_handleCopy","_ignoreCopy","_handleCut","_handleDataModified","_handleDblclick","time","timeStamp","_lastMouseTime","_clickCount","_handleMouse","_handleDragStart","_dragOffset","_isMouseDown","_handleDrag","_handleDragEnd","_dropTarget","dataTransfer","dropEffect","mozUserCancelled","_handleDragEnter","prevent","_handleDragOver","_handleDragLeave","_handleDrop","_handleFocus","_lastTouchOffset","_handleKeyDown","_createKeyEvent","_keyDownPrevented","modifier","_setLinksVisible","_readonly","startIME","_keyDownEvent","_doAction","cancelBubble","returnValue","_handleKeyPress","_doContent","_handleDocKeyUp","_handleKeyUp","block","add","_blockSelection","drag","_setSelectionTo","clientX","clientY","_setGrab","_handleMouseDown","timeDiff","deltaX","_lastMouseX","deltaY","_lastMouseY","sameButton","_clickTime","_clickDist","_handleMouseOver","_animation","_handleMouseOut","_handleMouseMove","inClient","_isClientDiv","changed","_lastMouseMoveX","_lastMouseMoveY","_checkOverlayScroll","leftEdge","topEdge","rightEdge","bottomEdge","_doAutoScroll","_endAutoScroll","pt","clickCount","_createTouchEvent","touches","touchCount","_handleMouseUp","_handleMouseWheel","_noScroll","lineHeight","pixelX","pixelY","wheelDelta","deltaMode","detail","axis","HORIZONTAL_AXIS","denominatorX","denominatorY","deltaTime","_wheelTimeStamp","wheelDeltaX","wheelDeltaY","ceil","linesToScroll","_mouseWheelLine","oldScroll","newScroll","_handlePaste","_ignorePaste","newWidth","newHeight","clientHeight","_rootWidth","_rootHeight","queue","metrics","_calculateMetrics","_handleRulerEvent","divHeight","arrowWidth","contentHeight","trackHeight","onClick","onDblClick","relatedTarget","_handleScroll","_lastScrollTime","oldX","_hScroll","oldY","_vScroll","_handleSelectStart","menuOpen","_getModelOffset","_updateSelectionFromDOM","firstLine","lastLine","_cancelPollSelectionChange","_selPollTimer","retryPoll","_handleSelectionChange","_handleTextInput","getRangeAt","deleteContents","insertNode","nodeText","_getDOMText","lineRemoved","delta","deltaText","deltaStart","deltaEnd","_handleTouchStart","_touchScrollTimer","_vScrollDiv","_hScrollDiv","touch","_touchStartX","_touchStartY","pageY","pageYOffset","pageX","pageXOffset","_touchStartTime","_touching","_handleTouchMove","_touchCurrentX","_touchCurrentY","_touchSpeedX","_touchSpeedY","_handleTouchEnd","removeTab","expandTab","_tabSize","_doBackspace","_expandTab","_doCase","changes","_overwriteMode","_setClipboardText","_doCursorNext","_doCursorPrevious","_doDelete","_doEnd","ctrl","visualIndex","_doEnter","_singleMode","noCursor","_doEscape","_doHome","_doLineDown","wholeLine","lastLineCount","_doLineUp","_doNoop","_doPageDown","pageScroll","caretLine","caretRect","_getBoundsAtOffset","linePixel","scrollLines","verticalMaximum","scrollOffset","_doPageUp","_getClipboardText","_doScroll","_scrollHeight","verticalScrollOffset","selectionHeight","_doSelectAll","_doTab","_tabMode","_doShiftTab","_doOverwriteMode","overwriteMode","_doTabMode","tabMode","_doWrapMode","wrapMode","_autoScroll","_autoScrollDir","_autoScrollX","_autoScrollY","_getBlockSelections","_autoScrollTimer","_autoScrollTimerID","_AUTO_SCROLL_RATE","_calculateLineHeightTimer","calculate","_calculateLHTimer","MAX_TIME","_calculateLineHeight","position","span1","span2","fontStyle","span3","fontWeight","span4","spanRect1","spanRect2","spanRect3","spanRect4","h1","h2","h3","h4","pad","div1","div2","rect2","overflow","w1","w2","wrapWidth","marginWidth","charWidth","_wrapOffset","_marginOffset","lineTrim","_cancelAnimation","_clearSelection","insertText","_scrollDiv","_createActions","noop","shiftTab","_createRulerParent","MozUserSelect","WebkitUserSelect","rulerParent","_marginDiv","rulerWidth","cssFloat","styleFloat","outline","children","sibling","borderWidth","margin","_createView","checkDOMReady","hasChildNodes","WebkitTextSizeAdjust","leftDiv","_leftDiv","viewDiv","rightDiv","_rightDiv","innerRightDiv","_innerRightDiv","scrollDiv","marginDiv","clipDiv","clipScrollDiv","_clipScrollDiv","WebkitTapHighlightColor","_setFullSelection","vScrollDiv","borderColor","borderStyle","borderRadius","backgroundColor","opacity","hScrollDiv","setCapture","overlayDiv","_setWrapMode","_setReadOnly","_setThemeClass","_setTabSize","_setMarginOffset","_hookEvents","parent","scrollAnimation","readonly","fullSelection","singleMode","_setSingleMode","noScroll","_setNoScroll","_setOverwriteMode","blockCursorVisible","_setBlockCursor","marginOffset","wrapOffset","_setWrapOffset","wrappable","undoStack","_setUndoStack","_setTheme","_unhookEvents","_updateTimer","_cursorTimer","_clipboardDiv","blur","getBaseModel","mapOffset","_bottomChild","filter","o1","o2","_getInnerRightWidth","innerRightWidth","innerRightRect","wholeText","clipboardText","clipboardData","getData","__electron","clipboard","readText","clipboardDiv","whiteSpace","_getText","noteText","_getTextFromElement","execCommand","ex","childNodes","innerText","newRange","selectNode","oldRanges","_topIndexY","restrictToValidLines","cancelAnimation","isArray","_topChild","_onModelChanging","_onModelChanged","_themeListener","_handlers","grabNode","textModel","deferScroll","deferredHandler","MO","MutationObserver","MozMutationObserver","mutations","observe","subtree","characterData","_hookRulerEvents","_grabControl","_moseMoveClosure","_mouseUpClosure","overlay","_isOverOverlayScroll","pointerEvents","vertical","horizontal","scrollShowing","overlayScrollWidth","_startUndo","_undoStack","_compoundChange","startCompoundChange","_endUndo","endCompoundChange","caretAtEnd","oldStart","owner","_ignoreQueueUpdate","_resetLineWidth","_scrollAnimation","_ensureCaretVisible","writeText","success","setData","setEndBefore","cleanup","releaseCapture","_hadFocus","preserveCursorX","newSelection","oldSelection","down","extent","word","doubleClickLine","init","_blockCursorVisible","_updateBlockCursorVisible","overwrite","cursorDiv","color","readOnly","_updateOverflow","OTabSize","MozTabSize","viewContainerClass","globalThemeClass","_wrappable","wordWrap","allSelection","showOptions","endInclusive","minScroll","hasShowOptions","alwaysScroll","scrollPolicy","flag","viewAnchor","selectionAnchor","viewAnchorOffset","selected","hScrollOnly","needUpdate","hScroll","vScroll","scrollbarWidth","topIndexY","leftWidth","leftRect","scrollHeight","tempLineHeight","totalHeight","totalLineIndex","round","rootWidth","rootHeight","linesPerPage","bottomIndex","bottomHeight","foundBottomIndex","lh","_updateRuler","rightWidth","rightRect","clientHeightNoScroll","clientHeightScroll","oldHScroll","overflowX","clientWidthNoScroll","clientWidthScroll","oldVScroll","overflowY","thumbHeight","trackWidth","thumbWidth","clipLeft","clipTop","clipWidth","clipHeight","clientLeft","clientTop","clipRight","clipBottom","clip","ensureCaretVisible","overview","getRulerStyle","widthDiv","annotation","getWidestAnnotation","annotations","getAnnotations","_oldTrackHeight","_updateStyleSheet","styleText","ProjectionTextModel","baseModel","_projections","_listener","_onChanged","_onChanging","addProjection","projection","projections","_lineIndex","_lineCount","_binarySearch","getProjections","baseOffset","removeProjection","_removeProjection","noEvents","array","projectionLineIndex","lineDelta","projectionOffset","offsetDelta","change","_change","baseStart","baseEnd","baseText","removed","_expand","modelChangedEvent1","hasChange","modelChangingEvent1","startProjection","endProjection","mapStart","mapEnd","factory","orion","Deferred","run","fn","shift","running","enqueue","runAsync","noReturn","settleDeferred","deferred","listenerResult","listenerThen","then","promise","reject","TypeError","listenerResultCancel","cancel","_parentCancel","resolve","progress","notify","methodName","_reject","_this","_resolve","once","valueThen","valueCancel","thenError","parentCancel","cancelError","onFulfill","onReject","onProgress","process","nextTick","observer","promises","optOnError","onResolve","rejected","when","$","selector","querySelector","$$","querySelectorAll","$$array","either","theNode","Boolean","_getTabIndex","focusableElements","frame","iframe","img","isindex","textarea","nodeName","firstTabbable","disabled","offsetParent","lastTabbable","installShowContextMenu","xPos","yPos","focusElement","activeElement","createEvent","initMouseEvent","trapTabs","tabTrapInstalled","KEY","TAB","first","last","processNodes","nodeType","matches","variableRegEx","nodeValue","pixelValueOf","attrName","intVal","processTextNodes","targetNode","replaceText","processDOMNodes","replaceNodes","replaceNode","addAutoDismiss","excludeNodes","dismissFunction","onclick","autoDismissNodes","autoDismissNode","excludeNodeInDocument","excluded","excludeNode","dismiss","console","message","unhook","removeAutoDismiss","getOffsetParent","setFramesEnabled","enable","frames","keyName","KEY_CODE","createNodes","templateString","newNodes","BKSPC","ENTER","SHIFT","CONTROL","ALT","ESCAPE","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","UP","RIGHT","DOWN","INSERT","DEL","COMMAND","mTextView","mProjectionTextModel","lib","Tooltip","editor","_editor","_create","getTooltip","_tooltip","_tooltipDiv","tooltipDiv","_tipShowing","_mouseDownHandler","isVisible","_locked","hide","_scrollHandler","_topPixel","_leftPixel","_mouseMoveHandler","_prevX","_prevY","_isInRect","_outerArea","classList","remove","tooltipInfo","locked","giveFocus","_giveFocus","_processInfo","getTooltipInfo","noContent","_showContents","onHover","_anchorArea","_tooltipArea","clearLock","hover","clearQuickFixes","_tooltipContents","maxWidth","maxHeight","_hoverPromises","resolved","_tipRect","newTooltipContents","contents","_renderImmediateInfo","context","computeHoverInfo","hoverPromise","_renderPluginContent","offsetStart","offsetEnd","allowFullWidth","log","stack","newContentsDiv","tooltipArea","_computeAnchorArea","_computeTooltipArea","_computeOuterArea","_setInitialFocus","anchorArea","mappedStart","mappedEnd","_computeRectangleFromOffset","mappedOffset","divBounds","tipRect","image","complete","viewBounds","viewportLeft","viewportTop","viewportWidth","viewportHeight","defWidth","defHeight","contentWidth","offsetWidth","spaceBelow","spaceAbove","spaceRight","offsetX","tooltipOffsetX","offsetY","tooltipOffsetY","positionRight","tipRight","positionBottom","tipBottom","_isNode","Node","toFocus","xOK","yOK","tv","curLine","maxX","possibleEnd","startPos","endPos","contentsDiv","content","sectionDiv","titleDiv","renderMarkDown","contentDiv","sandbox","srcdoc","_getAnnotationContents","tooltipTheme","contentsView","_contentsView","size","getAnnotationHTML","allAnnotations","inEditor","htmlHolder","renderQuickFixes","newAnnotations","groupAnnotation","newModel","getAnnotationModel","tooltipHTML","em","AnnotationType","FoldingAnnotation","projectionModel","_projectionModel","_expandedHTML","_expandedStyle","expanded","registerType","lineStyling","lastIndexOf","overviewStyle","lineStyle","rangeStyle","AnnotationTypeList","binarySearch","inclusive","AnnotationModel","_annotations","setTextModel","AnnotationStyler","annotationModel","_annotationModel","_onDestroy","_onLineStyle","_onAnnotationModelChanged","_collapsedHTML","_collapsedStyle","_collapse","modifyAnnotation","_collapseImpl","checkOverlaping","_forEachOverlaping","_expandImpl","_recollapse","_projection","ANNOTATION_FOLDING","ANNOTATION_ERROR","ANNOTATION_WARNING","ANNOTATION_INFO","ANNOTATION_TASK","ANNOTATION_BREAKPOINT","ANNOTATION_BOOKMARK","ANNOTATION_CURRENT_BRACKET","ANNOTATION_MATCHING_BRACKET","ANNOTATION_CURRENT_LINE","ANNOTATION_CURRENT_SEARCH","ANNOTATION_MATCHING_SEARCH","ANNOTATION_SEARCH_RANGE","ANNOTATION_READ_OCCURRENCE","ANNOTATION_WRITE_OCCURRENCE","ANNOTATION_SELECTED_LINKED_GROUP","ANNOTATION_CURRENT_LINKED_GROUP","ANNOTATION_LINKED_GROUP","ANNOTATION_BLAME","ANNOTATION_CURRENT_BLAME","ANNOTATION_DIFF_ADDED","ANNOTATION_DIFF_DELETED","ANNOTATION_DIFF_MODIFIED","annotationTypes","createAnnotation","getType","addAnnotationType","priority","_annotationTypes","getAnnotationTypePriority","getAnnotationsByType","iter","isAnnotationTypeVisible","_visibleAnnotationTypes","setAnnotationTypeVisible","removeAnnotationType","addAnnotation","added","getTextModel","_getAnnotationIndex","removeAnnotations","removeAnnotation","replaceAnnotations","startIndex","textModelChangedEvent","_oldStart","_oldEnd","_mergeStyle","_mergeStyleRanges","styleRange","mergedStyle","viewModel","annotationStart","annotationEnd","getPrototypeOf","toArray","o","mTooltip","mAnnotations","objects","BaseEditor","_domNode","domNode","_statusReporter","statusReporter","_title","checkDirty","Editor","_textViewFactory","textViewFactory","_undoStackFactory","undoStackFactory","_textDNDFactory","textDNDFactory","_annotationFactory","annotationFactory","_zoomRulerFactory","zoomRulerFactory","_foldingRulerFactory","foldingRulerFactory","_lineNumberRulerFactory","lineNumberRulerFactory","_contentAssistFactory","contentAssistFactory","_keyBindingFactory","keyBindingFactory","_hoverFactory","hoverFactory","_syntaxHighlighter","syntaxHighlighter","_annotationStyler","_annotationRuler","_lineNumberRuler","_overviewRuler","_zoomRuler","_foldingRuler","_contentAssist","AT","HIGHLIGHT_ERROR_ANNOTATION","uninstall","setDirty","isClean","getTitle","getUndoStack","install","installed","isDirty","_dirty","markClean","onDirtyChanged","dirtyChangedEvent","reportStatus","isAccessible","dirty","_setSyntaxCheckRequired","required","_syntaxCheckRequired","_isSyntaxCheckRequired","_setModelText","setInput","contentsSaved","getAnnotationRuler","getAnnotationRulerVisible","_annotationRulerVisible","getAnnotationStyler","getContentAssist","getFoldingRuler","getFoldingRulerVisible","_foldingRulerVisible","addFoldingAnnotation","foldingAnnotation","getTextView","getLineNumberRuler","getLineNumberRulerVisible","_lineNumberRulerVisible","_textView","getZoomRuler","getZoomRulerVisible","_zoomRulerVisible","getOverviewRuler","getSourceCodeActions","_sourceCodeActions","getLinkedMode","_linkedMode","getTextActions","_textActions","setAnnotationRulerVisible","setFoldingRulerVisible","textActions","expandAnnotations","setLineNumberRulerVisible","setOverviewRulerVisible","_overviewRulerVisible","setZoomRulerVisible","setAnnotationTypesVisible","types","_annotationTypesVisible","setOverviewAnnotationTypesVisible","_overviewAnnotationTypesVisible","setTextAnnotationTypesVisible","_textAnnotationTypesVisible","getStyleAccessor","styleAccessor","styler","getStyler","_expandOffset","caretOffset","moveSelection","_getTooltipInfo","annotationStyler","rangeAnnotations","_highlightCurrentLine","newSelections","oldSelections","getHighlightLines","p1","oldLines","newLines","_currentLineAnnotations","installTextView","createUndoStack","_textDND","createTextDND","contentAssistMode","createContentAssistMode","tooltip","_hover","createHover","mouseDown","lastMouseX","lastMouseY","_hoverTimeout","_updateCursorStatus","linkedMode","sourceCodeActions","addRemoveBookmark","createAnnotationModel","createAnnotationStyler","createAnnotationRulers","annotationRuler","setMultiAnnotationOverlay","overviewRuler","createZoomRuler","createLineNumberRuler","createFoldingRuler","textViewInstalledEvent","uninstallTextView","textViewUninstalledEvent","isStatusActive","_status","languageTools","showAnnotations","creatorID","description","showProblems","problems","severity","showOccurrences","occurrences","readAccess","showBlame","blameMarkers","blameRGB","_blameRGB","blameStyle","i1","i2","createGroup","groupType","blame","Message","commitLink","CommitLink","AuthorName","Time","blameMarker","Start","End","blameColor","Shade","groupId","Name","createGroupAnnotation","AuthorImage","showDiffAnnotations","diffs","pos","setNoFocus","noFocus","_noFocus","onGotoLine","column","IncrementalFind","_active","_success","_ignoreSelection","_prefix","setActive","_backspace","txt","_forward","Find","_showAll","_selectedLines","_visible","_caseInsensitive","_wrap","_wholeWord","_incremental","_regex","_findAfterReplace","_hideAfterFind","_reverse","_start","_end","_timer","_lastString","_listeners","onEditorFocus","_removeCurrentAnnotation","forward","incremental","iterator","findResult","active","tempOptions","getFindString","findString","savedOptions","_startOffset","getStartOffset","_doFind","isRangeSearch","where","_searchRangeModel","searchString","showAll","findAfterReplace","hideAfterFind","findCallback","_findCallback","getReplaceString","_savedOptions","pop","_removeAllAnnotations","_processReplaceString","newStr","replaceString","startUndo","_doReplace","endUndo","_replacingAll","_doFindForReplaceAll","_markAllOccurrences","_selectedLinesl","annotateSearchRange","multipleLine","postSelectedLines","_incrementalDisabled","startL","endL","_findFromModel","noWrap","_find","searchStr","mFind","FindUI","_findInput","_replaceInput","replaceInput","_selectedLinesUI","_checked","_createContents","findInput","placeholder","_handleInput","group","_createButton","_toggle","close","parentDom","checked","ariaLabel","handled","ctrlKeyOnly","mFindUI","forEachSelection","compound","noUndo","TextActions","_incrementalFind","_lastEditLocation","SourceCodeActions","contentAssistProposalApplied","_lastEditListener","expandAnnotation","gotoLastEdit","insertOffset","currentOffset","prompt","delimiterLength","lineEndNoDelimiter","delimiterStart","delimiterEnd","iterationMode","list","_lastPosition","curAnnotations","theMode","_iterationMode","foundAnnotation","foundAnnotations","spaceTab","removeCount","firstRemoveCount","lastLineStart","autoIndent","autoPairBrackets","handleClosingBracket","autoPairQuotations","indent","prevCharIdx","lineTextBeforeCaret","lineTextAfterCaret","smartIndentation","trimRight","whitespaceBeforeCaret","whitespaceAfterCaret","trimLeft","autoCompleteComments","matchCommentEnd","matchCommentStart","matchCommentDelimiter","prevLine","open","delimiters","getBlockCommentDelimiters","_findEnclosingComment","commentStart","commentEnd","oldLength","newLength","openBracket","closeBracket","autoPairSquareBrackets","autoPairBraces","autoPairParentheses","autoPairAngleBrackets","isClosingBracket","nextChar","quotation","autoPairQuotation","isQuotation","isAlpha","insertQuotation","prevChar","escapePosition","proposal","positions","positionGroups","enterLinkedMode","groups","openPos","closePos","newStart","newEnd","selectedText","comment","getLineCommentDelimiter","uncomment","lineIndices","selStart","selEnd","matchTrailingWhiteSpace","lineStartOffset","matchLength","closingChar","lineNum","setAutoPairParentheses","setAutoPairBraces","setAutoPairSquareBrackets","setAutoPairAngleBrackets","setAutoPairQuotations","setAutoCompleteComments","setSmartIndentation","Change","previousText","CompoundChange","UndoStack","shared","getRedoChanges","getUndoChanges","_doUndoRedo","endSelection","startSelection","compoundChange","_commitUndo","cleanChange","canUndo","canRedo","getSize","_ignoreUndo","_trackUnsavedChanges","_unsavedChanges","_previousChangeType","previousChange","BaseRuler","rulerLocation","rulerOverview","rulerStyle","_location","_overview","_rulerStyle","Ruler","onTextModelChanged","_onTextModelChanged","onAnnotationModelChanged","setAnnotationModel","LineNumberRuler","oddStyle","evenStyle","_oddStyle","_evenStyle","_numOfDigits","_firstLine","AnnotationRuler","OverviewRuler","FoldingRuler","annotationLineStart","annotationLineEnd","visualLineIndex","ls","rulerAnnotation","_mergeAnnotation","_multiAnnotation","_multiAnnotationOverlay","_multiple","setMultiAnnotation","selectionStart","selectionEnd","_findNextAnnotation","annotationType","_currentClickGroup","_setCurrentGroup","_tooltipLineIndex","_curElementBounds","_getAnnotationsAtLineIndex","_getTooltipContents","selectedAnnotation","searchStart","selectedAnnotations","useNextValid","hoverArea","_getOnClickTooltipInfo","annotationLineIndex","currentGroupAnnotation","_currentGroupAnnotation","mapLine","setFirstLine","numOfDigits","fontSize","previousAnnotation","annotationLineCount","mapLineIndex","ZoomRuler","_destroy","rulerTheme","updateWindow","scroll","zoomFactor","zoomView","windowDiv","getProps","zoomPadding","zoomLineHeight","documentHeight","zoomDocumentHeight","zoomClientHeight","windowHeight","toZoom","updateScroll","updateWidth","oldWidth","up","thumbPos","_zoomView","_windowDiv","_scrollListener","_resizeListener","_redrawListener","_optionsListener","_lineListener","TextDND","_dragSelection","_dropOffset","_dropText","_onDragStart","_onDragEnd","_onDragEnter","_onDragOver","_onDrop","effectAllowed","_dropEffect","allowed","LinkedContentAssist","linkedData","_data","LinkedMode","linkedModeModel","exitLinkedMode","selectLinkedGroup","selectedGroupIndex","linkedModeListener","onActivating","_groupContentAssistProvider","setProviders","setProgress","evnt","ignoreVerify","positionChanged","_getPositionChanged","deltaCount","sortedPositions","inside","ansestor","_updateAnnotations","oldOffset","chop","computeProposals","buffer","proposals","linkedstyle","values","val","linkedtitle","unselectable","_sortedPositions","previousModel","parentGroup","nextModel","slf","provider","getPrefix","deactivate","activate","_getModelPositions","_getSortedPositions","mActions","mUndoStack","mRulers","mTextDND","mLinkedMode","KeyBindingsFactory","UndoFactory","LineNumberRulerFactory","FoldingRulerFactory","ZoomRulerFactory","AnnotationFactory","TextDNDFactory","searcher","mFactories","ContentAssist","pageMessage","State","INACTIVE","clearProviders","_textViewListeners","_latestModelChangingEvent","_updateFilterText","isDeactivatingChange","setState","ACTIVE","FILTERING","filterProposals","ContentAssistMode","ContentAssistWidget","widget","selectedIndex","showWidget","autoApply","nextIndex","scrollIndex","setContentAssistMode","createAccessible","textViewListenerAdded","isShowing","_useResizeTimer","_contentAssistMode","_showTooltip","textViewListener","scrollListener","STYLES","hr","emphasis","strikethrough","noemphasis","noemphasis_title","noemphasis_title_keywords","dfault","_initialCaretOffset","getPrefixStart","proposalText","additionalEdits","providers","autoTriggered","_autoTriggered","isDeactivating","isPriorToInitialCaretOffset","eventType","_mode","onStateChange","setMode","_removeTextViewListeners","_filterText","_computedProposals","_addTextViewListeners","_autoApply","_computeProposals","flatProposalArray","_flatten","_autoTriggerEnabled","handleError","initialize","_providers","providerInfoArray","indentation","_self","providerInfo","ecProvider","editorContext","func","computePrefixFunc","computePrefix","editorContextProvider","getEditorContext","computeContentAssist","getProposals","err","allPromises","foundProposal","setErrorMessage","showWhile","prefixStart","defaultPrefix","prefixText","proposalArray","includedProposals","getRegexp","modifiedFilter","proposalString","activated","_removeExtraUnselectableElements","mappedProposals","keepElement","nextProposal","setEditorContextProvider","_generateProviderId","_idcount","setAutoTriggerEnabled","enableAutoTrigger","_updateAutoTriggerListenerState","setProviderInfoArray","_charTriggersInstalled","charTriggers","getProviders","setStyleAccessor","_styleAccessor","arrayOrObjectArray","reduce","prev","curr","filteredArray","filteredArrayStyle","firstArrayStyle","_triggerListener","stylesAtOffset","providerInfosToActivate","currentChar","isExcluded","excludedStyles","getStyles","_boundTriggerListener","_triggerListenerInstalled","_textViewListenersAdded","selectNew","newIndex","tipArea","_hideTooltip","newSelected","getProposal","previousCloneNode","preserveCloneThroughScroll","_removeCloneNode","previousSelectedNode","createDiv","itemIndex","_createDisplayNode","contentAssistProposalIndex","simpleName","_createNameNode","nameNode","usingDescription","descriptionNode","tagsNode","_createTagsNode","tags","_stopResizeTimer","_resizeTimer","_startResizeTimer","_cachedResizeBound","bound","tag","cssClass","tagNode","nodeIndex","nodes","offsetTop","offsetHeight","nodeAtIndex","scrollIntoView","_hideTimeout","_fadeTimer","textBounds","parentWidth","parentStyle","nodeStyle","allPadding","parentTop","horizontalOffset","cloneLeft","parentClone","recursiveSetIndex","caretLocation","leftSide","JSON","stringify","PatternBasedAdapter","grammars","rootIds","contentType","_patternManager","PatternManager","_contentType","_unnamedCounter","_patterns","_firstLineMatches","_rootIds","grammar","_addRepositoryPatterns","repository","_addPatterns","patterns","firstLineMatch","Block","typeId","initFn","contentStart","contentEnd","_subBlocks","computeBlocks","TextStylerAccessor","_styler","TextStyler","stylerAdapter","_whitespacesVisible","_highlightCaretLine","_foldingEnabled","_detectTasks","_annotationProviders","_stylerAdapter","setStyler","_accessor","_bracketAnnotations","_onMouseDown","_onSelection","computeRootBlock","createPatternBasedAdapter","blockSpansBeyondEnd","regexEnd","_eolRegex","endIndex","maxBlockCount","results","Infinity","blockPatterns","_findMatch","regexBegin","_updateMatch","resultEnd","endRegex","testPattern","resolvedEndRegex","_substituteCaptureValues","testBlock","createBlock","subBlocks","getBlocks","computeStyle","fullBlock","contentName","captures","testString","beginCaptures","endCaptures","_getCaptureStyles","newBlock","linePatterns","enclosurePatterns","_initPatterns","_textModel","languageBlock","_getLanguageBlock","COMMENT_BLOCK","begin","literal","getBlockContentStyleName","getBlockEndStyle","_styles","getBlockFoldBounds","getBlockOverrideStyles","_containsCaptureRegex","getBlockStartStyle","getBracketMatch","closingName","atStart","_PUNCTUATION_SECTION_BEGIN","_PUNCTUATION_SECTION_END","closingBracket","beginName","endName","getContentType","COMMENT_LINE","ignoreCaptures","oldLastIndex","substyles","tokenStyle","_mergeStyles","firstLineChanged","verifyBlock","ancestorBlock","parentBlock","searchStartIndex","currentMatch","blocks","testBeforeMatch","initialLastIndex","_linebreakRegex","lineString","indexAdjustment","char","_NEWLINE","_CR","revertIndex","stringIndex","getBlockAtIndex","embeddedNameRegex","getRootBlock","patternManager","getPatterns","initRegex","matchString","_ignoreCaseRegex","_FLAGS","lastBlock","fullStyle","resultStyles","resolvedResult","regexString","_captureReferenceRegex","minimumIndex","regEx","newId","_computeRootId","_rootId","parentId","qualifiedId","_NO_ID","indexCounter","resultObject","include","_processInclude","newPattern","_addPattern","patternId","firstLineText","defaultId","matchId","searchExp","adjustBounds","isRenderingWhitespace","_isRenderingWhitespace","addAnnotationProvider","rootBounds","startTime","_rootBlock","_computeFolding","_computeTasks","_replaceAnnotations","_findBlock","removeAnnotationProvider","setDetectHyperlinks","setDetectTasks","setFoldingEnabled","setHighlightCaretLine","highlight","setWhitespacesVisible","_add","foldBounds","_createFoldingAnnotation","_createAnnotation","_TEXTSTYLER","_findBrackets","bracketMatch","blockStart","blockEnd","_findMatchingBracket","brackets","sign","_getLineStyle","hasCaret","_caretLineStyle","_getStyles","startBlockIndex","startString","endStyles","endString","blockSubstyles","overrideStyles","blockStyleName","mergeable","_spliceStyles","_spacePattern","_tabPattern","blockExtended","te","ts","blockCount","tempBlocks","newBlocks","spanningTypeId","tempTe","tempNewBlocks","oldBlocks","eventOldBlocks","eventNewBlocks","redrawStart","redrawEnd","allFolding","doFolding","_updateFolding","providerRemove","providerAdd","bracket","mapBracket","mapCaret","filteredRemove","whitespacePattern","rangeIndex","charIndex","endStyle","doNotFold","mProjModel","mEditor","mEditorFeatures","mContentAssist","mTextStyler","getDisplay","getTextFromElement","TEXT_NODE","optionName","character","mergeOptions","attr","item","getParents","getElementsByClassName","getHeight","parents","editors","contentAssistWidget","grammarProvider","loadGrammar","folderName","showFoldingRuler","firstLineIndex","showLinesRuler","showAnnotationRuler","showOverviewRuler","showZoomRuler","noComputeSize","editorNS"],"mappings":"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","sourcesContent":["/**\n * almond 0.2.4 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that \"directory\" and not name of the baseName's\n                //module. For instance, baseName of \"one/two/three\", maps to\n                //\"one/two/three.js\", but we want the directory, \"one/two\" for\n                //this normalization.\n                baseParts = baseParts.slice(0, baseParts.length - 1);\n\n                name = baseParts.concat(name.split(\"/\"));\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (typeof callback === 'function') {\n\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback.apply(defined[name], args);\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        config = cfg;\n        return req;\n    };\n\n    define = function (name, deps, callback) {\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"almond\", function(){});\n\n","/**\n * @license RequireJS i18n 2.0.6 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/requirejs/i18n for details\n */\n/*jslint regexp: true */\n/*global require: false, navigator: false, define: false */\n\n/**\n * This plugin handles i18n! prefixed modules. It does the following:\n *\n * 1) A regular module can have a dependency on an i18n bundle, but the regular\n * module does not want to specify what locale to load. So it just specifies\n * the top-level bundle, like 'i18n!nls/colors'.\n *\n * This plugin will load the i18n bundle at nls/colors, see that it is a root/master\n * bundle since it does not have a locale in its name. It will then try to find\n * the best match locale available in that master bundle, then request all the\n * locale pieces for that best match locale. For instance, if the locale is 'en-us',\n * then the plugin will ask for the 'en-us', 'en' and 'root' bundles to be loaded\n * (but only if they are specified on the master bundle).\n *\n * Once all the bundles for the locale pieces load, then it mixes in all those\n * locale pieces into each other, then finally sets the context.defined value\n * for the nls/colors bundle to be that mixed in locale.\n *\n * 2) A regular module specifies a specific locale to load. For instance,\n * i18n!nls/fr-fr/colors. In this case, the plugin needs to load the master bundle\n * first, at nls/colors, then figure out what the best match locale is for fr-fr,\n * since maybe only fr or just root is defined for that locale. Once that best\n * fit is found, all of its locale pieces need to have their bundles loaded.\n *\n * Once all the bundles for the locale pieces load, then it mixes in all those\n * locale pieces into each other, then finally sets the context.defined value\n * for the nls/fr-fr/colors bundle to be that mixed in locale.\n */\n(function () {\n    'use strict';\n\n    //regexp for reconstructing the master bundle name from parts of the regexp match\n    //nlsRegExp.exec('foo/bar/baz/nls/en-ca/foo') gives:\n    //['foo/bar/baz/nls/en-ca/foo', 'foo/bar/baz/nls/', '/', '/', 'en-ca', 'foo']\n    //nlsRegExp.exec('foo/bar/baz/nls/foo') gives:\n    //['foo/bar/baz/nls/foo', 'foo/bar/baz/nls/', '/', '/', 'foo', '']\n    //so, if match[5] is blank, it means this is the top bundle definition.\n    var nlsRegExp = /(^.*(^|\\/)nls(\\/|$))([^\\/]*)\\/?([^\\/]*)/;\n\n    //Helper function to avoid repeating code. Lots of arguments in the\n    //desire to stay functional and support RequireJS contexts without having\n    //to know about the RequireJS contexts.\n    function addPart(locale, master, needed, toLoad, prefix, suffix) {\n        if (master[locale]) {\n            needed.push(locale);\n            if (master[locale] === true || master[locale] === 1) {\n                toLoad.push(prefix + locale + '/' + suffix);\n            }\n        }\n    }\n\n    function addIfExists(req, locale, toLoad, prefix, suffix) {\n        var fullName = prefix + locale + '/' + suffix;\n        if (require._fileExists(req.toUrl(fullName + '.js'))) {\n            toLoad.push(fullName);\n        }\n    }\n\n    /**\n     * Simple function to mix in properties from source into target,\n     * but only if target does not already have a property of the same name.\n     * This is not robust in IE for transferring methods that match\n     * Object.prototype names, but the uses of mixin here seem unlikely to\n     * trigger a problem related to that.\n     */\n    function mixin(target, source, force) {\n        var prop;\n        for (prop in source) {\n            if (source.hasOwnProperty(prop) && (!target.hasOwnProperty(prop) || force)) {\n                target[prop] = source[prop];\n            } else if (typeof source[prop] === 'object') {\n                if (!target[prop] && source[prop]) {\n                    target[prop] = {};\n                }\n                mixin(target[prop], source[prop], force);\n            }\n        }\n    }\n\n    define('i18n',['module'], function (module) {\n        var masterConfig = module.config ? module.config() : {};\n        masterConfig = masterConfig || {};\n\n        return {\n            version: '2.0.6',\n            /**\n             * Called when a dependency needs to be loaded.\n             */\n            load: function (name, req, onLoad, config) {\n                config = config || {};\n\n                if (config.locale) {\n                    masterConfig.locale = config.locale;\n                }\n\n                var masterName,\n                    match = nlsRegExp.exec(name),\n                    prefix = match[1],\n                    locale = match[4],\n                    suffix = match[5],\n                    parts = locale.split('-'),\n                    toLoad = [],\n                    value = {},\n                    i, part, current = '';\n\n                //If match[5] is blank, it means this is the top bundle definition,\n                //so it does not have to be handled. Locale-specific requests\n                //will have a match[4] value but no match[5]\n                if (match[5]) {\n                    //locale-specific bundle\n                    prefix = match[1];\n                    masterName = prefix + suffix;\n                } else {\n                    //Top-level bundle.\n                    masterName = name;\n                    suffix = match[4];\n                    locale = masterConfig.locale;\n                    if (!locale) {\n                        locale = masterConfig.locale =\n                            typeof navigator === 'undefined' ? 'root' :\n                            ((navigator.languages && navigator.languages[0]) ||\n                             navigator.language ||\n                             navigator.userLanguage || 'root').toLowerCase();\n                    }\n                    parts = locale.split('-');\n                }\n\n                if (config.isBuild) {\n                    //Check for existence of all locale possible files and\n                    //require them if exist.\n                    toLoad.push(masterName);\n                    addIfExists(req, 'root', toLoad, prefix, suffix);\n                    for (i = 0; i < parts.length; i++) {\n                        part = parts[i];\n                        current += (current ? '-' : '') + part;\n                        addIfExists(req, current, toLoad, prefix, suffix);\n                    }\n\n                    if(config.locales) {\n                    \tvar j, k; \n                    \tfor (j = 0; j < config.locales.length; j++) {\n                    \t\tlocale = config.locales[j];\n                    \t\tparts = locale.split(\"-\");\n                    \t\tcurrent = \"\";\n\t                    \tfor (k = 0; k < parts.length; k++) {\n\t\t                        part = parts[k];\n\t\t                        current += (current ? \"-\" : \"\") + part;\n\t\t                        addIfExists(req, current, toLoad, prefix, suffix);\n\t                    \t}\n                    \t}\n                    }\n\n                    req(toLoad, function () {\n                        onLoad();\n                    });\n                } else {\n                    //First, fetch the master bundle, it knows what locales are available.\n                    req([masterName], function (master) {\n                        //Figure out the best fit\n                        var needed = [],\n                            part;\n\n                        //Always allow for root, then do the rest of the locale parts.\n                        addPart('root', master, needed, toLoad, prefix, suffix);\n                        for (i = 0; i < parts.length; i++) {\n                            part = parts[i];\n                            current += (current ? '-' : '') + part;\n                            addPart(current, master, needed, toLoad, prefix, suffix);\n                        }\n\n                        //Load all the parts missing.\n                        req(toLoad, function () {\n                            var i, partBundle, part;\n                            for (i = needed.length - 1; i > -1 && needed[i]; i--) {\n                                part = needed[i];\n                                partBundle = master[part];\n                                if (partBundle === true || partBundle === 1) {\n                                    partBundle = req(prefix + part + '/' + suffix);\n                                }\n                                mixin(value, partBundle);\n                            }\n\n                            //All done, notify the loader.\n                            onLoad(value);\n                        });\n                    });\n                }\n            }\n        };\n    });\n}());\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/editor/nls/messages',[\"module\"],function(module){\n    var config = module.config();\n    return config && config.root ? config : {root:true};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/editor/nls/root/messages',{//Default message bundle\n\t\"multipleAnnotations\": \"Multiple annotations:\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"line\": \"Line: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"breakpoint\": \"Breakpoint\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"bookmark\": \"Bookmark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"task\": \"Task\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"error\": \"Error\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"warning\": \"Warning\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"info\": \"Info\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentSearch\": \"Current Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentLine\": \"Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"matchingBracket\": \"Matching Bracket\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentBracket\": \"Current Bracket\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffAdded\": \"Diff Added Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffDeleted\": \"Diff Deleted Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffModified\": \"Diff Modified Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"lineUp\": \"Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineDown\": \"Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineStart\": \"Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineEnd\": \"Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"charPrevious\": \"Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"charNext\": \"Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"pageUp\": \"Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"pageDown\": \"Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollPageUp\": \"Scroll Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollPageDown\": \"Scroll Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollLineUp\": \"Scroll Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollLineDown\": \"Scroll Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wordPrevious\": \"Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wordNext\": \"Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"textStart\": \"Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"textEnd\": \"Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollTextStart\": \"Scroll Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollTextEnd\": \"Scroll Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"centerLine\": \"Center Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"selectLineUp\": \"Select Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineDown\": \"Select Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWholeLineUp\": \" Select Whole Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWholeLineDown\": \"Select Whole Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineStart\": \"Select Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineEnd\": \"Select Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectCharPrevious\": \"Select Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectCharNext\": \"Select Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectPageUp\": \"Select Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectPageDown\": \"Select Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWordPrevious\": \"Select Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWordNext\": \"Select Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectTextStart\": \"Select Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectTextEnd\": \"Select Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\n\t\"deletePrevious\": \"Delete Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteNext\": \"Delete Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteWordPrevious\": \"Delete Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteWordNext\": \"Delete Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLineStart\": \"Delete Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLineEnd\": \"Delete Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"tab\": \"Insert Tab\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"enter\": \"Insert Line Delimiter\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"enterNoCursor\": \"Insert Line Delimiter\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"escape\": \"Escape\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectAll\": \"Select All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copy\": \"Copy\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"cut\": \"Cut\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"paste\": \"Paste\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"uppercase\": \"To Upper Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lowercase\": \"To Lower Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"capitalize\": \"Capitalize\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"reversecase\" : \"Reverse Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"toggleWrapMode\": \"Toggle Wrap Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleTabMode\": \"Toggle Tab Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleOverwriteMode\": \"Toggle Overwrite Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"committerOnTime\": \"${0} on ${1}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t//Emacs\n\t\"emacs\": \"Emacs\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"exchangeMarkPoint\": \"Exchange Mark and Point\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"setMarkCommand\": \"Set Mark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"clearMark\": \"Clear Mark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"digitArgument\": \"Digit Argument ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"negativeArgument\": \"Negative Argument\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\n\t\"Comment\": \"Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"Flat outline\": \"Flat outline\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindStr\": \"Incremental find: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindStrNotFound\": \"Incremental find: ${0} (not found)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverseStr\": \"Reverse Incremental find: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverseStrNotFound\": \"Reverse Incremental find: ${0} (not found)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findReplace\": \"Find/Replace\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"find\": \"Find...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"undo\": \"Undo\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"redo\": \"Redo\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"cancelMode\": \"Cancel Current Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findNext\": \"Find Next Occurrence\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findPrevious\": \"Find Previous Occurrence\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFind\": \"Incremental Find\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverse\": \"Incremental Find Reverse\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"indentLines\": \"Indent Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"unindentLines\": \"Unindent Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"moveLinesUp\": \"Move Lines Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"moveLinesDown\": \"Move Lines Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copyLinesUp\": \"Copy Lines Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copyLinesDown\": \"Copy Lines Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLines\": \"Delete Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"gotoLine\": \"Goto Line...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"gotoLinePrompty\": \"Goto Line:\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"nextAnnotation\": \"Next Annotation\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"prevAnnotation\": \"Previous Annotation\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"expand\": \"Expand\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collapse\": \"Collapse\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"expandAll\": \"Expand All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collapseAll\": \"Collapse All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lastEdit\": \"Last Edit Location\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"trimTrailingWhitespaces\": \"Trim Trailing Whitespaces\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleLineComment\": \"Toggle Line Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"addBlockComment\": \"Add Block Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"removeBlockComment\": \"Remove Block Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"linkedModeEntered\": \"Linked Mode: Enter or ESC to exit\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"linkedModeExited\": \"Linked Mode exited\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"syntaxError\": \"Syntax Error\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"contentAssist\": \"Content Assist\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"noProposals\": \"No proposals found\",\n\t\"computingProposals\": \"Computing content assist proposals...\",\n\t\"lineColumn\": \"Line ${0} : Column ${1}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineColumnOffset\": \"Line ${0} : Column ${1} : Offset ${2}\",\n\t\"multiSelections\": \"${0} selection regions\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t//vi\n\t\"vi\": \"vi\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vimove\": \"(Move)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viyank\": \"(Yank)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"videlete\": \"(Delete)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vichange\": \"(Change)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viLeft\": \"${0} Left\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viRight\": \"${0} Right\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viUp\": \"${0} Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viDown\": \"${0} Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viw\": \"${0} Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vib\": \"${0} Beginning of Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viW\": \"${0} Next Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$ // ws stop refers to word space (next blank space delimited word)\n\t\"viB\": \"${0} Beginning of Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$ // ws stop refers to word space (next blank space delimited word)\n\t\"vie\": \"${0} End of Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viE\": \"${0} End of Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$ // ws stop refers to word space (next blank space delimited word)\n\t\"vi$\": \"${0} End of the line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi^_\": \"${0} First non-blank Char Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi+\": \"${0} First Char Next Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi-\": \"${0} First Char Previous Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi|\": \"${0} nth Column in Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viH\": \"${0} Top of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viM\": \"${0} Middle of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viL\": \"${0} Bottom of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi/\": \"${0} Search Forward\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi?\": \"${0} Search Backward\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vin\": \"${0} Next Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viN\": \"${0} Previous Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vif\": \"${0} Search Char Fwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viF\": \"${0} Search Char Bckwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vit\": \"${0} Search Before Char Fwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viT\": \"${0} Search Before Char Bckwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi,\": \"${0} Repeat Reverse Char Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi;\": \"${0} Repeat Char Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viG\": \"${0} Go to Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viycd\": \"${0} Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"via\": \"Append After Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viA\": \"Append to End of Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vii\": \"Insert Before Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viI\": \"Insert at Beginning of Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viO\": \"Insert Line Above\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vio\": \"Insert Line Below\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viR\": \"Begin Overwriting Text\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vis\": \"Substitute a Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viS\": \"Substitute Entire Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viC\": \"Change Text Until Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vip\": \"Paste After Char or Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viP\": \"Paste Before Char or Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viStar\": \"Search Word Under Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"next\": \"Next\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"previous\": \"Previous\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replace\": \"Replace\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replaceAll\": \"Replace All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findWith\": \"Find With\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replaceWith\": \"Replace With\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"caseInsensitive\": \"Aa\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectedLines\": \"Sel\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"regex\": \"/.*/\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wholeWord\": \"\\\\b\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"caseInsensitiveTooltip\": \"Toggle Case Insensitive\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectedLinesTooltip\": \"Toggle Search Scope On Selected Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"regexTooltip\": \"Toggle Regular Expression\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wholeWordTooltip\": \"Toggle Whole Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"closeTooltip\": \"Close\", //$NON-NLS-1$ //$NON-NLS-0$\n\n\t\"replacingAll\": \"Replacing all...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replacedMatches\": \"Replaced ${0} matches\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"nothingReplaced\": \"Nothing replaced\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"notFound\": \"Not found\" //$NON-NLS-1$ //$NON-NLS-0$\n});\n\n","/*******************************************************************************\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/eventTarget\", [], function() {\n\t/** \n\t * Constructs a new EventTarget object.\n\t * \n\t * @class \n\t * @name orion.editor.EventTarget\n\t */\n\tfunction EventTarget() {\n\t}\n\t/**\n\t * Adds in the event target interface into the specified object.\n\t *\n\t * @param {Object} object The object to add in the event target interface.\n\t */\n\tEventTarget.addMixin = function(object) {\n\t\tvar proto = EventTarget.prototype;\n\t\tfor (var p in proto) {\n\t\t\tif (proto.hasOwnProperty(p)) {\n\t\t\t\tobject[p] = proto[p];\n\t\t\t}\n\t\t}\n\t};\n\tEventTarget.prototype = /** @lends orion.editor.EventTarget.prototype */ {\n\t\t/**\n\t\t * Adds an event listener to this event target.\n\t\t * \n\t\t * @param {String} type The event type.\n\t\t * @param {Function|EventListener} listener The function or the EventListener that will be executed when the event happens. \n\t\t * @param {Boolean} [useCapture=false] <code>true</code> if the listener should be trigged in the capture phase.\n\t\t * \n\t\t * @see orion.editor.EventTarget#removeEventListener\n\t\t */\n\t\taddEventListener: function(type, listener, useCapture) {\n\t\t\tif (!this._eventTypes) { this._eventTypes = {}; }\n\t\t\tvar state = this._eventTypes[type];\n\t\t\tif (!state) {\n\t\t\t\tstate = this._eventTypes[type] = {level: 0, listeners: []};\n\t\t\t}\n\t\t\tvar listeners = state.listeners;\n\t\t\tlisteners.push({listener: listener, useCapture: useCapture});\n\t\t},\n\t\t/**\n\t\t * Dispatches the given event to the listeners added to this event target.\n\t\t * @param {Event} evt The event to dispatch.\n\t\t */\n\t\tdispatchEvent: function(evt) {\n\t\t\tvar type = evt.type;\n\t\t\tthis._dispatchEvent(\"pre\" + type, evt); //$NON-NLS-0$\n\t\t\tthis._dispatchEvent(type, evt);\n\t\t\tthis._dispatchEvent(\"post\" + type, evt); //$NON-NLS-0$\n\t\t},\n\t\t/**\n\t\t * Dispatches the given event to the listeners added to this event target.\n\t\t * @private \n\t\t * @param {String} type The name of the event type to send\n\t\t * @param {Event} evt The event to dispatch.\n\t\t */\n\t\t_dispatchEvent: function(type, evt) {\n\t\t\tvar state = this._eventTypes ? this._eventTypes[type] : null;\n\t\t\tif (state) {\n\t\t\t\tvar listeners = state.listeners;\n\t\t\t\ttry {\n\t\t\t\t\tstate.level++;\n\t\t\t\t\tif (listeners) {\n\t\t\t\t\t\tfor (var i=0, len=listeners.length; i < len; i++) {\n\t\t\t\t\t\t\tif (listeners[i]) {\n\t\t\t\t\t\t\t\tvar l = listeners[i].listener;\n\t\t\t\t\t\t\t\tif (typeof l === \"function\") {\n\t\t\t\t\t\t\t\t\tl.call(this, evt);\n\t\t\t\t\t\t\t\t} else if (l.handleEvent && typeof l.handleEvent === \"function\") {\n\t\t\t\t\t\t\t\t\tl.handleEvent(evt);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tstate.level--;\n\t\t\t\t\tif (state.compact && state.level === 0) {\n\t\t\t\t\t\tfor (var j=listeners.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\tif (!listeners[j]) {\n\t\t\t\t\t\t\t\tlisteners.splice(j, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (listeners.length === 0) {\n\t\t\t\t\t\t\tdelete this._eventTypes[type];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.compact = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns whether there is a listener for the specified event type.\n\t\t * \n\t\t * @param {String} type The event type\n\t\t * \n\t\t * @see orion.editor.EventTarget#addEventListener\n\t\t * @see orion.editor.EventTarget#removeEventListener\n\t\t */\n\t\tisListening: function(type) {\n\t\t\tif (!this._eventTypes) { return false; }\n\t\t\treturn this._eventTypes[type] !== undefined;\n\t\t},\t\t\n\t\t/**\n\t\t * Removes an event listener from the event target.\n\t\t * <p>\n\t\t * All the parameters must be the same ones used to add the listener.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} type The event type\n\t\t * @param {Function|EventListener} listener The function or the EventListener that will be executed when the event happens. \n\t\t * @param {Boolean} [useCapture=false] <code>true</code> if the listener should be trigged in the capture phase.\n\t\t * \n\t\t * @see orion.editor.EventTarget#addEventListener\n\t\t */\n\t\tremoveEventListener: function(type, listener, useCapture){\n\t\t\tif (!this._eventTypes) { return; }\n\t\t\tvar state = this._eventTypes[type];\n\t\t\tif (state) {\n\t\t\t\tvar listeners = state.listeners;\n\t\t\t\tfor (var i=0, len=listeners.length; i < len; i++) {\n\t\t\t\t\tvar l = listeners[i];\n\t\t\t\t\tif (l && l.listener === listener && l.useCapture === useCapture) {\n\t\t\t\t\t\tif (state.level !== 0) {\n\t\t\t\t\t\t\tlisteners[i] = null;\n\t\t\t\t\t\t\tstate.compact = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length === 0) {\n\t\t\t\t\tdelete this._eventTypes[type];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\treturn {EventTarget: EventTarget};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n/*eslint-env browser, amd*/\n/**\n * @name orion.regex\n * @class Utilities for dealing with regular expressions.\n * @description Utilities for dealing with regular expressions.\n */\ndefine(\"orion/regex\", [], function() { //$NON-NLS-0$\n\t/**\n\t * @memberOf orion.regex\n\t * @function\n\t * @static\n\t * @description Escapes regex special characters in the input string.\n\t * @param {String} str The string to escape.\n\t * @returns {String} A copy of <code>str</code> with regex special characters escaped.\n\t */\n\tfunction escape(str) {\n\t\treturn str.replace(/([\\\\$\\^*\\/+?\\.\\(\\)|{}\\[\\]])/g, \"\\\\$&\"); //$NON-NLS-0$\n\t\t//return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n\t}\n\n\t/**\n\t * @memberOf orion.regex\n\t * @function\n\t * @static\n\t * @description Parses a pattern and flags out of a regex literal string.\n\t * @param {String} str The string to parse. Should look something like <code>\"/ab+c/\"</code> or <code>\"/ab+c/i\"</code>.\n\t * @returns {Object} If <code>str</code> looks like a regex literal, returns an object with properties\n\t * <code><dl>\n\t * <dt>pattern</dt><dd>{String}</dd>\n\t * <dt>flags</dt><dd>{String}</dd>\n\t * </dl></code> otherwise returns <code>null</code>.\n\t */\n\tfunction parse(str) {\n\t\tvar regexp = /^\\s*\\/(.+)\\/([gim]{0,3})\\s*$/.exec(str);\n\t\tif (regexp) {\n\t\t\treturn {\n\t\t\t\tpattern : regexp[1],\n\t\t\t\tflags : regexp[2]\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tescape: escape,\n\t\tparse: parse\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors: IBM Corporation - initial API and implementation\n *******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine('orion/util',[],function() {\n\n\tvar userAgent = navigator.userAgent;\n\tvar isIE = (userAgent.indexOf(\"MSIE\") !== -1 || userAgent.indexOf(\"Trident\") !== -1) ? document.documentMode : undefined; //$NON-NLS-1$ //$NON-NLS-0$\n\tvar isFirefox = parseFloat(userAgent.split(\"Firefox/\")[1] || userAgent.split(\"Minefield/\")[1]) || undefined; //$NON-NLS-1$ //$NON-NLS-0$\n\tvar isOpera = userAgent.indexOf(\"Opera\") !== -1 ? parseFloat(userAgent.split(\"Version/\")[1]) : undefined; //$NON-NLS-0$\n\tvar isChrome = parseFloat(userAgent.split(\"Chrome/\")[1]) || undefined; //$NON-NLS-0$\n\tvar isSafari = userAgent.indexOf(\"Safari\") !== -1 && !isChrome; //$NON-NLS-0$\n\tvar isWebkit = parseFloat(userAgent.split(\"WebKit/\")[1]) || undefined; //$NON-NLS-0$\n\tvar isAndroid = userAgent.indexOf(\"Android\") !== -1; //$NON-NLS-0$\n\tvar isIPad = userAgent.indexOf(\"iPad\") !== -1; //$NON-NLS-0$\n\tvar isIPhone = userAgent.indexOf(\"iPhone\") !== -1; //$NON-NLS-0$\n\tvar isIOS = isIPad || isIPhone;\n\tvar isElectron = userAgent.indexOf(\"Electron\") !== -1; //$NON-NLS-0$\n\tvar isMac = navigator.platform.indexOf(\"Mac\") !== -1; //$NON-NLS-0$\n\tvar isWindows = navigator.platform.indexOf(\"Win\") !== -1; //$NON-NLS-0$\n\tvar isLinux = navigator.platform.indexOf(\"Linux\") !== -1; //$NON-NLS-0$\n\tvar isTouch = typeof document !== \"undefined\" && \"ontouchstart\" in document.createElement(\"input\"); //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\tvar platformDelimiter = isWindows ? \"\\r\\n\" : \"\\n\"; //$NON-NLS-1$ //$NON-NLS-0$\n\n\tfunction formatMessage(msg) {\n\t\tvar args = arguments;\n\t\treturn msg.replace(/\\$\\{([^\\}]+)\\}/g, function(str, index) { return args[(index << 0) + 1]; });\n\t}\n\t\n\tvar XHTML = \"http://www.w3.org/1999/xhtml\"; //$NON-NLS-0$\n\tfunction createElement(document, tagName) {\n\t\tif (document.createElementNS) {\n\t\t\treturn document.createElementNS(XHTML, tagName);\n\t\t}\n\t\treturn document.createElement(tagName);\n\t}\n\tfunction confineDialogTab(firstElement, lastElement) {\n\t\tlastElement.addEventListener(\"keydown\", function(evt) {\n\t\t\tif(evt.keyCode === 9 && !evt.shiftKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tfirstElement.focus();\n\t\t\t}\n\t\t});\n\t\tfirstElement.addEventListener(\"keydown\", function(evt) {\n\t\t\tif(evt.keyCode === 9 && evt.shiftKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tlastElement.focus();\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tformatMessage: formatMessage,\n\t\t\n\t\tcreateElement: createElement,\n\t\tconfineDialogTab: confineDialogTab,\n\t\t\n\t\t/** Browsers */\n\t\tisIE: isIE,\n\t\tisFirefox: isFirefox,\n\t\tisOpera: isOpera,\n\t\tisChrome: isChrome,\n\t\tisSafari: isSafari,\n\t\tisWebkit: isWebkit,\n\t\tisAndroid: isAndroid,\n\t\tisIPad: isIPad,\n\t\tisIPhone: isIPhone,\n\t\tisIOS: isIOS,\n\t\tisElectron: isElectron,\n\t\t\n\t\t/** OSs */\n\t\tisMac: isMac,\n\t\tisWindows: isWindows,\n\t\tisLinux: isLinux,\n\n\t\t/** Capabilities */\n\t\tisTouch: isTouch,\n\n\t\tplatformDelimiter: platformDelimiter\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textModel\", ['orion/editor/eventTarget', 'orion/regex', 'orion/util'], function(mEventTarget, mRegex, util) {\n\n\t/**\n\t * Constructs a new TextModel with the given text and default line delimiter.\n\t *\n\t * @param {String} [text=\"\"] the text that the model will store\n\t * @param {String} [lineDelimiter=platform delimiter] the line delimiter used when inserting new lines to the model.\n\t *\n\t * @name orion.editor.TextModel\n\t * @class The TextModel is an interface that provides text for the view. Applications may\n\t * implement the TextModel interface to provide a custom store for the view content. The\n\t * view interacts with its text model in order to access and update the text that is being\n\t * displayed and edited in the view. This is the default implementation.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#setModel}\n\t * </p>\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction TextModel(text, lineDelimiter) {\n\t\tthis._lastLineIndex = -1;\n\t\tthis._text = [\"\"];\n\t\tthis._lineOffsets = [0];\n\t\tthis.setText(text);\n\t\tthis.setLineDelimiter(lineDelimiter);\n\t}\n\n\tTextModel.prototype = /** @lends orion.editor.TextModel.prototype */ {\n\t\t/**\n\t\t * Destroys this text model.\n\t\t */\n\t\tdestroy: function() {\n\t\t},\n\t\t/**\n\t\t * @class This object describes the options to use while finding occurrences of a string in a text model.\n\t\t * @name orion.editor.FindOptions\n\t\t *\n\t\t * @property {String} string the search string to be found.\n\t\t * @property {Boolean} [regex=false] whether or not the search string is a regular expression.\n\t\t * @property {Boolean} [wrap=false] whether or not to wrap search.\n\t\t * @property {Boolean} [wholeWord=false] whether or not to search only whole words.\n\t\t * @property {Boolean} [caseInsensitive=false] whether or not search is case insensitive.\n\t\t * @property {Boolean} [reverse=false] whether or not to search backwards.\n\t\t * @property {Number} [start=0] The start offset to start searching\n\t\t * @property {Number} [rangeStart] The range start offset of the search. Used to search in a given range.\n\t\t * @property {Number} [rangeEnd] The range end offset of the search. Used to search in a given range.\n\t\t */\n\t\t/**\n\t\t * @class This object represents a find occurrences iterator.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextModel#find}<br/>\n\t\t * </p>\t\t \n\t\t * @name orion.editor.FindIterator\n\t\t * \n\t\t * @property {Function} hasNext Determines whether there are more occurrences in the iterator.\n\t\t * @property {Function} next Returns the next matched range {start,end} in the iterator.\n\t\t */\t\n\t\t/**\n\t\t * Finds occurrences of a string in the text model.\n\t\t *\n\t\t * @param {orion.editor.FindOptions} options the search options\n\t\t * @return {orion.editor.FindIterator} the find occurrences iterator.\n\t\t */\n\t\tfind: function(options) {\n\t\t\tif (this._text.length > 1) {\n\t\t\t\tthis._text = [this._text.join(\"\")];\n\t\t\t}\n\t\t\tvar string = options.string;\n\t\t\tvar regex = options.regex;\n\t\t\tvar pattern = string;\n\t\t\tvar flags = \"\";\n\t\t\tvar caseInsensitive = options.caseInsensitive;\n\t\t\tif (pattern) {\n\t\t\t\tif (regex) {\n\t\t\t\t\tvar parsed = mRegex.parse(pattern);\n\t\t\t\t\tif (parsed) {\n\t\t\t\t\t\tpattern = parsed.pattern;\n\t\t\t\t\t\tflags = parsed.flags;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpattern = string.replace(/([\\\\$\\^*\\/+?\\.\\(\\)|{}\\[\\]])/g, \"\\\\$&\"); //$NON-NLS-0$\n\t\t\t\t\t/*\n\t\t\t\t\t* Bug in JS RegEx. In a Turkish locale, dotless i (u0131) capitalizes to I (u0049) and i (u0069) \n\t\t\t\t\t* capitalizes to dot I (u0130). The JS RegEx does not match correctly the Turkish i's in case\n\t\t\t\t\t* insensitive mode. The fix is to detect the presence of Turkish i's in the search pattern and \n\t\t\t\t\t* to modify the pattern to search for both upper and lower case.\n\t\t\t\t\t*/\n\t\t\t\t\tif (caseInsensitive) {\n\t\t\t\t\t\tpattern = pattern.replace(/[iI\\u0130\\u0131]/g, \"[Ii\\u0130\\u0131]\"); //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar current = null, skip;\n\t\t\tif (pattern) {\n\t\t\t\tvar reverse = options.reverse;\n\t\t\t\tvar wrap = options.wrap;\n\t\t\t\tvar wholeWord = options.wholeWord;\n\t\t\t\tvar start = options.start || 0;\n\t\t\t\tvar rangeStart = options.rangeStart;\n\t\t\t\tvar rangeEnd = options.rangeEnd;\n\t\t\t\tvar isRange = rangeStart !== null && rangeStart !== undefined && rangeEnd !== null && rangeEnd !== undefined;\n\t\t\t\tif (flags.indexOf(\"g\") === -1) { flags += \"g\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (flags.indexOf(\"m\") === -1) { flags += \"m\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (caseInsensitive) {\n\t\t\t\t\tif (flags.indexOf(\"i\") === -1) { flags += \"i\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tif (wholeWord) {\n\t\t\t\t\tpattern = \"\\\\b\" + pattern + \"\\\\b\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tvar text = this._text[0], result, lastIndex, offset = 0;\n\t\t\t\tif (isRange) {\n\t\t\t\t\tvar s = rangeStart < rangeEnd ? rangeStart : rangeEnd;\n\t\t\t\t\tvar e = rangeStart < rangeEnd ? rangeEnd : rangeStart;\n\t\t\t\t\ttext = text.substring(s, e);\n\t\t\t\t\toffset = s;\n\t\t\t\t}\n\t\t\t\tvar re = new RegExp(pattern, flags);\n\t\t\t\tif (reverse) {\n\t\t\t\t\tskip = function() {\n\t\t\t\t\t\tvar match = null;\n\t\t\t\t\t\tre.lastIndex = 0;\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlastIndex = re.lastIndex;\n\t\t\t\t\t\t\tresult = re.exec(text);\n\t\t\t\t\t\t\tif (lastIndex === re.lastIndex) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tif (result.index + offset < start) {\n\t\t\t\t\t\t\t\t\tmatch = {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!wrap || match) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstart = text.length + offset;\n\t\t\t\t\t\t\t\t\tmatch = {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (match) { start = match.start; }\n\t\t\t\t\t\treturn match;\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tre.lastIndex = start - offset;\n\t\t\t\t\tskip = function() {\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlastIndex = re.lastIndex;\n\t\t\t\t\t\t\tresult = re.exec(text);\n\t\t\t\t\t\t\tif (lastIndex === re.lastIndex) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\treturn {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (lastIndex !== 0) {\n\t\t\t\t\t\t\t\tif (wrap) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tcurrent = skip();\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t/**\n\t\t\t\t * @callback \n\t\t\t\t */\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar result = current;\n\t\t\t\t\tif (result) { current = skip(); }\n\t\t\t\t\treturn result;\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * @callback \n\t\t\t\t */\n\t\t\t\thasNext: function() {\n\t\t\t\t\treturn current !== null;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Returns the number of characters in the model.\n\t\t *\n\t\t * @returns {Number} the number of characters in the model.\n\t\t */\n\t\tgetCharCount: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0; i<this._text.length; i++) {\n\t\t\t\tcount += this._text[i].length;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * Returns the text of the line at the given index.\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>null</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @param {Boolean} [includeDelimiter=false] whether or not to include the line delimiter. \n\t\t * @returns {String} the line text or <code>null</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineAtOffset\n\t\t */\n\t\tgetLine: function(lineIndex, includeDelimiter) {\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar start = this._lineOffsets[lineIndex];\n\t\t\tif (lineIndex + 1 < lineCount) {\n\t\t\t\tvar text = this.getText(start, this._lineOffsets[lineIndex + 1]);\n\t\t\t\tif (includeDelimiter) {\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t\tvar end = text.length, c;\n\t\t\t\twhile (((c = text.charCodeAt(end - 1)) === 10) || (c === 13)) {\n\t\t\t\t\tend--;\n\t\t\t\t}\n\t\t\t\treturn text.substring(0, end);\n\t\t\t} else {\n\t\t\t\treturn this.getText(start); \n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns the line index at the given character offset.\n\t\t * <p>\n\t\t * The valid offsets are 0 to char count inclusive. The line index for\n\t\t * char count is <code>line count - 1</code>. Returns <code>-1</code> if\n\t\t * the offset is out of range.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} offset a character offset.\n\t\t * @returns {Number} the zero based line index or <code>-1</code> if out of range.\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\tvar charCount = this.getCharCount();\n\t\t\tif (!(0 <= offset && offset <= charCount)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (offset === charCount) {\n\t\t\t\treturn lineCount - 1; \n\t\t\t}\n\t\t\tvar lineStart, lineEnd;\n\t\t\tvar index = this._lastLineIndex;\n\t\t\tif (0 <= index && index < lineCount) {\n\t\t\t\tlineStart = this._lineOffsets[index];\n\t\t\t\tlineEnd = index + 1 < lineCount ? this._lineOffsets[index + 1] : charCount;\n\t\t\t\tif (lineStart <= offset && offset < lineEnd) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar high = lineCount;\n\t\t\tvar low = -1;\n\t\t\twhile (high - low > 1) {\n\t\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\t\tlineStart = this._lineOffsets[index];\n\t\t\t\tlineEnd = index + 1 < lineCount ? this._lineOffsets[index + 1] : charCount;\n\t\t\t\tif (offset <= lineStart) {\n\t\t\t\t\thigh = index;\n\t\t\t\t} else if (offset < lineEnd) {\n\t\t\t\t\thigh = index;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tlow = index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastLineIndex = high;\n\t\t\treturn high;\n\t\t},\n\t\t/**\n\t\t * Returns the number of lines in the model.\n\t\t * <p>\n\t\t * The model always has at least one line.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the number of lines.\n\t\t */\n\t\tgetLineCount: function() {\n\t\t\treturn this._lineOffsets.length;\n\t\t},\n\t\t/**\n\t\t * Returns the line delimiter that is used by the view\n\t\t * when inserting new lines. New lines entered using key strokes \n\t\t * and paste operations use this line delimiter.\n\t\t *\n\t\t * @return {String} the line delimiter that is used by the view when inserting new lines.\n\t\t */\n\t\tgetLineDelimiter: function() {\n\t\t\treturn this._lineDelimiter;\n\t\t},\n\t\t/**\n\t\t * Returns the end character offset for the given line. \n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that when the line delimiter is included, the \n\t\t * offset is either the start offset of the next line or char count. When the line delimiter is\n\t\t * not included, the offset is the offset of the line delimiter.\n\t\t * </p>\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>-1</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @param {Boolean} [includeDelimiter=false] whether or not to include the line delimiter. \n\t\t * @return {Number} the line end offset or <code>-1</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineStart\n\t\t */\n\t\tgetLineEnd: function(lineIndex, includeDelimiter) {\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (lineIndex + 1 < lineCount) {\n\t\t\t\tvar end = this._lineOffsets[lineIndex + 1];\n\t\t\t\tif (includeDelimiter) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tvar text = this.getText(Math.max(this._lineOffsets[lineIndex], end - 2), end);\n\t\t\t\tvar i = text.length, c;\n\t\t\t\twhile (((c = text.charCodeAt(i - 1)) === 10) || (c === 13)) {\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t\treturn end - (text.length - i);\n\t\t\t} else {\n\t\t\t\treturn this.getCharCount();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns the start character offset for the given line.\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>-1</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @return {Number} the line start offset or <code>-1</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineEnd\n\t\t */\n\t\tgetLineStart: function(lineIndex) {\n\t\t\tif (!(0 <= lineIndex && lineIndex < this.getLineCount())) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn this._lineOffsets[lineIndex];\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that character at the end offset\n\t\t * is not included in the returned text.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the zero based start offset of text range.\n\t\t * @param {Number} [end=char count] the zero based end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextModel#setText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = this.getCharCount(); }\n\t\t\tif (start === end) { return \"\"; }\n\t\t\tvar offset = 0, chunk = 0, length;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (start <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar firstOffset = offset;\n\t\t\tvar firstChunk = chunk;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (end <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar lastOffset = offset;\n\t\t\tvar lastChunk = chunk;\n\n\t\t\t// error check for invalid chunks of text\n\t\t\tif (firstChunk >= this._text.length || lastChunk >= this._text.length || firstChunk > lastChunk) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\t\n\t\t\tif (firstChunk === lastChunk) {\n\t\t\t\treturn this._text[firstChunk].substring(start - firstOffset, end - lastOffset);\n\t\t\t}\n\t\t\tvar beforeText = this._text[firstChunk].substring(start - firstOffset);\n\t\t\tvar afterText = this._text[lastChunk].substring(0, end - lastOffset);\n\t\t\treturn beforeText + this._text.slice(firstChunk+1, lastChunk).join(\"\") + afterText; \n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the text is about to change.\n\t\t * <p>\n\t\t * This notification is intended to be used only by the view. Application clients should\n\t\t * use {@link orion.editor.TextView#event:onModelChanging}.\n\t\t * </p>\n\t\t * <p>\n\t\t * NOTE: This method is not meant to called directly by application code. It is called internally by the TextModel\n\t\t * as part of the implementation of {@link #setText}. This method is included in the public API for documentation\n\t\t * purposes and to allow integration with other toolkit frameworks.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.ModelChangingEvent} modelChangingEvent the changing event\n\t\t */\n\t\tonChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the text has changed.\n\t\t * <p>\n\t\t * This notification is intended to be used only by the view. Application clients should\n\t\t * use {@link orion.editor.TextView#event:onModelChanged}.\n\t\t * </p>\n\t\t * <p>\n\t\t * NOTE: This method is not meant to called directly by application code. It is called internally by the TextModel\n\t\t * as part of the implementation of {@link #setText}. This method is included in the public API for documentation\n\t\t * purposes and to allow integration with other toolkit frameworks.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.ModelChangedEvent} modelChangedEvent the changed event\n\t\t */\n\t\tonChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Sets the line delimiter that is used by the view\n\t\t * when new lines are inserted in the model due to key\n\t\t * strokes and paste operations. The line delimiter of\n\t\t * existing lines are unchanged unless the to <code>all</code>\n\t\t * argument is <code>true</code>.\n\t\t * <p>\n\t\t * If lineDelimiter is \"auto\", the delimiter is computed to be\n\t\t * the first delimiter found in the current text. If lineDelimiter\n\t\t * is undefined or if there are no delimiters in the current text, the\n\t\t * platform delimiter is used.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} lineDelimiter the line delimiter that is used by the view when inserting new lines.\n\t\t * @param {Boolean} [all=false] whether or not the delimiter of existing lines are changed.\n\t\t */\n\t\tsetLineDelimiter: function(lineDelimiter, all) {\n\t\t\tif (lineDelimiter === \"auto\") {\n\t\t\t\tlineDelimiter = undefined;\n\t\t\t\tif (this.getLineCount() > 1) {\n\t\t\t\t\tlineDelimiter = this.getText(this.getLineEnd(0), this.getLineEnd(0, true));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lineDelimiter = lineDelimiter ? lineDelimiter : util.platformDelimiter;\n\t\t\tif (all) {\n\t\t\t\tvar lineCount = this.getLineCount();\n\t\t\t\tif (lineCount > 1) {\n\t\t\t\t\tvar lines = new Array(lineCount);\n\t\t\t\t\tfor (var i=0; i<lineCount; i++) {\n\t\t\t\t\t\tlines[i] = this.getLine(i);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setText(lines.join(this._lineDelimiter));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that the character at the \n\t\t * end offset is not replaced.\n\t\t * </p>\n\t\t * <p>\n\t\t * The text model must notify the listeners before and after the\n\t\t * the text is changed by calling {@link #onChanging} and {@link #onChanged}\n\t\t * respectively. \n\t\t * </p>\n\t\t *\n\t\t * @param {String} [text=\"\"] the new text.\n\t\t * @param {Number} [start=0] the zero based start offset of text range.\n\t\t * @param {Number} [end=char count] the zero based end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getText\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tif (text === undefined) { text = \"\"; }\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = this.getCharCount(); }\n\t\t\tif (start === end && text === \"\") { return; }\n\t\t\tvar startLine = this.getLineAtOffset(start);\n\t\t\tvar endLine = this.getLineAtOffset(end);\n\t\t\tvar eventStart = start;\n\t\t\tvar removedCharCount = end - start;\n\t\t\tvar removedLineCount = endLine - startLine;\n\t\t\tvar addedCharCount = text.length;\n\t\t\tvar addedLineCount = 0;\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\t\n\t\t\tvar cr = 0, lf = 0, index = 0;\n\t\t\tvar newLineOffsets = [];\n\t\t\twhile (true) {\n\t\t\t\tif (cr !== -1 && cr <= index) { cr = text.indexOf(\"\\r\", index); } //$NON-NLS-0$\n\t\t\t\tif (lf !== -1 && lf <= index) { lf = text.indexOf(\"\\n\", index); } //$NON-NLS-0$\n\t\t\t\tif (lf === -1 && cr === -1) { break; }\n\t\t\t\tif (cr !== -1 && lf !== -1) {\n\t\t\t\t\tif (cr + 1 === lf) {\n\t\t\t\t\t\tindex = lf + 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindex = (cr < lf ? cr : lf) + 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (cr !== -1) {\n\t\t\t\t\tindex = cr + 1;\n\t\t\t\t} else {\n\t\t\t\t\tindex = lf + 1;\n\t\t\t\t}\n\t\t\t\tnewLineOffsets.push(start + index);\n\t\t\t\taddedLineCount++;\n\t\t\t}\n\t\t\n\t\t\tvar modelChangingEvent = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: text,\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\t\n\t\t\t//TODO this should be done the loops below to avoid getText()\n\t\t\tif (newLineOffsets.length === 0) {\n\t\t\t\tvar startLineOffset = this.getLineStart(startLine), endLineOffset;\n\t\t\t\tif (endLine + 1 < lineCount) {\n\t\t\t\t\tendLineOffset = this.getLineStart(endLine + 1);\n\t\t\t\t} else {\n\t\t\t\t\tendLineOffset = this.getCharCount();\n\t\t\t\t}\n\t\t\t\tif (start !== startLineOffset) {\n\t\t\t\t\ttext = this.getText(startLineOffset, start) + text;\n\t\t\t\t\tstart = startLineOffset;\n\t\t\t\t}\n\t\t\t\tif (end !== endLineOffset) {\n\t\t\t\t\ttext = text + this.getText(end, endLineOffset);\n\t\t\t\t\tend = endLineOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar changeCount = addedCharCount - removedCharCount;\n\t\t\tfor (var j = startLine + removedLineCount + 1; j < lineCount; j++) {\n\t\t\t\tthis._lineOffsets[j] += changeCount;\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* Feature in Chrome.  Chrome exceeds the maximum call stack when calling splice\n\t\t\t* around 62k arguments. The limit seems to be higher on IE (250K) and Firefox (450k).\n\t\t\t* The fix is to break the splice in junks of 50k.\n\t\t\t*/\n\t\t\tvar SPLICE_LIMIT = 50000;\n\t\t\tvar limit = SPLICE_LIMIT, args;\n\t\t\tif (newLineOffsets.length < limit) {\n\t\t\t\targs = [startLine + 1, removedLineCount].concat(newLineOffsets);\n\t\t\t\tArray.prototype.splice.apply(this._lineOffsets, args);\n\t\t\t} else {\n\t\t\t\tindex = startLine + 1;\n\t\t\t\tthis._lineOffsets.splice(index, removedLineCount);\n\t\t\t\tfor (var k = 0; k < newLineOffsets.length; k += limit) {\n\t\t\t\t\targs = [index, 0].concat(newLineOffsets.slice(k, Math.min(newLineOffsets.length, k + limit)));\n\t\t\t\t\tArray.prototype.splice.apply(this._lineOffsets, args);\n\t\t\t\t\tindex += limit;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar offset = 0, chunk = 0, length;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (start <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar firstOffset = offset;\n\t\t\tvar firstChunk = chunk;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (end <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar lastOffset = offset;\n\t\t\tvar lastChunk = chunk;\n\t\t\tvar firstText = this._text[firstChunk];\n\t\t\tvar lastText = this._text[lastChunk];\n\t\t\tvar beforeText = firstText.substring(0, start - firstOffset);\n\t\t\tvar afterText = lastText.substring(end - lastOffset);\n\t\t\tvar params = [firstChunk, lastChunk - firstChunk + 1];\n\t\t\tif (beforeText) { params.push(beforeText); }\n\t\t\tif (text) { params.push(text); }\n\t\t\tif (afterText) { params.push(afterText); }\n\t\t\tArray.prototype.splice.apply(this._text, params);\n\t\t\tif (this._text.length === 0) { this._text = [\"\"]; }\n\t\t\t\n\t\t\tvar modelChangedEvent = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent);\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(TextModel.prototype);\n\t\n\treturn {TextModel: TextModel};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/keyBinding\", ['orion/util'], function(util) { //$NON-NLS-1$ //$NON-NLS-0$\n\n    /**\n\t * @class A KeyBinding is an interface used to define keyboard shortcuts.\n\t * @name orion.KeyBinding\n\t * \n\t * @property {Function} match The function to match events.\n\t * @property {Function} equals The funtion to compare to key bindings.\n\t *\n\t * @see orion.KeyStroke\n\t * @see orion.KeySequence\n\t */\n\n\t/**\n\t * Constructs a new key stroke with the given key code, modifiers and event type.\n\t * \n\t * @param {String|Number} keyCode the key code.\n\t * @param {Boolean} mod1 the primary modifier (usually Command on Mac and Control on other platforms).\n\t * @param {Boolean} mod2 the secondary modifier (usually Shift).\n\t * @param {Boolean} mod3 the third modifier (usually Alt).\n\t * @param {Boolean} mod4 the fourth modifier (usually Control on the Mac).\n\t * @param {String} type the type of event that the keybinding matches; either \"keydown\" or \"keypress\".\n\t * \n\t * @class A KeyStroke represents of a key code and modifier state that can be triggered by the user using the keyboard.\n\t * @name orion.KeyStroke\n\t * \n\t * @property {String|Number} keyCode The key code.\n\t * @property {Boolean} mod1 The primary modifier (usually Command on Mac and Control on other platforms).\n\t * @property {Boolean} mod2 The secondary modifier (usually Shift).\n\t * @property {Boolean} mod3 The third modifier (usually Alt).\n\t * @property {Boolean} mod4 The fourth modifier (usually Control on the Mac).\n\t * @property {String} [type=keydown] The type of event that the keybinding matches; either \"keydown\" or \"keypress\"\n\t *\n\t * @see orion.editor.TextView#setKeyBinding\n\t */\n\tfunction KeyStroke (keyCode, mod1, mod2, mod3, mod4, type) {\n\t\tthis.type = type || \"keydown\"; //$NON-NLS-0$\n\t\tif (typeof(keyCode) === \"string\" && this.type === \"keydown\") { //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\tthis.keyCode = keyCode.toUpperCase().charCodeAt(0);\n\t\t} else {\n\t\t\tthis.keyCode = keyCode;\n\t\t}\n\t\tthis.mod1 = mod1 !== undefined && mod1 !== null ? mod1 : false;\n\t\tthis.mod2 = mod2 !== undefined && mod2 !== null ? mod2 : false;\n\t\tthis.mod3 = mod3 !== undefined && mod3 !== null ? mod3 : false;\n\t\tthis.mod4 = mod4 !== undefined && mod4 !== null ? mod4 : false;\n\t}\n\tKeyStroke.prototype = /** @lends orion.KeyStroke.prototype */ {\n\t\tgetKeys: function() {\n\t\t\treturn [this];\n\t\t},\n\t\t/**\n\t\t * Determines either this key stroke matches the specifed event.  It can match either a\n\t\t * a whole sequence of key events or a single key event at a specified index.\n\t\t * <p>\n\t\t * <code>KeyStroke</code> only matches single key events. <code>KeySequence</code> handles\n\t\t * matching a sequence of events.\n\t\t * </p>\n\t\t * TODO explain this better\n\t\t * \n\t\t * @param {DOMEvent|DOMEvent[]} e the key event or list of events to match.\n\t\t * @param index the key event to match.\n\t\t * @returns {Boolean} <code>true</code> whether the key binding matches the key event.\n\t\t *\n\t\t * @see orion.KeySequence#match\n\t\t */\n\t\tmatch: function (e, index) {\n\t\t\tif (index !== undefined) {\n\t\t\t\tif (index !== 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e instanceof Array) {\n\t\t\t\t\tif (e.length > 1) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\te = e[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.type !== this.type) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.keyCode === e.keyCode || this.keyCode === String.fromCharCode(util.isOpera ? e.which : (e.charCode !== undefined ? e.charCode : e.keyCode))) {\n\t\t\t\tvar mod1 = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\t\tif (this.mod1 !== mod1) { return false; }\n\t\t\t\tif (this.type === \"keydown\") { //$NON-NLS-0$\n\t\t\t\t\tif (this.mod2 !== e.shiftKey) { return false; }\n\t\t\t\t}\n\t\t\t\tif (this.mod3 !== e.altKey) { return false; }\n\t\t\t\tif (util.isMac && this.mod4 !== e.ctrlKey) { return false; }\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Returns whether this key stroke is the same as the given parameter.\n\t\t * \n\t\t * @param {orion.KeyBinding} kb the key binding to compare with.\n\t\t * @returns {Boolean} whether or not the parameter and the receiver describe the same key binding.\n\t\t */\n\t\tequals: function(kb) {\n\t\t\tif (!kb) { return false; }\n\t\t\tif (this.keyCode !== kb.keyCode) { return false; }\n\t\t\tif (this.mod1 !== kb.mod1) { return false; }\n\t\t\tif (this.mod2 !== kb.mod2) { return false; }\n\t\t\tif (this.mod3 !== kb.mod3) { return false; }\n\t\t\tif (this.mod4 !== kb.mod4) { return false; }\n\t\t\tif (this.type !== kb.type) { return false; }\n\t\t\treturn true;\n\t\t} \n\t};\n\t\n\t/**\n\t * Constructs a new key sequence with the given key strokes.\n\t * \n\t * @param {orion.KeyStroke[]} keys the key strokes for this sequence.\n\t * \n\t * @class A KeySequence represents of a list of key codes and a modifiers state that can be triggered by the user using the keyboard.\n\t * @name orion.KeySequence\n\t * \n\t * @property {orion.KeyStroke[]} keys the list of key strokes.\n\t *\n\t * @see orion.editor.TextView#setKeyBinding\n\t */\n\tfunction KeySequence (keys) {\n\t\tthis.keys = keys;\n\t}\n\tKeySequence.prototype = /** @lends orion.KeySequence.prototype */ {\n\t\tgetKeys: function() {\n\t\t\treturn this.keys.slice(0);\n\t\t},\n\t\tmatch: function (e, index) {\n\t\t\tvar keys = this.keys;\n\t\t\tif (index !== undefined) {\n\t\t\t\tif (index > keys.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (keys[index].match(e)) {\n\t\t\t\t\tif (index === keys.length - 1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn index + 1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tif (!(e instanceof Array)) {\n\t\t\t\t\te = [e];\n\t\t\t\t}\n\t\t\t\tif (e.length > keys.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar i;\n\t\t\t\tfor (i = 0; i < e.length; i++) {\n\t\t\t\t\tif (!keys[i].match(e[i])) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (i === keys.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns whether this key sequence is the same as the given parameter.\n\t\t * \n\t\t * @param {orion.KeyBinding|orion.KeySequence} kb the key binding to compare with.\n\t\t * @returns {Boolean} whether or not the parameter and the receiver describe the same key binding.\n\t\t */\n\t\tequals: function(kb) {\n\t\t\tif (!kb.keys) { return false; }\n\t\t\tif (kb.keys.length !== this.keys.length) { return false; }\n\t\t\tfor (var i=0; i<kb.keys.length; i++) {\n\t\t\t\tif (!kb.keys[i].equals(this.keys[i])) { return false; }\n\t\t\t}\n\t\t\treturn true;\n\t\t}\t\n\t};\n\t\n\treturn {\n\t\tKeyBinding: KeyStroke, // for backwards compatibility\n\t\tKeyStroke: KeyStroke,\n\t\tKeySequence: KeySequence\n\t};\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/keyModes\", [ //$NON-NLS-0$\r\n\t\t\"orion/keyBinding\", //$NON-NLS-0$\r\n\t\t\"orion/util\" //$NON-NLS-0$\r\n], function(mKeyBinding, util) {\r\n\r\n\tfunction KeyMode(view) {\r\n\t\tif (!view) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._view = view;\r\n\t\tthis._keyBindings = this.createKeyBindings();\r\n\t\tthis._keyBindingIndex = 0;\r\n\t}\r\n\tKeyMode.prototype = /** @lends orion.editor.KeyMode.prototype */ {\r\n\t\tcreateKeyBindings: function () {\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\t/**\r\n\t\t * Returns all the key bindings associated to the given action ID.\r\n\t\t *\r\n\t\t * @param {String} actionID the action ID.\r\n\t\t * @returns {orion.KeyBinding[]} the array of key bindings associated to the given action ID.\r\n\t\t *\r\n\t\t * @see orion.editor.KeyModesetKeyBinding\r\n\t\t * @see orion.editor.KeyModesetAction\r\n\t\t */\r\n\t\tgetKeyBindings: function (actionID) {\r\n\t\t\tvar result = [];\r\n\t\t\tvar keyBindings = this._keyBindings;\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tif (keyBindings[i].actionID === actionID) {\r\n\t\t\t\t\tresult.push(keyBindings[i].keyBinding);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetView: function() {\r\n\t\t\treturn this._view;\r\n\t\t},\r\n\t\tisActive: function () {\r\n\t\t\treturn this._view.getKeyModes().indexOf(this) !== -1;\r\n\t\t},\r\n\t\tmatch: function(e) {\r\n\t\t\tif (e.type === \"keydown\") { //$NON-NLS-0$\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 16: /* Shift */\r\n\t\t\t\t\tcase 17: /* Control */\r\n\t\t\t\t\tcase 18: /* Alt */\r\n\t\t\t\t\tcase 91: /* Command */\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar keyBindingIndex = this._keyBindingIndex;\r\n\t\t\tvar keyBindings = this._matchingKeyBindings || this._keyBindings;\r\n\t\t\tvar matchingKeyBindings = [];\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tvar kb = keyBindings[i];\r\n\t\t\t\tvar keyBinding = kb.keyBinding;\r\n\t\t\t\tvar match = keyBinding.match(e, keyBindingIndex);\r\n\t\t\t\tif (match === true) {\r\n\t\t\t\t\tthis._keyBindingIndex = 0;\r\n\t\t\t\t\tthis._matchingKeyBindings = null;\r\n\t\t\t\t\treturn kb.actionID;\r\n\t\t\t\t} else if (typeof match === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t\tmatchingKeyBindings.push(kb);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (matchingKeyBindings.length === 0) {\r\n\t\t\t\tthis._keyBindingIndex = 0;\r\n\t\t\t\tthis._matchingKeyBindings = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis._keyBindingIndex++;\r\n\t\t\t\tthis._matchingKeyBindings = matchingKeyBindings;\r\n\t\t\t\treturn \"noop\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Associates a key binding with the given action ID. Any previous\r\n\t\t * association with the specified key binding is overwriten. If the\r\n\t\t * action ID is <code>null</code>, the association is removed.\r\n\t\t * \r\n\t\t * @param {orion.KeyBinding} keyBinding the key binding\r\n\t\t * @param {String} actionID the action ID\r\n\t\t */\r\n\t\tsetKeyBinding: function(keyBinding, actionID) {\r\n\t\t\tvar keyBindings = this._keyBindings;\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tvar kb = keyBindings[i]; \r\n\t\t\t\tif (kb.keyBinding.equals(keyBinding)) {\r\n\t\t\t\t\tif (actionID) {\r\n\t\t\t\t\t\tkb.actionID = actionID;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (kb.predefined) {\r\n\t\t\t\t\t\t\tkb.actionID = \"noop\"; //$NON-NLS-0$\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeyBindings.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (actionID) {\r\n\t\t\t\tkeyBindings.push({keyBinding: keyBinding, actionID: actionID});\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetView: function(view) {\r\n\t\t\tthis._view = view;\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction DefaultKeyMode(view) {\r\n\t\tKeyMode.call(this, view);\r\n\t}\r\n\tDefaultKeyMode.prototype = new KeyMode();\r\n\tDefaultKeyMode.prototype.createKeyBindings = function () {\r\n\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t//no duplicate keybindings\r\n\t\tvar bindings = [];\r\n\r\n\t\t// Cursor Navigation\r\n\t\tbindings.push({actionID: \"lineUp\",\t\tkeyBinding: new KeyBinding(38), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"lineDown\",\tkeyBinding: new KeyBinding(40), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"charPrevious\",\tkeyBinding: new KeyBinding(37), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"charNext\",\tkeyBinding: new KeyBinding(39), predefined: true}); //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"scrollPageUp\",\t\tkeyBinding: new KeyBinding(33), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageDown\",\tkeyBinding: new KeyBinding(34), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageUp\",\t\tkeyBinding: new KeyBinding(33, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageDown\",\tkeyBinding: new KeyBinding(34, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(37, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(39, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordPrevious\",\tkeyBinding: new KeyBinding(37, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordNext\",\tkeyBinding: new KeyBinding(39, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollTextStart\",\tkeyBinding: new KeyBinding(36), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollTextEnd\",\t\tkeyBinding: new KeyBinding(35), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textStart\",\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textEnd\",\t\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageUp\",\tkeyBinding: new KeyBinding(38, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageDown\",\t\tkeyBinding: new KeyBinding(40, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(37, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(39, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t//TODO These two actions should be changed to paragraph start and paragraph end  when word wrap is implemented\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(38, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(40, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tbindings.push({actionID: \"pageUp\",\t\tkeyBinding: new KeyBinding(33), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageDown\",\tkeyBinding: new KeyBinding(34), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(36), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(35), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordPrevious\",\tkeyBinding: new KeyBinding(37, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordNext\",\tkeyBinding: new KeyBinding(39, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textStart\",\tkeyBinding: new KeyBinding(36, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textEnd\",\t\tkeyBinding: new KeyBinding(35, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (util.isFirefox && util.isLinux) {\r\n\t\t\tbindings.push({actionID: \"lineUp\",\t\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineDown\",\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (util.isWindows) {\r\n\t\t\tbindings.push({actionID: \"scrollLineUp\",\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollLineDown\",\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t// Select Cursor Navigation\r\n\t\tbindings.push({actionID: \"selectLineUp\",\t\tkeyBinding: new KeyBinding(38, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectLineDown\",\t\tkeyBinding: new KeyBinding(40, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectCharPrevious\",\tkeyBinding: new KeyBinding(37, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectCharNext\",\t\tkeyBinding: new KeyBinding(39, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectPageUp\",\t\tkeyBinding: new KeyBinding(33, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectPageDown\",\t\tkeyBinding: new KeyBinding(34, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(37, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(39, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordPrevious\",\tkeyBinding: new KeyBinding(37, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordNext\",\tkeyBinding: new KeyBinding(39, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\tkeyBinding: new KeyBinding(36, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(35, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\tkeyBinding: new KeyBinding(38, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(40, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(37, null, true, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(39, null, true, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t//TODO These two actions should be changed to select paragraph start and select paragraph end  when word wrap is implemented\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(38, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(40, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tif (util.isLinux) {\r\n\t\t\t\tbindings.push({actionID: \"selectWholeLineUp\",\t\tkeyBinding: new KeyBinding(38, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"selectWholeLineDown\",\t\tkeyBinding: new KeyBinding(40, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\t\tkeyBinding: new KeyBinding(36, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(35, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordPrevious\",\tkeyBinding: new KeyBinding(37, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordNext\",\t\tkeyBinding: new KeyBinding(39, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\t\tkeyBinding: new KeyBinding(36, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(35, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\t\r\n\t\t//Undo stack\r\n\t\tbindings.push({actionID: \"undo\", keyBinding: new mKeyBinding.KeyBinding('z', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"redo\", keyBinding: new mKeyBinding.KeyBinding('z', true, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tbindings.push({actionID: \"redo\", keyBinding: new mKeyBinding.KeyBinding('y', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t//Misc\r\n\t\tbindings.push({actionID: \"deletePrevious\",\t\tkeyBinding: new KeyBinding(8), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deletePrevious\",\t\tkeyBinding: new KeyBinding(8, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteNext\",\t\tkeyBinding: new KeyBinding(46), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordNext\",\t\tkeyBinding: new KeyBinding(46, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"tab\",\t\t\tkeyBinding: new KeyBinding(9), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"shiftTab\",\t\t\tkeyBinding: new KeyBinding(9, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"enter\",\t\t\tkeyBinding: new KeyBinding(13), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"enter\",\t\t\tkeyBinding: new KeyBinding(13, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"escape\",\t\t\tkeyBinding: new KeyBinding(27), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectAll\",\t\tkeyBinding: new KeyBinding('a', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"toggleTabMode\",\tkeyBinding: new KeyBinding('m', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"deleteNext\",\t\tkeyBinding: new KeyBinding(46, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteWordNext\",\t\tkeyBinding: new KeyBinding(46, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\t\r\n\t\tbindings.push({actionID: \"toggleWrapMode\",\t\tkeyBinding: new mKeyBinding.KeyBinding('w', true, false, true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"toggleOverwriteMode\",\t\tkeyBinding: new mKeyBinding.KeyBinding(45)}); //$NON-NLS-0$\r\n\t\t\r\n\t\t/*\r\n\t\t* Feature in IE/Chrome: prevent ctrl+'u', ctrl+'i', and ctrl+'b' from applying styles to the text.\r\n\t\t*\r\n\t\t* Note that Chrome applies the styles on the Mac with Ctrl instead of Cmd.\r\n\t\t*/\r\n\t\tif (!util.isFirefox) {\r\n\t\t\tvar isMacChrome = util.isMac && util.isChrome;\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('u', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('i', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('b', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\tif (util.isFirefox) {\r\n\t\t\tbindings.push({actionID: \"copy\", keyBinding: new KeyBinding(45, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"paste\", keyBinding: new KeyBinding(45, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"cut\", keyBinding: new KeyBinding(46, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t// Add the emacs Control+ ... key bindings.\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"lineStart\", keyBinding: new KeyBinding(\"a\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\", keyBinding: new KeyBinding(\"e\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineUp\", keyBinding: new KeyBinding(\"p\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineDown\", keyBinding: new KeyBinding(\"n\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"charPrevious\", keyBinding: new KeyBinding(\"b\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"charNext\", keyBinding: new KeyBinding(\"f\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deletePrevious\", keyBinding: new KeyBinding(\"h\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteNext\", keyBinding: new KeyBinding(\"d\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteLineEnd\", keyBinding: new KeyBinding(\"k\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tif (util.isFirefox) {\r\n\t\t\t\tbindings.push({actionID: \"scrollPageDown\", keyBinding: new KeyBinding(\"v\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"deleteLineStart\", keyBinding: new KeyBinding(\"u\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"deleteWordPrevious\", keyBinding: new KeyBinding(\"w\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t} else {\r\n\t\t\t\tbindings.push({actionID: \"pageDown\", keyBinding: new KeyBinding(\"v\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"centerLine\", keyBinding: new KeyBinding(\"l\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"enterNoCursor\", keyBinding: new KeyBinding(\"o\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t//TODO implement: y (yank), t (transpose)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bindings;\r\n\t};\r\n\t\r\n\treturn {\r\n\t\tKeyMode: KeyMode,\r\n\t\tDefaultKeyMode: DefaultKeyMode\r\n\t};\r\n});\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013,2014 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/textTheme\", //$NON-NLS-0$\r\n[\r\n\t'require', //$NON-NLS-0$\r\n\t'orion/editor/eventTarget', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(require, mEventTarget, util) {\r\n\tvar THEME_PREFIX = \"orion-theme-\"; //$NON-NLS-0$\r\n\t\r\n\tvar Themes = {};\r\n\r\n\t/**\r\n\t * Constructs a new text theme. \r\n\t * \r\n\t * @class A TextTheme is a class used to specify an editor theme.\r\n\t * @name orion.editor.TextTheme\r\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\r\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\r\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\r\n\t */\r\n\tfunction TextTheme(options) {\r\n\t\toptions = options || {};\r\n\t\tthis._document = options.document || document;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets an instance of <code>orion.editor.TextTheme</code> by name. If the name\r\n\t * paramenter is not speficed the default text theme instance is returned.\r\n\t * Subsequent calls of <code>getTheme</code> with the same name will return\r\n\t * the same instance.\r\n\t */\r\n\tTextTheme.getTheme = function(name) {\r\n\t\tname = name || \"default\"; //$NON-NLS-0$\r\n\t\tvar theme = Themes[name];\r\n\t\tif (!theme) {\r\n\t\t\ttheme = Themes[name] = new TextTheme();\r\n\t\t}\r\n\t\treturn theme;\r\n\t};\r\n\r\n\tTextTheme.prototype = /** @lends orion.editor.TextTheme.prototype */ {\r\n\t\t/**\r\n\t\t * Returns the theme className.\r\n\t\t *\r\n\t\t * @see orion.editor.TextTheme#setThemeClass\r\n\t\t */\r\n\t\tgetThemeClass: function() {\r\n\t\t\treturn this._themeClass;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @class This object represents a style sheet for a theme manager.\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.TextTheme#setThemeClass}\r\n\t\t * </p>\r\n\t\t * @name orion.editor.ThemeStyleSheet\r\n\t\t * \r\n\t\t * @property {String} href The href of the stylesheet\r\n\t\t */\r\n\t\t/**\r\n\t\t * Sets the theme className and style sheet.\r\n\t\t * <p>\r\n\t\t * If the <code>stylesheet</code> parameter is a string, it represents an inline\r\n\t\t * CSS and it will be added to the document as a <i>STYLE</i> tag element.  If the\r\n\t\t * <code>stylesheet</code> parameter is a <code>orion.editor.ThemeStyleSheet</code>,\r\n\t\t * its href property is loaded as either a <i>STYLE</i> tag element or as a <i>LINK</i>\r\n\t\t * tag element.\r\n\t\t * </p>\r\n\t\t * <p>\r\n\t\t * Listeners of the ThemeChanged event are notify once the styled sheet is loaded\r\n\t\t * into the document.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @param {String} className the new theme className.\r\n\t\t * @param {String|orion.editor.ThemeStyleSheet} styleSheet the CSS stylesheet for the new theme className.\r\n\t\t *\r\n\t\t * @see orion.editor.TextTheme#getThemeClass\r\n\t\t * @see orion.editor.TextTheme#onThemeChanged\r\n\t\t */\r\n\t\t setThemeClass: function(className, styleSheet) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar oldThemeClass = self._themeClass;\t\r\n\t\t\tself._themeClass = className;\r\n\t\t\tthis._load(className, styleSheet, function() {\r\n\t\t\t\tself.onThemeChanged({\r\n\t\t\t\t\ttype: \"ThemeChanged\", //$NON-NLS-0$\r\n\t\t\t\t\toldValue: oldThemeClass,\r\n\t\t\t\t\tnewValue: self.getThemeClass()\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * @class This is the event sent when the theme className or style sheet has changed.\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.TextTheme}<br/>\r\n\t\t * {@link orion.editor.TextTheme#event:onThemeChanged}\r\n\t\t * </p>\r\n\t\t * @name orion.editor.ThemeChangedEvent\r\n\t\t * \r\n\t\t * @property {String} oldValue The old theme clasName.\r\n\t\t * @property {String} newValue The new theme className.\r\n\t\t */\r\n\t\t/**\r\n\t\t * This event is sent when the theme clasName has changed and its style sheet has been loaded in the document.\r\n\t\t *\r\n\t\t * @event\r\n\t\t * @param {orion.editor.ThemeChangedEvent} themeChangedEvent the event\r\n\t\t */\r\n\t\tonThemeChanged: function(themeChangedEvent) {\r\n\t\t\treturn this.dispatchEvent(themeChangedEvent);\r\n\t\t},\r\n\t\tbuildStyleSheet: function(themeClass, settings) {\r\n\t\t\tvar convertCSSname = function(name) {\r\n\t\t\t\treturn name.replace(this._capitalRegEx, function(match) {\r\n\t\t\t\t\treturn \"-\" + match; //$NON-NLS-0$\r\n\t\t\t\t}.bind(this)).toLowerCase();\r\n\t\t\t}.bind(this);\r\n\r\n\t\t\tvar parseStyles = function(object, ancestors, className, isTopLevel, result) {\r\n\t\t\t\tvar localResult = [];\r\n\t\t\t\tvar keys = Object.keys(object);\r\n\t\t\t\tkeys.forEach(function(key) {\r\n\t\t\t\t\tif(key !== \"isTopLevel\"){\r\n\t\t\t\t\t\tvar value = object[key];\r\n\t\t\t\t\t\tif (typeof(value) === \"string\") { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tlocalResult.push(\"\\t\" + convertCSSname(key) + \": \" + value + \";\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(value.isTopLevel){\r\n\t\t\t\t\t\t\t\tparseStyles(\r\n\t\t\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\t\t\tclassName === key ? ancestors : ancestors + (isTopLevel ? \" .\" : \".\") + key, //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\tresult);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tparseStyles(\r\n\t\t\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\t\t\tclassName === key ? ancestors : ancestors + (isTopLevel ? \" .\" : \".\") + key, //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\tresult);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (localResult.length) {\r\n\t\t\t\t\tresult.push(ancestors + (isTopLevel ? \".textview\" : \"\") + \" {\"); //$NON-NLS-0$\r\n\t\t\t\t\tresult.push.apply(result, localResult);\r\n\t\t\t\t\tresult.push(\"}\"); //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar result = [\"\"];\r\n\t\t\tparseStyles(settings.styles, \".\" + themeClass, settings.className, true, result); //$NON-NLS-0$\r\n\t\t\treturn result.join(\"\\n\"); //$NON-NLS-0$\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\t_createStyle: function(className, styleSheet, callback, link) {\r\n\t\t\tvar document = this._document;\r\n\t\t\tvar id = THEME_PREFIX + className;\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tif (node) {\r\n\t\t\t\tif (link || node.firstChild.data === styleSheet) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnode.removeChild(node.firstChild);\r\n\t\t\t\tnode.appendChild(document.createTextNode(styleSheet));\r\n\t\t\t} else {\r\n\t\t\t\tif (link) {\r\n\t\t\t\t\tnode = util.createElement(document, \"link\"); //$NON-NLS-0$\r\n\t\t\t\t\tnode.rel = \"stylesheet\"; //$NON-NLS-0$\r\n\t\t\t\t\tnode.type = \"text/css\"; //$NON-NLS-0$\r\n\t\t\t\t\tnode.href = styleSheet;\r\n\t\t\t\t\tnode.addEventListener(\"load\", function() { //$NON-NLS-0$\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode = util.createElement(document, \"style\"); //$NON-NLS-0$\r\n\t\t\t\t\tnode.appendChild(document.createTextNode(styleSheet));\r\n\t\t\t\t}\r\n\t\t\t\tnode.id = id;\r\n\t\t\t\tvar head = document.getElementsByTagName(\"head\")[0] || document.documentElement; //$NON-NLS-0$\r\n\t\t\t\thead.appendChild(node);\r\n\t\t\t}\r\n\t\t\tif (!link) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\t_load: function (className, styleSheet, callback) {\r\n\t\t\tif (!className) {\r\n\t\t\t\tcallback();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (typeof styleSheet === \"string\") { //$NON-NLS-0$\r\n\t\t\t\tthis._createStyle(className, styleSheet, callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar href = styleSheet.href;\r\n\t\t\tvar extension = \".css\"; //$NON-NLS-0$\r\n\t\t\tif (href.substring(href.length - extension.length) !== extension) {\r\n\t\t\t\thref += extension;\r\n\t\t\t}\r\n\t\t\tif (/^\\//.test(href) || /[a-zA-Z0-9]+:\\/\\//i.test(href) || !require.toUrl /* almond cannot load dynamically */) {\r\n\t\t\t\tthis._createStyle(className, href, callback, true);\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trequire([\"text!\" + href], function(cssText) { //$NON-NLS-0$\r\n\t\t\t\t\tself._createStyle(className, cssText, callback, false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t_capitalRegEx: /[A-Z]/g\r\n\t};\r\n\tmEventTarget.EventTarget.addMixin(TextTheme.prototype);\r\n\t\r\n\treturn {\r\n\t\tTextTheme: TextTheme\r\n\t};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2016 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n * \r\n * Contributors: IBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/util\", [], function() { //$NON-NLS-0$\r\n\t\r\n\t/** @private */\r\n\tfunction addEventListener(node, type, handler, capture) {\r\n\t\tif (typeof node.addEventListener === \"function\") { //$NON-NLS-0$\r\n\t\t\tnode.addEventListener(type, handler, capture === true);\r\n\t\t} else {\r\n\t\t\tnode.attachEvent(\"on\" + type, handler); //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/** @private */\r\n\tfunction removeEventListener(node, type, handler, capture) {\r\n\t\tif (typeof node.removeEventListener === \"function\") { //$NON-NLS-0$\r\n\t\t\tnode.removeEventListener(type, handler, capture === true);\r\n\t\t} else {\r\n\t\t\tnode.detachEvent(\"on\" + type, handler); //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/** @private */\r\n\tfunction compare(s1, s2) {\r\n\t\tif (s1 === s2) { return true; }\r\n\t\tif (s1 && !s2 || !s1 && s2) { return false; }\r\n\t\tif ((s1 && s1.constructor === String) || (s2 && s2.constructor === String)) { return false; }\r\n\t\tif (s1 instanceof Array || s2 instanceof Array) {\r\n\t\t\tif (!(s1 instanceof Array && s2 instanceof Array)) { return false; }\r\n\t\t\tif (s1.length !== s2.length) { return false; }\r\n\t\t\tfor (var i = 0; i < s1.length; i++) {\r\n\t\t\t\tif (!compare(s1[i], s2[i])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!(s1 instanceof Object) || !(s2 instanceof Object)) { return false; }\r\n\t\tvar p;\r\n\t\tfor (p in s1) {\r\n\t\t\tif (s1.hasOwnProperty(p)) {\r\n\t\t\t\tif (!s2.hasOwnProperty(p)) { return false; }\r\n\t\t\t\tif (!compare(s1[p], s2[p])) {return false; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (p in s2) {\r\n\t\t\tif (!s1.hasOwnProperty(p)) { return false; }\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t/** @private */\r\n\tfunction contains(topNode, node) {\r\n\t\tif (!node) { return false; }\r\n\t\tif (!topNode.compareDocumentPosition) {\r\n\t\t\tvar temp = node;\r\n\t\t\twhile (temp) {\r\n\t\t\t\tif (topNode === temp) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\ttemp = temp.parentNode;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn topNode === node || (topNode.compareDocumentPosition(node) & 16) !== 0;\r\n\t}\r\n\t/** @private */\r\n\tfunction getNodeStyle(node, prop, defaultValue) {\r\n\t\tvar value;\r\n\t\tif (node) {\r\n\t\t\tvalue = node.style[prop];\r\n\t\t\tif (!value) {\r\n\t\t\t\tif (node.currentStyle) {\r\n\t\t\t\t\tvar index = 0, p = prop;\r\n\t\t\t\t\twhile ((index = p.indexOf(\"-\", index)) !== -1) { //$NON-NLS-0$\r\n\t\t\t\t\t\tp = p.substring(0, index) + p.substring(index + 1, index + 2).toUpperCase() + p.substring(index + 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue = node.currentStyle[p];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar css = node.ownerDocument.defaultView.getComputedStyle(node, null);\r\n\t\t\t\t\tvalue = css ? css.getPropertyValue(prop) : null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value || defaultValue;\r\n\t}\r\n\r\n\t/**\r\n\t * @class\r\n\t * @private\r\n\t * @name orion.editor.Animation\r\n\t * @description Creates an animation.\r\n\t * @param {Object} options Options controlling the animation.\r\n\t * @param {Array} options.curve Array of 2 values giving the start and end points for the animation.\r\n\t * @param {Number} [options.duration=350] Duration of the animation, in milliseconds.\r\n\t * @param {Function} [options.easing]\r\n\t * @param {Function} [options.onAnimate]\r\n\t * @param {Function} [options.onEnd]\r\n\t * @param {Number} [options.rate=20] The time between frames, in milliseconds.\r\n\t */\r\n\tvar Animation = /** @ignore */ (function() {\r\n\t\tfunction Animation(options) {\r\n\t\t\tthis.options = options;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Plays this animation.\r\n\t\t * @function\r\n\t\t * @memberOf orion.editor.Animation.prototype\r\n\t\t * @name play\r\n\t\t */\r\n\t\tAnimation.prototype.play = function() {\r\n\t\t\tvar duration = (typeof this.options.duration === \"number\") ? this.options.duration : 350, //$NON-NLS-0$\r\n\t\t\t    rate = (typeof this.options.rate === \"number\") ? this.options.rate : 20, //$NON-NLS-0$\r\n\t\t\t    easing = this.options.easing || this.defaultEasing,\r\n\t\t\t    onAnimate = this.options.onAnimate || function() {},\r\n\t\t\t    start = this.options.curve[0],\r\n\t\t\t    end = this.options.curve[1],\r\n\t\t\t    range = (end - start),\r\n\t\t\t    startedAt = -1,\r\n\t\t\t\tpropertyValue,\r\n\t\t\t\tself = this;\r\n\r\n\t\t\tfunction onFrame() {\r\n\t\t\t\tstartedAt = (startedAt === -1) ? Date.now() : startedAt;\r\n\t\t\t\tvar now = Date.now(),\r\n\t\t\t\t    percentDone = (now - startedAt) / duration;\r\n\t\t\t\tif (percentDone < 1) {\r\n\t\t\t\t\tvar eased = easing(percentDone);\r\n\t\t\t\t\tpropertyValue = start + (eased * range);\r\n\t\t\t\t\tonAnimate(propertyValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonAnimate(end);\r\n\t\t\t\t\tself.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.interval = this.options.window.setInterval(onFrame, rate);\r\n\t\t};\r\n\t\t/**\r\n\t\t * Stops this animation.\r\n\t\t * @function\r\n\t\t * @memberOf orion.editor.Animation.prototype\r\n\t\t */\r\n\t\tAnimation.prototype.stop = function() {\r\n\t\t\tthis.options.window.clearInterval(this.interval);\r\n\t\t    var onEnd = this.options.onEnd || function () {};\r\n\t\t\tonEnd();\r\n\t\t};\r\n\t\tAnimation.prototype.defaultEasing = function(x) {\r\n\t\t\treturn Math.sin(x * (Math.PI / 2));\r\n\t\t};\r\n\t\treturn Animation;\r\n\t}());\r\n\r\n\treturn {\r\n\t\tcompare: compare,\r\n\t\tcontains: contains,\r\n\t\tgetNodeStyle: getNodeStyle,\r\n\t\taddEventListener: addEventListener,\r\n\t\tremoveEventListener: removeEventListener,\r\n\t\tAnimation: Animation\r\n\t};\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n *******************************************************************************/\ndefine ('orion/bidiUtils',[\n\t\"orion/util\"\n],\nfunction(util) { /* BDL */\n\t\n\tvar bidiEnabledStorage = \"/orion/preferences/bidi/bidiEnabled\"; //$NON-NLS-0$\n\tvar bidiLayoutStorage = \"/orion/preferences/bidi/bidiLayout\"; //$NON-NLS-0$\t\n\tvar LRE = \"\\u202A\";\t//$NON-NLS-0$\n\tvar PDF = \"\\u202C\"; //$NON-NLS-0$\n\tvar RLE = \"\\u202B\"; //$NON-NLS-0$\n\t\t\n\tfunction setBrowserLangDirection() {\n\t\t\n\t\tvar lang;\n\t\tif (window.dojoConfig) {\n\t\t\tlang = window.dojoConfig.locale;\n\t\t}\n\t\tif (!lang) {\n\t\t\tlang = navigator.languages ? navigator.languages[0] : navigator.language || navigator.userLanguage;\n\t\t}\n\t\tvar isBidi = lang && \"ar iw he\".indexOf(lang.substring(0, 2)) !== - 1;\n\n\t\tif (isBidi && isBidiEnabled()) {\n\t\t\tvar htmlElement = document.getElementsByTagName(\"html\")[0];\n\t\t\tif (htmlElement){ //should be always true\n\t\t\t\thtmlElement.setAttribute (\"dir\", \"rtl\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetBrowserLangDirection();\n\t\n\tvar bidiLayout = getBidiLayout();\n\n\t/**\n\t * checks if directionality should be applied in Orion.\n\t * @returns {Boolean} true if globalization settings exist and bidi is enabled.\n\t */\t\t\n\tfunction isBidiEnabled() {\n\t\tvar bidiEnabled = localStorage.getItem(bidiEnabledStorage);\n\t\tif (bidiEnabled && bidiEnabled === \"true\") {\t\t//$NON-NLS-0$\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\t/**\n\t * returns bidiLayout value set in globalization settings.\n\t * @returns {String} text direction.\n\t */\t\n\tfunction getBidiLayout() {\n\t\tvar _bidiLayout = localStorage.getItem(bidiLayoutStorage);\n\t\tif (_bidiLayout && (_bidiLayout === \"rtl\" || _bidiLayout === \"ltr\" || _bidiLayout === \"auto\")) {\t//$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn _bidiLayout;\n\t\t}\n\t\treturn \"ltr\";\t//$NON-NLS-0$\n\t}\n\t\n\t/**\n\t * returns text direction.\n\t * this method is used for handling direction by adding a dir attribute in an HTML element.\n\t * if bidiLayout is set to ltr > return ltr\n\t * if bidiLayout is set to rtl > return rtl\n\t * if bidiLayout is set to auto > check for first strong character in text and return ltr or rtl accordingly.\n\t * @param {String} the text on which to set directionality\n\t * @returns {String} text direction. rtl or ltr.\n\t */\t\n\tfunction getTextDirection(text) {\n\t\tbidiLayout = getBidiLayout();\n\t\tif (!isBidiEnabled()) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (bidiLayout === \"auto\" && util.isIE) {\t//$NON-NLS-0$\n\t\t\treturn checkContextual(text);\n\t\t}\n\t\treturn bidiLayout;\n\t}\n\t\n\t/**\n\t * Wraps text by UCC (Unicode control characters) according to text direction\n\t * In some cases defining the dir attribute in a different direction than the GUI orientation, \n\t * changes the alignment of the text and/or adjacent elements such as icons.\n\t * This doesn't follow the bidi standards (static text should be aligned following GUI direction).\n\t * Therefore the only solution is to use UCC (Unicode control characters) to display the text in a correct orientation.\n\t * (the text is changed for display purposes only. The original text in the repository remains unchanged)\n\t * @param {String} the text to be wrapped\n\t * @returns {String} text after adding ucc characters.\n\t */\t\t\n\tfunction enforceTextDirWithUcc ( text ) {\n\t\tif (isBidiEnabled() && text.trim()) {\n\t\t\tbidiLayout = getBidiLayout();\n\t\t\tvar dir = bidiLayout === \"auto\" ? checkContextual( text ) : bidiLayout;\t//$NON-NLS-0$\n\t\t\treturn ( dir === \"ltr\" ? LRE : RLE ) + text + PDF;\t//$NON-NLS-0$\n\t\t}\n\t\treturn text;\t\n\t}\n\t\n\t/**\n\t * Finds the first strong (directional) character.\n\t * If it is Latin, return ltr. If it is bidi, return rtl. Otherwise, return ltr as default. \n\t * @param {String} the text to be examined\n\t * @returns {String} text direction. rtl or ltr.\n\t */\t\t\t\n\tfunction checkContextual ( text ) {\n\t\t// look for strong (directional) characters\n\t\tvar fdc = /[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec( text );\n\t\t// if found, return the direction that defined by the character, else return ltr as defult.\n\t\treturn fdc ? fdc[0] <= \"z\" ? \"ltr\" : \"rtl\"  : \"ltr\";\t//$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\n\t}\n\t\n\tfunction addBidiEventListeners ( input ) {\n\t\tif (!input._hasBidiEventListeners) {\n\t\t\tinput._hasBidiEventListeners = true;\n\n\t\t\tvar eventTypes = [\"keyup\", \"cut\", \"paste\"];\n\t\t\tfor (var i = 0; i < eventTypes.length; ++i) {\n\t\t\t\tinput.addEventListener(eventTypes[i], handleInputEvent.bind(this),\n\t\t\t\t\tfalse);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction handleInputEvent ( event ) {\n\t\tvar input = event.target;\n\t\tif (input) {\n\t\t\tinput.dir = getTextDirection(input.value || input.textContent); // resolve dir attribute of the element\n\t\t}\n\t}\n\t\n\tfunction initInputField ( input ) {\n\t\tif (isBidiEnabled() && input) {\n\t\t\tinput.dir = getTextDirection(input.value || input.textContent); // resolve dir attribute of the element\n\n\t\t\tif (util.isIE) {\n\t\t\t\taddBidiEventListeners(input);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction enforceTextDir(range) {\n\t\tvar comments = [{name:\"comment block\"}, \n\t\t                {name:\"comment line double-slash\"},\n\t\t                {name:\"comment block documentation\"},\n\t\t                {name:\"comment line double-slash jade\"},\n\t\t                {name:\"comment line\"},\n\t\t                {name:\"comment line number-sign php\"},\n\t\t                {name:\"comment block xml\"}\n\t\t];\n\t\tvar text = range.text;\n\t\tvar style = range.style;\n\t\tif (isBidiEnabled() && style && style.styleClass && style.styleClass.startsWith(\"comment\") && text.length > 0) {\n\t\t\tfor (var i = 0; i < comments.length; i++) {\n\t\t\t\tif (style.styleClass === comments[i].name) {\n\t\t\t\t\tvar newStyle = style;\n\t\t\t\t\tif (typeof newStyle.attributes === \"undefined\") {\n\t\t\t\t\t\tnewStyle.attributes = {};\n\t\t\t\t\t}\n\t\t\t\t\tnewStyle.attributes.dir = getTextDirection(text);\n\t\t\t\t\trange.style = newStyle;\t\t\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn range;\n\t}\n\n\t\t\n\treturn {\n\t\tisBidiEnabled: isBidiEnabled,\n\t\tgetTextDirection: getTextDirection,\t\t\n\t\tenforceTextDirWithUcc: enforceTextDirWithUcc,\n\t\tinitInputField: initInputField,\n\t\tenforceTextDir: enforceTextDir\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2014, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/metrics',[\n], function() {\n\n\tvar _services = [];\n\tvar timingVars = Object.create(null);\n\n\t/**\n\t * @name Metrics\n\t * @description Creates a new instance of the metrics service\n\t * @param {Object} serviceRegistry The backing service registry to register the new service with\n\t * @param {Object} args An object of additional arguments\n\t * @param {Array} serviceArray An array of logging services (optional; for use when no service registry is present) \n\t * @returns {Metrics} A new Metrics instance\n\t * @since 12.0\n\t */\n\tfunction Metrics(serviceRegistry, args, serviceArray) {\n\t\tvar services = serviceArray || [];\n\t\tif (serviceRegistry) {\n\t\t\tvar refs = serviceRegistry.getServiceReferences(\"orion.metrics\"); //$NON-NLS-0$\n\t\t\trefs.forEach(function(current) {\n\t\t\t\tservices.push(serviceRegistry.getService(current));\n\t\t\t});\n\t\t}\n\t\t\n\t\t/* the following definitions are from https://developers.google.com/analytics/devguides/collection/analyticsjs/pages */\n\t\tvar href = window.location.protocol + '//' + window.location.hostname + window.location.pathname + window.location.search; //$NON-NLS-0$\n\t\tvar page = window.location.pathname + window.location.search;\n\t\tvar title = document.title;\n\n\t\t_services = services;\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.pageLoad(href, page, title, args);\n\t\t});\n\n\t\tif (serviceRegistry) {\n\t\t\tserviceRegistry.registerService(\"orion.core.metrics.client\", this); //$NON-NLS-1$\n\t\t}\n\t}\n\t\n\t/** @callback */\n\tfunction _logTiming(timingCategory, timingVar, timingValue, timingLabel) {\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.logTiming(timingCategory, timingVar, timingValue, timingLabel);\n\t\t});\n\t}\n\t/** @callback */\n\tfunction _logEvent(category, action, label, value, details) {\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.logEvent(category, action, label || \"\", value, details);\n\t\t});\n\t}\n\t/** @callback */\n\tfunction _logPageLoadTiming(timingVar, timingLabel) {\n\t\t/* \n\t\t * The level of window.performance implementation varies across the browsers,\n\t\t * so check for the existence of all utilized functions up-front.\n\t\t */\n\t\tif (window.performance) {\n\t\t\t /* ensure that no more timings of this type are logged for this page */\n\t\t\tif (window.performance.getEntriesByName && window.performance.mark) {\n\t\t\t\tif (window.performance.getEntriesByName(timingVar).length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twindow.performance.mark(timingVar);\n\t\t\t} else {\n\t\t\t\tif (timingVars[timingVar]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttimingVars[timingVar] = Date.now();\t\t\t\t\n\t\t\t}\n\t\t\t_logTiming(\"page\", timingVar, window.performance.now(), timingLabel); //$NON-NLS-0$\n\t\t}\n\t}\n\t\n\tMetrics.prototype = {\n\t\t/**\n\t\t * @description Log a timing\n\t\t * @function\n\t\t * @param {String} timingCategory The name of the category to log to\n\t\t * @param {String} timingVar The name of the variable to log to\n\t\t * @param {Number} timingValue The timing to log\n\t\t * @param {String} timingLabel A label for the new timing\n\t\t */\n\t\tlogTiming: function(timingCategory, timingVar, timingValue, timingLabel) {\n\t\t\t_logTiming(timingCategory, timingVar, timingValue, timingLabel);\n\t\t},\n\t\t/**\n\t\t * @description Log an event\n\t\t * @function\n\t\t * @param {String} category The name of the category to log to\n\t\t * @param {String} action The name of the action logged\n\t\t * @param {String} label A label for the event\n\t\t * @param {String} value The event value to log\n\t\t * @param {String} details Additional details about the event being logged\n\t\t */\n\t\tlogEvent: function(category, action, label, value, details) {\n\t\t\t_logEvent(category, action, label, value, details);\n\t\t},\n\t\t/**\n\t\t * @description Log how long it took to load a page\n\t\t * @function\n\t\t * @param {Number} timingVar The timing to log\n\t\t * @param {String} timingLabel A label for the new timing\n\t\t */\n\t\tlogPageLoadTiming: function(timingVar, timingLabel) {\n\t\t\t_logPageLoadTiming(timingVar, timingLabel);\n\t\t}\n\t};\n\t\n\treturn {\n\t\tMetrics: Metrics,\n\t\tlogTiming: _logTiming,\n\t\tlogEvent: _logEvent,\n\t\tlogPageLoadTiming: _logPageLoadTiming\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n *\t\tMihai Sucan (Mozilla Foundation) - fix for Bug#334583 Bug#348471 Bug#349485 Bug#350595 Bug#360726 Bug#361180 Bug#362835 Bug#362428 Bug#362286 Bug#354270 Bug#361474 Bug#363945 Bug#366312 Bug#370584\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textView\", [  //$NON-NLS-1$\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-1$\n\t'orion/editor/textModel', //$NON-NLS-1$\n\t'orion/editor/keyModes', //$NON-NLS-1$\n\t'orion/editor/eventTarget', //$NON-NLS-1$\n\t'orion/editor/textTheme', //$NON-NLS-1$\n\t'orion/editor/util', //$NON-NLS-1$\n\t'orion/util', //$NON-NLS-1$\n\t'orion/bidiUtils', //$NON-NLS-1$\n\t'orion/metrics' //$NON-NLS-1$\n], function(messages, mTextModel, mKeyModes, mEventTarget, mTextTheme, textUtil, util, bidiUtils, mMetrics) {\n\n\t/** @private */\n\tfunction getWindow(doc) {\n\t\treturn doc.defaultView || doc.parentWindow;\n\t}\n\tfunction newArray(len) {\n\t\treturn new Array(len);\n\t}\n\tvar addHandler = textUtil.addEventListener;\n\tvar removeHandler = textUtil.removeEventListener;\n\t/** @private */\n\tfunction applyStyle(style, node, reset) {\n\t\tif (reset) {\n\t\t\tnode.className = \"\";\n\t\t\tvar attrs = node.attributes;\n\t\t\tfor (var i= attrs.length; i-->0;) {\n\t\t\t\tif (!util.isIE || util.isIE >= 9 || (util.isIE < 9 && attrs[i].specified)) {\n\t\t\t\t\tnode.removeAttribute(attrs[i].name); \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!style) {\n\t\t\treturn;\n\t\t}\n\t\tif (style.styleClass) {\n\t\t\tnode.className = style.styleClass;\n\t\t}\n\t\tvar properties = style.style;\n\t\tif (properties) {\n\t\t\tfor (var s in properties) {\n\t\t\t\tif (properties.hasOwnProperty(s)) {\n\t\t\t\t\tnode.style[s] = properties[s];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar attributes = style.attributes;\n\t\tif (attributes) {\n\t\t\tfor (var a in attributes) {\n\t\t\t\tif (attributes.hasOwnProperty(a)) {\n\t\t\t\t\tnode.setAttribute(a, attributes[a]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/** @private */\n\tfunction clone(obj) {\n\t\t/*Note that this code only works because of the limited types used in TextViewOptions */\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.slice(0);\n\t\t}\n\t\treturn obj;\n\t}\n\t/**\t@private */\n\tfunction merge(obj1, obj2) {\n\t\tif (!obj1) {\n\t\t\treturn obj2;\n\t\t}\n\t\tif (!obj2) {\n\t\t\treturn obj1;\n\t\t}\n\t\tfor (var p in obj2) {\n\t\t\tif (obj2.hasOwnProperty(p)) {\n\t\t\t\tif (!obj1.hasOwnProperty(p)) {\n\t\t\t\t\tobj1[p] = obj2[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn obj1;\n\t}\n\t/** @private */\n\tvar compare = textUtil.compare;\n\t/** @private */\n\tfunction convertDelimiter(text, addTextFunc, addDelimiterFunc) {\n\t\tvar cr = 0, lf = 0, index = 0, len = text.length;\n\t\twhile (index < len) {\n\t\t\tif (cr !== -1 && cr <= index) { cr = text.indexOf(\"\\r\", index); } //$NON-NLS-1$\n\t\t\tif (lf !== -1 && lf <= index) { lf = text.indexOf(\"\\n\", index); } //$NON-NLS-1$\n\t\t\tvar start = index, end;\n\t\t\tif (lf === -1 && cr === -1) {\n\t\t\t\taddTextFunc(text.substring(index));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (cr !== -1 && lf !== -1) {\n\t\t\t\tif (cr + 1 === lf) {\n\t\t\t\t\tend = cr;\n\t\t\t\t\tindex = lf + 1;\n\t\t\t\t} else {\n\t\t\t\t\tend = cr < lf ? cr : lf;\n\t\t\t\t\tindex = (cr < lf ? cr : lf) + 1;\n\t\t\t\t}\n\t\t\t} else if (cr !== -1) {\n\t\t\t\tend = cr;\n\t\t\t\tindex = cr + 1;\n\t\t\t} else {\n\t\t\t\tend = lf;\n\t\t\t\tindex = lf + 1;\n\t\t\t}\n\t\t\taddTextFunc(text.substring(start, end));\n\t\t\tif (addDelimiterFunc) {\n\t\t\t\taddDelimiterFunc();\n\t\t\t} else {\n\t\t\t\tif (index === len) addTextFunc(\"\");\n\t\t\t}\n\t\t}\n\t}\n\t/** @private */\n\tfunction getBorder(node) {\n\t\tvar left,_top,right,bottom;\n\t\tvar win = getWindow(node.ownerDocument);\n\t\tif (win.getComputedStyle) {\n\t\t\tvar style = win.getComputedStyle(node, null);\n\t\t\tleft = style.getPropertyValue(\"border-left-width\"); //$NON-NLS-1$\n\t\t\t_top = style.getPropertyValue(\"border-top-width\"); //$NON-NLS-1$\n\t\t\tright = style.getPropertyValue(\"border-right-width\"); //$NON-NLS-1$\n\t\t\tbottom = style.getPropertyValue(\"border-bottom-width\"); //$NON-NLS-1$\n\t\t} else if (node.currentStyle) {\n\t\t\tleft = node.currentStyle.borderLeftWidth;\n\t\t\t_top = node.currentStyle.borderTopWidth;\n\t\t\tright = node.currentStyle.borderRightWidth;\n\t\t\tbottom = node.currentStyle.borderBottomWidth;\n\t\t}\n\t\treturn {\n\t\t\tleft: parseInt(left, 10) || 0,\n\t\t\ttop: parseInt(_top, 10) || 0,\n\t\t\tright: parseInt(right, 10) || 0,\n\t\t\tbottom: parseInt(bottom, 10) || 0\n\t\t};\n\t}\n\t/** @private */\n\tfunction getPadding(node) {\n\t\tvar left,_top,right,bottom;\n\t\tvar win = getWindow(node.ownerDocument);\n\t\tif (win.getComputedStyle) {\n\t\t\tvar style = win.getComputedStyle(node, null);\n\t\t\tleft = style.getPropertyValue(\"padding-left\"); //$NON-NLS-1$\n\t\t\t_top = style.getPropertyValue(\"padding-top\"); //$NON-NLS-1$\n\t\t\tright = style.getPropertyValue(\"padding-right\"); //$NON-NLS-1$\n\t\t\tbottom = style.getPropertyValue(\"padding-bottom\"); //$NON-NLS-1$\n\t\t} else if (node.currentStyle) {\n\t\t\tleft = node.currentStyle.paddingLeft;\n\t\t\t_top = node.currentStyle.paddingTop;\n\t\t\tright = node.currentStyle.paddingRight;\n\t\t\tbottom = node.currentStyle.paddingBottom;\n\t\t}\n\t\treturn {\n\t\t\tleft: parseInt(left, 10) || 0, \n\t\t\ttop: parseInt(_top, 10) || 0,\n\t\t\tright: parseInt(right, 10) || 0,\n\t\t\tbottom: parseInt(bottom, 10) || 0\n\t\t};\n\t}\n\t/** @private */\n\tfunction getLineTrim(line) {\n\t\tvar trim = line._trim;\n\t\tif (!trim) {\n\t\t\ttrim = getPadding(line);\n\t\t\tvar border = getBorder(line);\n\t\t\ttrim.left += border.left;\n\t\t\ttrim.top += border.top;\n\t\t\ttrim.right += border.right;\n\t\t\ttrim.bottom += border.bottom;\n\t\t\tline._trim = trim;\n\t\t}\n\t\treturn trim;\n\t}\n\t/** @private */\n\tfunction DOMReady(doc, _parent, className, callback) {\n\t\tclassName = \"_\" + className + \"DOMReady\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t_parent.className = _parent.className ? _parent.className + \" \" + className : className; //$NON-NLS-1$\n\t\t_parent.__DOMReady = callback;\n\t\tvar id = className + \"Style\"; //$NON-NLS-1$\n\t\tif (doc.getElementById(id)) { return; }\n\t\tvar animationName = className + \"Animation\"; //$NON-NLS-1$\n\t\tfunction insertListener(evt) {\n\t\t\tif (evt.animationName === animationName) {\n\t\t\t\tvar target = evt.target;\n\t\t\t\tif (typeof target.__DOMReady === \"function\") { //$NON-NLS-1$\n\t\t\t\t\tgetWindow(doc).setTimeout(function() {\n\t\t\t\t\t\ttarget.__DOMReady();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction template(className, animationName) {\n\t\t\tvar props = [\"\", \"-webkit-\", \"-moz-\", \"-ms-\", \"-o-\"]; //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-4$\n\t\t\tvar _frames = \"\", classRule = \"body .\" + className + \" {\\n\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tfor (var i=0; i<props.length; i++) {\n\t\t\t\t_frames +=\n\t\t\t\t\"@\" + props[i] + \"keyframes \" + animationName + \" {\\n\" + //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"from { opacity: 0.99; }\\n\" + //$NON-NLS-1$\n\t\t\t\t\"to { opacity: 1; }\\n\" + //$NON-NLS-1$\n\t\t\t\t\"}\\n\"; //$NON-NLS-1$\n\t\t\t\tclassRule +=\n\t\t\t\tprops[i] + \"animation-duration: 0.001s;\\n\" + //$NON-NLS-1$\n\t\t\t\tprops[i] + \"animation-name: \" + animationName + \";\\n\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tclassRule += \"}\"; //$NON-NLS-1$\n\t\t\treturn _frames + classRule;\n\t\t}\n\t\taddHandler(doc, \"animationstart\", insertListener, false); //$NON-NLS-1$\n\t\taddHandler(doc, \"MSAnimationStart\", insertListener, false);  //$NON-NLS-1$\n\t\taddHandler(doc, \"webkitAnimationStart\", insertListener, false); //$NON-NLS-1$\n\t\tvar style = doc.createElement(\"style\"); //$NON-NLS-1$\n\t\tstyle.id = id;\n\t\tvar head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement; //$NON-NLS-1$\n\t\tstyle.appendChild(doc.createTextNode(template(className, animationName)));\n\t\thead.insertBefore(style, head.firstChild);\n\t}\n\t\n\tvar Animation = textUtil.Animation;\n\t\n\t/** \n\t * Constructs a new Selection object.\n\t * \n\t * @class A Selection represents a range of selected text in the view.\n\t * @name orion.editor.Selection\n\t */\n\tfunction Selection (start, end, caret) {\n\t\t/**\n\t\t * The selection start offset.\n\t\t *\n\t\t * @name orion.editor.Selection#start\n\t\t */\n\t\tthis.start = start;\n\t\t/**\n\t\t * The selection end offset.\n\t\t *\n\t\t * @name orion.editor.Selection#end\n\t\t */\n\t\tthis.end = end;\n\t\t/** @private */\n\t\tthis.caret = caret; //true if the start, false if the caret is at end\n\t\t/** @private */\n\t\tthis._columnX = -1;\n\t}\n\t/** @private */\n\tSelection.compare = function(s1, s2) {\n\t\tif (s1.length !== s2.length) return false;\n\t\tfor (var i = 0; i < s1.length; i++) {\n\t\t\tif (!s1[i].equals(s2[i])) return false;\n\t\t}\n\t\treturn true;\n\t};\n\tSelection.editing = function(selections, back) {\n\t\tvar i;\n\t\tif (back) {\n\t\t\tfor (i = selections.length - 1; i >= 0; i--) {\n\t\t\t\tif (selections[i]._editing) return selections[i];\n\t\t\t}\n\t\t\treturn selections[selections.length - 1];\n\t\t}\n\t\tfor (i = 0; i < selections.length; i++) {\n\t\t\tif (selections[i]._editing) return selections[i];\n\t\t}\n\t\treturn selections[0];\n\t};\n\t/** @private */\n\tSelection.convert = function(selections) {\n\t\tif (selections.length === 1) return selections[0];\n\t\treturn selections;\n\t};\n\t/** @private */\n\tSelection.contains = function(selections, offset) {\n\t\treturn selections.some(function(selection) {\n\t\t\treturn selection.contains(offset);\n\t\t});\n\t};\n\t/** @private */\n\tSelection.merge = function(selections) {\n\t\tif (selections.length <= 1) return selections;\n\t\tselections.sort(function(a, b) {\n\t\t\treturn a.start - b.start;\n\t\t});\n\t\tvar result = [];\n\t\tvar current = selections[0];\n\t\tfor (var i = 1; i < selections.length; i++) {\n\t\t\tif (selections[i].start >= current.end || current._editing || selections[i]._editing) {\n\t\t\t\tresult.push(current);\n\t\t\t\tcurrent = selections[i];\n\t\t\t} else {\n\t\t\t\tcurrent.end = Math.max(current.end, selections[i].end);\n\t\t\t}\n\t\t}\n\t\tresult.push(current);\n\t\treturn result;\n\t};\n\tSelection.prototype = /** @lends orion.editor.Selection.prototype */ {\n\t\t/** @private */\n\t\tclone: function() {\n\t\t\tvar result = new Selection(this.start, this.end, this.caret);\n\t\t\tresult._columnX = this._columnX;\n\t\t\tresult._editing = this._editing;\n\t\t\tresult._docX = this._docX;\n\t\t\treturn result;\n\t\t},\n\t\t/** @private */\n\t\tcontains: function(offset) {\n\t\t\tif (this.start <= offset && offset < this.end) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/** @private */\n\t\tcollapse: function() {\n\t\t\tif (this.caret) {\n\t\t\t\tthis.end = this.start;\n\t\t\t} else {\n\t\t\t\tthis.start = this.end;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\textend: function (offset) {\n\t\t\tif (this.caret) {\n\t\t\t\tthis.start = offset;\n\t\t\t} else {\n\t\t\t\tthis.end = offset;\n\t\t\t}\n\t\t\tif (this.start > this.end) {\n\t\t\t\tvar tmp = this.start;\n\t\t\t\tthis.start = this.end;\n\t\t\t\tthis.end = tmp;\n\t\t\t\tthis.caret = !this.caret;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\tsetCaret: function(offset) {\n\t\t\tthis.start = offset;\n\t\t\tthis.end = offset;\n\t\t\tthis.caret = false;\n\t\t},\n\t\t/** @private */\n\t\tgetCaret: function() {\n\t\t\treturn this.caret ? this.start : this.end;\n\t\t},\n\t\t/** @private */\n\t\tgetAnchor: function() {\n\t\t\treturn this.caret ? this.end : this.start;\n\t\t},\n\t\t/** @private */\n\t\tgetOrientedSelection: function() {\n\t\t\treturn {start: this.getAnchor(), end: this.getCaret()};\n\t\t},\n\t\t/** @private */\n\t\ttoString: function() {\n\t\t\treturn \"start=\" + this.start + \" end=\" + this.end + (this.caret ? \" caret is at start\" : \" caret is at end\"); //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-4$\n\t\t},\n\t\t/** @private */\n\t\tisEmpty: function() {\n\t\t\treturn this.start === this.end;\n\t\t},\n\t\t/** @private */\n\t\tequals: function(object) {\n\t\t\treturn this.caret === object.caret && this.start === object.start && this.end === object.end && this._editing === object._editing;\n\t\t}\n\t};\n\t/** @private */\n\tfunction DOMSelection (view) {\n\t\tthis._view = view;\n\t\tthis._divs = [];\n\t\tvar _parent = view._clipDiv || view._rootDiv;\n\t\tfor (var i=0; i<3; i++) {\n\t\t\tvar div = view._createSelectionDiv();\n\t\t\t_parent.appendChild(div);\n\t\t\tthis._divs.push(div);\n\t\t}\n\t}\n\tDOMSelection.prototype = /** @lends orion.editor.DOMSelection.prototype */ {\n\t\t/** @private */\n\t\tdestroy: function() {\n\t\t\tif (!this._divs) return;\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t});\n\t\t\tthis._divs = null;\n\t\t},\n\t\t/** @private */\n\t\tsetPrimary: function(enabled) {\n\t\t\tthis.primary = enabled;\n\t\t},\n\t\t/** @private */\n\t\tupdate: function() {\n\t\t\tvar view = this._view;\n\t\t\tvar primary = this.primary;\n\t\t\tvar focused = view._hasFocus;\n\t\t\tvar visible = view._cursorVisible;\n\t\t\tvar cursor = !this.primary && this._selection && this._selection.isEmpty();\n\t\t\tvar className;\n\t\t\tif (cursor) {\n\t\t\t\tclassName = \"textviewSelectionCaret\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tclassName = focused ? \"textviewSelection\" : \"textviewSelectionUnfocused\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tthis._divs[0].style.visibility = (cursor && visible && focused) || !cursor ? \"visible\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._divs[0].style.zIndex = visible && cursor ? \"2\" : \"0\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.className = className;\n\t\t\t\tif (util.isWebkit < 537.36 && primary) {\n\t\t\t\t\tdiv.style.background = focused ? \"transparent\" : \"\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/** @private */\n\t\tsetSelection: function (selection) {\n\t\t\tthis._selection = selection;\n\t\t\tthis.update();\n\t\t\tvar view = this._view;\n\t\t\tvar model = view._model;\n\t\t\tvar startLine = model.getLineAtOffset(selection.start);\n\t\t\tvar endLine = model.getLineAtOffset(selection.end);\n\t\t\tvar firstNode = view._getLineNext();\n\t\t\t/*\n\t\t\t* Bug in Firefox. For some reason, after a update page sometimes the \n\t\t\t* firstChild returns null incorrectly. The fix is to ignore show selection.\n\t\t\t*/\n\t\t\tif (!firstNode) { return; }\n\t\t\tvar lastNode = view._getLinePrevious();\n\t\t\t\n\t\t\tvar topNode, bottomNode, topOffset, bottomOffset;\n\t\t\tif (startLine < firstNode.lineIndex) {\n\t\t\t\ttopNode = firstNode;\n\t\t\t\ttopOffset = model.getLineStart(firstNode.lineIndex);\n\t\t\t} else if (startLine > lastNode.lineIndex) {\n\t\t\t\ttopNode = lastNode;\n\t\t\t\ttopOffset = model.getLineStart(lastNode.lineIndex);\n\t\t\t} else {\n\t\t\t\ttopNode = view._getLineNode(startLine);\n\t\t\t\ttopOffset = selection.start;\n\t\t\t}\n\n\t\t\tif (endLine < firstNode.lineIndex) {\n\t\t\t\tbottomNode = firstNode;\n\t\t\t\tbottomOffset = model.getLineStart(firstNode.lineIndex);\n\t\t\t} else if (endLine > lastNode.lineIndex) {\n\t\t\t\tbottomNode = lastNode;\n\t\t\t\tbottomOffset = model.getLineStart(lastNode.lineIndex);\n\t\t\t} else {\n\t\t\t\tbottomNode = view._getLineNode(endLine);\n\t\t\t\tbottomOffset = selection.end;\n\t\t\t}\n\t\t\tthis._setDOMSelection(topNode, topOffset, bottomNode, bottomOffset, selection.caret);\n\t\t},\n\t\t/** @private */\n\t\t_setDOMSelection: function (startNode, startOffset, endNode, endOffset, startCaret) {\n\t\t\tthis._setDOMFullSelection(startNode, startOffset, endNode, endOffset);\n\t\t\tif (!this.primary) { return; }\n\t\t\tvar view = this._view;\n\t\t\tvar start = startNode._line.getNodeOffset(startOffset);\n\t\t\tvar end = endNode._line.getNodeOffset(endOffset);\n\t\t\tif (!start.node || !end.node) return;\n\t\t\tvar range;\n\t\t\tvar win = view._getWindow();\n\t\t\tvar doc = view._parent.ownerDocument;\n\t\t\tif (win.getSelection) {\n\t\t\t\t//W3C\n\t\t\t\tvar sel = win.getSelection();\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(start.node, start.offset);\n\t\t\t\trange.setEnd(end.node, end.offset);\n\t\t\t\tif (view._hasFocus && (\n\t\t\t\t\tsel.anchorNode !== start.node || sel.anchorOffset !== start.offset ||\n\t\t\t\t\tsel.focusNode !== end.node || sel.focusOffset !== end.offset ||\n\t\t\t\t\tsel.anchorNode !== end.node || sel.anchorOffset !== end.offset ||\n\t\t\t\t\tsel.focusNode !== start.node || sel.focusOffset !== start.offset))\n\t\t\t\t{\n\t\t\t\t\tview._anchorNode = start.node;\n\t\t\t\t\tview._anchorOffset = start.offset;\n\t\t\t\t\tview._focusNode = end.node;\n\t\t\t\t\tview._focusOffset = end.offset;\n\t\t\t\t\tview._ignoreSelect = false;\n\t\t\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\tview._ignoreSelect = true;\n\t\t\t\t}\n\t\t\t\tif (view._cursorDiv) {\n\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\tif (startCaret) {\n\t\t\t\t\t\trange.setStart(start.node, start.offset);\n\t\t\t\t\t\trange.setEnd(start.node, start.offset);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trange.setStart(end.node, end.offset);\n\t\t\t\t\t\trange.setEnd(end.node, end.offset);\n\t\t\t\t\t}\n\t\t\t\t\tvar rect = range.getClientRects()[0];\n\t\t\t\t\tvar cursorParent = view._cursorDiv.parentNode;\n\t\t\t\t\tvar clientRect = cursorParent.getBoundingClientRect();\n\t\t\t\t\tif (rect && clientRect) {\n\t\t\t\t\t\tview._cursorDiv.style.top = (rect.top - clientRect.top + cursorParent.scrollTop) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\tview._cursorDiv.style.left = (rect.left - clientRect.left + cursorParent.scrollLeft) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (doc.selection) {\n\t\t\t\tif (!view._hasFocus) { return; }\n\t\t\t\t//IE < 9\n\t\t\t\tvar body = doc.body;\n\n\t\t\t\t/*\n\t\t\t\t* Bug in IE. For some reason when text is deselected the overflow\n\t\t\t\t* selection at the end of some lines does not get redrawn.  The\n\t\t\t\t* fix is to create a DOM element in the body to force a redraw.\n\t\t\t\t*/\n\t\t\t\tvar child = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tbody.appendChild(child);\n\t\t\t\tbody.removeChild(child);\n\t\t\t\t\n\t\t\t\trange = body.createTextRange();\n\t\t\t\trange.moveToElementText(start.node.parentNode);\n\t\t\t\trange.moveStart(\"character\", start.offset); //$NON-NLS-1$\n\t\t\t\tvar endRange = body.createTextRange();\n\t\t\t\tendRange.moveToElementText(end.node.parentNode);\n\t\t\t\tendRange.moveStart(\"character\", end.offset); //$NON-NLS-1$\n\t\t\t\trange.setEndPoint(\"EndToStart\", endRange); //$NON-NLS-1$\n\t\t\t\tview._ignoreSelect = false;\n\t\t\t\trange.select();\n\t\t\t\tview._ignoreSelect = true;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\t_setDOMFullSelection: function(startNode, startOffset, endNode, endOffset) {\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.style.width = div.style.height = \"0px\"; //$NON-NLS-1$\n\t\t\t});\n\t\t\tvar view = this._view;\n\t\t\tif (!view._fullSelection) { return; }\n\t\t\tif (util.isIOS) { return; }\n\t\t\tif (startNode === endNode && startOffset === endOffset && this.primary) { return; }\n\t\t\tvar viewPad = view._getViewPadding();\n\t\t\tvar clientRect = view._clientDiv.getBoundingClientRect();\n\t\t\tvar viewRect = view._viewDiv.getBoundingClientRect();\n\t\t\tvar left = viewRect.left + viewPad.left;\n\t\t\tvar right = clientRect.right;\n\t\t\tvar _top = viewRect.top + viewPad.top;\n\t\t\tvar bottom = clientRect.bottom;\n\t\t\tvar hd = 0, vd = 0;\n\t\t\tif (view._clipDiv) {\n\t\t\t\tvar clipRect = view._clipDiv.getBoundingClientRect();\n\t\t\t\thd = clipRect.left - view._clipDiv.scrollLeft;\n\t\t\t\tvd = clipRect.top;\n\t\t\t} else {\n\t\t\t\tvar rootpRect = view._rootDiv.getBoundingClientRect();\n\t\t\t\thd = rootpRect.left;\n\t\t\t\tvd = rootpRect.top;\n\t\t\t}\n\t\t\tview._ignoreDOMSelection = true;\n\t\t\tvar startLine = new TextLine(view, startNode.lineIndex, startNode);\n\t\t\tvar startRect = startLine.getBoundingClientRect(startOffset, false);\n\t\t\tvar l = startRect.left, endLine, endRect;\n\t\t\tif (startNode === endNode && startOffset === endOffset) {\n\t\t\t\tendLine = startLine;\n\t\t\t\tendRect = startRect;\n\t\t\t} else {\n\t\t\t\tendLine = new TextLine(view, endNode.lineIndex, endNode);\n\t\t\t\tendRect = endLine.getBoundingClientRect(endOffset, false);\n\t\t\t}\n\t\t\tvar r = endRect.left;\n\t\t\tview._ignoreDOMSelection = false;\n\t\t\tvar sel1Div = this._divs[0];\n\t\t\tvar sel1Left = Math.min(right, Math.max(left, l));\n\t\t\tvar sel1Top = Math.min(bottom, Math.max(_top, startRect.top));\n\t\t\tvar sel1Right = right;\n\t\t\tvar sel1Bottom = Math.min(bottom, Math.max(_top, startRect.bottom));\n\t\t\tsel1Div.style.left = (sel1Left - hd) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.top = (sel1Top - vd) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.width = Math.max(0, sel1Right - sel1Left) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.height = Math.max(0, sel1Bottom - sel1Top) + \"px\"; //$NON-NLS-1$\n\t\t\tif (startNode.lineIndex === endNode.lineIndex) {\n\t\t\t\tsel1Right = Math.min(r, right);\n\t\t\t\tsel1Div.style.width = Math.max(this.primary ? 0 : 1, sel1Right - sel1Left) + \"px\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tvar sel3Left = left;\n\t\t\t\tvar sel3Top = Math.min(bottom, Math.max(_top, endRect.top));\n\t\t\t\tvar sel3Right = Math.min(right, Math.max(left, r));\n\t\t\t\tvar sel3Bottom = Math.min(bottom, Math.max(_top, endRect.bottom));\n\t\t\t\tvar sel3Div = this._divs[2];\n\t\t\t\tsel3Div.style.left = (sel3Left - hd) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.top = (sel3Top - vd) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.width = Math.max(0, sel3Right - sel3Left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.height = Math.max(0, sel3Bottom - sel3Top) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (Math.abs(startNode.lineIndex - endNode.lineIndex) > 1) {\n\t\t\t\t\tvar sel2Div = this._divs[1];\n\t\t\t\t\tsel2Div.style.left = (left - hd)  + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.top = (sel1Bottom - vd) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.width = Math.max(0, right - left) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.height = Math.max(0, sel3Top - sel1Bottom) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t/** @private */\n\tfunction TextRect (rect) {\n\t\tthis.left = rect.left;\n\t\tthis.top = rect.top;\n\t\tthis.right = rect.right;\n\t\tthis.bottom = rect.bottom;\n\t}\n\tTextRect.prototype = /** @lends orion.editor.TextRect.prototype */ {\n\t\t/** @private */\n\t\ttoString: function() {\n\t\t\treturn \"{l=\" + this.left + \", t=\" + this.top + \", r=\" + this.right + \", b=\" + this.bottom + \"}\"; //$NON-NLS-4$ //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t}\n\t};\n\t/** \n\t * Constructs a new TextLine object.\n\t * \n\t * @class A TextLine represents a line of text in the view.\n\t * @name orion.editor.TextLine\n\t * @private\n\t */\n\tfunction TextLine (view, lineIndex, lineDiv) {\n\t\t/**\n\t\t * The view.\n\t\t *\n\t\t * @name orion.editor.TextLine#view\n\t\t * @private\n\t\t */\n\t\tthis.view = view;\n\t\t/**\n\t\t * The line index.\n\t\t *\n\t\t * @name orion.editor.TextLine#lineIndex\n\t\t * @private\n\t\t */\n\t\tthis.lineIndex = lineIndex;\n\t\t\n\t\tthis._lineDiv = lineDiv;\n\t}\n\tTextLine.prototype = /** @lends orion.editor.TextLine.prototype */ {\n\t\t/** @private */\n\t\tcreate: function(_parent, div, drawing) {\n\t\t\tif (this._lineDiv) { return; }\n\t\t\tthis.drawing = drawing;\n\t\t\tvar child = this._lineDiv = this._createLine(_parent, div, this.lineIndex);\n\t\t\tchild._line = this;\n\t\t\treturn child;\n\t\t},\n\t\t_createLine: function(_parent, div, lineIndex) {\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar e = {type:\"LineStyle\", textView: view, lineIndex: lineIndex, lineText: lineText, lineStart: lineStart}; //$NON-NLS-1$\n\t\t\tview.onLineStyle(e);\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar lineDiv = div || util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tif (!div || !compare(div.viewStyle, e.style)) {\n\t\t\t\tapplyStyle(e.style, lineDiv, div);\n\t\t\t\tif (div) { div._trim = null; }\n\t\t\t\tlineDiv.viewStyle = e.style;\n\t\t\t}\n\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\n\t\t\tif (div && lineDiv.viewLineText === lineText && compare(e.ranges, lineDiv.viewRanges)) {\n\t\t\t\treturn lineDiv;\n\t\t\t}\n\t\t\tlineDiv.viewRanges = e.ranges;\n\t\t\tlineDiv.viewLineText = lineText;\n\t\t\t\n\t\t\tvar ranges = [];\n\t\t\tvar data = {tabOffset: 0, ranges: ranges};\n\t\t\tthis._createRanges(e.ranges, lineText, 0, lineText.length, lineStart, data);\n\t\t\t\n\t\t\t/*\n\t\t\t* A trailing span with a whitespace is added for three different reasons:\n\t\t\t* 1. Make sure the height of each line is the largest of the default font\n\t\t\t* in normal, italic, bold, and italic-bold.\n\t\t\t* 2. When full selection is off, Firefox, Opera and IE9 do not extend the \n\t\t\t* selection at the end of the line when the line is fully selected. \n\t\t\t* 3. The height of a div with only an empty span is zero.\n\t\t\t*/\n\t\t\tvar c = \" \"; //$NON-NLS-1$\n\t\t\tif (!view._fullSelection && util.isIE < 9) {\n\t\t\t\t/* \n\t\t\t\t* IE8 already selects extra space at end of a line fully selected,\n\t\t\t\t* adding another space at the end of the line causes the selection \n\t\t\t\t* to look too big. The fix is to use a zero-width space (\\uFEFF) instead. \n\t\t\t\t*/\n\t\t\t\tc = \"\\uFEFF\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar range = {text: c, style: view._metrics.largestFontStyle, ignoreChars: 1};\n\t\t\tif (ranges.length === 0 || !ranges[ranges.length - 1].style || ranges[ranges.length - 1].style.tagName !== \"div\") { //$NON-NLS-1$\n\t\t\t\tranges.push(range);\n\t\t\t} else {\n\t\t\t\tranges.splice(ranges.length - 1, 0, range);\n\t\t\t}\n\t\t\n\t\t\tvar span, style, oldSpan, oldStyle, text, oldText, end = 0, oldEnd = 0, next, i;\n\t\t\tif (util.isFirefox && lineText.length > 2000) {\n\t\t\t\tif (div) {\n\t\t\t\t\tlineDiv.innerHTML = \"\";\n\t\t\t\t\tdiv.lineWidth = undefined;\n\t\t\t\t}\n\t\t\t\tvar frag = doc.createDocumentFragment();\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\trange = ranges[i];\n\t\t\t\t\ttext = range.text;\n\t\t\t\t\tstyle = range.style;\n\t\t\t\t\tspan = this._createSpan(lineDiv, text, style, range.ignoreChars);\n\t\t\t\t\tfrag.appendChild(span);\n\t\t\t\t}\n\t\t\t\tlineDiv.appendChild(frag);\n\t\t\t} else {\n\t\t\t\tvar changeCount, changeStart;\n\t\t\t\tif (div) {\n\t\t\t\t\tvar modelChangedEvent = div.modelChangedEvent;\n\t\t\t\t\tif (modelChangedEvent) {\n\t\t\t\t\t\tif (modelChangedEvent.removedLineCount === 0 && modelChangedEvent.addedLineCount === 0) {\n\t\t\t\t\t\t\tchangeStart = modelChangedEvent.start - lineStart;\n\t\t\t\t\t\t\tchangeCount = modelChangedEvent.addedCharCount - modelChangedEvent.removedCharCount;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchangeStart = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiv.modelChangedEvent = undefined;\n\t\t\t\t\t}\n\t\t\t\t\toldSpan = div.firstChild;\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\trange = ranges[i];\n\t\t\t\t\ttext = range.text;\n\t\t\t\t\tend += text.length;\n\t\t\t\t\tstyle = range.style;\n\t\t\t\t\tif (oldSpan) {\n\t\t\t\t\t\toldText = oldSpan.firstChild.data;\n\t\t\t\t\t\toldStyle = oldSpan.viewStyle;\n\t\t\t\t\t\tif (oldText === text && compare(style, oldStyle)) {\n\t\t\t\t\t\t\toldEnd += oldText.length;\n\t\t\t\t\t\t\toldSpan._rectsCache = undefined;\n\t\t\t\t\t\t\tspan = oldSpan = oldSpan.nextSibling;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twhile (oldSpan) {\n\t\t\t\t\t\t\t\tif (changeStart !== -1) {\n\t\t\t\t\t\t\t\t\tvar spanEnd = end;\n\t\t\t\t\t\t\t\t\tif (spanEnd >= changeStart) {\n\t\t\t\t\t\t\t\t\t\tspanEnd -= changeCount;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar t = oldSpan.firstChild.data;\n\t\t\t\t\t\t\t\t\tvar len = t ? t.length : 0;\n\t\t\t\t\t\t\t\t\tif (oldEnd + len > spanEnd) { break; }\n\t\t\t\t\t\t\t\t\toldEnd += len;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnext = oldSpan.nextSibling;\n\t\t\t\t\t\t\t\tlineDiv.removeChild(oldSpan);\n\t\t\t\t\t\t\t\toldSpan = next;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspan = this._createSpan(lineDiv, text, style, range.ignoreChars);\n\t\t\t\t\tif (oldSpan) {\n\t\t\t\t\t\tlineDiv.insertBefore(span, oldSpan);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineDiv.appendChild(span);\n\t\t\t\t\t}\n\t\t\t\t\tif (div) {\n\t\t\t\t\t\tdiv.lineWidth = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (div) {\n\t\t\t\t\tvar tmp = span ? span.nextSibling : null;\n\t\t\t\t\twhile (tmp) {\n\t\t\t\t\t\tnext = tmp.nextSibling;\n\t\t\t\t\t\tdiv.removeChild(tmp);\n\t\t\t\t\t\ttmp = next;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!lineDiv.parentNode) {\n\t\t\t\t_parent.appendChild(lineDiv);\n\t\t\t}\n\t\t\treturn lineDiv;\n\t\t},\n\t\t_createRanges: function(ranges, text, start, end, lineStart, data) {\n\t\t\tif (start > end) { return; }\n\t\t\tif (ranges) {\n\t\t\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\t\t\tvar range = ranges[i];\n\t\t\t\t\tif (range.end < lineStart + start) { continue; }\n\t\t\t\t\tvar styleStart = Math.max(lineStart + start, range.start) - lineStart;\n\t\t\t\t\tif (styleStart > end) { break; }\n\t\t\t\t\tvar styleEnd = Math.min(lineStart + end, range.end) - lineStart;\n\t\t\t\t\tif (styleStart <= styleEnd) {\n\t\t\t\t\t\tstyleStart = Math.max(start, styleStart);\n\t\t\t\t\t\tstyleEnd = Math.min(end, styleEnd);\n\t\t\t\t\t\tif (start < styleStart) {\n\t\t\t\t\t\t\tthis._createRange(text, start, styleStart, null, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!range.style || !range.style.unmergeable) {\n\t\t\t\t\t\t\twhile (i + 1 < ranges.length && ranges[i + 1].start - lineStart === styleEnd && compare(range.style, ranges[i + 1].style)) {\n\t\t\t\t\t\t\t\trange = ranges[i + 1];\n\t\t\t\t\t\t\t\tstyleEnd = Math.min(lineStart + end, range.end) - lineStart;\n\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._createRange(text, styleStart, styleEnd, range.style, data);\n\t\t\t\t\t\tstart = styleEnd;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\tthis._createRange(text, start, end, null, data);\n\t\t\t}\n\t\t},\n\t\t_createRange: function(text, start, end, style, data) {\n\t\t\tif (start > end) { return; }\n\t\t\tvar tabSize = this.view._customTabSize, range;\n\t\t\tvar bidiStyle = {tagName:\"span\", bidi:true, style:{unicodeBidi:\"embed\", direction:\"ltr\"}};\n\t\t\tvar bidiRange = {text: \"\\u200E\", style: bidiStyle}; // We ensure segments flow from left to right by adding a LRM marker \\u200E\n\t\t\tif (tabSize && tabSize !== 8) {\n\t\t\t\tvar tabIndex = text.indexOf(\"\\t\", start); //$NON-NLS-1$\n\t\t\t\twhile (tabIndex !== -1 && tabIndex < end) {\n\t\t\t\t\tif (start < tabIndex) {\n\t\t\t\t\t\trange = {text: text.substring(start, tabIndex), style: style};\n\t\t\t\t\t\trange = bidiUtils.enforceTextDir(range);\n\t\t\t\t\t\tdata.ranges.push(range);\n\t\t\t\t\t\tif (bidiUtils.isBidiEnabled()) {\n\t\t\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t\t\t}\n\t\t\t\t\tvar spacesCount = tabSize - (data.tabOffset % tabSize);\n\t\t\t\t\tif (spacesCount > 0) {\n\t\t\t\t\t\t//TODO hack to preserve tabs in getDOMText()\n\t\t\t\t\t\tvar spaces = \"\\u00A0\"; //$NON-NLS-1$\n\t\t\t\t\t\tfor (var i = 1; i < spacesCount; i++) {\n\t\t\t\t\t\t\tspaces += \" \"; //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trange = {text: spaces, style: style, ignoreChars: spacesCount - 1};\n\t\t\t\t\t\tdata.ranges.push(range);\n\t\t\t\t\t\tif (bidiUtils.isBidiEnabled()) {\n\t\t\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t\t\t}\n\t\t\t\t\tstart = tabIndex + 1;\n\t\t\t\t\tif (start === end) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttabIndex = text.indexOf(\"\\t\", start); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (start <= end) {\n\t\t\t\trange = {text: text.substring(start, end), style: style};\n\t\t\t\trange = bidiUtils.enforceTextDir(range);\n\t\t\t\tdata.ranges.push(range);\n\t\t\t\tif (bidiUtils.isBidiEnabled()) {\n\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t}\n\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t}\n\t\t},\n\t\t_createSpan: function(_parent, text, style, ignoreChars) {\n\t\t\tvar view = this.view;\n\t\t\tvar tagName = \"span\"; //$NON-NLS-1$\n\t\t\tif (style && style.tagName) {\n\t\t\t\ttagName = style.tagName.toLowerCase();\n\t\t\t}\n\t\t\tvar isLink = tagName === \"a\"; //$NON-NLS-1$\n\t\t\tif (isLink) { this.hasLink = true; }\n\t\t\tif (isLink && !view._linksVisible) {\n\t\t\t\ttagName = \"span\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar child = util.createElement(_parent.ownerDocument, tagName);\n\t\t\tchild.appendChild(doc.createTextNode(style && style.text ? style.text : text));\n\t\t\tif (style && style.html) {\n\t\t\t\tchild.innerHTML = style.html;\n\t\t\t\tchild.ignore = true;\n\t\t\t} else if (style && style.node) {\n\t\t\t\tif (this.drawing) {\n\t\t\t\t\tchild.appendChild(style.node);\n\t\t\t\t} else {\n\t\t\t\t\tchild.appendChild(style.node.cloneNode(true));\n\t\t\t\t}\n\t\t\t\tchild.ignore = true;\n\t\t\t} else if (style && style.bidi) {\t\t\t\t\n\t\t\t\tchild.ignore = true;\n\t\t\t}\n\t\t\tapplyStyle(style, child);\n\t\t\tif (tagName === \"a\") { //$NON-NLS-1$\n\t\t\t\tvar win = view._getWindow();\n\t\t\t\taddHandler(child, \"click\", function(e) { return view._handleLinkClick(e ? e : win.event); }, false); //$NON-NLS-1$\n\t\t\t}\n\t\t\tchild.viewStyle = style;\n\t\t\tif (ignoreChars) {\n\t\t\t\tchild.ignoreChars = ignoreChars;\n\t\t\t}\n\t\t\treturn child;\n\t\t},\n\t\t_ensureCreated: function() {\n\t\t\tif (this._lineDiv) { return this._lineDiv; }\n\t\t\treturn (this._createdDiv = this.create(this.view._clientDiv, null));\n\t\t},\n\t\t/** @private */\n\t\tgetBoundingClientRect: function(offset, absolute) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar view = this.view;\n\t\t\tif (offset === undefined) {\n\t\t\t\treturn this._getLineBoundingClientRect(child, true);\n\t\t\t}\n\t\t\tvar model = view._model;\n\t\t\tvar doc = child.ownerDocument;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar result = null;\n\t\t\tif (offset < model.getLineEnd(lineIndex)) {\n\t\t\t\tvar lineOffset = model.getLineStart(lineIndex);\n\t\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\t\tvar nodeLength = this._nodeLength(lineChild); \n\t\t\t\t\tif (lineOffset + nodeLength > offset) {\n\t\t\t\t\t\tvar index = offset - lineOffset;\n\t\t\t\t\t\tvar range;\n\t\t\t\t\t\tif (textNode.length === 1) {\n\t\t\t\t\t\t\tresult = new TextRect(lineChild.getBoundingClientRect());\n\t\t\t\t\t\t} else if (view._isRangeRects) {\n\t\t\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\t\t\trange.setStart(textNode, index);\n\t\t\t\t\t\t\trange.setEnd(textNode, index + 1);\n\t\t\t\t\t\t\tresult = new TextRect(range.getBoundingClientRect());\n\t\t\t\t\t\t} else if (util.isIE) {\n\t\t\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.collapse();\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t* Bug in IE8. TextRange.getClientRects() and TextRange.getBoundingClientRect() fails\n\t\t\t\t\t\t\t* if the line child is not the first element in the line and if the start offset is 0. \n\t\t\t\t\t\t\t* The fix is to use Node.getClientRects() left edge instead.\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tvar fixIE8 = index === 0 && util.isIE === 8;\n\t\t\t\t\t\t\tif (fixIE8) { index = 1; }\n\t\t\t\t\t\t\trange.moveEnd(\"character\", index + 1); //$NON-NLS-1$\n\t\t\t\t\t\t\trange.moveStart(\"character\", index); //$NON-NLS-1$\n\t\t\t\t\t\t\tresult = new TextRect(range.getBoundingClientRect());\n\t\t\t\t\t\t\tif (fixIE8) {\n\t\t\t\t\t\t\t\tresult.left = lineChild.getClientRects()[0].left;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar text = textNode.data;\n\t\t\t\t\t\t\tlineChild.removeChild(textNode);\n\t\t\t\t\t\t\tlineChild.appendChild(doc.createTextNode(text.substring(0, index)));\n\t\t\t\t\t\t\tvar span = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tspan.appendChild(doc.createTextNode(text.substring(index, index + 1)));\n\t\t\t\t\t\t\tlineChild.appendChild(span);\n\t\t\t\t\t\t\tlineChild.appendChild(doc.createTextNode(text.substring(index + 1)));\n\t\t\t\t\t\t\tresult = new TextRect(span.getBoundingClientRect());\n\t\t\t\t\t\t\tlineChild.innerHTML = \"\";\n\t\t\t\t\t\t\tlineChild.appendChild(textNode);\n\t\t\t\t\t\t\tif (!this._createdDiv) {\n\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t * Removing the element node that holds the selection start or end\n\t\t\t\t\t\t\t\t * causes the selection to be lost. The fix is to detect this case\n\t\t\t\t\t\t\t\t * and restore the selection. \n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\tvar s = view._getSelections()[0];\n\t\t\t\t\t\t\t\tif ((lineOffset <= s.start && s.start < lineOffset + nodeLength) ||  (lineOffset <= s.end && s.end < lineOffset + nodeLength)) {\n\t\t\t\t\t\t\t\t\tview._updateDOMSelection();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (util.isIE < 11) {\n\t\t\t\t\t\t\tvar win = getWindow(child.ownerDocument);\n\t\t\t\t\t\t\tvar xFactor = win.screen.logicalXDPI / win.screen.deviceXDPI;\n\t\t\t\t\t\t\tvar yFactor = win.screen.logicalYDPI / win.screen.deviceYDPI;\n\t\t\t\t\t\t\tresult.left = result.left * xFactor;\n\t\t\t\t\t\t\tresult.right = result.right * xFactor;\n\t\t\t\t\t\t\tresult.top = result.top * yFactor;\n\t\t\t\t\t\t\tresult.bottom = result.bottom * yFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tlineOffset += nodeLength;\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar rect = this.getBoundingClientRect();\n\t\t\tif (!result) {\n\t\t\t\tif (view._wrapMode) {\n\t\t\t\t\tvar rects = this.getClientRects();\n\t\t\t\t\tresult = rects[rects.length - 1];\n\t\t\t\t\tresult.left = result.right;\n\t\t\t\t\tresult.left += rect.left;\n\t\t\t\t\tresult.top += rect.top;\n\t\t\t\t\tresult.right += rect.left;\n\t\t\t\t\tresult.bottom += rect.top;\n\t\t\t\t} else {\n\t\t\t\t\tresult = new TextRect(rect);\n\t\t\t\t\tresult.left = result.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (absolute || absolute === undefined) {\n\t\t\t\tresult.left -= rect.left;\n\t\t\t\tresult.top -= rect.top;\n\t\t\t\tresult.right -= rect.left;\n\t\t\t\tresult.bottom -= rect.top;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tforEach: function(callback) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar lineChild = child.firstChild;\n\t\t\twhile (lineChild) {\n\t\t\t\tvar next = lineChild.nextSibling;\n\t\t\t\tif (!lineChild.ignore) {\n\t\t\t\t\tif (!callback.call(this, lineChild)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineChild = next;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\t_getClientRects: function(element, parentRect) {\n\t\t\tvar rects, newRects, rect, i;\n\t\t\tif (!element._rectsCache) {\n\t\t\t\trects = element.getClientRects();\n\t\t\t\tnewRects = newArray(rects.length);\n\t\t\t\tfor (i = 0; i<rects.length; i++) {\n\t\t\t\t\trect = newRects[i] = new TextRect(rects[i]);\n\t\t\t\t\trect.left -= parentRect.left;\n\t\t\t\t\trect.top -= parentRect.top;\n\t\t\t\t\trect.right -= parentRect.left;\n\t\t\t\t\trect.bottom -= parentRect.top;\n\t\t\t\t}\n\t\t\t\telement._rectsCache = newRects;\n\t\t\t}\n\t\t\trects = element._rectsCache;\n\t\t\tnewRects = [rects.length];\n\t\t\tfor (i = 0; i<rects.length; i++) {\n\t\t\t\tnewRects[i] = new TextRect(rects[i]);\n\t\t\t}\n\t\t\treturn newRects;\n\t\t},\n\t\tgetClientRects: function(lineIndex) {\n\t\t\tif (!this.view._wrapMode) { return [this.getBoundingClientRect()]; }\n\t\t\tvar child = this._ensureCreated();\n\t\t\t//TODO [perf] cache rects\n\t\t\tvar result = [];\n\t\t\tvar parentRect = child.getBoundingClientRect();\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar rects = this._getClientRects(lineChild, parentRect);\n\t\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\t\tvar rect = rects[i], j, r;\n\t\t\t\t\tif (rect.top === rect.bottom) { continue; }\n\t\t\t\t\tvar center = rect.top + (rect.bottom - rect.top) / 2;\n\t\t\t\t\tfor (j = 0; j < result.length; j++) {\n\t\t\t\t\t\tr = result[j];\n\t\t\t\t\t\tif ((r.top <= center && center < r.bottom)) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (j === result.length) {\n\t\t\t\t\t\tresult.push(rect);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (rect.left < r.left) { r.left = rect.left; }\n\t\t\t\t\t\tif (rect.top < r.top) { r.top = rect.top; }\n\t\t\t\t\t\tif (rect.right > r.right) { r.right = rect.right; }\n\t\t\t\t\t\tif (rect.bottom > r.bottom) { r.bottom = rect.bottom; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tif (lineIndex !== undefined) {\n\t\t\t\treturn result[lineIndex];\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/** @private */\n\t\t_getLineBoundingClientRect: function (child, noTrim) {\n\t\t\tvar rect = new TextRect(child.getBoundingClientRect());\n\t\t\tif (this.view._wrapMode) {\n\t\t\t} else {\n\t\t\t\trect.right = rect.left;\n\t\t\t\tvar lastChild = child.lastChild;\n\t\t\t\t//Remove any artificial trailing whitespace in the line\n\t\t\t\twhile (lastChild && lastChild.ignoreChars === lastChild.firstChild.length) {\n\t\t\t\t\tlastChild = lastChild.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (lastChild) {\n\t\t\t\t\tvar lastRect = lastChild.getBoundingClientRect();\n\t\t\t\t\trect.right = lastRect.right + getLineTrim(child).right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (noTrim) {\n\t\t\t\tvar padding = getLineTrim(child);\n\t\t\t\trect.left = rect.left + padding.left;\n\t\t\t\trect.right = rect.right - padding.right;\n\t\t\t}\n\t\t\treturn rect;\n\t\t},\n\t\t/** @private */\n\t\tgetLineCount: function () {\n\t\t\tif (!this.view._wrapMode) { return 1; }\n\t\t\treturn this.getClientRects().length;\n\t\t},\n\t\t/** @private */\n\t\tgetLineIndex: function(offset) {\n\t\t\tif (!this.view._wrapMode) { return 0; }\n\t\t\tvar rects = this.getClientRects();\n\t\t\tvar rect = this.getBoundingClientRect(offset);\n\t\t\tvar center = rect.top + ((rect.bottom - rect.top) / 2);\n\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\tif (rects[i].top <= center && center < rects[i].bottom) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rects.length - 1;\n\t\t},\n\t\t/** @private */\n\t\tgetLineStart: function (lineIndex) {\n\t\t\tif (!this.view._wrapMode || lineIndex === 0) {\n\t\t\t\treturn this.view._model.getLineStart(this.lineIndex);\n\t\t\t}\n\t\t\tvar rects = this.getClientRects();\n\t\t\treturn this.getOffset(rects[lineIndex].left + 1, rects[lineIndex].top + 1);\n\t\t},\n\t\t_nodeLength: function(lineChild) {\n\t\t\tif (!lineChild || lineChild.ignore) return 0;\n\t\t\tvar len = lineChild.firstChild.length; \n\t\t\tif (lineChild.ignoreChars) {\n\t\t\t\tlen -= lineChild.ignoreChars;\n\t\t\t}\n\t\t\treturn len;\n\t\t},\n\t\tgetModelOffset: function(node, offset) {\n\t\t\tif (!node) { return 0; }\n\t\t\tvar lineOffset = 0;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\tif (textNode === node) {\n\t\t\t\t\tif (lineChild.ignoreChars) { lineOffset -= lineChild.ignoreChars; }\n\t\t\t\t\tlineOffset += offset;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (lineChild.ignoreChars) { lineOffset -= lineChild.ignoreChars; }\n\t\t\t\tlineOffset += textNode.data.length;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn Math.max(0, lineOffset) + this.view._model.getLineStart(this.lineIndex);\n\t\t},\n\t\tgetNodeOffset: function(modelOffset) {\n\t\t\tvar offset = 0;\n\t\t\tvar lineNode, lineNodeOffset;\n\t\t\tvar model = this.view._model;\n\t\t\tvar lineStart = model.getLineStart(this.lineIndex);\n\t\t\tvar lineOffset = modelOffset - lineStart;\n\t\t\tvar end = model.getLineEnd(this.lineIndex) - lineStart;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar node = lineChild.firstChild;\n\t\t\t\tvar nodeLength = this._nodeLength(lineChild);\n\t\t\t\tif (nodeLength + offset > lineOffset || offset + nodeLength >= end) {\n\t\t\t\t\tlineNode = node;\n\t\t\t\t\tlineNodeOffset = lineOffset - offset;\n\t\t\t\t\tif (lineChild.ignoreChars && nodeLength > 0 && lineNodeOffset === nodeLength) {\n\t\t\t\t\t\tlineNodeOffset += lineChild.ignoreChars; \n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\toffset += nodeLength;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn {node: lineNode, offset: lineNodeOffset};\n\t\t},\n\t\tgetText: function(offsetNode) {\n\t\t\tvar text = \"\", offset = 0;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar textNode;\n\t\t\t\tif (lineChild.ignoreChars) {\n\t\t\t\t\ttextNode = lineChild.lastChild;\n\t\t\t\t\tvar ignored = 0, childText = [], childOffset = -1;\n\t\t\t\t\twhile (textNode) {\n\t\t\t\t\t\tvar data = textNode.data;\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\t\tvar ch = data.substring(i, i + 1);\n\t\t\t\t\t\t\t\tif (ignored < lineChild.ignoreChars && (ch === \" \" || ch === \"\\uFEFF\")) { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tignored++;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchildText.push(ch === \"\\u00A0\" ? \"\\t\" : ch); //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (offsetNode === textNode) {\n\t\t\t\t\t\t\tchildOffset = childText.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttextNode = textNode.previousSibling;\n\t\t\t\t\t}\n\t\t\t\t\tchildText = childText.reverse().join(\"\");\n\t\t\t\t\tif (childOffset !== -1) {\n\t\t\t\t\t\toffset = text.length + childText.length - childOffset;\n\t\t\t\t\t}\n\t\t\t\t\ttext += childText;\n\t\t\t\t} else {\n\t\t\t\t\ttextNode = lineChild.firstChild;\n\t\t\t\t\twhile (textNode) {\n\t\t\t\t\t\tif (offsetNode === textNode) {\n\t\t\t\t\t\t\toffset = text.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext += textNode.data;\n\t\t\t\t\t\ttextNode = textNode.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn {text: text, offset: offset};\n\t\t},\n\t\t/** @private */\n\t\tgetOffset: function(x, y) {\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tif (lineStart === lineEnd) {\n\t\t\t\treturn lineStart;\n\t\t\t}\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar lineRect = this.getBoundingClientRect();\n\t\t\t\n\t\t\tvar that = this;\n\t\t\tfunction hitChild(lineChild, offset, rect) {\n\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\tvar nodeLength = that._nodeLength(lineChild);\n\t\t\t\tvar doc = child.ownerDocument;\n\t\t\t\tvar win = getWindow(doc);\n\t\t\t\tvar xFactor = util.isIE < 11 ? win.screen.logicalXDPI / win.screen.deviceXDPI : 1;\n\t\t\t\tvar yFactor = util.isIE < 11 ? win.screen.logicalYDPI / win.screen.deviceYDPI : 1;\n\t\t\t\tvar rangeLeft, rangeTop, rangeRight, rangeBottom;\n\t\t\t\tvar range, start, end;\n\t\t\t\tvar rl = rect.left + lineRect.left, fixIE8, rects1;\n\t\t\t\tif (util.isIE || view._isRangeRects) {\n\t\t\t\t\trange = view._isRangeRects ? doc.createRange() : doc.body.createTextRange();\n\t\t\t\t\tvar high = nodeLength;\n\t\t\t\t\tvar low = -1;\n\t\t\t\t\twhile ((high - low) > 1) {\n\t\t\t\t\t\tvar mid = Math.floor((high + low) / 2);\n\t\t\t\t\t\tstart = low + 1;\n\t\t\t\t\t\tend = mid === nodeLength - 1 && lineChild.ignoreChars ? textNode.length : mid + 1;\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* Bug in IE8. TextRange.getClientRects() and TextRange.getBoundingClientRect() fails\n\t\t\t\t\t\t* if the line child is not the first element in the line and if the start offset is 0. \n\t\t\t\t\t\t* The fix is to use Node.getClientRects() left edge instead.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tfixIE8 = start === 0 && util.isIE === 8;\n\t\t\t\t\t\tif (view._isRangeRects) {\n\t\t\t\t\t\t\trange.setStart(textNode, start);\n\t\t\t\t\t\t\trange.setEnd(textNode, end);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (fixIE8) { start = 1; } \n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.move(\"character\", start); //$NON-NLS-1$\n\t\t\t\t\t\t\trange.moveEnd(\"character\", end - start); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trects1 = range.getClientRects();\n\t\t\t\t\t\tvar found = false;\n\t\t\t\t\t\tfor (var k = 0; k < rects1.length; k++) {\n\t\t\t\t\t\t\trect = rects1[k];\n\t\t\t\t\t\t\trangeLeft = (fixIE8 ? rl : rect.left) * xFactor - lineRect.left;\n\t\t\t\t\t\t\trangeRight = rect.right * xFactor - lineRect.left;\n\t\t\t\t\t\t\trangeTop = rect.top * yFactor - lineRect.top;\n\t\t\t\t\t\t\trangeBottom = rect.bottom * yFactor - lineRect.top;\n\t\t\t\t\t\t\tif (rangeLeft <= x && x < rangeRight && (!view._wrapMode || (rangeTop <= y && y <= rangeBottom))) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\thigh = mid;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlow = mid;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toffset += high;\n\t\t\t\t\tstart = high;\n\t\t\t\t\tend = high === nodeLength - 1 && lineChild.ignoreChars ? textNode.length : Math.min(high + 1, textNode.length);\n\t\t\t\t\tif (view._isRangeRects) {\n\t\t\t\t\t\trange.setStart(textNode, start);\n\t\t\t\t\t\trange.setEnd(textNode, end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\trange.move(\"character\", start); //$NON-NLS-1$\n\t\t\t\t\t\trange.moveEnd(\"character\", end - start); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\trects1 = range.getClientRects();\n\t\t\t\t\tvar trailing = false;\n\t\t\t\t\tif (rects1.length > 0) {\n\t\t\t\t\t\trect = rects1[0];\n\t\t\t\t\t\trangeLeft = (fixIE8 ? rl : rect.left) * xFactor - lineRect.left;\n\t\t\t\t\t\trangeRight = rect.right * xFactor - lineRect.left;\n\t\t\t\t\t\t//TODO test for character trailing (wrong for bidi)\n\t\t\t\t\t\ttrailing = x > (rangeLeft + (rangeRight - rangeLeft) / 2);\n\t\t\t\t\t}\n\t\t\t\t\t// Handle Unicode surrogates\n\t\t\t\t\tvar offsetInLine = offset - lineStart;\n\t\t\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\t\t\tvar c = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF && trailing) {\n\t\t\t\t\t\tif (offsetInLine < lineText.length) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine + 1);\n\t\t\t\t\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\t\toffset += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (0xDC00 <= c && c <= 0xDFFF && !trailing) {\n\t\t\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\t\t\toffset -= 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (trailing) {\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar newText = [];\n\t\t\t\t\tfor (var q = 0; q < nodeLength; q++) {\n\t\t\t\t\t\tnewText.push(\"<span>\"); //$NON-NLS-1$\n\t\t\t\t\t\tif (q === nodeLength - 1) {\n\t\t\t\t\t\t\tnewText.push(textNode.data.substring(q));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewText.push(textNode.data.substring(q, q + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewText.push(\"</span>\"); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\tlineChild.innerHTML = newText.join(\"\");\n\t\t\t\t\tvar rangeChild = lineChild.firstChild;\n\t\t\t\t\twhile (rangeChild) {\n\t\t\t\t\t\trect = rangeChild.getBoundingClientRect();\n\t\t\t\t\t\trangeLeft = rect.left - lineRect.left;\n\t\t\t\t\t\trangeRight = rect.right - lineRect.left;\n\t\t\t\t\t\tif (rangeLeft <= x && x < rangeRight) {\n\t\t\t\t\t\t\t//TODO test for character trailing (wrong for bidi)\n\t\t\t\t\t\t\tif (x > rangeLeft + (rangeRight - rangeLeft) / 2) {\n\t\t\t\t\t\t\t\toffset++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t\trangeChild = rangeChild.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\tif (!that._createdDiv) {\n\t\t\t\t\t\tlineChild.innerHTML = \"\";\n\t\t\t\t\t\tlineChild.appendChild(textNode);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * Removing the element node that holds the selection start or end\n\t\t\t\t\t\t * causes the selection to be lost. The fix is to detect this case\n\t\t\t\t\t\t * and restore the selection. \n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar s = view._getSelections()[0];\n\t\t\t\t\t\tif ((offset <= s.start && s.start < offset + nodeLength) || (offset <= s.end && s.end < offset + nodeLength)) {\n\t\t\t\t\t\t\tview._updateDOMSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn offset;\n\t\t\t}\n\t\t\t\n\t\t\tvar rects, rect;\n\t\t\tif (view._wrapMode) {\n\t\t\t\trects = this.getClientRects();\n\t\t\t\tif (y < rects[0].top) {\n\t\t\t\t\ty = rects[0].top;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\t\trect = rects[i];\n\t\t\t\t\tif (rect.top <= y && y < rect.bottom) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (x < rect.left) { x = rect.left; }\n\t\t\t\tif (x > rect.right) { x = rect.right - 1; }\n\t\t\t} else {\n\t\t\t\tif (x < 0) { x = 0; }\n\t\t\t\tif (x > (lineRect.right - lineRect.left)) { x = lineRect.right - lineRect.left; }\n\t\t\t}\n\t\t\t\n\t\t\tfunction hitRects(child) {\n\t\t\t\tif (child.ignore) return null;\n\t\t\t\tvar rects1 = that._getClientRects(child, lineRect);\n\t\t\t\tfor (var j = 0; j < rects1.length; j++) {\n\t\t\t\t\tvar rect1 = rects1[j];\n\t\t\t\t\tif (rect1.left <= x && x < rect1.right && (!view._wrapMode || (rect1.top <= y && y <= rect1.bottom))) {\n\t\t\t\t\t\treturn rect1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tvar offset, lineChild;\n\t\t\tif (this._lastHitChild && this._lastHitChild.parentNode) {\n\t\t\t\t// Search last hit child first, then search around the last hit child\n\t\t\t\toffset = this._lastHitOffset;\n\t\t\t\tlineChild = this._lastHitChild;\n\t\t\t\trect = hitRects(lineChild);\n\t\t\t\tif (!rect ) {\n\t\t\t\t\tvar previousOffset = offset, nextOffset = offset + this._nodeLength(lineChild);\n\t\t\t\t\tvar previousChild = lineChild.previousSibling, nextChild = lineChild.nextSibling;\n\t\t\t\t\twhile (previousChild || nextChild) {\n\t\t\t\t\t\tif (previousChild) {\n\t\t\t\t\t\t\tpreviousOffset -= this._nodeLength(previousChild);\n\t\t\t\t\t\t\tif ((rect = hitRects(previousChild))) {\n\t\t\t\t\t\t\t\tlineChild = previousChild;\n\t\t\t\t\t\t\t\toffset = previousOffset;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousChild = previousChild.previousSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (nextChild) {\n\t\t\t\t\t\t\tif ((rect = hitRects(nextChild))) {\n\t\t\t\t\t\t\t\tlineChild = nextChild;\n\t\t\t\t\t\t\t\toffset = nextOffset;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnextOffset += this._nodeLength(nextChild);\n\t\t\t\t\t\t\tnextChild = nextChild.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Start searching from the beginning of the line\n\t\t\t\toffset = lineStart;\n\t\t\t\tthis.forEach(function(c) {\n\t\t\t\t\tlineChild = c;\n\t\t\t\t\tif ((rect = hitRects(lineChild))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toffset += this._nodeLength(lineChild);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (lineChild && rect) {\n\t\t\t\t// Cache the last hit child\n\t\t\t\tthis._lastHitChild = lineChild;\n\t\t\t\tthis._lastHitOffset = offset;\n\n\t\t\t\toffset = hitChild(lineChild, offset, rect);\n\t\t\t}\n\n\t\t\treturn Math.min(lineEnd, Math.max(lineStart, offset));\n\t\t},\n\t\t/** @private */\n\t\tgetNextOffset: function (offset, data) {\n\t\t\tif (data.unit === \"line\") { //$NON-NLS-1$\n\t\t\t\tvar view = this.view;\n\t\t\t\tvar model = view._model;\n\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\tif (data.count > 0) {\n\t\t\t\t\tdata.count--;\n\t\t\t\t\treturn model.getLineEnd(lineIndex);\n\t\t\t\t}\n\t\t\t\tdata.count++;\n\t\t\t\treturn model.getLineStart(lineIndex);\n\t\t\t}\n\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordWS\" || data.unit === \"wordendWS\") { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\treturn this._getNextOffset_W3C(offset, data);\n\t\t\t}\n\t\t\treturn util.isIE ? this._getNextOffset_IE(offset, data) : this._getNextOffset_W3C(offset, data);\n\t\t},\n\t\t/** @private */\n\t\t_getNextOffset_W3C: function (offset, data) {\n\t\t\tfunction _isPunctuation(c) {\n\t\t\t\treturn (33 <= c && c <= 47) || (58 <= c && c <= 64) || (91 <= c && c <= 94) || c === 96 || (123 <= c && c <= 126);\n\t\t\t}\n\t\t\tfunction _isWhitespace(c) {\n\t\t\t\treturn c === 32 || c === 9;\n\t\t\t}\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tvar lineLength = lineText.length;\n\t\t\tvar offsetInLine = offset - lineStart;\n\t\t\tvar c;\n\t\t\tvar step = data.count < 0 ? -1 : 1;\n\t\t\tif (data.unit === \"word\" || data.unit === \"wordend\" || data.unit === \"wordWS\" || data.unit === \"wordendWS\") { //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tvar previousPunctuation, previousLetterOrDigit, punctuation, letterOrDigit;\n\t\t\t\twhile (data.count !== 0) {\n\t\t\t\t\tif (data.count > 0) {\n\t\t\t\t\t\tif (offsetInLine === lineLength) { return lineEnd; }\n\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\tpreviousPunctuation = _isPunctuation(c); \n\t\t\t\t\t\tpreviousLetterOrDigit = !previousPunctuation && !_isWhitespace(c);\n\t\t\t\t\t\toffsetInLine++;\n\t\t\t\t\t\twhile (offsetInLine < lineLength) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\t\tif (data.unit !== \"wordWS\" && data.unit !== \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tpunctuation = _isPunctuation(c);\n\t\t\t\t\t\t\t\tif (data.unit === \"wordend\") { //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tif (!punctuation && previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (punctuation && !previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletterOrDigit  = !punctuation && !_isWhitespace(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tletterOrDigit  = !_isWhitespace(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tif (!letterOrDigit && previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (letterOrDigit && !previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousLetterOrDigit = letterOrDigit;\n\t\t\t\t\t\t\tpreviousPunctuation = punctuation;\n\t\t\t\t\t\t\toffsetInLine++;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (offsetInLine === 0) { return lineStart; }\n\t\t\t\t\t\toffsetInLine--;\n\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\tpreviousPunctuation = _isPunctuation(c); \n\t\t\t\t\t\tpreviousLetterOrDigit = !previousPunctuation && !_isWhitespace(c);\n\t\t\t\t\t\twhile (0 < offsetInLine) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (data.unit !== \"wordWS\" && data.unit !== \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$ \n\t\t\t\t\t\t\t\tpunctuation = _isPunctuation(c);\n\t\t\t\t\t\t\t\tif (data.unit === \"wordend\") { //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tif (punctuation && !previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!punctuation && previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletterOrDigit  = !punctuation && !_isWhitespace(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tletterOrDigit  = !_isWhitespace(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tif (letterOrDigit && !previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!letterOrDigit && previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousLetterOrDigit = letterOrDigit;\n\t\t\t\t\t\t\tpreviousPunctuation = punctuation;\n\t\t\t\t\t\t\toffsetInLine--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (offsetInLine === 0) {\n\t\t\t\t\t\t\t//get previous line\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata.count -= step;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (data.count !== 0 && (0 <= offsetInLine + step && offsetInLine + step <= lineLength)) {\n\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t// Handle Unicode surrogates\n\t\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\t\tif (0xDFFB <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD83C === c) {\n\t\t\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t\t\t\tcontinue; // Skip skin tone modifiers\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (0xFE00 <= c && c <= 0xFE0F) { // Skip variation selectors\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata.count -= step;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lineStart + offsetInLine;\n\t\t},\n\t\t/** @private */\n\t\t_getNextOffset_IE: function (offset, data) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar result = 0, range, len;\n\t\t\tvar lineOffset = model.getLineStart(lineIndex);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar doc = child.ownerDocument;\n\t\t\tvar lineChild;\n\t\t\tvar step = data.count < 0 ? -1 : 1;\n\t\t\tif (offset === model.getLineEnd(lineIndex)) {\n\t\t\t\tlineChild = child.lastChild;\n\t\t\t\twhile (lineChild && lineChild.ignoreChars === lineChild.firstChild.length) {\n\t\t\t\t\tlineChild = lineChild.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (!lineChild) {\n\t\t\t\t\treturn lineOffset;\n\t\t\t\t}\n\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\tlen = range.text.length;\n\t\t\t\trange.moveEnd(data.unit, step);\n\t\t\t\tresult = offset + range.text.length - len;\n\t\t\t} else if (offset === lineOffset && data.count < 0) {\n\t\t\t\tresult = lineOffset;\n\t\t\t} else {\n\t\t\t\tlineChild = child.firstChild;\n\t\t\t\twhile (lineChild) {\n\t\t\t\t\tvar nodeLength = this._nodeLength(lineChild);\n\t\t\t\t\tif (lineOffset + nodeLength > offset) {\n\t\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\t\tif (offset === lineOffset && data.count < 0) {\n\t\t\t\t\t\t\tvar temp = lineChild.previousSibling;\n\t\t\t\t\t\t\t// skip empty nodes\n\t\t\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\t\t\tif (temp.firstChild && temp.firstChild.length) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttemp = temp.previousSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trange.moveToElementText(temp ? temp : lineChild.previousSibling);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.collapse();\n\t\t\t\t\t\t\trange.moveEnd(\"character\", offset - lineOffset); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlen = range.text.length;\n\t\t\t\t\t\trange.moveEnd(data.unit, step);\n\t\t\t\t\t\tresult = offset + range.text.length - len;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tlineOffset = nodeLength + lineOffset;\n\t\t\t\t\tlineChild = lineChild.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar offsetInLine = result - lineStart;\n\t\t\tvar c = lineText.charCodeAt(offsetInLine);\n\t\t\t// Handle Unicode surrogates\n\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult = offsetInLine + lineStart;\n\t\t\tdata.count -= step;\n\t\t\treturn result;\n\t\t},\n\t\tupdateLinks: function() {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tif (!this.hasLink) { return; }\n\t\t\tvar that = this;\n\t\t\tthis.forEach(function(span) {\n\t\t\t\tvar style = span.viewStyle;\n\t\t\t\tif (style && style.tagName && style.tagName.toLowerCase() === \"a\") { //$NON-NLS-1$\n\t\t\t\t\tchild.replaceChild(that._createSpan(child, span.firstChild.data, style), span);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t},\n\t\t/** @private */\n\t\tdestroy: function() {\n\t\t\tvar div = this._createdDiv;\n\t\t\tif (div) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tthis._createdDiv = null;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @class This object describes the options for the text view.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#setOptions}\n\t * {@link orion.editor.TextView#getOptions}\t \n\t * </p>\t\t \n\t * @name orion.editor.TextViewOptions\n\t *\n\t * @property {String|DOMElement} parent the parent element for the view, it can be either a DOM element or an ID for a DOM element.\n\t * @property {orion.editor.TextModel} [model] the text model for the view. If it is not set the view creates an empty {@link orion.editor.TextModel}.\n\t * @property {Boolean} [readonly=false] whether or not the view is read-only.\n\t * @property {Boolean} [fullSelection=true] whether or not the view is in full selection mode.\n\t * @property {Boolean} [tabMode=true] whether or not the tab keypress is consumed by the view or is used for focus traversal.\n\t * @property {Boolean} [expandTab=false] whether or not the tab key inserts white spaces.\n\t * @property {orion.editor.TextTheme} [theme=orion.editor.TextTheme.getTheme()] the TextTheme manager. TODO more info on this\n\t * @property {orion.editor.UndoStack} [undoStack] the Undo Stack.\n\t * @property {String} [themeClass] the CSS class for the view theming.\n\t * @property {Number} [tabSize=8] The number of spaces in a tab.\n\t * @property {Boolean} [overwriteMode=false] whether or not the view is in insert/overwrite mode.\n\t * @property {Boolean} [singleMode=false] whether or not the editor is in single line mode.\n\t * @property {Number} [marginOffset=0] the offset in a line where the print margin should be displayed. <code>0</code> means no print margin.\n\t * @property {Number} [wrapOffset=0] the offset in a line where text should wrap. <code>0</code> means wrap at the client area right edge.\n\t * @property {Boolean} [wrapMode=false] whether or not the view wraps lines.\n\t * @property {Boolean} [wrapable=false] whether or not the view is wrappable.\n\t * @property {Number} [scrollAnimation=0] the time duration in miliseconds for scrolling animation. <code>0</code> means no animation.\n\t * @property {Boolean} [blockCursorVisible=false] whether or not to show the block cursor.\n\t */\n\t/**\n\t * Constructs a new text view.\n\t * \n\t * @param {orion.editor.TextViewOptions} options the view options.\n\t * \n\t * @class A TextView is a user interface for editing text.\n\t * @name orion.editor.TextView\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction TextView (options) {\n\t\tthis._init(options || {});\n\t}\n\t\n\tTextView.prototype = /** @lends orion.editor.TextView.prototype */ {\n\t\t/**\n\t\t * Adds a keyMode to the text view at the specified position.\n\t\t *\n\t\t * @param {orion.editor.KeyMode} mode the editor keyMode.\n\t\t * @param {Number} [index=length] the index.\n\t\t */\n\t\taddKeyMode: function(mode, index) {\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tif (index !== undefined) {\n\t\t\t\tkeyModes.splice(index, 0, mode);\n\t\t\t} else {\n\t\t\t\tkeyModes.push(mode);\n\t\t\t}\n\t\t\t//TODO: API needed for this\n\t\t\tif (mode._modeAdded) {\n\t\t\t\tmode._modeAdded();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adds a ruler to the text view at the specified position.\n\t\t * <p>\n\t\t * The position is relative to the ruler location.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.Ruler} ruler the ruler.\n\t\t * @param {Number} [index=length] the ruler index.\n\t\t */\n\t\taddRuler: function (ruler, index) {\n\t\t\tvar rulers = this._rulers;\n\t\t\tif (index !== undefined) {\n\t\t\t\tvar i, sideIndex;\n\t\t\t\tfor (i = 0, sideIndex=0; i < rulers.length && sideIndex < index; i++) {\n\t\t\t\t\tif (ruler.getLocation() === rulers[i].getLocation()) {\n\t\t\t\t\t\tsideIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trulers.splice(sideIndex, 0, ruler);\n\t\t\t\tindex = sideIndex;\n\t\t\t} else {\n\t\t\t\trulers.push(ruler);\n\t\t\t}\n\t\t\tthis._createRuler(ruler, index);\n\t\t\truler.setView(this);\n\t\t\tthis._update();\n\t\t},\n\t\tcomputeSize: function() {\n\t\t\tvar w = 0, h = 0;\n\t\t\tvar model = this._model, clientDiv = this._clientDiv;\n\t\t\tif (!clientDiv) { return {width: w, height: h}; }\n\t\t\tvar clientWidth = clientDiv.style.width;\n\t\t\t/*\n\t\t\t* Feature in WekKit. Webkit limits the width of the lines\n\t\t\t* computed below to the width of the client div.  This causes\n\t\t\t* the lines to be wrapped even though \"pre\" is set.  The fix\n\t\t\t* is to set the width of the client div to a \"0x7fffffffpx\"\n\t\t\t* before computing the lines width.  Note that this value is\n\t\t\t* reset to the appropriate value further down.\n\t\t\t*/\n\t\t\tif (util.isWebkit) {\n\t\t\t\tclientDiv.style.width = \"0x7fffffffpx\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tfor (var lineIndex=0; lineIndex<lineCount; lineIndex++) {\n\t\t\t\tvar line = this._getLine(lineIndex);\n\t\t\t\tvar rect = line.getBoundingClientRect();\n\t\t\t\tw = Math.max(w, rect.right - rect.left);\n\t\t\t\th += rect.bottom - rect.top;\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tif (util.isWebkit) {\n\t\t\t\tclientDiv.style.width = clientWidth;\n\t\t\t}\n\t\t\tvar viewPadding = this._getViewPadding();\n\t\t\tw += viewPadding.right + viewPadding.left + this._metrics.scrollWidth;\n\t\t\th += viewPadding.bottom + viewPadding.top + this._metrics.scrollWidth;\n\t\t\treturn {width: w, height: h};\n\t\t},\n\t\t/**\n\t\t * Converts the given rectangle from one coordinate spaces to another.\n\t\t * <p>The supported coordinate spaces are:\n\t\t * <ul>\n\t\t *   <li>\"document\" - relative to document, the origin is the top-left corner of first line</li>\n\t\t *   <li>\"page\" - relative to html page that contains the text view</li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * <p>All methods in the view that take or return a position are in the document coordinate space.</p>\n\t\t *\n\t\t * @param rect the rectangle to convert.\n\t\t * @param rect.x the x of the rectangle.\n\t\t * @param rect.y the y of the rectangle.\n\t\t * @param rect.width the width of the rectangle.\n\t\t * @param rect.height the height of the rectangle.\n\t\t * @param {String} from the source coordinate space.\n\t\t * @param {String} to the destination coordinate space.\n\t\t *\n\t\t * @see orion.editor.TextView#getLocationAtOffset\n\t\t * @see orion.editor.TextView#getOffsetAtLocation\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t */\n\t\tconvert: function(rect, from, to) {\n\t\t\tif (!this._clientDiv) { return rect; }\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\tif (from === \"document\") { //$NON-NLS-1$\n\t\t\t\tif (rect.x !== undefined) {\n\t\t\t\t\trect.x += - _scroll.x + viewRect.left + viewPad.left;\n\t\t\t\t}\n\t\t\t\tif (rect.y !== undefined) {\n\t\t\t\t\trect.y += - _scroll.y + viewRect.top + viewPad.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//At this point rect is in the widget coordinate space\n\t\t\tif (to === \"document\") { //$NON-NLS-1$\n\t\t\t\tif (rect.x !== undefined) {\n\t\t\t\t\trect.x += _scroll.x - viewRect.left - viewPad.left;\n\t\t\t\t}\n\t\t\t\tif (rect.y !== undefined) {\n\t\t\t\t\trect.y += _scroll.y - viewRect.top - viewPad.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rect;\n\t\t},\n\t\t/**\n\t\t * Copies the selected text to the clipboard in plain text format.\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tcopy: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doCopy();\n\t\t},\n\t\t/**\n\t\t * Moves the selected text to the clipboard in plain text format.\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tcut: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doCut();\n\t\t},\n\t\t/**\n\t\t * Destroys the text view. \n\t\t * <p>\n\t\t * Removes the view from the page and frees all resources created by the view.\n\t\t * Calling this function causes the \"Destroy\" event to be fire so that all components\n\t\t * attached to view can release their references.\n\t\t * </p>\n\t\t *\n\t\t * @see orion.editor.TextView#onDestroy\n\t\t */\n\t\tdestroy: function() {\n\t\t\t/* Destroy rulers*/\n\t\t\tfor (var i=0; i< this._rulers.length; i++) {\n\t\t\t\tthis._rulers[i].setView(null);\n\t\t\t}\n\t\t\tthis.rulers = null;\n\t\t\t\n\t\t\tthis._destroyView();\n\n\t\t\tvar e = {type: \"Destroy\"}; //$NON-NLS-1$\n\t\t\tthis.onDestroy(e);\n\n\t\t\tthis._parent = null;\n\t\t\tif (this._model && this._model.destroy) {\n\t\t\t\tthis._model.destroy();\n\t\t\t}\n\t\t\tthis._model = null;\n\t\t\tthis._theme = null;\n\t\t\tthis._selection = null;\n\t\t\tthis._doubleClickSelection = null;\n\t\t\tthis._keyModes = null;\n\t\t\tthis._actions = null;\n\t\t},\n\t\t/**\n\t\t * Gives focus to the text view.\n\t\t */\n\t\tfocus: function() {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\t/*\n\t\t\t* Feature in Chrome. When focus is called in the clientDiv without\n\t\t\t* setting selection the browser will set the selection to the first dom \n\t\t\t* element, which can be above the client area. When this happen the \n\t\t\t* browser also scrolls the window to show that element.\n\t\t\t* The fix is to call _updateDOMSelection() before calling focus().\n\t\t\t*/\n\t\t\tthis._updateDOMSelection();\n\t\t\tthis._clientDiv.focus();\n\t\t\t/*\n\t\t\t* Feature in Safari. When focus is called the browser selects the clientDiv\n\t\t\t* itself. The fix is to call _updateDOMSelection() after calling focus().\n\t\t\t*/\n\t\t\tthis._updateDOMSelection();\n\t\t},\n\t\t/**\n\t\t * Check if the text view has focus.\n\t\t *\n\t\t * @returns {Boolean} <code>true</code> if the text view has focus, otherwise <code>false</code>.\n\t\t */\n\t\thasFocus: function() {\n\t\t\treturn this._hasFocus;\n\t\t},\n\t\t/**\n\t\t * Returns the action description for a given action ID.\n\t\t *\n\t\t * @returns {orion.editor.ActionDescrition} the action description\n\t\t */\n\t\tgetActionDescription: function(actionID) {\n\t\t\tvar action = this._actions[actionID];\n\t\t\tif (action) {\n\t\t\t\treturn action.actionDescription;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\t/**\n\t\t * Returns all action IDs defined in the text view.\n\t\t * <p>\n\t\t * There are two types of actions, the predefined actions of the view \n\t\t * and the actions added by application code.\n\t\t * </p>\n\t\t * <p>\n\t\t * The predefined actions are:\n\t\t * <ul>\n\t\t *   <li>Navigation actions. These actions move the caret collapsing the selection.</li>\n\t\t *     <ul>\n\t\t *       <li>\"lineUp\" - moves the caret up by one line</li>\n\t\t *       <li>\"lineDown\" - moves the caret down by one line</li>\n\t\t *       <li>\"lineStart\" - moves the caret to beginning of the current line</li>\n\t\t *       <li>\"lineEnd\" - moves the caret to end of the current line </li>\n\t\t *       <li>\"charPrevious\" - moves the caret to the previous character</li>\n\t\t *       <li>\"charNext\" - moves the caret to the next character</li>\n\t\t *       <li>\"pageUp\" - moves the caret up by one page</li>\n\t\t *       <li>\"pageDown\" - moves the caret down by one page</li>\n\t\t *       <li>\"wordPrevious\" - moves the caret to the previous word</li>\n\t\t *       <li>\"wordNext\" - moves the caret to the next word</li>\n\t\t *       <li>\"textStart\" - moves the caret to the beginning of the document</li>\n\t\t *       <li>\"textEnd\" - moves the caret to the end of the document</li>\n\t\t *     </ul>\n\t\t *   <li>Selection actions. These actions move the caret extending the selection.</li>\n\t\t *     <ul>\n\t\t *       <li>\"selectLineUp\" - moves the caret up by one line</li>\n\t\t *       <li>\"selectLineDown\" - moves the caret down by one line</li>\n\t\t *       <li>\"selectLineStart\" - moves the caret to beginning of the current line</li>\n\t\t *       <li>\"selectLineEnd\" - moves the caret to end of the current line </li>\n\t\t *       <li>\"selectCharPrevious\" - moves the caret to the previous character</li>\n\t\t *       <li>\"selectCharNext\" - moves the caret to the next character</li>\n\t\t *       <li>\"selectPageUp\" - moves the caret up by one page</li>\n\t\t *       <li>\"selectPageDown\" - moves the caret down by one page</li>\n\t\t *       <li>\"selectWordPrevious\" - moves the caret to the previous word</li>\n\t\t *       <li>\"selectWordNext\" - moves the caret to the next word</li>\n\t\t *       <li>\"selectTextStart\" - moves the caret to the beginning of the document</li>\n\t\t *       <li>\"selectTextEnd\" - moves the caret to the end of the document</li>\n\t\t *       <li>\"selectAll\" - selects the entire document</li>\n\t\t *     </ul>\n\t\t *   <li>Edit actions. These actions modify the text view text</li>\n\t\t *     <ul>\n\t\t *       <li>\"deletePrevious\" - deletes the character preceding the caret</li>\n\t\t *       <li>\"deleteNext\" - deletes the charecter following the caret</li>\n\t\t *       <li>\"deleteWordPrevious\" - deletes the word preceding the caret</li>\n\t\t *       <li>\"deleteWordNext\" - deletes the word following the caret</li>\n\t\t *       <li>\"deleteLineStart\" - deletes characteres to the beginning of the line</li>\n\t\t *       <li>\"deleteLineEnd\" - deletes characteres to the end of the line</li>\n\t\t *       <li>\"tab\" - inserts a tab character at the caret</li>\n\t\t *       <li>\"shiftTab\" - noop</li>\n\t\t *       <li>\"enter\" - inserts a line delimiter at the caret</li>\n\t\t *       <li>\"uppercase\" - upper case the text at the caret</li>\n\t\t *       <li>\"lowercase\" - lower case the text at the caret</li>\n\t\t *       <li>\"capitalize\" - capitilize case the text at the caret</li>\n\t\t *       <li>\"reversecase\" - reverse the case the text at the caret</li>\n\t\t *     </ul>\n\t\t *   <li>Clipboard actions. These actions modify the view text as well</li>\n\t\t *     <ul>\n\t\t *       <li>\"copy\" - copies the selected text to the clipboard</li>\n\t\t *       <li>\"cut\" - copies the selected text to the clipboard and deletes the selection</li>\n\t\t *       <li>\"paste\" - replaces the selected text with the clipboard contents</li>\n\t\t *     </ul>\n\t\t *   <li>Scrolling actions.</li>\n\t\t *     <ul>\n\t\t *       <li>\"scrollLineUp\" - scrolls the view up by one line</li>\n\t\t *       <li>\"scrollLineDown\" - scrolls the view down by one line</li>\n\t\t *       <li>\"scrollPageUp\" - scrolls the view up by one page</li>\n\t\t *       <li>\"scrollPageDown\" - scrolls the view down by one page</li>\n\t\t *       <li>\"scrollTextStart\" - scrolls the view to the beginning of the document</li>\n\t\t *       <li>\"scrollTextEnd\" - scrolls the view to the end of the document</li>\n\t\t *     </ul>\n\t\t *   <li>Mode actions.</li>\n\t\t *     <ul>\n\t\t *       <li>\"toggleTabMode\" - toggles tab mode.</li>\n\t\t *       <li>\"toggleWrapMode\" - toggles wrap mode.</li>\n\t\t *       <li>\"toggleOverwriteMode\" - toggles overwrite mode.</li>\n\t\t *     </ul>\n\t\t * </ul>\n\t\t * </p>\n\t\t * \n\t\t * @param {Boolean} [defaultAction=false] whether or not the predefined actions are included.\n\t\t * @returns {String[]} an array of action IDs defined in the text view.\n\t\t *\n\t\t * @see orion.editor.TextView#invokeAction\n\t\t * @see orion.editor.TextView#setAction\n\t\t * @see orion.editor.TextView#setKeyBinding\n\t\t * @see orion.editor.TextView#getKeyBindings\n\t\t */\n\t\tgetActions: function (defaultAction) {\n\t\t\tvar result = [];\n\t\t\tvar actions = this._actions;\n\t\t\tfor (var i in actions) {\n\t\t\t\tif (actions.hasOwnProperty(i)) {\n\t\t\t\t\tif (!defaultAction && actions[i].defaultHandler) { continue; }\n\t\t\t\t\tresult.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns the bottom index.\n\t\t * <p>\n\t\t * The bottom index is the line that is currently at the bottom of the view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view. The parameter\n\t\t * <code>fullyVisible</code> determines whether to return only fully visible lines. \n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} [fullyVisible=false] if <code>true</code>, returns the index of the last fully visible line. This\n\t\t *    parameter is ignored if the view is not big enough to show one line.\n\t\t * @returns {Number} the index of the bottom line.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopIndex\n\t\t * @see orion.editor.TextView#setTopIndex\n\t\t */\n\t\tgetBottomIndex: function(fullyVisible) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getBottomIndex(fullyVisible);\n\t\t},\n\t\t/**\n\t\t * Returns the bottom pixel.\n\t\t * <p>\n\t\t * The bottom pixel is the pixel position that is currently at\n\t\t * the bottom edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the bottom pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetBottomPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().y + this._getClientHeight();\n\t\t},\n\t\t/**\n\t\t * Returns the caret offset relative to the start of the document.\n\t\t *\n\t\t * @returns {Number} the caret offset relative to the start of the document.\n\t\t *\n\t\t * @see orion.editor.TextView#setCaretOffset\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tgetCaretOffset: function () {\n\t\t\tvar s = this._getSelection();\n\t\t\treturn s.getCaret();\n\t\t},\n\t\t/**\n\t\t * Returns the client area.\n\t\t * <p>\n\t\t * The client area is the portion in pixels of the document that is visible. The\n\t\t * client area position is relative to the beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Object} the client area rectangle {x, y, width, height}.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#getHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetClientArea: function() {\n\t\t\tif (!this._clientDiv) { return {x: 0, y: 0, width: 0, height: 0}; }\n\t\t\tvar _scroll = this._getScroll();\n\t\t\treturn {x: _scroll.x, y: _scroll.y, width: this._getClientWidth(), height: this._getClientHeight()};\n\t\t},\n\t\t/**\n\t\t * Returns the horizontal pixel.\n\t\t * <p>\n\t\t * The horizontal pixel is the pixel position that is currently at\n\t\t * the left edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the horizontal pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#setHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetHorizontalPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().x;\n\t\t},\n\t\t/**\n\t\t * Returns all the key bindings associated to the given action ID.\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @returns {orion.KeyBinding[]} the array of key bindings associated to the given action ID.\n\t\t *\n\t\t * @see orion.editor.TextView#setKeyBinding\n\t\t * @see orion.editor.TextView#setAction\n\t\t */\n\t\tgetKeyBindings: function (actionID) {\n\t\t\tvar result = [];\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (var i = 0; i < keyModes.length; i++) {\n\t\t\t\tresult = result.concat(keyModes[i].getKeyBindings(actionID));\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns all the key modes added to text view.\n\t\t *\n\t\t * @returns {orion.editor.KeyMode[]} the array of key modes.\n\t\t *\n\t\t * @see orion.editor.TextView#addKeyMode\n\t\t * @see orion.editor.TextView#removeKeyMode\n\t\t */\n\t\tgetKeyModes: function() {\n\t\t\treturn this._keyModes.slice(0);\n\t\t},\n\t\t/**\n\t\t * Returns the line height for a given line index.  Returns the default line\n\t\t * height if the line index is not specified.\n\t\t *\n\t\t * @param {Number} [lineIndex] the line index.\n\t\t * @returns {Number} the height of the line in pixels.\n\t\t *\n\t\t * @see orion.editor.TextView#getLinePixel\n\t\t */\n\t\tgetLineHeight: function(lineIndex) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLineHeight(lineIndex);\n\t\t},\n\t\t/**\n\t\t * Returns the line index for a given line pixel position relative to the document.\n\t\t *\n\t\t * @param {Number} [y] the line pixel.\n\t\t * @returns {Number} the line index for the specified pixel position.\n\t\t *\n\t\t * @see orion.editor.TextView#getLinePixel\n\t\t */\n\t\tgetLineIndex: function(y) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLineIndex(y);\n\t\t},\n\t\t/**\n\t\t * @name isValidTextPosition\n\t\t * @description Return whether the given x/y pixel position, relative to the document, is inside of document text. \n\t\t * \t\t\t\tThis tests both whether the y position is below the text lines of the document as we as whether the\n\t\t * \t\t\t\tx position is within the text of the line.\n\t\t * @function\n\t\t * @param x {Number} [x] the x pixel position\n\t\t * @param y {Number} [y] the line pixel position\n\t\t * @returns returns {Boolean} true if the pixel position is over text content\n\t\t */\n\t\tisValidTextPosition: function(x, y){\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\t// Check if we are within a valid line\n\t\t\tvar lineIndex = this._getLineIndex(y, true);\n\t\t\tif (lineIndex < 0){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Get the closest offset to the position\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = this.getOffsetAtLocation(x, y);\n\t\t\t// If the closest offset is to the left of the character's bounds then position is outside the text on the line\n\t\t\tvar bounds = line.getBoundingClientRect(offset);\n\t\t\tline.destroy();\n\t\t\tif (x > bounds.right){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Returns the top pixel position of a given line index relative to the beginning\n\t\t * of the document.\n\t\t * <p>\n\t\t * Clamps out of range indices.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the line index.\n\t\t * @returns {Number} the pixel position of the line.\n\t\t *\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#getLineIndex\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetLinePixel: function(lineIndex) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLinePixel(lineIndex);\n\t\t},\n\t\t/**\n\t\t * Returns the {x, y} pixel location of the top-left corner of the character\n\t\t * bounding box at the specified offset in the document.  The pixel location\n\t\t * is relative to the document.\n\t\t * <p>\n\t\t * Clamps out of range offsets.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} offset the character offset\n\t\t * @returns {Object} the {x, y} pixel location of the given offset.\n\t\t *\n\t\t * @see orion.editor.TextView#getOffsetAtLocation\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetLocationAtOffset: function(offset) {\n\t\t\tif (!this._clientDiv) { return {x: 0, y: 0}; }\n\t\t\tvar model = this._model;\n\t\t\toffset = Math.min(Math.max(0, offset), model.getCharCount());\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar rect = line.getBoundingClientRect(offset);\n\t\t\tline.destroy();\n\t\t\tvar x = rect.left;\n\t\t\tvar y = this._getLinePixel(lineIndex) + rect.top;\n\t\t\treturn {x: x, y: y};\n\t\t},\n\t\t/**\n\t\t * Returns the next character offset after the given offset and options\n\t\t *\n\t\t * @param {Number} offset the offset to start from\n\t\t * @param {Object} options\n\t\t *   { unit: the type of unit to advance to (eg \"character\", \"word\", \"wordend\", \"wordWS\", \"wordendWS\"),\n\t\t *    count: the number of units to advance (negative to advance backwards) }\n\t\t * @returns {Number} the next character offset\n\t\t */\n\t\tgetNextOffset: function(offset, options) {\n\t\t\tvar selection = new Selection(offset, offset, false);\n\t\t\tthis._doMove(options, selection);\n\t\t\treturn selection.getCaret();\n\t\t},\n\t\t/**\n\t\t * Returns the specified view options.\n\t\t * <p>\n\t\t * The returned value is either a <code>orion.editor.TextViewOptions</code> or an option value. An option value is returned when only one string parameter\n\t\t * is specified. A <code>orion.editor.TextViewOptions</code> is returned when there are no paremeters, or the parameters are a list of options names or a\n\t\t * <code>orion.editor.TextViewOptions</code>. All view options are returned when there no paremeters.\n\t\t * </p>\n\t\t *\n\t\t * @param {String|orion.editor.TextViewOptions} [options] The options to return.\n\t\t * @return {Object|orion.editor.TextViewOptions} The requested options or an option value.\n\t\t *\n\t\t * @see orion.editor.TextView#setOptions\n\t\t */\n\t\tgetOptions: function() {\n\t\t\tvar options;\n\t\t\tif (arguments.length === 0) {\n\t\t\t\toptions = this._defaultOptions();\n\t\t\t} else if (arguments.length === 1) {\n\t\t\t\tvar arg = arguments[0];\n\t\t\t\tif (typeof arg === \"string\") { //$NON-NLS-1$\n\t\t\t\t\treturn clone(this[\"_\" + arg]); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\toptions = arg;\n\t\t\t} else {\n\t\t\t\toptions = {};\n\t\t\t\tfor (var index in arguments) {\n\t\t\t\t\tif (arguments.hasOwnProperty(index)) {\n\t\t\t\t\t\toptions[arguments[index]] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\toptions[option] = clone(this[\"_\" + option]); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t},\n\t\t/**\n\t\t * Returns the text model of the text view.\n\t\t *\n\t\t * @returns {orion.editor.TextModel} the text model of the view.\n\t\t */\n\t\tgetModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Returns the character offset nearest to the given pixel location.  The\n\t\t * pixel location is relative to the document.\n\t\t *\n\t\t * @param x the x of the location\n\t\t * @param y the y of the location\n\t\t * @returns {Number} the character offset at the given location.\n\t\t *\n\t\t * @see orion.editor.TextView#getLocationAtOffset\n\t\t */\n\t\tgetOffsetAtLocation: function(x, y) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\tvar lineIndex = this._getLineIndex(y);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = line.getOffset(x, y - this._getLinePixel(lineIndex));\n\t\t\tline.destroy();\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * @name getLineAtOffset\n\t\t * @description Compute the editor line number for the given offset\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} offset The offset into the editor\n\t\t * @returns {Number} Returns the line number in the editor corresponding to the given offset or <code>-1</code> if the offset is \n\t\t * out of range\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\treturn this.getModel().getLineAtOffset(offset);\n\t\t},\n\t\t/**\n\t\t * @name getLineStart\n\t\t * @description Compute the editor start offset of the given line number\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} line The line number in the editor\n\t\t * @returns {Number} Returns the start offset of the given line number in the editor.\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineStart: function(line) {\n\t\t\treturn this.getModel().getLineStart(line);\n\t\t},\n\t\t/**\n\t\t * Get the view rulers.\n\t\t *\n\t\t * @returns {orion.editor.Ruler[]} the view rulers\n\t\t *\n\t\t * @see orion.editor.TextView#addRuler\n\t\t */\n\t\tgetRulers: function() {\n\t\t\treturn this._rulers.slice(0);\n\t\t},\n\t\t/**\n\t\t * Returns the text view selection.\n\t\t * <p>\n\t\t * The selection is defined by a start and end character offset relative to the\n\t\t * document. The character at end offset is not included in the selection.\n\t\t * </p>\n\t\t * \n\t\t * @returns {orion.editor.Selection} the view selection\n\t\t *\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelection: function () {\n\t\t\treturn this._getSelection();\n\t\t},\n\t\tgetSelections: function () {\n\t\t\treturn this._getSelections();\n\t\t},\n\t\t/**\n\t\t * Returns the text view selection text.\n\t\t * <p>\n\t\t * If there are multiple selection ranges, the result is concatenated with the specified delimiter.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} delimiter The offset into the editor\n\t\t * @returns {String} the view selection text\n\t\t * @since 10.0\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelectionText: function(delimiter) {\n\t\t\tvar text = [];\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty()) {\n\t\t\t\t\ttext.push(that._getBaseText(selection.start, selection.end));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn text.join(delimiter !== undefined ? delimiter : this._model.getLineDelimiter());\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The text does not include the character at the end offset.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextView#setText \t\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tvar model = this._model;\n\t\t\treturn model.getText(start, end);\n\t\t},\n\t\t/**\n\t\t * Returns the top index.\n\t\t * <p>\n\t\t * The top index is the line that is currently at the top of the view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view. The parameter\n\t\t * <code>fullyVisible</code> determines whether to return only fully visible lines. \n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} [fullyVisible=false] if <code>true</code>, returns the index of the first fully visible line. This\n\t\t *    parameter is ignored if the view is not big enough to show one line.\n\t\t * @returns {Number} the index of the top line.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomIndex\n\t\t * @see orion.editor.TextView#setTopIndex\n\t\t */\n\t\tgetTopIndex: function(fullyVisible) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getTopIndex(fullyVisible);\n\t\t},\n\t\t/**\n\t\t * Returns the top pixel.\n\t\t * <p>\n\t\t * The top pixel is the pixel position that is currently at\n\t\t * the top edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the top pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetTopPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().y;\n\t\t},\n\t\t/**\n\t\t * Executes the action handler associated with the given action ID.\n\t\t * <p>\n\t\t * The application defined action takes precedence over predefined actions unless\n\t\t * the <code>defaultAction</code> paramater is <code>true</code>.\n\t\t * </p>\n\t\t * <p>\n\t\t * If the application defined action returns <code>false</code>, the text view predefined\n\t\t * action is executed if present.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @param {Boolean} [defaultAction] whether to always execute the predefined action only.\n\t\t * @param {Object} [actionOptions] action specific options to be passed to the action handlers.\n\t\t * @returns {Boolean} <code>true</code> if the action was executed.\n\t\t *\n\t\t * @see orion.editor.TextView#setAction\n\t\t * @see orion.editor.TextView#getActions\n\t\t */\n\t\tinvokeAction: function (actionID, defaultAction, actionOptions) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar action = this._actions[actionID];\n\t\t\tif (action) {\n\t\t\t\tif (action.actionDescription && action.actionDescription.id) {\n\t\t\t\t\tmMetrics.logEvent(\"editor\", \"action\", action.actionDescription.id); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tif (!defaultAction && action.handler) {\n\t\t\t\t\tif (action.handler(actionOptions)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (action.defaultHandler) {\n\t\t\t\t\treturn typeof action.defaultHandler(actionOptions) === \"boolean\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t* Returns if the view is destroyed.\n\t\t* @returns {Boolean} <code>true</code> if the view is destroyed.\n\t\t*/\n\t\tisDestroyed: function () {\n\t\t\treturn !this._clientDiv;\n\t\t},\n\t\t/** \n\t\t * @class This is the event sent when the user right clicks or otherwise invokes the context menu of the view. \n\t\t * <p> \n\t\t * <b>See:</b><br/> \n\t\t * {@link orion.editor.TextView}<br/> \n\t\t * {@link orion.editor.TextView#event:onContextMenu} \n\t\t * </p> \n\t\t * \n\t\t * @name orion.editor.ContextMenuEvent \n\t\t * \n\t\t * @property {Number} x The pointer location on the x axis, relative to the document the user is editing. \n\t\t * @property {Number} y The pointer location on the y axis, relative to the document the user is editing. \n\t\t * @property {Number} screenX The pointer location on the x axis, relative to the screen. This is copied from the DOM contextmenu event.screenX property. \n\t\t * @property {Number} screenY The pointer location on the y axis, relative to the screen. This is copied from the DOM contextmenu event.screenY property. \n\t\t * @property {Boolean} defaultPrevented Determines whether the user agent context menu should be shown. It is shown by default.\n\t\t * @property {Function} preventDefault If called prevents the user agent context menu from showing.\n\t\t */ \n\t\t/** \n\t\t * This event is sent when the user invokes the view context menu. \n\t\t * \n\t\t * @event \n\t\t * @param {orion.editor.ContextMenuEvent} contextMenuEvent the event \n\t\t */ \n\t\tonContextMenu: function(contextMenuEvent) {\n\t\t\treturn this.dispatchEvent(contextMenuEvent); \n\t\t}, \n\t\tonDragStart: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDrag: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragEnd: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragEnter: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragOver: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragLeave: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDrop: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view is destroyed.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onDestroy}\n\t\t * </p>\n\t\t * @name orion.editor.DestroyEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view has been destroyed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.DestroyEvent} destroyEvent the event\n\t\t *\n\t\t * @see orion.editor.TextView#destroy\n\t\t */\n\t\tonDestroy: function(destroyEvent) {\n\t\t\treturn this.dispatchEvent(destroyEvent);\n\t\t},\n\t\t/**\n\t\t * @description This event is sent when the file is being saved\n\t\t * @function\n\t\t * @param {Object} savingEvent the event\n\t\t * @since 8.0\n\t\t */\n\t\tonSaving: function onSaving(savingEvent) {\n\t\t    return this.dispatchEvent(savingEvent);\n\t\t},\n\t\t/**\n\t\t * @description This event is sent when the file has been saved\n\t\t * @function\n\t\t * @param {Object} inputChangedEvent the event\n\t\t * @since 8.0\n\t\t */\n\t\tonInputChanged: function onInputChanged(inputChangedEvent) {\n\t\t    return this.dispatchEvent(inputChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @class This object is used to define style information for the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.Style\n\t\t * \n\t\t * @property {String} styleClass A CSS class name.\n\t\t * @property {Object} style An object with CSS properties.\n\t\t * @property {String} tagName A DOM tag name.\n\t\t * @property {Object} attributes An object with DOM attributes.\n\t\t */\n\t\t/**\n\t\t * @class This object is used to style range.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.StyleRange\n\t\t * \n\t\t * @property {Number} start The start character offset, relative to the document, where the style should be applied.\n\t\t * @property {Number} end The end character offset (exclusive), relative to the document, where the style should be applied.\n\t\t * @property {orion.editor.Style} style The style for the range.\n\t\t */\n\t\t/**\n\t\t * @class This is the event sent when the text view needs the style information for a line.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.LineStyleEvent\n\t\t * \n\t\t * @property {orion.editor.TextView} textView The text view.\t\t \n\t\t * @property {Number} lineIndex The line index.\n\t\t * @property {String} lineText The line text.\n\t\t * @property {Number} lineStart The character offset, relative to document, of the first character in the line.\n\t\t * @property {orion.editor.Style} style The style for the entire line (output argument).\n\t\t * @property {orion.editor.StyleRange[]} ranges An array of style ranges for the line (output argument).\t\t \n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view needs the style information for a line.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.LineStyleEvent} lineStyleEvent the event\n\t\t */\n\t\tonLineStyle: function(lineStyleEvent) {\n\t\t\treturn this.dispatchEvent(lineStyleEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent for all keyboard events.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyDown}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyPress}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyUp}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.KeyEvent\n\t\t * \n\t\t * @property {String} type The type of event.\n\t\t * @property {DOMEvent} event The key DOM event.\n\t\t * @property {Boolean} defaultPrevented Determines whether the user agent context menu should be shown. It is shown by default.\n\t\t * @property {Function} preventDefault If called prevents the user agent context menu from showing.\n\t\t */\n\t\t/**\n\t\t * This event is sent for key down events.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyDown: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * This event is sent for key press events. Key press events are only sent\n\t\t * for printable characters.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyPress: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * This event is sent for key up events.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyUp: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text in the model has changed.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModelChanged}<br/>\n\t\t * {@link orion.editor.TextModel#onChanged}\n\t\t * </p>\n\t\t * @name orion.editor.ModelChangedEvent\n\t\t * \n\t\t * @property {Number} start The character offset in the model where the change has occurred.\n\t\t * @property {Number} removedCharCount The number of characters removed from the model.\n\t\t * @property {Number} addedCharCount The number of characters added to the model.\n\t\t * @property {Number} removedLineCount The number of lines removed from the model.\n\t\t * @property {Number} addedLineCount The number of lines added to the model.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text in the model has changed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModelChangedEvent} modelChangedEvent the event\n\t\t */\n\t\tonModelChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text in the model is about to change.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModelChanging}<br/>\n\t\t * {@link orion.editor.TextModel#onChanging}\n\t\t * </p>\n\t\t * @name orion.editor.ModelChangingEvent\n\t\t * \n\t\t * @property {String} text The text that is about to be inserted in the model.\n\t\t * @property {Number} start The character offset in the model where the change will occur.\n\t\t * @property {Number} removedCharCount The number of characters being removed from the model.\n\t\t * @property {Number} addedCharCount The number of characters being added to the model.\n\t\t * @property {Number} removedLineCount The number of lines being removed from the model.\n\t\t * @property {Number} addedLineCount The number of lines being added to the model.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text in the model is about to change.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModelChangingEvent} modelChangingEvent the event\n\t\t */\n\t\tonModelChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text is modified by the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModify}\n\t\t * </p>\n\t\t * @name orion.editor.ModifyEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view has changed text in the model.\n\t\t * <p>\n\t\t * If the text is changed directly through the model API, this event\n\t\t * is not sent.\n\t\t * </p>\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModifyEvent} modifyEvent the event\n\t\t */\n\t\tonModify: function(modifyEvent) {\n\t\t\treturn this.dispatchEvent(modifyEvent);\n\t\t},\n\t\tonMouseDown: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseUp: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseMove: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseOver: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseOut: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonTouchStart: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonTouchMove: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonTouchEnd: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonOptions: function(optionsEvent) {\n\t\t\treturn this.dispatchEvent(optionsEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the selection changes in the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onSelection}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.SelectionEvent\n\t\t * \n\t\t * @property {orion.editor.Selection} oldValue The old selection.\n\t\t * @property {orion.editor.Selection} newValue The new selection.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view selection has changed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.SelectionEvent} selectionEvent the event\n\t\t */\n\t\tonSelection: function(selectionEvent) {\n\t\t\treturn this.dispatchEvent(selectionEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view scrolls.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onScroll}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.ScrollEvent\n\t\t * \n\t\t * @property {Object} oldValue The old scroll {x,y}.\n\t\t * @property {Object} newValue The new scroll {x,y}.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view scrolls vertically or horizontally.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ScrollEvent} scrollEvent the event\n\t\t */\n\t\tonScroll: function(scrollEvent) {\n\t\t\treturn this.dispatchEvent(scrollEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text is about to be modified by the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onVerify}\n\t\t * </p>\n\t\t * @name orion.editor.VerifyEvent\n\t\t * \n\t\t * @property {String} text The text being inserted.\n\t\t * @property {Number} start The start offset of the text range to be replaced.\n\t\t * @property {Number} end The end offset (exclusive) of the text range to be replaced.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view is about to change text in the model.\n\t\t * <p>\n\t\t * If the text is changed directly through the model API, this event\n\t\t * is not sent.\n\t\t * </p>\n\t\t * <p>\n\t\t * Listeners are allowed to change these parameters. Setting text to null\n\t\t * or undefined stops the change.\n\t\t * </p>\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.VerifyEvent} verifyEvent the event\n\t\t */\n\t\tonVerify: function(verifyEvent) {\n\t\t\treturn this.dispatchEvent(verifyEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view is focused.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onFocus}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.FocusEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view is focused.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.FocusEvent} focusEvent the event\n\t\t */\n\t\tonFocus: function(focusEvent) {\n\t\t\treturn this.dispatchEvent(focusEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view goes out of focus.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onBlur}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.BlurEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view goes out of focus.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.BlurEvent} blurEvent the event\n\t\t */\n\t\tonBlur: function(blurEvent) {\n\t\t\treturn this.dispatchEvent(blurEvent);\n\t\t},\n\t\t/**\n\t\t * Replaces the selection with the text on the clipboard or, if there is no selection, inserts the text at the current caret offset.\n\t\t * <p>\n\t\t * If the single mode is on and the clipboard text contains more than one line, all lines will be concatenated.\n\t\t * </p>\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tpaste: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doPaste();\n\t\t},\n\t\t/**\n\t\t * Redraws the entire view, including rulers.\n\t\t *\n\t\t * @see orion.editor.TextView#redrawLines\n\t\t * @see orion.editor.TextView#redrawRange\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredraw: function() {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar lineCount = this._model.getLineCount();\n\t\t\tthis.redrawRulers(0, lineCount);\n\t\t\tthis.redrawLines(0, lineCount); \n\t\t},\n\t\tredrawRulers: function(startLine, endLine) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar rulers = this.getRulers();\n\t\t\tfor (var i = 0; i < rulers.length; i++) {\n\t\t\t\tthis.redrawLines(startLine, endLine, rulers[i]);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Redraws the text in the given line range.\n\t\t * <p>\n\t\t * The line at the end index is not redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [startLine=0] the start line\n\t\t * @param {Number} [endLine=line count] the end line\n\t\t *\n\t\t * @see orion.editor.TextView#redraw\n\t\t * @see orion.editor.TextView#redrawRange\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredrawLines: function(startLine, endLine, ruler) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (startLine === undefined) { startLine = 0; }\n\t\t\tif (endLine === undefined) { endLine = this._model.getLineCount(); }\n\t\t\tif (startLine === endLine) { return; }\n\t\t\tvar div = this._clientDiv;\n\t\t\tif (!div) { return; }\n\t\t\tif (ruler) {\n\t\t\t\tvar divRuler = this._getRulerParent(ruler);\n\t\t\t\tdiv = divRuler.firstChild;\n\t\t\t\twhile (div) {\n\t\t\t\t\tif (div._ruler === ruler) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruler) {\n\t\t\t\tdiv.rulerChanged = true;\n\t\t\t} else {\n\t\t\t\tif (this._lineHeight) {\n\t\t\t\t\tthis._resetLineHeight(startLine, endLine);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar imeLineIndex = -1;\n\t\t\tif (!ruler && this._imeOffset !== -1) {\n\t\t\t\timeLineIndex = this._model.getLineAtOffset(this._imeOffset);\n\t\t\t}\n\t\t\tif (!ruler || ruler.getOverview() === \"page\") { //$NON-NLS-1$\n\t\t\t\tvar child = div.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tvar lineIndex = child.lineIndex;\n\t\t\t\t\tif (startLine <= lineIndex && lineIndex < endLine && lineIndex !== imeLineIndex) {\n\t\t\t\t\t\tchild.lineChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ruler) {\n\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\tif (startLine <= this._maxLineIndex && this._maxLineIndex < endLine) {\n\t\t\t\t\t\tthis._checkMaxLineIndex = this._maxLineIndex;\n\t\t\t\t\t\tthis._maxLineIndex = -1;\n\t\t\t\t\t\tthis._maxLineWidth = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispatchEvent({type: \"Redraw\", startLine: startLine, endLine: endLine, ruler: ruler}); //$NON-NLS-1$\n\t\t\tthis._queueUpdate();\n\t\t},\n\t\t/**\n\t\t * Redraws the text in the given range.\n\t\t * <p>\n\t\t * The character at the end offset is not redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range\n\t\t * @param {Number} [end=char count] the end offset of text range\n\t\t *\n\t\t * @see orion.editor.TextView#redraw\n\t\t * @see orion.editor.TextView#redrawLines\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredrawRange: function(start, end) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar model = this._model;\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = model.getCharCount(); }\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar endLine = model.getLineAtOffset(Math.max(start, end - 1)) + 1;\n\t\t\tthis.redrawLines(startLine, endLine);\n\t\t},\t\n\t\t/**\n\t\t * Removes a key mode from the text view.\n\t\t *\n\t\t * @param {orion.editor.KeyMode} mode the key mode.\n\t\t */\n\t\tremoveKeyMode: function (mode) {\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (var i=0; i<keyModes.length; i++) {\n\t\t\t\tif (keyModes[i] === mode) {\n\t\t\t\t\tkeyModes.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//TODO: API needed for this\n\t\t\tif (mode._modeRemoved) {\n\t\t\t\tmode._modeRemoved();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Removes a ruler from the text view.\n\t\t *\n\t\t * @param {orion.editor.Ruler} ruler the ruler.\n\t\t */\n\t\tremoveRuler: function (ruler) {\n\t\t\tvar rulers = this._rulers;\n\t\t\tfor (var i=0; i<rulers.length; i++) {\n\t\t\t\tif (rulers[i] === ruler) {\n\t\t\t\t\trulers.splice(i, 1);\n\t\t\t\t\truler.setView(null);\n\t\t\t\t\tthis._destroyRuler(ruler);\n\t\t\t\t\tthis._update();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tresize: function() {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._handleResize(null);\n\t\t},\n\t\t/**\n\t\t * @class This object describes an action for the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#setAction}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.ActionDescription\n\t\t *\n\t\t * @property {String} [name] the name to be used when showing the action as text.\n\t\t */\n\t\t/**\n\t\t * Associates an application defined handler to an action ID.\n\t\t * <p>\n\t\t * If the action ID is a predefined action, the given handler executes before\n\t\t * the default action handler.  If the given handler returns <code>true</code>, the\n\t\t * default action handler is not called.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @param {Function} handler the action handler.\n\t\t * @param {orion.editor.ActionDescription} [actionDescription=undefined] the action description.\n\t\t *\n\t\t * @see orion.editor.TextView#getActions\n\t\t * @see orion.editor.TextView#invokeAction\n\t\t */\n\t\tsetAction: function(actionID, handler, actionDescription) {\n\t\t\tif (!actionID) { return; }\n\t\t\tvar actions = this._actions;\n\t\t\tvar action = actions[actionID];\n\t\t\tif (!action) { \n\t\t\t\taction = actions[actionID] = {};\n\t\t\t}\n\t\t\taction.handler = handler;\n\t\t\tif (actionDescription !== undefined) {\n\t\t\t\taction.actionDescription = actionDescription;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Associates a key binding with the given action ID. Any previous\n\t\t * association with the specified key binding is overwriten. If the\n\t\t * action ID is <code>null</code>, the association is removed.\n\t\t * \n\t\t * @param {orion.KeyBinding} keyBinding the key binding\n\t\t * @param {String} actionID the action ID\n\t\t */\n\t\tsetKeyBinding: function(keyBinding, actionID) {\n\t\t\tthis._keyModes[0].setKeyBinding(keyBinding, actionID);\n\t\t},\n\t\t/**\n\t\t * Sets the caret offset relative to the start of the document.\n\t\t *\n\t\t * @param {Number} caret the caret offset relative to the start of the document.\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getCaretOffset\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tsetCaretOffset: function(offset, show, callback) {\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\toffset = Math.max(0, Math.min (offset, charCount));\n\t\t\tvar selection = new Selection(offset, offset, false);\n\t\t\tthis._setSelection (selection, show === undefined || show, true, callback);\n\t\t},\n\t\t/**\n\t\t * Sets the horizontal pixel.\n\t\t * <p>\n\t\t * The horizontal pixel is the pixel position that is currently at\n\t\t * the left edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} pixel the horizontal pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tsetHorizontalPixel: function(pixel) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tpixel = Math.max(0, pixel);\n\t\t\tthis._scrollView(pixel - this._getScroll().x, 0);\n\t\t},\n\t\t/**\n\t\t * Sets whether the view should update the DOM.\n\t\t * <p>\n\t\t * This can be used to improve the performance.\n\t\t * </p><p>\n\t\t * When the flag is set to <code>true</code>,\n\t\t * the entire view is marked as needing to be redrawn. \n\t\t * Nested calls to this method are stacked.\n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} redraw the new redraw state\n\t\t * \n\t\t * @see orion.editor.TextView#redraw\n\t\t */\n\t\tsetRedraw: function(redraw) {\n\t\t\tif (redraw) {\n\t\t\t\tif (--this._redrawCount === 0) {\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._redrawCount++;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the text model of the text view.\n\t\t *\n\t\t * @param {orion.editor.TextModel} model the text model of the view.\n\t\t */\n\t\tsetModel: function(model) {\n\t\t\tif (model === this._model) { return; }\n\t\t\tmodel = model || new mTextModel.TextModel();\n\t\t\tthis._model.removeEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.removeEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tvar oldLineCount = this._model.getLineCount();\n\t\t\tvar oldCharCount = this._model.getCharCount();\n\t\t\tvar newLineCount = model.getLineCount();\n\t\t\tvar newCharCount = model.getCharCount();\n\t\t\tvar newText = model.getText();\n\t\t\tvar e = {\n\t\t\t\ttype: \"ModelChanging\", //$NON-NLS-1$\n\t\t\t\ttext: newText,\n\t\t\t\tstart: 0,\n\t\t\t\tremovedCharCount: oldCharCount,\n\t\t\t\taddedCharCount: newCharCount,\n\t\t\t\tremovedLineCount: oldLineCount,\n\t\t\t\taddedLineCount: newLineCount\n\t\t\t};\n\t\t\tthis.onModelChanging(e);\n\t\t\tthis._model = model;\n\t\t\te = {\n\t\t\t\ttype: \"ModelChanged\", //$NON-NLS-1$\n\t\t\t\tstart: 0,\n\t\t\t\tremovedCharCount: oldCharCount,\n\t\t\t\taddedCharCount: newCharCount,\n\t\t\t\tremovedLineCount: oldLineCount,\n\t\t\t\taddedLineCount: newLineCount\n\t\t\t};\n\t\t\tthis.onModelChanged(e); \n\t\t\tthis._model.addEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.addEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._reset();\n\t\t\tthis._update();\n\t\t},\n\t\t/**\n\t\t * Sets the view options for the view.\n\t\t *\n\t\t * @param {orion.editor.TextViewOptions} options the view options.\n\t\t * \n\t\t * @see orion.editor.TextView#getOptions\n\t\t */\n\t\tsetOptions: function (options) {\n\t\t\tvar defaultOptions = this._defaultOptions();\n\t\t\tfor (var option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\tvar newValue = options[option], oldValue = this[\"_\" + option]; //$NON-NLS-1$\n\t\t\t\t\tif (compare(oldValue, newValue)) { continue; }\n\t\t\t\t\tvar update = defaultOptions[option] ? defaultOptions[option].update : null;\n\t\t\t\t\tif (update) {\n\t\t\t\t\t\tupdate.call(this, newValue);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis[\"_\" + option] = clone(newValue); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.onOptions({type: \"Options\", options: options}); //$NON-NLS-1$\n\t\t},\n\t\t/**\n\t\t * @class This object describes the selection show options.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView#setSelection}\n\t\t * {@link orion.editor.TextView#setCaretOffset}\t \n\t\t * {@link orion.editor.TextView#showSelection}\t \n\t\t * </p>\t\t \n\t\t * @name orion.editor.TextViewShowOptions\n\t\t *\n\t\t * @property {String} viewAnchor the view anchor.  The view anchor can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"top\" - align the selection to the top of the view client area.</li>\n\t\t *   <li>\"bottom\" - align the selection to the bottom of the view client area.</li>\n\t\t *   <li>\"center\" - align the selection to the center of the view client area.</li>\n\t\t *   <li> by default - align the selection to the top or bottom of the client area depending on whether the caret is above or below the client area respectively. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * @property {Number} [viewAnchorOffset=0] an offset from the view anchor. The offset is a percentage of the client area height and it is clamped to [0-1] range.\n\t\t * @property {String} [selectionAnchor=caret] the selection anchor. The seleciton anchor can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"top\" - align the top of the selection to the view anchor.</li>\n\t\t *   <li>\"bottom\" - align the bottom of the selection to the view anchor.</li>\n\t\t *   <li>\"center\" - align the center of the selection to the view anchor.</li>\n\t\t *   <li> by default - align the top or bottom of the selection to the view anchor depending on whether the caret is at the start or end of the selection. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * @property {String} [scrollPolicy] the scroll policy. The scroll policy can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"always\" - always scroll vertically to the desired pixel offset even if the caret is already visible.</li>\n\t\t *   <li> by default - only scroll if the caret is not visible. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t */\n\t\t/**\n\t\t * Sets the text view selection.\n\t\t * <p>\n\t\t * The selection is defined by a start and end character offset relative to the\n\t\t * document. The character at end offset is not included in the selection.\n\t\t * </p>\n\t\t * <p>\n\t\t * The caret is always placed at the end offset. The start offset can be\n\t\t * greater than the end offset to place the caret at the beginning of the\n\t\t * selection.\n\t\t * </p>\n\t\t * <p>\n\t\t * Clamps out of range offsets.\n\t\t * </p>\n\t\t * \n\t\t * @param {Number} start the start offset of the selection\n\t\t * @param {Number} end the end offset of the selection\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tsetSelection: function (start, end, show, callback) {\n\t\t\tvar caret = start > end;\n\t\t\tif (caret) {\n\t\t\t\tvar tmp = start;\n\t\t\t\tstart = end;\n\t\t\t\tend = tmp;\n\t\t\t}\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\tstart = Math.max(0, Math.min (start, charCount));\n\t\t\tend = Math.max(0, Math.min (end, charCount));\n\t\t\tvar selection = new Selection(start, end, caret);\n\t\t\tthis._setSelection(selection, show === undefined || show, true, callback);\n\t\t},\n\t\tsetSelections: function (ranges, show, callback) {\n\t\t\tvar selections = this._rangesToSelections(ranges);\n\t\t\tthis._setSelection(selections, show === undefined || show, true, callback);\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The character at the end offset is not replaced.\n\t\t * </p>\n\t\t * <p>\n\t\t * When both <code>start</code> and <code>end</code> parameters\n\t\t * are not specified, the text view places the caret at the beginning\n\t\t * of the document and scrolls to make it visible.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} text the new text.\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getText\n\t\t */\n\t\tsetText: function (text, start, end, show, callback) {\n\t\t\tvar isSingle = typeof text === \"string\"; //$NON-NLS-1$\n\t\t\tvar reset = start === undefined && end === undefined && isSingle;\n\t\t\tvar edit;\n\t\t\tif (isSingle) {\n\t\t\t\tif (start === undefined) { start = 0; }\n\t\t\t\tif (end === undefined) { end = this._model.getCharCount(); }\n\t\t\t\tedit = {text: text, selection: [new Selection(start, end, false)]};\n\t\t\t} else {\n\t\t\t\tedit = text;\n\t\t\t\tedit.selection = this._rangesToSelections(edit.selection);\n\t\t\t}\n\t\t\tedit._code = true;\n\t\t\tif (reset) {\n\t\t\t\tthis._variableLineHeight = false;\n\t\t\t}\n\t\t\tthis._modifyContent(edit, !reset, show === undefined || show, callback);\n\t\t\tif (reset) {\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, the caret does not show after the\n\t\t\t\t* view is refreshed.  The fix is to toggle the contentEditable state and\n\t\t\t\t* force the clientDiv to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tif (util.isFirefox < 13) {\n\t\t\t\t\tthis._fixCaret();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the top index.\n\t\t * <p>\n\t\t * The top index is the line that is currently at the top of the text view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} topIndex the index of the top line.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomIndex\n\t\t * @see orion.editor.TextView#getTopIndex\n\t\t */\n\t\tsetTopIndex: function(topIndex, callback) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._scrollViewAnimated(0, this._getLinePixel(Math.max(0, topIndex)) - this._getScroll().y, callback);\n\t\t},\n\t\t/**\n\t\t * Sets the top pixel.\n\t\t * <p>\n\t\t * The top pixel is the pixel position that is currently at\n\t\t * the top edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} pixel the top pixel.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tsetTopPixel: function(pixel, callback) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._scrollViewAnimated(0, Math.max(0, pixel) - this._getScroll().y, callback);\n\t\t},\n\t\t/**\n\t\t * Scrolls the selection into view if needed.\n\t\t *\n \t\t * @param {Number|orion.editor.TextViewShowOptions} [show=0]\n\t\t * \t\t\t\t\tIf <code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  The view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @returns {Boolean} true if the view was scrolled.\n\t\t *\n\t\t * @see orion.editor.TextView#getSelection\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#setCaretOffset\n\t\t */\n\t\tshowSelection: function(show, callback) {\n\t\t\treturn this._showCaret(show ? false : true, callback, show);\n\t\t},\n\t\tupdate: function(styleChanged, sync) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tif (styleChanged || this._metrics.invalid) {\n\t\t\t\tthis._updateStyle();\n\t\t\t}\n\t\t\tif (sync === undefined || sync) {\n\t\t\t\tthis._update();\n\t\t\t} else {\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**************************************** Event handlers *********************************/\n\t\t_handleRootMouseDown: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13 && e.which === 1) {\n\t\t\t\tthis._clientDiv.contentEditable = false;\n\t\t\t\t(this._overlayDiv || this._clientDiv).draggable = true;\n\t\t\t\tthis._ignoreBlur = true;\n\t\t\t}\n\t\t\t\n\t\t\t/* Prevent clicks outside of the client div from taking focus away. */\n\t\t\tvar topNode = this._overlayDiv || this._clientDiv;\n\t\t\t/* Use view div on IE 8 otherwise it is not possible to scroll. */\n\t\t\tif (util.isIE < 9) { topNode = this._viewDiv; }\n\t\t\tvar temp = e.target ? e.target : e.srcElement;\n\t\t\twhile (temp) {\n\t\t\t\tif (topNode === temp) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (temp.className && temp.className.indexOf(\"textViewFind\") !== -1) { //$NON-NLS-1$\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttemp = temp.parentNode;\n\t\t\t}\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\tif (e.stopPropagation){ e.stopPropagation(); }\n\t\t\tif (!this._isW3CEvents) {\n\t\t\t\t/*\n\t\t\t\t* In IE 8 is not possible to prevent the default handler from running\n\t\t\t\t* during mouse down event using usual API. The workaround is to give\n\t\t\t\t* focus back to the client div.\n\t\t\t\t*/ \n\t\t\t\tvar that = this;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\tthat._clientDiv.focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\t_handleRootMouseUp: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13 && e.which === 1) {\n\t\t\t\tthis._clientDiv.contentEditable = true;\n\t\t\t\t(this._overlayDiv || this._clientDiv).draggable = false;\n\t\t\t}\n\t\t\tif (util.isFirefox && e.which === 1) {\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, Firefox stops showing the caret\n\t\t\t\t* in some cases. For example when the user cancels a drag operation \n\t\t\t\t* by pressing ESC.  The fix is to detect that the drag operation was\n\t\t\t\t* cancelled,  toggle the contentEditable state and force the clientDiv\n\t\t\t\t* to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tthis._fixCaret();\n\t\t\t\tthis._ignoreBlur = false;\n\t\t\t}\n\t\t},\n\t\t_handleBlur: function () {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreBlur) { return; }\n\t\t\tthis._commitIME();\n\t\t\tthis._hasFocus = false;\n\t\t\t/*\n\t\t\t* Bug in IE 8 and earlier. For some reason when text is deselected\n\t\t\t* the overflow selection at the end of some lines does not get redrawn.\n\t\t\t* The fix is to create a DOM element in the body to force a redraw.\n\t\t\t*/\n\t\t\tif (util.isIE < 9) {\n\t\t\t\tif (!this._getSelections()[0].isEmpty()) {\n\t\t\t\t\tvar rootDiv = this._rootDiv;\n\t\t\t\t\tvar child = util.createElement(rootDiv.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\t\t\trootDiv.appendChild(child);\n\t\t\t\t\trootDiv.removeChild(child);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._cursorDiv) {\n\t\t\t\tthis._cursorDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (this._domSelection) {\n\t\t\t\tthis._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t\t/* Clear browser selection if selection is within clientDiv */\n\t\t\t\tvar temp;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\t\tif (win.getSelection) {\n\t\t\t\t\tvar sel = win.getSelection();\n\t\t\t\t\ttemp = sel.anchorNode;\n\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\tif (temp === this._clientDiv) {\n\t\t\t\t\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t\t}\n\t\t\t\t} else if (doc.selection) {\n\t\t\t\t\tthis._ignoreSelect = false;\n\t\t\t\t\ttemp = doc.selection.createRange().parentElement();\n\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\tif (temp === this._clientDiv) {\n\t\t\t\t\t\t\tdoc.selection.empty();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t\t}\n\t\t\t\t\tthis._ignoreSelect = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._ignoreFocus) {\n\t\t\t\tthis.onBlur({type: \"Blur\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleCompositionStart: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._imeTimeout) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._imeTimeout);\n\t\t\t\tthis._imeTimeout = null;\n\t\t\t}\n\t\t\tif (this._imeText) {\n\t\t\t\tthis._commitIME(this._imeText);\n\t\t\t\tthis._imeText = null;\n\t\t\t}\n\t\t\tthis._startIME();\n\t\t\tif (this._mutationObserver) {\n\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t\tthis._mutationObserver = null;\n\t\t\t}\n\t\t},\n\t\t_handleCompositionUpdate: function(e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._imeText = e.data;\n\t\t},\n\t\t_handleCompositionEnd: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._imeText = e.data;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._imeTimeout = win.setTimeout(function() {\n\t\t\t\tthis._commitIME(this._imeText);\n\t\t\t\tthis._imeText = this._imeTimeout = null;\n\t\t\t}.bind(this), 0);\n\t\t},\n\t\t_handleContextMenu: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isIE && this._lastMouseButton === 3) {\n\t\t\t\t// We need to update the DOM selection, because on\n\t\t\t\t// right-click the caret moves to the mouse location.\n\t\t\t\t// See bug 366312 and 376508.\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t\tvar preventDefault = false;\n\t\t\tif (this.isListening(\"ContextMenu\")) { //$NON-NLS-1$\n\t\t\t\tvar evt = this._createMouseEvent(\"ContextMenu\", e); //$NON-NLS-1$\n\t\t\t\tevt.screenX = e.screenX;\n\t\t\t\tevt.screenY = e.screenY;\n\t\t\t\tthis.onContextMenu(evt);\n\t\t\t\tpreventDefault = evt.defaultPrevented;\n\t\t\t} else if (util.isMac && util.isFirefox && e.button === 0) {\n\t\t\t\t// hack to prevent CTRL+Space from showing the browser context menu\n\t\t\t\tpreventDefault = true;\n\t\t\t}\n\t\t\tif (preventDefault) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis._contextMenuOpen = true;\n\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\tthis._checkSelectionChange = true;\n\t\t\t\t\tthis._pollSelectionChange(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleCopy: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._ignoreCopy) { return; }\n\t\t\tif (this._doCopy(e)) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleCut: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._doCut(e)) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDataModified: function(e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._startIME();\n\t\t},\n\t\t_handleDblclick: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar time = e.timeStamp ? e.timeStamp : Date.now();\n\t\t\tthis._lastMouseTime = time;\n\t\t\tif (this._clickCount !== 2) {\n\t\t\t\tthis._clickCount = 2;\n\t\t\t\tthis._handleMouse(e);\n\t\t\t}\n\t\t},\n\t\t_handleDragStart: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13) {\n\t\t\t\tvar that = this;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\tthat._clientDiv.contentEditable = true;\n\t\t\t\t\tthat._clientDiv.draggable = false;\n\t\t\t\t\tthat._ignoreBlur = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tif (this.isListening(\"DragStart\") && this._dragOffset !== -1) { //$NON-NLS-1$\n\t\t\t\tthis._isMouseDown = false;\n\t\t\t\tthis.onDragStart(this._createMouseEvent(\"DragStart\", e)); //$NON-NLS-1$\n\t\t\t\tthis._dragOffset = -1;\n\t\t\t} else {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDrag: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this.isListening(\"Drag\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDrag(this._createMouseEvent(\"Drag\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleDragEnd: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tthis._dragOffset = -1;\n\t\t\tif (this.isListening(\"DragEnd\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDragEnd(this._createMouseEvent(\"DragEnd\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (util.isFirefox < 13) {\n\t\t\t\tthis._fixCaret();\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, Firefox stops showing the caret when the \n\t\t\t\t* selection is dropped onto itself. The fix is to detected the case and \n\t\t\t\t* call fixCaret() a second time.\n\t\t\t\t*/\n\t\t\t\tif (e.dataTransfer.dropEffect === \"none\" && !e.dataTransfer.mozUserCancelled) { //$NON-NLS-1$\n\t\t\t\t\tthis._fixCaret();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleDragEnter: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar prevent = true;\n\t\t\tthis._dropTarget = true;\n\t\t\tif (this.isListening(\"DragEnter\")) { //$NON-NLS-1$\n\t\t\t\tprevent = false;\n\t\t\t\tthis.onDragEnter(this._createMouseEvent(\"DragEnter\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* Webkit will not send drop events if this event is not prevented, as spec in HTML5.\n\t\t\t* Firefox and IE do not follow this spec for contentEditable. Note that preventing this \n\t\t\t* event will result is loss of functionality (insertion mark, etc).\n\t\t\t*/\n\t\t\tif (util.isWebkit || prevent) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDragOver: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar prevent = true;\n\t\t\tif (this.isListening(\"DragOver\")) { //$NON-NLS-1$\n\t\t\t\tprevent = false;\n\t\t\t\tthis.onDragOver(this._createMouseEvent(\"DragOver\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* Webkit will not send drop events if this event is not prevented, as spec in HTML5.\n\t\t\t* Firefox and IE do not follow this spec for contentEditable. Note that preventing this \n\t\t\t* event will result is loss of functionality (insertion mark, etc).\n\t\t\t*/\n\t\t\tif (util.isWebkit || prevent) {\n\t\t\t\tif (prevent) { e.dataTransfer.dropEffect = \"none\"; } //$NON-NLS-1$\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDragLeave: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tif (this.isListening(\"DragLeave\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDragLeave(this._createMouseEvent(\"DragLeave\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleDrop: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tif (this.isListening(\"Drop\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDrop(this._createMouseEvent(\"Drop\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* This event must be prevented otherwise the user agent will modify\n\t\t\t* the DOM. Note that preventing the event on some user agents (i.e. IE)\n\t\t\t* indicates that the operation is cancelled. This causes the dropEffect to \n\t\t\t* be set to none  in the dragend event causing the implementor to not execute\n\t\t\t* the code responsible by the move effect.\n\t\t\t*/\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\treturn false;\n\t\t},\n\t\t_handleFocus: function () {\n\t\t\tthis._hasFocus = true;\n\t\t\tif (util.isIOS && this._lastTouchOffset !== undefined) {\n\t\t\t\tthis.setCaretOffset(this._lastTouchOffset, true);\n\t\t\t\tthis._lastTouchOffset = undefined;\n\t\t\t} else {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t\tif (this._cursorDiv) {\n\t\t\t\tthis._cursorDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (this._domSelection) {\n\t\t\t\tthis._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t}\n\t\t\tif (!this._ignoreFocus) {\n\t\t\t\tthis.onFocus({type: \"Focus\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleKeyDown: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) {\treturn;\t}\n\t\t\tif (this.isListening(\"KeyDown\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyDown\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyDown(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\t/*\n\t\t\t\t\t* Feature in Firefox. Keypress events still happen even if the keydown event\n\t\t\t\t\t* was prevented. The fix is to remember that keydown was prevented and prevent\n\t\t\t\t\t* the keypress ourselves.\n\t\t\t\t\t*/\n\t\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\t\tthis._keyDownPrevented = true;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar modifier = false;\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 16: /* Shift */\n\t\t\t\tcase 17: /* Control */\n\t\t\t\tcase 18: /* Alt */\n\t\t\t\tcase 91: /* Command */\n\t\t\t\t\tmodifier = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis._setLinksVisible(false);\n\t\t\t}\n\t\t\tif (e.keyCode === 229) {\n\t\t\t\tif (this._readonly) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar startIME = true;\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Bug in Safari. Some Control+key combinations send key events\n\t\t\t\t* with keyCode equals to 229. This is unexpected and causes the\n\t\t\t\t* view to start an IME composition. The fix is to ignore these\n\t\t\t\t* events.\n\t\t\t\t*/\n\t\t\t\tif (util.isSafari && util.isMac) {\n\t\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\t\tstartIME = false;\n\t\t\t\t\t\te.keyCode = 0x81;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startIME) {\n\t\t\t\t\tthis._startIME();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!modifier) {\n\t\t\t\t\tthis._commitIME();\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*\n\t\t\t* Feature in Firefox. When a key is held down the browser sends \n\t\t\t* right number of keypress events but only one keydown. This is\n\t\t\t* unexpected and causes the view to only execute an action\n\t\t\t* just one time. The fix is to ignore the keydown event and \n\t\t\t* execute the actions from the keypress handler.\n\t\t\t* Note: This only happens on the Mac and Linux (Firefox 3.6).\n\t\t\t*\n\t\t\t* Feature in Opera < 12.16.  Opera sends keypress events even for non-printable\n\t\t\t* keys.  The fix is to handle actions in keypress instead of keydown.\n\t\t\t*/\n\t\t\tif (((util.isMac || util.isLinux) && util.isFirefox < 4) || util.isOpera < 12.16) {\n\t\t\t\tthis._keyDownEvent = e;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._doAction(e)) {\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t\te.keyCode = 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleKeyPress: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\t/*\n\t\t\t* Feature in Firefox. Keypress events still happen even if the keydown event\n\t\t\t* was prevented. The fix is to remember that keydown was prevented and prevent\n\t\t\t* the keypress ourselves.\n\t\t\t*/\n\t\t\tif (this._keyDownPrevented) { \n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} \n\t\t\t\tthis._keyDownPrevented = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t* Feature in Embedded WebKit.  Embedded WekKit on Mac runs in compatibility mode and\n\t\t\t* generates key press events for these Unicode values (Function keys).  This does not\n\t\t\t* happen in Safari or Chrome.  The fix is to ignore these key events.\n\t\t\t*/\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tif ((0xF700 <= e.keyCode && e.keyCode <= 0xF7FF) || e.keyCode === 13 || e.keyCode === 8) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (((util.isMac || util.isLinux) && util.isFirefox < 4) || util.isOpera < 12.16) {\n\t\t\t\tif (this._doAction(this._keyDownEvent)) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (e.charCode !== undefined) {\n\t\t\t\tif (ctrlKey) {\n\t\t\t\t\tswitch (e.charCode) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* In Firefox and Safari if ctrl+v, ctrl+c ctrl+x is canceled\n\t\t\t\t\t\t* the clipboard events are not sent. The fix to allow\n\t\t\t\t\t\t* the browser to handles these key events.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tcase 99://c\n\t\t\t\t\t\tcase 118://v\n\t\t\t\t\t\tcase 120://x\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isListening(\"KeyPress\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyPress\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyPress(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._doAction(e)) {\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t\te.keyCode = 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar ignore = false;\n\t\t\tif (util.isMac) {\n\t\t\t\tif (e.ctrlKey || e.metaKey) { ignore = true; }\n\t\t\t} else {\n\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\t//Firefox clears the state mask when ALT GR generates input\n\t\t\t\t\tif (e.ctrlKey || e.altKey) { ignore = true; }\n\t\t\t\t} else {\n\t\t\t\t\t//IE and Chrome only send ALT GR when input is generated\n\t\t\t\t\tif (e.ctrlKey ^ e.altKey) { ignore = true; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ignore) {\n\t\t\t\tvar key = util.isOpera ? e.which : (e.charCode !== undefined ? e.charCode : e.keyCode);\n\t\t\t\tif (key > 31) {\n\t\t\t\t\tthis._doContent(String.fromCharCode (key));\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleDocKeyUp: function (e) {\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (!ctrlKey) {\n\t\t\t\tthis._setLinksVisible(false);\n\t\t\t}\n\t\t},\n\t\t_handleKeyUp: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this.isListening(\"KeyUp\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyUp\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyUp(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._handleDocKeyUp(e);\n\t\t\t// don't commit for space (it happens during JP composition)  \n\t\t\tif (e.keyCode === 13) {\n\t\t\t\tthis._commitIME();\n\t\t\t}\n\t\t},\n\t\t_handleLinkClick: function (e) {\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (!ctrlKey) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleMouse: function (e) {\n\t\t\tvar win = this._getWindow();\n\t\t\tvar result = true;\n\t\t\tvar target = win;\n\t\t\tif (util.isIE || (util.isFirefox && !this._overlayDiv)) { target = this._clientDiv; }\n\t\t\tif (this._overlayDiv) {\n\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\t}\n\t\t\t\tvar that = this;\n\t\t\t\twin.setTimeout(function () {\n\t\t\t\t\tthat.focus();\n\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tvar extend = e.shiftKey;\n\t\t\tvar block = e.altKey;\n\t\t\tvar add = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tthis._blockSelection = this._doubleClickSelection = null;\n\t\t\tif (this._clickCount === 1) {\n\t\t\t\tvar drag = (!util.isOpera || util.isOpera >= 12.16) && this._hasFocus && this.isListening(\"DragStart\"); //$NON-NLS-1$\n\t\t\t\tresult = this._setSelectionTo(e.clientX, e.clientY, true, extend, add, drag);\n\t\t\t\tif (result) { this._setGrab(target); }\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t\t* for a doule-click is:\n\t\t\t\t*\n\t\t\t\t*\tdown\n\t\t\t\t*\tup\n\t\t\t\t*\tup\n\t\t\t\t*\tdblclick\n\t\t\t\t*\n\t\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t\t*/\n\t\t\t\tif (this._isW3CEvents) { this._setGrab(target); }\n\t\t\t\t\n\t\t\t\tthis._setSelectionTo(e.clientX, e.clientY, true, extend, add, false);\n\t\t\t\tthis._doubleClickSelection = Selection.editing(this._getSelections());\n\t\t\t}\n\t\t\tif (block) {\n\t\t\t\tthis._blockSelection = Selection.editing(this._getSelections());\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_handleMouseDown: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._linksVisible) {\n\t\t\t\tvar target = e.target || e.srcElement;\n\t\t\t\tif (target.tagName !== \"A\") { //$NON-NLS-1$\n\t\t\t\t\tthis._setLinksVisible(false);\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._commitIME();\n\n\t\t\tvar button = e.which; // 1 - left, 2 - middle, 3 - right\n\t\t\tif (!button) { \n\t\t\t\t// if IE 8 or older\n\t\t\t\tif (e.button === 4) { button = 2; }\n\t\t\t\tif (e.button === 2) { button = 3; }\n\t\t\t\tif (e.button === 1) { button = 1; }\n\t\t\t}\n\n\t\t\t// For middle click we always need getTime(). See _getClipboardText().\n\t\t\tvar time = button !== 2 && e.timeStamp ? e.timeStamp : Date.now();\n\t\t\tvar timeDiff = time - this._lastMouseTime;\n\t\t\tvar deltaX = Math.abs(this._lastMouseX - e.clientX);\n\t\t\tvar deltaY = Math.abs(this._lastMouseY - e.clientY);\n\t\t\tvar sameButton = this._lastMouseButton === button;\n\t\t\tthis._lastMouseX = e.clientX;\n\t\t\tthis._lastMouseY = e.clientY;\n\t\t\tthis._lastMouseTime = time;\n\t\t\tthis._lastMouseButton = button;\n\n\t\t\tif (button === 1) {\n\t\t\t\tthis._isMouseDown = true;\n\t\t\t\tif (sameButton && timeDiff <= this._clickTime && deltaX <= this._clickDist && deltaY <= this._clickDist) {\n\t\t\t\t\tthis._clickCount++;\n\t\t\t\t} else {\n\t\t\t\t\tthis._clickCount = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isListening(\"MouseDown\")) { //$NON-NLS-1$\n\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseDown\", e); //$NON-NLS-1$\n\t\t\t\tthis.onMouseDown(mouseEvent);\n\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (button === 1) {\n\t\t\t\tif (this._handleMouse(e) && (util.isIE >= 9 || util.isOpera || util.isChrome || util.isSafari || (util.isFirefox && !this._overlayDiv))) {\n\t\t\t\t\tif (!this._hasFocus) {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (util.isFirefox && this._lastMouseButton === 3) {\n\t\t\t\t// We need to update the DOM selection, because on\n\t\t\t\t// right-click the caret moves to the mouse location.\n\t\t\t\t// See bug 366312 and 376508.\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t},\n\t\t_handleMouseOver: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._animation) { return; }\n\t\t\tif (this.isListening(\"MouseOver\")) { //$NON-NLS-1$\n\t\t\t\tthis.onMouseOver(this._createMouseEvent(\"MouseOver\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleMouseOut: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._animation) { return; }\n\t\t\tif (this.isListening(\"MouseOut\")) { //$NON-NLS-1$\n\t\t\t\tthis.onMouseOut(this._createMouseEvent(\"MouseOut\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleMouseMove: function (e) {\n\t\t\tif (this._animation) { return; }\n\t\t\tvar inClient = this._isClientDiv(e);\n\t\t\tif (this.isListening(\"MouseMove\")) { //$NON-NLS-1$\n\t\t\t\tif (inClient || this._isMouseDown){\n\t\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseMove\", e); //$NON-NLS-1$\n\t\t\t\t\tthis.onMouseMove(mouseEvent);\n\t\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._dropTarget) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t* Bug in IE9. IE sends one mouse event when the user changes the text by\n\t\t\t* pasting or undo.  These operations usually happen with the Ctrl key\n\t\t\t* down which causes the view to enter link mode.  Link mode does not end\n\t\t\t* because there are no further events.  The fix is to only enter link\n\t\t\t* mode when the coordinates of the mouse move event have changed.\n\t\t\t*/\n\t\t\tvar changed = this._linksVisible || this._lastMouseMoveX !== e.clientX || this._lastMouseMoveY !== e.clientY;\n\t\t\tthis._lastMouseMoveX = e.clientX;\n\t\t\tthis._lastMouseMoveY = e.clientY;\n\t\t\tthis._setLinksVisible(changed && !this._isMouseDown && e.altKey && (util.isMac ? e.metaKey : e.ctrlKey));\n\n\t\t\tthis._checkOverlayScroll();\n\n\t\t\t/*\n\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t* for a doule-click is:\n\t\t\t*\n\t\t\t*\tdown\n\t\t\t*\tup\n\t\t\t*\tup\n\t\t\t*\tdblclick\n\t\t\t*\n\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t*\n\t\t\t* In order to detect double-click and drag gestures, it is necessary to send\n\t\t\t* a mouse down event from mouse move when the button is still down and isMouseDown\n\t\t\t* flag is not set.\n\t\t\t*/\n\t\t\tif (!this._isW3CEvents) {\n\t\t\t\tif (e.button === 0) {\n\t\t\t\t\tthis._setGrab(null);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (!this._isMouseDown && e.button === 1 && (this._clickCount & 1) !== 0 && inClient) {\n\t\t\t\t\tthis._clickCount = 2;\n\t\t\t\t\treturn this._handleMouse(e, this._clickCount);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._isMouseDown || this._dragOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar x = e.clientX;\n\t\t\tvar y = e.clientY;\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\tvar width = this._getClientWidth (), height = this._getClientHeight();\n\t\t\tvar leftEdge = viewRect.left + viewPad.left;\n\t\t\tvar topEdge = viewRect.top + viewPad.top;\n\t\t\tvar rightEdge = viewRect.left + viewPad.left + width;\n\t\t\tvar bottomEdge = viewRect.top + viewPad.top + height;\n\t\t\tif (y < topEdge) {\n\t\t\t\tthis._doAutoScroll(\"up\", x, y - topEdge); //$NON-NLS-1$\n\t\t\t} else if (y > bottomEdge) {\n\t\t\t\tthis._doAutoScroll(\"down\", x, y - bottomEdge); //$NON-NLS-1$\n\t\t\t} else if (x < leftEdge && !this._wrapMode) {\n\t\t\t\tthis._doAutoScroll(\"left\", x - leftEdge, y); //$NON-NLS-1$\n\t\t\t} else if (x > rightEdge && !this._wrapMode) {\n\t\t\t\tthis._doAutoScroll(\"right\", x - rightEdge, y); //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tthis._endAutoScroll();\n\t\t\t\tthis._setSelectionTo(x, y, false, true);\n\t\t\t}\n\t\t},\n\t\t_isClientDiv: function(e) {\n\t\t\tvar topNode = this._overlayDiv || this._clientDiv;\n\t\t\tvar temp = e.target ? e.target : e.srcElement;\n\t\t\twhile (temp) {\n\t\t\t\tif (topNode === temp) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\ttemp = temp.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_createKeyEvent: function(type, e) {\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_createMouseEvent: function(type, e) {\n\t\t\tvar pt = this.convert({x: e.clientX, y: e.clientY}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\tclickCount: this._clickCount,\n\t\t\t\tx: pt.x,\n\t\t\t\ty: pt.y,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_createTouchEvent: function(type, e) {\n\t\t\tvar pt = e.touches.length ? this.convert({x: e.touches[0].clientX, y: e.touches[0].clientY}, \"page\", \"document\") : {}; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\ttouchCount: e.touches.length,\n\t\t\t\tx: pt.x,\n\t\t\t\ty: pt.y,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_handleMouseUp: function (e) {\n\t\t\tvar left = e.which ? e.button === 0 : e.button === 1;\n\t\t\tif (this.isListening(\"MouseUp\")) { //$NON-NLS-1$\n\t\t\t\tif (this._isClientDiv(e) || (left && this._isMouseDown)) {\n\t\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseUp\", e); //$NON-NLS-1$\n\t\t\t\t\tthis.onMouseUp(mouseEvent);\n\t\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis._isMouseDown = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._linksVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (left && this._isMouseDown) {\n\t\t\t\tvar selections = this._getSelections();\n\t\t\t\tvar selection = Selection.editing(selections);\n\t\t\t\tselections.forEach(function(sel) {\n\t\t\t\t\tsel._editing = false;\n\t\t\t\t});\n\t\t\t\tif (this._dragOffset !== -1) {\n\t\t\t\t\tselection.extend(this._dragOffset);\n\t\t\t\t\tselection.collapse();\n\t\t\t\t\tselections = selection;\n\t\t\t\t\tthis._dragOffset = -1;\n\t\t\t\t}\n\t\t\t\tthis._setSelection(selections, false);\n\t\t\t\tthis._isMouseDown = false;\n\t\t\t\tthis._endAutoScroll();\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t\t* for a doule-click is:\n\t\t\t\t*\n\t\t\t\t*\tdown\n\t\t\t\t*\tup\n\t\t\t\t*\tup\n\t\t\t\t*\tdblclick\n\t\t\t\t*\n\t\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t\t*/\n\t\t\t\tif (this._isW3CEvents) { this._setGrab(null); }\n\t\t\t}\n\t\t\t/*\n\t\t\t* Note that there cases when Firefox sets the DOM selection in mouse up.\n\t\t\t* This happens for example after a cancelled drag operation.\n\t\t\t*\n\t\t\t* Note that on Chrome and IE, the caret stops blicking if mouse up is\n\t\t\t* prevented.\n\t\t\t*/\n\t\t\tif (left && this._isMouseDown && util.isFirefox) {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\t_handleMouseWheel: function (e) {\n\t\t\tif (this._noScroll) return;\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar pixelX = 0, pixelY = 0;\n\t\t\t// Note: On the Mac the correct behaviour is to scroll by pixel.\n\t\t\tif (util.isIE || util.isOpera) {\n\t\t\t\tpixelY = (-e.wheelDelta / 40) * lineHeight;\n\t\t\t} else if (util.isFirefox) {\n\t\t\t\tvar limit = 256;\n\t\t\t\tif (e.type === \"wheel\") { //$NON-NLS-1$\n\t\t\t\t\tif (e.deltaMode) { // page or line\n\t\t\t\t\t\tpixelX = Math.max(-limit, Math.min(limit, e.deltaX)) * lineHeight;\n\t\t\t\t\t\tpixelY = Math.max(-limit, Math.min(limit, e.deltaY)) * lineHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixelX = e.deltaX;\n\t\t\t\t\t\tpixelY = e.deltaY;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar pixel;\n\t\t\t\t\tif (util.isMac) {\n\t\t\t\t\t\tpixel = e.detail * 3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = Math.max(-limit, Math.min(limit, e.detail)) * lineHeight;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.axis === e.HORIZONTAL_AXIS) {\n\t\t\t\t\t\tpixelX = pixel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixelY = pixel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//Webkit\n\t\t\t\tif (util.isMac) {\n\t\t\t\t\t/*\n\t\t\t\t\t* In Safari, the wheel delta is a multiple of 120. In order to\n\t\t\t\t\t* convert delta to pixel values, it is necessary to divide delta\n\t\t\t\t\t* by 40.\n\t\t\t\t\t*\n\t\t\t\t\t* In Chrome and Safari 5, the wheel delta depends on the type of the\n\t\t\t\t\t* mouse. In general, it is the pixel value for Mac mice and track pads,\n\t\t\t\t\t* but it is a multiple of 120 for other mice. There is no presise\n\t\t\t\t\t* way to determine if it is pixel value or a multiple of 120.\n\t\t\t\t\t* \n\t\t\t\t\t* Note that the current approach does not calculate the correct\n\t\t\t\t\t* pixel value for Mac mice when the delta is a multiple of 120.\n\t\t\t\t\t*\n\t\t\t\t\t* For values that are multiples of 120, the denominator varies on\n\t\t\t\t\t* the time between events.\n\t\t\t\t\t*/\n\t\t\t\t\tvar denominatorX, denominatorY;\n\t\t\t\t\tvar deltaTime = e.timeStamp - this._wheelTimeStamp;\n\t\t\t\t\tthis._wheelTimeStamp = e.timeStamp;\n\t\t\t\t\tif (e.wheelDeltaX % 120 !== 0) { \n\t\t\t\t\t\tdenominatorX = 1; \n\t\t\t\t\t} else {\n\t\t\t\t\t\tdenominatorX = deltaTime < 40 ? 40/(40-deltaTime) : 40;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.wheelDeltaY % 120 !== 0) { \n\t\t\t\t\t\tdenominatorY = 1; \n\t\t\t\t\t} else {\n\t\t\t\t\t\tdenominatorY = deltaTime < 40 ? 40/(40-deltaTime) : 40; \n\t\t\t\t\t}\n\t\t\t\t\tpixelX = Math.ceil(-e.wheelDeltaX / denominatorX);\n\t\t\t\t\tif (-1 < pixelX && pixelX < 0) { pixelX = -1; }\n\t\t\t\t\tif (0 < pixelX && pixelX < 1) { pixelX = 1; }\n\t\t\t\t\tpixelY = Math.ceil(-e.wheelDeltaY / denominatorY);\n\t\t\t\t\tif (-1 < pixelY && pixelY < 0) { pixelY = -1; }\n\t\t\t\t\tif (0 < pixelY && pixelY < 1) { pixelY = 1; }\n\t\t\t\t} else {\n\t\t\t\t\tpixelX = -e.wheelDeltaX;\n\t\t\t\t\tvar linesToScroll = 8;\n\t\t\t\t\tpixelY = (-e.wheelDeltaY / 120 * linesToScroll) * lineHeight;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* \n\t\t\t* Feature in Safari. If the event target is removed from the DOM \n\t\t\t* safari stops smooth scrolling. The fix is keep the element target\n\t\t\t* in the DOM and remove it on a later time. \n\t\t\t*\n\t\t\t* Note: Using a timer is not a solution, because the timeout needs to\n\t\t\t* be at least as long as the gesture (which is too long).\n\t\t\t*/\n\t\t\tif (util.isSafari || (util.isChrome && util.isMac)) {\n\t\t\t\tvar lineDiv = e.target;\n\t\t\t\twhile (lineDiv && lineDiv.lineIndex === undefined) {\n\t\t\t\t\tlineDiv = lineDiv.parentNode;\n\t\t\t\t}\n\t\t\t\tthis._mouseWheelLine = lineDiv;\n\t\t\t}\n\t\t\tvar oldScroll = this._getScroll();\n\t\t\tthis._scrollView(pixelX, pixelY);\n\t\t\tvar newScroll = this._getScroll();\n\t\t\tif (oldScroll.x !== newScroll.x || oldScroll.y !== newScroll.y) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handlePaste: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._ignorePaste) { return; }\n\t\t\tif (this._doPaste(e)) {\n\t\t\t\tif (util.isIE) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Bug in IE,  \n\t\t\t\t\t */\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\t\tvar win = this._getWindow();\n\t\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\t\tthat._updateDOMSelection();\n\t\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleResize: function () {\n\t\t\tvar newWidth = this._rootDiv.clientWidth;\n\t\t\tvar newHeight = this._rootDiv.clientHeight;\n\t\t\tif (this._rootWidth !== newWidth || this._rootHeight !== newHeight) {\n\t\t\t\tif (this._rootWidth !== newWidth && this._wrapMode) {\n\t\t\t\t\tthis._resetLineHeight();\n\t\t\t\t}\n\t\t\t\tthis._rootWidth = newWidth;\n\t\t\t\tthis._rootHeight = newHeight;\n\t\t\t\t/*\n\t\t\t\t* Feature in IE7. For some reason, sometimes Internet Explorer 7 \n\t\t\t\t* returns incorrect values for element.getBoundingClientRect() when \n\t\t\t\t* inside a resize handler. The fix is to queue the work.\n\t\t\t\t*/\t\t\t\n\t\t\t\tvar queue = util.isIE < 9;\n\n\t\t\t\t/*\n\t\t\t\t* The calculated metrics may be out of date when the zoom level changes.\n\t\t\t\t*/\n\t\t\t\tvar metrics = this._calculateMetrics();\n\t\t\t\tif (!compare(metrics, this._metrics)) {\n\t\t\t\t\tif (this._metrics.invalid && !metrics.invalid) {\n\t\t\t\t\t\tthis._updateStyle(false, metrics);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this._variableLineHeight) {\n\t\t\t\t\t\t\tthis._variableLineHeight = false;\n\t\t\t\t\t\t\tthis._resetLineHeight();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._metrics = metrics;\n\t\t\t\t\t}\n\t\t\t\t\tqueue = true;\n\t\t\t\t}\n\n\t\t\t\tif (queue) {\n\t\t\t\t\tthis._queueUpdate();\n\t\t\t\t} else {\n\t\t\t\t\tthis._update();\n\t\t\t\t}\n\t\t\t\tthis.dispatchEvent({type: \"Resize\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleRulerEvent: function (e) {\n\t\t\tvar target = e.target ? e.target : e.srcElement;\n\t\t\tvar lineIndex = target.lineIndex;\n\t\t\tvar element = target;\n\t\t\twhile (element && !element._ruler) {\n\t\t\t\tif (lineIndex === undefined && element.lineIndex !== undefined) {\n\t\t\t\t\tlineIndex = element.lineIndex;\n\t\t\t\t}\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\tvar ruler = element ? element._ruler : null;\n\t\t\tif (lineIndex === undefined && ruler && ruler.getOverview() === \"document\") { //$NON-NLS-1$\n\t\t\t\tvar clientHeight = this._getClientHeight ();\n\t\t\t\tvar lineCount = this._model.getLineCount ();\n\t\t\t\tvar viewPad = this._getViewPadding();\n\t\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\t\tvar contentHeight = lineHeight * lineCount;\n\t\t\t\tvar trackHeight = clientHeight + viewPad.top + viewPad.bottom - 2 * this._metrics.scrollWidth;\n\t\t\t\tvar divHeight, arrowWidth;\n\t\t\t\tif (contentHeight < trackHeight) {\n\t\t\t\t\tdivHeight = lineHeight;\n\t\t\t\t\tarrowWidth = viewPad.top;\n\t\t\t\t} else {\n\t\t\t\t\tdivHeight = trackHeight / lineCount;\n\t\t\t\t\tarrowWidth = this._metrics.scrollWidth;\n\t\t\t\t}\n\t\t\t\tlineIndex = Math.floor(((e.clientY - viewRect.top) - arrowWidth) / divHeight);\n\t\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\t\tlineIndex = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruler) {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"click\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onClick) { ruler.onClick(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dblclick\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onDblClick) { ruler.onDblClick(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mousemove\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseMove) { ruler.onMouseMove(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mouseover\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseOver) { ruler.onMouseOver(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mouseout\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseOut) { \n\t\t\t\t\t\t\tvar tmp = e.relatedTarget;\n\t\t\t\t\t\t\twhile (tmp && tmp !== this._rootDiv) {\n\t\t\t\t\t\t\t\tif (tmp === element) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttmp = tmp.parentNode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\truler.onMouseOut(lineIndex, e); \n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleScroll: function () {\n\t\t\tthis._lastScrollTime = Date.now();\n\t\t\tvar _scroll = this._getScroll(false);\n\t\t\tvar oldX = this._hScroll;\n\t\t\tvar oldY = this._vScroll;\n\t\t\tif (oldX !== _scroll.x || oldY !== _scroll.y) {\n\t\t\t\tthis._hScroll = _scroll.x;\n\t\t\t\tthis._vScroll = _scroll.y;\n\t\t\t\tthis._commitIME();\n\t\t\t\tthis._update(oldY === _scroll.y);\n\t\t\t\tvar e = {\n\t\t\t\t\ttype: \"Scroll\", //$NON-NLS-1$\n\t\t\t\t\toldValue: {x: oldX, y: oldY},\n\t\t\t\t\tnewValue: _scroll\n\t\t\t\t};\n\t\t\t\tthis.onScroll(e);\n\t\t\t}\n\t\t},\n\t\t_handleSelectStart: function (e) {\n\t\t\tvar menuOpen = this._contextMenuOpen;\n\t\t\tthis._contextMenuOpen = false;\n\t\t\tif (menuOpen) {\n\t\t\t\tthis._checkSelectionChange = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._ignoreSelect) {\n\t\t\t\tif (e && e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_getModelOffset: function(node, offset) {\n\t\t\tif (!node) { return; }\n\t\t\tvar lineNode;\n\t\t\tif (node.tagName === \"DIV\") { //$NON-NLS-1$\n\t\t\t\tlineNode = node;\n\t\t\t} else {\n\t\t\t\tlineNode = node.parentNode.parentNode;\n\t\t\t}\n\t\t\tif (!lineNode._line) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn lineNode._line.getModelOffset (node, offset);\n\t\t},\n\t\t_updateSelectionFromDOM: function() {\n\t\t\tif (!(util.isIOS || util.isAndroid || this._checkSelectionChange)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tvar selection = win.getSelection();\n\t\t\tvar start = this._getModelOffset(selection.anchorNode, selection.anchorOffset);\n\t\t\tvar end = this._getModelOffset(selection.focusNode, selection.focusOffset);\n\t\t\tvar sel = this._getSelections()[0];\n\t\t\tif (start === undefined || end === undefined || (sel.start === start && sel.end === end)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._checkSelectionChange) {\n\t\t\t\tvar firstLine = this._getLineNext();\n\t\t\t\tvar lastLine = this._getLinePrevious();\n\t\t\t\t\n\t\t\t\t// Selection is unchanged and bigger than the visible buffer region\n\t\t\t\tif (selection.anchorNode === firstLine.firstChild.firstChild && selection.anchorOffset === 0 &&\n\t\t\t\t\tselection.focusNode === lastLine.firstChild.firstChild && selection.focusOffset === 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Detect select all\n\t\t\t\tif (\n\t\t\t\t(selection.anchorNode === firstLine.firstChild.firstChild && selection.anchorOffset === 0 && selection.focusNode === lastLine.lastChild.firstChild)\n\t\t\t\t|| (selection.anchorNode === this._clientDiv && selection.focusNode === this._clientDiv)\n\t\t\t\t) {\n\t\t\t\t\tstart = 0;\n\t\t\t\t\tend = this.getModel().getCharCount();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setSelection(new Selection(start, end), false, false);\n\t\t\tthis._checkSelectionChange = false;\n\t\t\treturn true;\n\t\t},\n\t\t_cancelCheckSelection: function() {\n\t\t\tif (this._checkSelectionChange) {\n\t\t\t\tthis._checkSelectionChange = false;\n\t\t\t\tthis._cancelPollSelectionChange();\n\t\t\t}\n\t\t},\n\t\t_cancelPollSelectionChange: function() {\n\t\t\tif (this._selPollTimer) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._selPollTimer);\n\t\t\t\tthis._selPollTimer = null; \n\t\t\t}\n\t\t},\n\t\t_pollSelectionChange: function(retryPoll) {\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._cancelPollSelectionChange();\n\t\t\tthis._selPollTimer = win.setTimeout(function() {\n\t\t\t\tthat._selPollTimer = null; \n\t\t\t\tif (!that._clientDiv) { return; }\n\t\t\t\tvar changed = that._updateSelectionFromDOM();\n\t\t\t\tif (!changed && retryPoll) {\n\t\t\t\t\tthat._pollSelectionChange(retryPoll);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\t_handleSelectionChange: function () {\n\t\t\tif (this._imeOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t * Feature in Android. The selection handles are hidden when the DOM changes. Sending\n\t\t\t * selection events to the application while the user is moving the selection handles\n\t\t\t * may hide the handles unexpectedly.  The fix is to delay updating the selection and\n\t\t\t * sending the event to the application.\n\t\t\t */\n\t\t\tif (util.isAndroid) {\n\t\t\t\tthis._pollSelectionChange();\n\t\t\t} else {\n\t\t\t\tthis._updateSelectionFromDOM();\n\t\t\t}\n\t\t},\n\t\t_handleTextInput: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._imeOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selection = this._getWindow().getSelection();\n\t\t\tif (\n\t\t\t\tselection.anchorNode !== this._anchorNode || selection.focusNode !== this._focusNode ||\n\t\t\t\tselection.anchorOffset !== this._anchorOffset || selection.focusOffset !== this._focusOffset\n\t\t\t) {\n\t\t\t\tvar temp = selection.anchorNode;\n\t\t\t\twhile (temp) {\n\t\t\t\t\tif (temp.lineIndex !== undefined) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t}\n\t\t\t\tif (temp) {\n\t\t\t\t\tvar model = this._model;\n\t\t\t\t\tvar lineIndex = temp.lineIndex;\n\t\t\t\t\tvar oldText = model.getLine(lineIndex), text = oldText;\n\t\t\t\t\tvar offset = 0;\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tif (selection.rangeCount > 0) {\n\t\t\t\t\t\tselection.getRangeAt(0).deleteContents();\n\t\t\t\t\t\tvar node = temp.ownerDocument.createTextNode(e.data);\n\t\t\t\t\t\tselection.getRangeAt(0).insertNode(node);\n\t\t\t\t\t\tvar nodeText = this._getDOMText(temp, node);\n\t\t\t\t\t\ttext = nodeText.text;\n\t\t\t\t\t\toffset = nodeText.offset;\n\t\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t\t}\n\t\t\t\t\ttemp.lineRemoved = true;\n\t\t\t\t\t\n\t\t\t\t\tvar start = 0;\n\t\t\t\t\twhile (oldText.charCodeAt(start) === text.charCodeAt(start) && start < offset) {\n\t\t\t\t\t\tstart++;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tvar end = oldText.length - 1, delta = text.length - oldText.length;\n\t\t\t\t\twhile (oldText.charCodeAt(end) === text.charCodeAt(end + delta) && end + delta >= offset + e.data.length) {\n\t\t\t\t\t\tend--;\n\t\t\t\t\t}\n\t\t\t\t\tend++;\n\t\t\t\t\t\n\t\t\t\t\tvar deltaText = text.substring(start, end + delta);\n\t\t\t\t\tstart += lineStart;\n\t\t\t\t\tend += lineStart;\n\t\t\t\t\t\n\t\t\t\t\tvar selections = this._getSelections();\n\t\t\t\t\tvar deltaStart = selections[0].start - start;\n\t\t\t\t\tvar deltaEnd = selections[0].end - end;\n\t\t\t\t\tselections[0].start = start;\n\t\t\t\t\tselections[0].end = end;\n\t\t\t\t\tfor (var i=1; i<selections.length; i++) {\n\t\t\t\t\t\tselections[i].start -= deltaStart;\n\t\t\t\t\t\tselections[i].end -= deltaEnd;\n\t\t\t\t\t}\n\t\t\t\t\tthis._modifyContent({text: deltaText, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._doContent(e.data);\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t},\n\t\t_handleTouchStart: function (e) {\n\t\t\tif (this.isListening(\"TouchStart\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchStart\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchStart(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._commitIME();\n\t\t\tvar win = this._getWindow();\n\t\t\tif (this._touchScrollTimer) {\n\t\t\t\tthis._vScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\twin.clearInterval(this._touchScrollTimer);\n\t\t\t\tthis._touchScrollTimer = null;\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 1) {\n\t\t\t\tvar touch = touches[0];\n\t\t\t\tvar x = touch.clientX, y = touch.clientY;\n\t\t\t\tthis._touchStartX = x;\n\t\t\t\tthis._touchStartY = y;\n\t\t\t\tif (util.isAndroid) {\n\t\t\t\t\t/*\n\t\t\t\t\t* Bug in Android 4.  The clientX/Y coordinates of the touch events\n\t\t\t\t\t* include the page scrolling offsets.\n\t\t\t\t\t*/\n\t\t\t\t    if (y < (touch.pageY - win.pageYOffset) || x < (touch.pageX - win.pageXOffset) ) {\n\t\t\t\t\t\tx = touch.pageX - win.pageXOffset;\n\t\t\t\t\t\ty = touch.pageY - win.pageYOffset;\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t\tvar pt = this.convert({x: x, y: y}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tthis._lastTouchOffset = this.getOffsetAtLocation(pt.x, pt.y);\n\t\t\t\tthis._touchStartTime = e.timeStamp;\n\t\t\t\tthis._touching = true;\n\t\t\t}\n\t\t},\n\t\t_handleTouchMove: function (e) {\n\t\t\tif (this.isListening(\"TouchMove\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchMove\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchMove(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 1) {\n\t\t\t\tvar touch = touches[0];\n\t\t\t\tthis._touchCurrentX = touch.clientX;\n\t\t\t\tthis._touchCurrentY = touch.clientY;\n\t\t\t\tvar interval = 10;\n\t\t\t\tif (!this._touchScrollTimer && (e.timeStamp - this._touchStartTime) < (interval*20)) {\n\t\t\t\t\tthis._vScrollDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\t\tthis._hScrollDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tvar win = this._getWindow();\n\t\t\t\t\tthis._touchScrollTimer = win.setInterval(function() {\n\t\t\t\t\t\tvar deltaX = 0, deltaY = 0;\n\t\t\t\t\t\tif (that._touching) {\n\t\t\t\t\t\t\tdeltaX = that._touchStartX - that._touchCurrentX;\n\t\t\t\t\t\t\tdeltaY = that._touchStartY - that._touchCurrentY;\n\t\t\t\t\t\t\tthat._touchSpeedX = deltaX / interval;\n\t\t\t\t\t\t\tthat._touchSpeedY = deltaY / interval;\n\t\t\t\t\t\t\tthat._touchStartX = that._touchCurrentX;\n\t\t\t\t\t\t\tthat._touchStartY = that._touchCurrentY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (Math.abs(that._touchSpeedX) < 0.1 && Math.abs(that._touchSpeedY) < 0.1) {\n\t\t\t\t\t\t\t\tthat._vScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\t\tthat._hScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\t\twin.clearInterval(that._touchScrollTimer);\n\t\t\t\t\t\t\t\tthat._touchScrollTimer = null;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdeltaX = that._touchSpeedX * interval;\n\t\t\t\t\t\t\t\tdeltaY = that._touchSpeedY * interval;\n\t\t\t\t\t\t\t\tthat._touchSpeedX *= 0.95;\n\t\t\t\t\t\t\t\tthat._touchSpeedY *= 0.95;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat._scrollView(deltaX, deltaY);\n\t\t\t\t\t}, interval);\n\t\t\t\t}\n\t\t\t\tif (this._touchScrollTimer) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleTouchEnd: function (e) {\n\t\t\tif (this.isListening(\"TouchEnd\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchEnd\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchEnd(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 0) {\n\t\t\t\tthis._touching = false;\n\t\t\t}\n\t\t},\n\n\t\t/************************************ Actions ******************************************/\n\t\t_doAction: function (e) {\n\t\t\tvar mode, i;\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (i = keyModes.length - 1 ; i >= 0; i--) {\n\t\t\t\tmode = keyModes[i];\n\t\t\t\tif (typeof mode.match === \"function\") { //$NON-NLS-1$\n\t\t\t\t\tvar actionID = mode.match(e);\n\t\t\t\t\tif (actionID !== undefined) {\n\t\t\t\t\t\treturn this.invokeAction(actionID);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_doMove: function(args, selection) {\n\t\t\tvar model = this._model;\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar lineIndex = model.getLineAtOffset(caret);\n\t\t\tif (!args.count) {\n\t\t\t\targs.count = 1;\n\t\t\t}\n\t\t\twhile (args.count !== 0) {\n\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\tif (args.count < 0 && caret === lineStart) {\n\t\t\t\t\tif (lineIndex > 0) {\n\t\t\t\t\t\tif (args.unit === \"character\") { //$NON-NLS-1$\n\t\t\t\t\t\t\targs.count++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\tselection.extend(model.getLineEnd(lineIndex));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (args.count > 0 && caret === model.getLineEnd(lineIndex)) {\n\t\t\t\t\tif (lineIndex + 1 < model.getLineCount()) {\n\t\t\t\t\t\tif (args.unit === \"character\") { //$NON-NLS-1$\n\t\t\t\t\t\t\targs.count--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t\tselection.extend(model.getLineStart(lineIndex));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar removeTab = false;\n\t\t\t\t\tif (args.expandTab && args.unit === \"character\" && (caret - lineStart) % this._tabSize === 0) { //$NON-NLS-1$\n\t\t\t\t\t\tvar lineText = model.getText(lineStart, caret);\n\t\t\t\t\t\tremoveTab = !/[^ ]/.test(lineText); // Only spaces between line start and caret.\n\t\t\t\t\t}\n\t\t\t\t\tif (removeTab) {\n\t\t\t\t\t\tselection.extend(caret - this._tabSize);\n\t\t\t\t\t\targs.count += args.count < 0 ? 1 : -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar line = this._getLine(lineIndex);\n\t\t\t\t\t\tselection.extend(line.getNextOffset(caret, args));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcaret = selection.getCaret();\n\t\t\t}\n\t\t\treturn selection;\n\t\t},\n\t\t_doBackspace: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\tif (!args.count) {\n\t\t\t\t\t\targs.count = 1;\n\t\t\t\t\t}\n\t\t\t\t\targs.count *= -1;\n\t\t\t\t\targs.expandTab = that._expandTab;\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCase: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar changes = [];\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tthat._doMove(args, selection);\n\t\t\t\tvar text = that.getText(selection.start, selection.end);\n\t\t\t\tswitch (args.type) {\n\t\t\t\t\tcase \"lower\": text = text.toLowerCase(); break; //$NON-NLS-1$\n\t\t\t\t\tcase \"capitalize\": text = text.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); }); break; //$NON-NLS-1$\n\t\t\t\t\tcase \"reverse\":  //$NON-NLS-1$\n\t\t\t\t\t\tvar newText = \"\";\n\t\t\t\t\t\tfor (var i=0; i<text.length; i++) {\n\t\t\t\t\t\t\tvar s = text[i];\n\t\t\t\t\t\t\tvar l = s.toLowerCase();\n\t\t\t\t\t\t\tif (l !== s) {\n\t\t\t\t\t\t\t\ts = l;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ts = s.toUpperCase();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewText += s;\n\t\t\t\t\t\t} \n\t\t\t\t\t\ttext = newText;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault: text = text.toUpperCase(); break;\n\t\t\t\t}\n\t\t\t\tchanges.push(text);\n\t\t\t});\n\t\t\treturn this._modifyContent({text: changes, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doContent: function (text) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (that._overwriteMode && selection.isEmpty()) {\n\t\t\t\t\tvar model = that._model;\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(selection.end);\n\t\t\t\t\tif (selection.end < model.getLineEnd(lineIndex)) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tselection.extend(line.getNextOffset(selection.getCaret(), {unit:\"character\", count:1})); //$NON-NLS-1$\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this._modifyContent({text: text, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doCopy: function (e) {\n\t\t\tvar text = this.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\treturn this._setClipboardText(text, e);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doCursorNext: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty() && !args.select) {\n\t\t\t\t\tselection.start = selection.end;\n\t\t\t\t} else {\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCursorPrevious: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty() && !args.select) {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t} else {\n\t\t\t\t\tif (!args.count) {\n\t\t\t\t\t\targs.count = 1;\n\t\t\t\t\t}\n\t\t\t\t\targs.count *= -1;\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCut: function (e) {\n\t\t\tvar text = this.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\tif (!this._setClipboardText(text, e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis._doContent(\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doDelete: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doEnd: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (args.ctrl) {\n\t\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\t\tif (that._wrapMode) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tvar visualIndex = line.getLineIndex(offset);\n\t\t\t\t\t\tif (visualIndex === line.getLineCount() - 1) {\n\t\t\t\t\t\t\toffset = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toffset = line.getLineStart(visualIndex + 1) - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\t\tlineIndex = Math.min (lineIndex  + args.count - 1, model.getLineCount() - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset = model.getLineEnd(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(offset);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, args.ctrl ? function() {} : null);\n\t\t\treturn true;\n\t\t},\n\t\t_doEnter: function (args) {\n\t\t\tif (this._singleMode) return true;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tthis._doContent(model.getLineDelimiter()); \n\t\t\tif (args && args.noCursor) {\n\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t});\n\t\t\t\tthis._setSelection(selections, true);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doEscape: function () {\n\t\t\tvar selections = this._getSelections();\n\t\t\tif (selections.length > 1) {\n\t\t\t\tthis._setSelection(selections[0], true);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doHome: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (args.ctrl) {\n\t\t\t\t\tselection.extend(0);\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\t\tif (that._wrapMode) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tvar visualIndex = line.getLineIndex(offset);\n\t\t\t\t\t\toffset = line.getLineStart(visualIndex);\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t} else {\n\t\t\t\t\t\toffset = model.getLineStart(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(offset); \n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, args.ctrl ? function() {} : null);\n\t\t\treturn true;\n\t\t},\n\t\t_doLineDown: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caret), visualIndex;\n\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\tvar x = selection._columnX, y = 1, lastLine = false;\n\t\t\t\tif (x === -1 || args.wholeLine || (args.select && util.isIE)) {\n\t\t\t\t\tvar offset = args.wholeLine ? model.getLineEnd(lineIndex + 1) : caret;\n\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(offset).left;\n\t\t\t\t}\n\t\t\t\tif ((visualIndex = line.getLineIndex(caret)) < line.getLineCount() - 1) {\n\t\t\t\t\ty = line.getClientRects(visualIndex + 1).top + 1;\n\t\t\t\t} else {\n\t\t\t\t\tvar lastLineCount = model.getLineCount() - 1;\n\t\t\t\t\tlastLine = lineIndex === lastLineCount;\n\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\tlineIndex = Math.min (lineIndex + args.count, lastLineCount);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar select = false;\n\t\t\t\tif (lastLine) {\n\t\t\t\t\tif (args.select || (util.isMac || util.isLinux)) {\n\t\t\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t\t\t\tselect = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (line.lineIndex !== lineIndex) {\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(line.getOffset(x, y));\n\t\t\t\t\tselect = true;\n\t\t\t\t}\n\t\t\t\tif (select) {\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t}\n\t\t\t\tline.destroy();\n\t\t\t});\n\t\t\tthat._setSelection(selections, true, true, null, 0, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doLineUp: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caret), visualIndex;\n\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\tvar x = selection._columnX, firstLine = false, y;\n\t\t\t\tif (x === -1 || args.wholeLine || (args.select && util.isIE)) {\n\t\t\t\t\tvar offset = args.wholeLine ? model.getLineStart(lineIndex - 1) : caret;\n\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(offset).left;\n\t\t\t\t}\n\t\t\t\tif ((visualIndex = line.getLineIndex(caret)) > 0) {\n\t\t\t\t\ty = line.getClientRects(visualIndex - 1).top + 1;\n\t\t\t\t} else {\n\t\t\t\t\tfirstLine = lineIndex === 0;\n\t\t\t\t\tif (!firstLine) {\n\t\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\t\tlineIndex = Math.max (lineIndex - args.count, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ty = that._getLineHeight(lineIndex) - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar select = false;\n\t\t\t\tif (firstLine) {\n\t\t\t\t\tif (args.select || (util.isMac || util.isLinux)) {\n\t\t\t\t\t\tselection.extend(0);\n\t\t\t\t\t\tselect = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (line.lineIndex !== lineIndex) {\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(line.getOffset(x, y));\n\t\t\t\t\tselect = true;\n\t\t\t\t}\n\t\t\t\tif (select) {\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t}\n\t\t\t\tline.destroy();\n\t\t\t});\n\t\t\tthat._setSelection(selections, true, true, null, 0, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doNoop: function () {\n\t\t\treturn true;\n\t\t},\n\t\t_doPageDown: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar lines = Math.floor(clientHeight / lineHeight);\n\t\t\tvar x, line, pageScroll;\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar caretLine = model.getLineAtOffset(caret);\n\t\t\t\tif (that._lineHeight) {\n\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\tvar caretRect = that._getBoundsAtOffset(caret);\n\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\tx = selection._columnX = caretRect.left;\n\t\t\t\t\t}\n\t\t\t\t\tvar lineIndex = that._getLineIndex(caretRect.top + clientHeight);\n\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\tvar linePixel = that._getLinePixel(lineIndex);\n\t\t\t\t\tvar y = caretRect.top + clientHeight - linePixel;\n\t\t\t\t\tcaret = line.getOffset(x, y);\n\t\t\t\t\tvar rect = line.getBoundingClientRect(caret);\n\t\t\t\t\tline.destroy();\n\t\t\t\t\tselection.extend(caret);\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.min(pageScroll, rect.top + linePixel - caretRect.top) : rect.top + linePixel - caretRect.top;\n\t\t\t\t} else {\n\t\t\t\t\tif (caretLine < lineCount - 1) {\n\t\t\t\t\t\tvar scrollLines = Math.min(lineCount - caretLine - 1, lines);\n\t\t\t\t\t\tscrollLines = Math.max(1, scrollLines);\n\t\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\t\tline = that._getLine(caretLine);\n\t\t\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(caret).left;\n\t\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = that._getLine(caretLine + scrollLines);\n\t\t\t\t\t\tselection.extend(line.getOffset(x, 0));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\t\tvar verticalMaximum = lineCount * lineHeight;\n\t\t\t\t\t\tvar scrollOffset = _scroll.y + scrollLines * lineHeight;\n\t\t\t\t\t\tif (scrollOffset + clientHeight > verticalMaximum) {\n\t\t\t\t\t\t\tscrollOffset = verticalMaximum - clientHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.min(pageScroll, scrollOffset - _scroll.y) : scrollOffset - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, function() {}, pageScroll, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doPageUp: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar lines = Math.floor(clientHeight / lineHeight);\n\t\t\tvar x, line, pageScroll;\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar caretLine = model.getLineAtOffset(caret);\n\t\t\t\tif (that._lineHeight) {\n\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\tvar caretRect = that._getBoundsAtOffset(caret);\n\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\tx = selection._columnX = caretRect.left;\n\t\t\t\t\t}\n\t\t\t\t\tvar lineIndex = that._getLineIndex(caretRect.bottom - clientHeight);\n\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\tvar linePixel = that._getLinePixel(lineIndex);\n\t\t\t\t\tvar y = (caretRect.bottom - clientHeight) - linePixel;\n\t\t\t\t\tcaret = line.getOffset(x, y);\n\t\t\t\t\tvar rect = line.getBoundingClientRect(caret);\n\t\t\t\t\tline.destroy();\n\t\t\t\t\tselection.extend(caret);\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.max(pageScroll, rect.top + linePixel - caretRect.top) : rect.top + linePixel - caretRect.top;\n\t\t\t\t} else {\n\t\t\t\t\tif (caretLine > 0) {\n\t\t\t\t\t\tvar scrollLines = Math.max(1, Math.min(caretLine, lines));\n\t\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\t\tline = that._getLine(caretLine);\n\t\t\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(caret).left;\n\t\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = that._getLine(caretLine - scrollLines);\n\t\t\t\t\t\tselection.extend(line.getOffset(x, that._getLineHeight(caretLine - scrollLines) - 1));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\t\tvar scrollOffset = Math.max(0, _scroll.y - scrollLines * lineHeight);\n\t\t\t\t\t\tpageScroll = pageScroll !== undefined  ? Math.max(pageScroll, scrollOffset - _scroll.y) : scrollOffset - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, function() {}, pageScroll, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doPaste: function(e) {\n\t\t\tvar that = this;\n\t\t\tvar result = this._getClipboardText(e, function(text) {\n\t\t\t\tif (text.length) {\n\t\t\t\t\tif (util.isLinux && that._lastMouseButton === 2) {\n\t\t\t\t\t\tvar timeDiff = Date.now() - that._lastMouseTime;\n\t\t\t\t\t\tif (timeDiff <= that._clickTime) {\n\t\t\t\t\t\t\tthat._setSelectionTo(that._lastMouseX, that._lastMouseY, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar selections = that._getSelections();\n\t\t\t\t\tvar delimiter = that._singleMode ? \"\" : that._model.getLineDelimiter();\n\t\t\t\t\tthat._doContent(selections.length > 1 && selections.length === text.length ? text : text.join(delimiter));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result !== null;\n\t\t},\n\t\t_doScroll: function (args) {\n\t\t\tvar type = args.type;\n\t\t\tvar model = this._model;\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar verticalMaximum = this._lineHeight ? this._scrollHeight : lineCount * lineHeight;\n\t\t\tvar verticalScrollOffset = this._getScroll().y;\n\t\t\tvar pixel;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"textStart\": pixel = 0; break; //$NON-NLS-1$\n\t\t\t\tcase \"textEnd\": pixel = verticalMaximum - clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"pageDown\": pixel = verticalScrollOffset + clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"pageUp\": pixel = verticalScrollOffset - clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"lineDown\": pixel = verticalScrollOffset + lineHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"lineUp\": pixel = verticalScrollOffset - lineHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"centerLine\": //$NON-NLS-1$\n\t\t\t\t\tvar selection = this._getSelections()[0];\n\t\t\t\t\tvar lineStart = model.getLineAtOffset(selection.start);\n\t\t\t\t\tvar lineEnd = model.getLineAtOffset(selection.end);\n\t\t\t\t\tvar selectionHeight = (lineEnd - lineStart + 1) * lineHeight;\n\t\t\t\t\tpixel = (lineStart * lineHeight) - (clientHeight / 2) + (selectionHeight / 2);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (pixel !== undefined) {\n\t\t\t\tpixel = Math.min(Math.max(0, pixel), verticalMaximum - clientHeight);\n\t\t\t\tthis._scrollViewAnimated(0, pixel - verticalScrollOffset, function() {});\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doSelectAll: function () {\n\t\t\tvar model = this._model;\n\t\t\tthis._setSelection(new Selection(0, model.getCharCount()), false);\n\t\t\treturn true;\n\t\t},\n\t\t_doTab: function () {\n\t\t\tif (!this._tabMode || this._readonly) { return; }\n\t\t\tvar text = \"\\t\"; //$NON-NLS-1$\n\t\t\tvar selections = this._getSelections();\n\t\t\tif (this._expandTab) {\n\t\t\t\ttext = [];\n\t\t\t\tvar model = this._model;\n\t\t\t\tvar tabSize = this._tabSize;\n\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(caret);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tvar spaces = tabSize - ((caret - lineStart) % tabSize);\n\t\t\t\t\ttext.push((newArray(spaces + 1)).join(\" \")); //$NON-NLS-1$\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this._modifyContent({text: text, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doShiftTab: function () {\n\t\t\tif (!this._tabMode || this._readonly) { return; }\n\t\t\treturn true;\n\t\t},\n\t\t_doOverwriteMode: function () {\n\t\t\tif (this._readonly) { return; }\n\t\t\tthis.setOptions({overwriteMode: !this.getOptions(\"overwriteMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_doTabMode: function () {\n\t\t\tthis.setOptions({tabMode: !this.getOptions(\"tabMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_doWrapMode: function () {\n\t\t\tthis.setOptions({wrapMode: !this.getOptions(\"wrapMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\t/************************************ Internals ******************************************/\n\t\t_autoScroll: function () {\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar selection = Selection.editing(selections, this._autoScrollDir === \"down\"); //$NON-NLS-1$\n\t\t\tvar pt = this.convert({x: this._autoScrollX, y: this._autoScrollY}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar caretLine = model.getLineAtOffset(caret), lineIndex, line;\n\t\t\tif (this._autoScrollDir === \"up\" || this._autoScrollDir === \"down\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tvar _scroll = this._autoScrollY / this._getLineHeight();\n\t\t\t\t_scroll = _scroll < 0 ? Math.floor(_scroll) : Math.ceil(_scroll);\n\t\t\t\tlineIndex = caretLine;\n\t\t\t\tlineIndex = Math.max(0, Math.min(lineCount - 1, lineIndex + _scroll));\n\t\t\t} else if (this._autoScrollDir === \"left\" || this._autoScrollDir === \"right\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tlineIndex = this._getLineIndex(pt.y);\n\t\t\t\tline = this._getLine(caretLine); \n\t\t\t\tpt.x += line.getBoundingClientRect(caret, false).left;\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tif (this._blockSelection) {\n\t\t\t\tselections = this._getBlockSelections(selections, lineIndex, pt);\n\t\t\t} else if (lineIndex === 0 && (util.isMac || util.isLinux)) {\n\t\t\t\tselection.extend(0);\n\t\t\t} else if (lineIndex === lineCount - 1 && (util.isMac || util.isLinux)) {\n\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t} else {\n\t\t\t\tline = this._getLine(lineIndex);\n\t\t\t\tselection.extend(line.getOffset(pt.x, pt.y - this._getLinePixel(lineIndex)));\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tthis._setSelection(selections, true);\n\t\t},\n\t\t_autoScrollTimer: function () {\n\t\t\tthis._autoScroll();\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._autoScrollTimerID = win.setTimeout(function () {that._autoScrollTimer();}, this._AUTO_SCROLL_RATE);\n\t\t},\n\t\t_calculateLineHeightTimer: function(calculate) {\n\t\t\tif (!this._lineHeight) { return; }\n\t\t\tif (this._calculateLHTimer) { return; }\n\t\t\tvar lineCount = this._model.getLineCount(), i = 0;\n\t\t\tif (calculate) {\n\t\t\t\tvar c = 0;\n\t\t\t\tvar MAX_TIME = 100;\n\t\t\t\tvar start = Date.now(), firstLine = 0;\n\t\t\t\twhile (i < lineCount) {\n\t\t\t\t\tif (!this._lineHeight[i]) {\n\t\t\t\t\t\tc++;\n\t\t\t\t\t\tif (!firstLine) { firstLine = i; }\n\t\t\t\t\t\tthis._lineHeight[i] = this._calculateLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t\ti++;\n\t\t\t\t\tif ((Date.now() - start) > MAX_TIME) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.redrawRulers(0, lineCount);\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tif (i !== lineCount) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._calculateLHTimer = win.setTimeout(function() {\n\t\t\t\t\tthat._calculateLHTimer = null;\n\t\t\t\t\tthat._calculateLineHeightTimer(true);\n\t\t\t\t}, 0);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._calculateLHTimer) {\n\t\t\t\twin.clearTimeout(this._calculateLHTimer);\n\t\t\t\tthis._calculateLHTimer = undefined;\n\t\t\t}\n\t\t},\n\t\t_calculateLineHeight: function(lineIndex) {\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar rect = line.getBoundingClientRect();\n\t\t\tline.destroy();\n\t\t\treturn Math.max(1, rect.bottom - rect.top);\n\t\t},\n\t\t_calculateMetrics: function() {\n\t\t\tvar _parent = this._clientDiv;\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar c = \" \"; //$NON-NLS-1$\n\t\t\tvar line = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tline.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\tvar model = this._model;\n\t\t\tvar lineText = model.getLine(0);\n\t\t\tvar e = {type:\"LineStyle\", textView: this, 0: 0, lineText: lineText, lineStart: 0}; //$NON-NLS-1$\n\t\t\tthis.onLineStyle(e);\n\t\t\tapplyStyle(e.style, line);\n\t\t\tline.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tline.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tvar span1 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan1.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span1);\n\t\t\tvar span2 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan2.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\tspan2.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span2);\n\t\t\tvar span3 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan3.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\tspan3.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span3);\n\t\t\tvar span4 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan4.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\tspan4.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\tspan4.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span4);\n\t\t\t_parent.appendChild(line);\n\t\t\tvar lineRect = line.getBoundingClientRect();\n\t\t\tvar spanRect1 = span1.getBoundingClientRect();\n\t\t\tvar spanRect2 = span2.getBoundingClientRect();\n\t\t\tvar spanRect3 = span3.getBoundingClientRect();\n\t\t\tvar spanRect4 = span4.getBoundingClientRect();\n\t\t\tvar h1 = spanRect1.bottom - spanRect1.top;\n\t\t\tvar h2 = spanRect2.bottom - spanRect2.top;\n\t\t\tvar h3 = spanRect3.bottom - spanRect3.top;\n\t\t\tvar h4 = spanRect4.bottom - spanRect4.top;\n\t\t\tvar fontStyle = 0;\n\t\t\tvar invalid = (lineRect.bottom - lineRect.top) <= 0;\n\t\t\tvar lineHeight = Math.max(1, lineRect.bottom - lineRect.top);\n\t\t\tif (h2 > h1) {\n\t\t\t\tfontStyle = 1;\n\t\t\t}\n\t\t\tif (h3 > h2) {\n\t\t\t\tfontStyle = 2;\n\t\t\t}\n\t\t\tif (h4 > h3) {\n\t\t\t\tfontStyle = 3;\n\t\t\t}\n\t\t\tvar style;\n\t\t\tif (fontStyle !== 0) {\n\t\t\t\tstyle = {style: {}};\n\t\t\t\tif ((fontStyle & 1) !== 0) {\n\t\t\t\t\tstyle.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif ((fontStyle & 2) !== 0) {\n\t\t\t\t\tstyle.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar trim = getLineTrim(line);\n\t\t\t_parent.removeChild(line);\n\t\t\t\n\t\t\t// calculate pad and scroll width\n\t\t\tvar pad = getPadding(this._viewDiv);\n\t\t\tvar div1 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingLeft = pad.left + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingTop = pad.top + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingRight = pad.right + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingBottom = pad.bottom + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.width = \"100px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.height = \"100px\"; //$NON-NLS-1$\n\t\t\tvar div2 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv2.style.width = \"100%\"; //$NON-NLS-1$\n\t\t\tdiv2.style.height = \"100%\"; //$NON-NLS-1$\n\t\t\tdiv1.appendChild(div2);\n\t\t\t_parent.appendChild(div1);\n\t\t\tvar rect1 = div1.getBoundingClientRect();\n\t\t\tvar rect2 = div2.getBoundingClientRect();\n\t\t\tvar scrollWidth = 0;\n\t\t\tif (!this._singleMode && !this._noScroll) {\n\t\t\t\tdiv1.style.overflow = 'hidden'; //$NON-NLS-1$\n\t\t\t\tdiv2.style.height = \"200px\"; //$NON-NLS-1$\n\t\t\t\tvar w1 = div1.clientWidth;\n\t\t\t\tdiv1.style.overflow = 'scroll'; //$NON-NLS-1$\n\t\t\t\tvar w2 = div1.clientWidth;\n\t\t\t\tscrollWidth = w1 - w2;\n\t\t\t}\n\t\t\t_parent.removeChild(div1);\n\t\t\tpad = {\n\t\t\t\tleft: rect2.left - rect1.left,\n\t\t\t\ttop: rect2.top - rect1.top,\n\t\t\t\tright: rect1.right - rect2.right,\n\t\t\t\tbottom: rect1.bottom - rect2.bottom\n\t\t\t};\n\t\t\tvar wrapWidth = 0, marginWidth = 0, charWidth = 0;\n\t\t\tif (!invalid) {\n\t\t\t\tdiv1 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\t_parent.appendChild(div1);\n\t\t\t\tdiv1.innerHTML = newArray(2).join(\"a\"); //$NON-NLS-1$\n\t\t\t\trect1 = div1.getBoundingClientRect();\n\t\t\t\tcharWidth = Math.ceil(rect1.right - rect1.left);\n\t\t\t\tif (this._wrapOffset || this._marginOffset) {\n\t\t\t\t\tdiv1.innerHTML = newArray(this._wrapOffset + 1 + (util.isWebkit ? 0 : 1)).join(\" \"); //$NON-NLS-1$\n\t\t\t\t\trect1 = div1.getBoundingClientRect();\n\t\t\t\t\twrapWidth = Math.ceil(rect1.right - rect1.left);\n\t\t\t\t\tdiv1.innerHTML = newArray(this._marginOffset + 1).join(\" \"); //$NON-NLS-1$\n\t\t\t\t\trect2 = div1.getBoundingClientRect();\n\t\t\t\t\tmarginWidth = Math.ceil(rect2.right - rect2.left);\n\t\t\t\t}\n\t\t\t\t_parent.removeChild(div1);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tlineHeight: lineHeight,\n\t\t\t\tlargestFontStyle: style,\n\t\t\t\tlineTrim: trim,\n\t\t\t\tviewPadding: pad,\n\t\t\t\tscrollWidth: scrollWidth,\n\t\t\t\twrapWidth: wrapWidth,\n\t\t\t\tmarginWidth: marginWidth,\n\t\t\t\tcharWidth: charWidth,\n\t\t\t\tinvalid: invalid\n\t\t\t};\n\t\t},\n\t\t_cancelAnimation: function() {\n\t\t\tif (this._animation) {\n\t\t\t\tthis._animation.stop();\n\t\t\t\tthis._animation = null;\n\t\t\t}\n\t\t},\n\t\t_clearSelection: function (direction) {\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (direction === \"next\") { //$NON-NLS-1$\n\t\t\t\t\tselection.start = selection.end;\n\t\t\t\t} else {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_commitIME: function (insertText) {\n\t\t\tif (this._imeOffset === -1) { return; }\n\t\t\tvar model = this._model;\n\t\t\tvar lineIndex = model.getLineAtOffset(this._imeOffset);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar line = this._getLineNode(lineIndex);\n\t\t\tif (!insertText) {\n\t\t\t\t// make the state of the IME match the state the view expects it be in\n\t\t\t\t// when the view commits the text and IME also need to be committed\n\t\t\t\t// this can be accomplished by changing the focus around\n\t\t\t\tthis._scrollDiv.focus();\n\t\t\t\tthis._clientDiv.focus();\n\t\t\t\t\n\t\t\t\tvar newText = this._getDOMText(line).text;\n\t\t\t\tvar oldText = model.getLine(lineIndex);\n\t\t\t\tvar start = this._imeOffset - lineStart;\n\t\t\t\tvar end = start + newText.length - oldText.length;\n\t\t\t\tif (start !== end) {\n\t\t\t\t\tinsertText = newText.substring(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._imeOffset = -1;\n\t\t\tif (insertText) {\n\t\t\t\tif (!this._doContent(insertText) && !util.isWebkit) {\n\t\t\t\t\tline.lineRemoved = true;\n\t\t\t\t\tthis._queueUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_createActions: function () {\n\t\t\tthis.addKeyMode(new mKeyModes.DefaultKeyMode(this));\n\t\t\t//1 to 1, no duplicates\n\t\t\tvar that = this;\n\t\t\tthis._actions = {\n\t\t\t\t\"noop\": {defaultHandler: function() {return that._doNoop();}}, //$NON-NLS-1$\n\n\t\t\t\t\"lineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: false}));}, actionDescription: {name: messages.lineUp}}, //$NON-NLS-1$\n\t\t\t\t\"lineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: false}));}, actionDescription: {name: messages.lineDown}}, //$NON-NLS-1$\n\t\t\t\t\"lineStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: false, ctrl:false}));}, actionDescription: {name: messages.lineStart}}, //$NON-NLS-1$\n\t\t\t\t\"lineEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: false, ctrl:false}));}, actionDescription: {name: messages.lineEnd}}, //$NON-NLS-1$\n\t\t\t\t\"charPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: false, unit:\"character\"}));}, actionDescription: {name: messages.charPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"charNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: false, unit:\"character\"}));}, actionDescription: {name: messages.charNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"pageUp\": {defaultHandler: function(data) {return that._doPageUp(merge(data,{select: false}));}, actionDescription: {name: messages.pageUp}}, //$NON-NLS-1$\n\t\t\t\t\"pageDown\": {defaultHandler: function(data) {return that._doPageDown(merge(data,{select: false}));}, actionDescription: {name: messages.pageDown}}, //$NON-NLS-1$\n\t\t\t\t\"scrollPageUp\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"pageUp\"}));}, actionDescription: {name: messages.scrollPageUp}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollPageDown\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"pageDown\"}));}, actionDescription: {name: messages.scrollPageDown}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollLineUp\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"lineUp\"}));}, actionDescription: {name: messages.scrollLineUp}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollLineDown\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"lineDown\"}));}, actionDescription: {name: messages.scrollLineDown}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"wordPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: false, unit:\"word\"}));}, actionDescription: {name: messages.wordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"wordNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: false, unit:\"word\"}));}, actionDescription: {name: messages.wordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"textStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: false, ctrl:true}));}, actionDescription: {name: messages.textStart}}, //$NON-NLS-1$\n\t\t\t\t\"textEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: false, ctrl:true}));}, actionDescription: {name: messages.textEnd}}, //$NON-NLS-1$\n\t\t\t\t\"scrollTextStart\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"textStart\"}));}, actionDescription: {name: messages.scrollTextStart}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollTextEnd\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"textEnd\"}));}, actionDescription: {name: messages.scrollTextEnd}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"centerLine\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"centerLine\"}));}, actionDescription: {name: messages.centerLine}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"selectLineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: true}));}, actionDescription: {name: messages.selectLineUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: true}));}, actionDescription: {name: messages.selectLineDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectWholeLineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: true, wholeLine: true}));}, actionDescription: {name: messages.selectWholeLineUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectWholeLineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: true, wholeLine: true}));}, actionDescription: {name: messages.selectWholeLineDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: true, ctrl:false}));}, actionDescription: {name: messages.selectLineStart}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: true, ctrl:false}));}, actionDescription: {name: messages.selectLineEnd}}, //$NON-NLS-1$\n\t\t\t\t\"selectCharPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: true, unit:\"character\"}));}, actionDescription: {name: messages.selectCharPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectCharNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: true, unit:\"character\"}));}, actionDescription: {name: messages.selectCharNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectPageUp\": {defaultHandler: function(data) {return that._doPageUp(merge(data,{select: true}));}, actionDescription: {name: messages.selectPageUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectPageDown\": {defaultHandler: function(data) {return that._doPageDown(merge(data,{select: true}));}, actionDescription: {name: messages.selectPageDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectWordPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: true, unit:\"word\"}));}, actionDescription: {name: messages.selectWordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectWordNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: true, unit:\"word\"}));}, actionDescription: {name: messages.selectWordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectTextStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: true, ctrl:true}));}, actionDescription: {name: messages.selectTextStart}}, //$NON-NLS-1$\n\t\t\t\t\"selectTextEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: true, ctrl:true}));}, actionDescription: {name: messages.selectTextEnd}}, //$NON-NLS-1$\n\n\t\t\t\t\"deletePrevious\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit:\"character\"}));}, actionDescription: {name: messages.deletePrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteNext\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit:\"character\"}));}, actionDescription: {name: messages.deleteNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteWordPrevious\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit:\"word\"}));}, actionDescription: {name: messages.deleteWordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteWordNext\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit:\"word\"}));}, actionDescription: {name: messages.deleteWordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteLineStart\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit: \"line\"}));}, actionDescription: {name: messages.deleteLineStart}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteLineEnd\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit: \"line\"}));}, actionDescription: {name: messages.deleteLineEnd}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"tab\": {defaultHandler: function(data) {return that._doTab(merge(data,{}));}, actionDescription: {name: messages.tab}}, //$NON-NLS-1$\n\t\t\t\t\"shiftTab\": {defaultHandler: function(data) {return that._doShiftTab(merge(data,{}));}, actionDescription: {name: messages.shiftTab}}, //$NON-NLS-1$\n\t\t\t\t\"enter\": {defaultHandler: function(data) {return that._doEnter(merge(data,{}));}, actionDescription: {name: messages.enter}}, //$NON-NLS-1$\n\t\t\t\t\"enterNoCursor\": {defaultHandler: function(data) {return that._doEnter(merge(data,{noCursor:true}));}, actionDescription: {name: messages.enterNoCursor}}, //$NON-NLS-1$\n\t\t\t\t\"escape\": {defaultHandler: function(data) {return that._doEscape(merge(data,{}));}, actionDescription: {name: messages.escape}}, //$NON-NLS-1$\n\t\t\t\t\"selectAll\": {defaultHandler: function(data) {return that._doSelectAll(merge(data,{}));}, actionDescription: {name: messages.selectAll}}, //$NON-NLS-1$\n\t\t\t\t\"copy\": {defaultHandler: function(data) {return that._doCopy(merge(data,{}));}, actionDescription: {name: messages.copy}}, //$NON-NLS-1$\n\t\t\t\t\"cut\": {defaultHandler: function(data) {return that._doCut(merge(data,{}));}, actionDescription: {name: messages.cut}}, //$NON-NLS-1$\n\t\t\t\t\"paste\": {defaultHandler: function(data) {return that._doPaste(merge(data,{}));}, actionDescription: {name: messages.paste}}, //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"uppercase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"upper\"}));}, actionDescription: {name: messages.uppercase}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"lowercase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"lower\"}));}, actionDescription: {name: messages.lowercase}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"capitalize\": {defaultHandler: function(data) {return that._doCase(merge(data,{unit: \"word\", type: \"capitalize\"}));}, actionDescription: {name: messages.capitalize}}, //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"reversecase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"reverse\"}));}, actionDescription: {name: messages.reversecase}}, //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"toggleOverwriteMode\": {defaultHandler: function(data) {return that._doOverwriteMode(merge(data,{}));}, actionDescription: {name: messages.toggleOverwriteMode}}, //$NON-NLS-1$\n\t\t\t\t\"toggleTabMode\": {defaultHandler: function(data) {return that._doTabMode(merge(data,{}));}, actionDescription: {name: messages.toggleTabMode}}, //$NON-NLS-1$\n\t\t\t\t\"toggleWrapMode\": {defaultHandler: function(data) {return that._doWrapMode(merge(data,{}));}, actionDescription: {name: messages.toggleWrapMode}} //$NON-NLS-1$\n\t\t\t};\n\t\t},\n\t\t_createRulerParent: function(doc, className) {\n\t\t\tvar div = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv.className = className;\n\t\t\tdiv.tabIndex = -1;\n\t\t\tdiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\tdiv.style.MozUserSelect = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.WebkitUserSelect = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tdiv.style.top = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.bottom = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.cursor = \"default\"; //$NON-NLS-1$\n\t\t\tdiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._rootDiv.appendChild(div);\n\t\t\treturn div;\n\t\t},\n\t\t_createRuler: function(ruler, index) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar rulerParent = this._getRulerParent(ruler);\n\t\t\tif (!rulerParent) { return; }\n\t\t\tif (rulerParent !== this._marginDiv || this._marginOffset) {\n\t\t\t\trulerParent.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\trulerParent.rulerWidth = undefined;\n\t\t\tvar div = util.createElement(rulerParent.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\tdiv._ruler = ruler;\n\t\t\truler.node = div;\n\t\t\tdiv.rulerChanged = true;\n\t\t\tdiv.style.position = \"relative\"; //$NON-NLS-1$\n\t\t\tdiv.style.cssFloat = \"left\"; //$NON-NLS-1$\n\t\t\tdiv.style.styleFloat = \"left\"; //$NON-NLS-1$\n\t\t\tdiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tif (index === undefined || index < 0 || index >= rulerParent.children.length) {\n\t\t\t\trulerParent.appendChild(div);\n\t\t\t} else {\n\t\t\t\tvar sibling = rulerParent.firstChild;\n\t\t\t\twhile (sibling && index-- > 0) {\n\t\t\t\t\tsibling = sibling.nextSibling;\n\t\t\t\t}\n\t\t\t\trulerParent.insertBefore(div, sibling);\n\t\t\t}\n\t\t},\n\t\t_createSelectionDiv: function() {\n\t\t\tvar div = util.createElement(this._parent.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\tdiv.className = \"textviewSelection\"; //$NON-NLS-1$\n\t\t\tdiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tdiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.width = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.height = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.zIndex = \"0\"; //$NON-NLS-1$\n\t\t\treturn div;\n\t\t},\n\t\t_createView: function() {\n\t\t\tif (this._clientDiv) { return; }\n\t\t\tvar _parent = this._parent;\n\t\t\twhile (_parent.hasChildNodes()) { _parent.removeChild(_parent.lastChild); }\n\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar rootDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tthis._rootDiv = rootDiv;\n\t\t\trootDiv.tabIndex = -1;\n\t\t\trootDiv.style.position = \"relative\"; //$NON-NLS-1$\n\t\t\trootDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\trootDiv.style.width = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.style.height = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\trootDiv.style.WebkitTextSizeAdjust = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.setAttribute(\"role\", \"application\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\trootDiv.setAttribute(\"aria-label\", \"Text View\"); //$NON-NLS-1$\n\t\t\t_parent.appendChild(rootDiv);\n\t\t\t\n\t\t\tvar leftDiv = this._createRulerParent(doc, \"textviewLeftRuler\"); //$NON-NLS-1$\n\t\t\tthis._leftDiv = leftDiv;\n\n\t\t\tvar viewDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tviewDiv.className = \"textviewScroll\"; //$NON-NLS-1$\n\t\t\tthis._viewDiv = viewDiv;\n\t\t\tviewDiv.tabIndex = -1;\n\t\t\tviewDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.top = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.bottom = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\trootDiv.appendChild(viewDiv);\n\t\t\t\n\t\t\tvar rightDiv = this._createRulerParent(doc, \"textviewRightRuler\"); //$NON-NLS-1$\n\t\t\tthis._rightDiv = rightDiv;\n\t\t\tif (document.dir == \"rtl\") { /* ACGC */\n\t\t\t\trightDiv.style.left = \"0px\"; //$NON-NLS-1$\n\t\t\t}else{\n\t\t\t\trightDiv.style.right = \"0px\"; //$NON-NLS-1$\t  \n\t\t\t}\n\n\t\t\tvar innerRightDiv = this._createRulerParent(doc, \"textviewInnerRightRuler\"); //$NON-NLS-1$\n\t\t\tthis._innerRightDiv = innerRightDiv;\n\t\t\tinnerRightDiv.style.zIndex = \"1\"; //$NON-NLS-1$\n\n\t\t\tvar scrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tthis._scrollDiv = scrollDiv;\n\t\t\tscrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tscrollDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tscrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.appendChild(scrollDiv);\n\t\t\t\n\t\t\tvar marginDiv = this._marginDiv = this._createRulerParent(doc, \"textviewMarginRuler\"); //$NON-NLS-1$\n\t\t\tmarginDiv.style.zIndex = \"4\"; //$NON-NLS-1$\n\t\t\t\n\t\t\tif (!util.isIE && !util.isIOS) {\n\t\t\t\tvar clipDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._clipDiv = clipDiv;\n\t\t\t\tclipDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(clipDiv);\n\t\t\t\t\n\t\t\t\tvar clipScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._clipScrollDiv = clipScrollDiv;\n\t\t\t\tclipScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.height = \"1px\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.top = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.appendChild(clipScrollDiv);\n\t\t\t}\n\n\t\t\tvar clientDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tclientDiv.className = \"textviewContent\"; //$NON-NLS-1$\n\t\t\tthis._clientDiv = clientDiv;\n\t\t\tclientDiv.tabIndex = 0;\n\t\t\tclientDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.zIndex = \"1\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.WebkitUserSelect = \"text\"; //$NON-NLS-1$\n\t\t\tclientDiv.setAttribute(\"spellcheck\", \"false\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\tclientDiv.style.WebkitTapHighlightColor = \"transparent\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\t(this._clipDiv || rootDiv).appendChild(clientDiv);\n\t\t\t\n\t\t\tthis._setFullSelection(this._fullSelection, true);\n\t\t\t\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\tvar vScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv = vScrollDiv;\n\t\t\t\tvScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderWidth = \"1px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderColor = \"white\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderStyle = \"solid\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderRadius = \"4px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.backgroundColor = \"black\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.opacity = \"0.5\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.zIndex = \"3\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.width = \"8px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(vScrollDiv);\n\t\t\t\tvar hScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv = hScrollDiv;\n\t\t\t\thScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderWidth = \"1px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderColor = \"white\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderStyle = \"solid\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderRadius = \"4px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.backgroundColor = \"black\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.opacity = \"0.5\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.zIndex = \"3\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.height = \"8px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(hScrollDiv);\n\t\t\t}\n\n\t\t\tif (util.isFirefox && !clientDiv.setCapture) {\n\t\t\t\tvar overlayDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._overlayDiv = overlayDiv;\n\t\t\t\toverlayDiv.style.position = clientDiv.style.position;\n\t\t\t\toverlayDiv.style.borderWidth = clientDiv.style.borderWidth;\n\t\t\t\toverlayDiv.style.margin = clientDiv.style.margin;\n\t\t\t\toverlayDiv.style.padding = clientDiv.style.padding;\n\t\t\t\toverlayDiv.style.cursor = \"text\"; //$NON-NLS-1$\n\t\t\t\toverlayDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t(this._clipDiv || rootDiv).appendChild(overlayDiv);\n\t\t\t}\n\t\t\tclientDiv.contentEditable = \"true\"; //$NON-NLS-1$\n\t\t\tthis._setWrapMode(this._wrapMode, true);\n\t\t\tthis._setReadOnly(this._readonly);\n\t\t\tthis._setThemeClass(this._themeClass, true);\n\t\t\tthis._setTabSize(this._tabSize, true);\n\t\t\tthis._setMarginOffset(this._marginOffset, true);\n\t\t\tthis._hookEvents();\n\t\t\tbidiUtils.initInputField(clientDiv);\n\t\t\tvar rulers = this._rulers;\n\t\t\tfor (var i=0; i<rulers.length; i++) {\n\t\t\t\tthis._createRuler(rulers[i]);\n\t\t\t}\n\t\t\tthis._update();\n\t\t\t// Detect when the parent is attached to the DOM or display\n\t\t\tvar that = this;\n\t\t\tfunction checkDOMReady() {\n\t\t\t\tif (!that._rootDiv) { return; }\n\t\t\t\tthat.update(true);\n\t\t\t\tif (that._metrics.invalid) {\n\t\t\t\t\tthat._getWindow().setTimeout(function() {\n\t\t\t\t\t\tcheckDOMReady();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\t\t\tDOMReady(doc, rootDiv, \"textview\", checkDOMReady); //$NON-NLS-1$\n\t\t},\n\t\t_defaultOptions: function() {\n\t\t\treturn {\n\t\t\t\tparent: {value: undefined, update: null},\n\t\t\t\tmodel: {value: undefined, update: this.setModel},\n\t\t\t\tscrollAnimation: {value: 0, update: null},\n\t\t\t\treadonly: {value: false, update: this._setReadOnly},\n\t\t\t\tfullSelection: {value: true, update: this._setFullSelection},\n\t\t\t\ttabMode: { value: true, update: null },\n\t\t\t\ttabSize: {value: 8, update: this._setTabSize},\n\t\t\t\texpandTab: {value: false, update: null},\n\t\t\t\tsingleMode: {value: false, update: this._setSingleMode},\n\t\t\t\tnoScroll: {value: false, update: this._setNoScroll},\n\t\t\t\toverwriteMode: { value: false, update: this._setOverwriteMode },\n\t\t\t\tblockCursorVisible: { value: false, update: this._setBlockCursor},\n\t\t\t\tmarginOffset: {value: 0, update: this._setMarginOffset},\n\t\t\t\twrapOffset: {value: 0, update: this._setWrapOffset},\n\t\t\t\twrapMode: {value: false, update: this._setWrapMode},\n\t\t\t\twrappable: {value: false, update: null},\n\t\t\t\tundoStack: {value: null, update: this._setUndoStack},\n\t\t\t\ttheme: {value: mTextTheme.TextTheme.getTheme(), update: this._setTheme},\n\t\t\t\tthemeClass: {value: undefined, update: this._setThemeClass}\n\t\t\t};\n\t\t},\n\t\t_destroyRuler: function(ruler) {\n\t\t\tvar rulerParent = this._getRulerParent(ruler);\n\t\t\tif (rulerParent) {\n\t\t\t\tvar div = rulerParent.firstChild;\n\t\t\t\twhile (div) {\n\t\t\t\t\tif (div._ruler === ruler) {\n\t\t\t\t\t\tdiv._ruler = undefined;\n\t\t\t\t\t\trulerParent.removeChild(div);\n\t\t\t\t\t\tif (rulerParent.children.length === 0 && (rulerParent !== this._marginDiv || !this._marginOffset)) {\n\t\t\t\t\t\t\trulerParent.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trulerParent.rulerWidth = undefined;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_destroyView: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (!clientDiv) { return; }\n\t\t\tthis._setGrab(null);\n\t\t\tthis._unhookEvents();\n\n\t\t\t/* Destroy timers */\n\t\t\tvar win = this._getWindow();\n\t\t\tif (this._autoScrollTimerID) {\n\t\t\t\twin.clearTimeout(this._autoScrollTimerID);\n\t\t\t\tthis._autoScrollTimerID = null;\n\t\t\t}\n\t\t\tif (this._updateTimer) {\n\t\t\t\twin.clearTimeout(this._updateTimer);\n\t\t\t\tthis._updateTimer = null;\n\t\t\t}\n\t\t\tif (this._calculateLHTimer) {\n\t\t\t\twin.clearTimeout(this._calculateLHTimer);\n\t\t\t\tthis._calculateLHTimer = null;\n\t\t\t}\n\t\t\tif (this._cursorTimer) {\n\t\t\t\twin.clearInterval(this._cursorTimer);\n\t\t\t\tthis._cursorTimer = null;\n\t\t\t}\n\t\t\tif (this._imeTimeout) {\n\t\t\t\twin.clearInterval(this._imeTimeout);\n\t\t\t\tthis._imeTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\tvar rootDiv = this._rootDiv;\n\t\t\trootDiv.parentNode.removeChild(rootDiv);\n\n\t\t\t/* Destroy DOM */\n\t\t\tthis._domSelection = null;\n\t\t\tthis._clipboardDiv = null;\n\t\t\tthis._rootDiv = null;\n\t\t\tthis._scrollDiv = null;\n\t\t\tthis._viewDiv = null;\n\t\t\tthis._clipDiv = null;\n\t\t\tthis._clipScrollDiv = null;\n\t\t\tthis._clientDiv = null;\n\t\t\tthis._overlayDiv = null;\n\t\t\tthis._leftDiv = null;\n\t\t\tthis._rightDiv = null;\n\t\t\tthis._innerRightDiv = null;\n\t\t\tthis._marginDiv = null;\n\t\t\tthis._cursorDiv = null;\n\t\t\tthis._vScrollDiv = null;\n\t\t\tthis._hScrollDiv = null;\n\t\t},\n\t\t_doAutoScroll: function (direction, x, y) {\n\t\t\tthis._autoScrollDir = direction;\n\t\t\tthis._autoScrollX = x;\n\t\t\tthis._autoScrollY = y;\n\t\t\tif (!this._autoScrollTimerID) {\n\t\t\t\tthis._autoScrollTimer();\n\t\t\t}\n\t\t},\n\t\t_endAutoScroll: function () {\n\t\t\tif (this._autoScrollTimerID) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._autoScrollTimerID);\n\t\t\t}\n\t\t\tthis._autoScrollDir = undefined;\n\t\t\tthis._autoScrollTimerID = undefined;\n\t\t},\n\t\t_fixCaret: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar hasFocus = this._hasFocus;\n\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\tif (hasFocus) { clientDiv.blur(); }\n\t\t\t\tclientDiv.contentEditable = false;\n\t\t\t\tclientDiv.contentEditable = true;\n\t\t\t\tif (hasFocus) { clientDiv.focus(); }\n\t\t\t\tthis._ignoreFocus = false;\n\t\t\t}\n\t\t},\n\t\t_getBaseText: function(start, end) {\n\t\t\tvar model = this._model;\n\t\t\t/* This is the only case the view access the base model, alternatively the view could use a event to application to customize the text */\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tend = model.mapOffset(end);\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model.getText(start, end);\n\t\t},\n\t\t_getBottomIndex: function (fullyVisible) {\n\t\t\tvar child = this._bottomChild;\n\t\t\tif (fullyVisible && this._getClientHeight() > this._getLineHeight()) {\n\t\t\t\tvar rect = child.getBoundingClientRect();\n\t\t\t\tvar clientRect = this._clientDiv.getBoundingClientRect();\n\t\t\t\tif (rect.bottom > clientRect.bottom) {\n\t\t\t\t\tchild = this._getLinePrevious(child) || child;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child.lineIndex;\n\t\t},\n\t\t_getBlockSelections: function(selections, lineIndex, pt) {\n\t\t\tvar model = this._model;\n\t\t\tselections = selections.filter(function(sel) { return !sel._editing; });\n\t\t\tvar firstLine = model.getLineAtOffset(this._blockSelection.getAnchor()), lastLine;\n\t\t\tif (lineIndex > firstLine) {\n\t\t\t\tlastLine = lineIndex;\n\t\t\t} else {\n\t\t\t\tlastLine = firstLine;\n\t\t\t\tfirstLine = lineIndex;\n\t\t\t}\n\t\t\tfor (var l = firstLine; l <= lastLine; l++) {\n\t\t\t\tvar line = this._getLine(l);\n\t\t\t\tvar o1 = line.getOffset(pt.x, 1);\n\t\t\t\tvar o2 = line.getOffset(this._blockSelection._docX, 1);\n\t\t\t\tline.destroy();\n\t\t\t\tif (o1 === o2 && o1 === model.getLineEnd(l)) continue;\n\t\t\t\tvar caret = o1 < o2;\n\t\t\t\tvar sel = new Selection(caret ? o1 : o2, caret ? o2 : o1, caret);\n\t\t\t\tsel._editing = true;\n\t\t\t\tselections.push(sel);\n\t\t\t}\n\t\t\treturn selections;\n\t\t},\n\t\t_getBoundsAtOffset: function(offset) {\n\t\t\tvar model = this._model;\n\t\t\tvar line = this._getLine(model.getLineAtOffset(offset));\n\t\t\tvar result = line.getBoundingClientRect(offset);\n\t\t\tvar linePixel = this._getLinePixel(line.lineIndex);\n\t\t\tresult.top += linePixel;\n\t\t\tresult.bottom += linePixel;\n\t\t\tline.destroy();\n\t\t\treturn result;\n\t\t},\n\t\t_getClientHeight: function() {\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\treturn Math.max(0, this._viewDiv.clientHeight - viewPad.top - viewPad.bottom);\n\t\t},\n\t\t_getInnerRightWidth: function() {\n\t\t\tvar innerRightWidth = this._innerRightDiv.rulerWidth;\n\t\t\tif (innerRightWidth === undefined) {\n\t\t\t\tvar innerRightRect = this._innerRightDiv.getBoundingClientRect();\n\t\t\t\tthis._innerRightDiv.rulerWidth = innerRightWidth = innerRightRect.right - innerRightRect.left;\n\t\t\t}\n\t\t\treturn innerRightWidth;\n\t\t},\n\t\t_getClientWidth: function() {\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar innerRightWidth = this._getInnerRightWidth();\n\t\t\treturn Math.max(0, this._viewDiv.clientWidth - viewPad.left - viewPad.right - innerRightWidth);\n\t\t},\n\t\t_getClipboardText: function (evt, handler) {\n\t\t\t// IE\n\t\t\tvar win = this._getWindow();\n\t\t\tvar clipboardData = win.clipboardData;\n\t\t\t// WebKit and Firefox > 21\n\t\t\tif (!clipboardData && evt) {\n\t\t\t\tclipboardData = evt.clipboardData;\n\t\t\t}\n\t\t\tfunction convert(wholeText) {\n\t\t\t\tvar clipboardText = [];\n\t\t\t\tconvertDelimiter(wholeText, function(t) {clipboardText.push(t);}, null);\n\t\t\t\tif (handler) { handler(clipboardText); }\n\t\t\t\treturn clipboardText;\n\t\t\t}\n\t\t\tif (clipboardData) {\n\t\t\t\treturn convert(clipboardData.getData(util.isIE ? \"Text\" : \"text/plain\")); //$NON-NLS-1$\"//$NON-NLS-2$\n\t\t\t}\n\t\t\tif (util.isElectron && !evt) {\n\t\t\t\treturn convert(window.__electron.clipboard.readText());\n\t\t\t}\n\t\t\tif (util.isFirefox) {\n\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\tvar clipboardDiv = this._clipboardDiv;\n\t\t\t\tvar doc = this._rootDiv.ownerDocument;\n\t\t\t\tif (!clipboardDiv) {\n\t\t\t\t\tclipboardDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\tthis._clipboardDiv = clipboardDiv;\n\t\t\t\t\tclipboardDiv.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\t\t\tclipboardDiv.style.whiteSpace = \"pre\"; //$NON-NLS-1$\n\t\t\t\t\tclipboardDiv.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\t\tthis._rootDiv.appendChild(clipboardDiv);\n\t\t\t\t}\n\t\t\t\tclipboardDiv.innerHTML = \"<pre contenteditable=''></pre>\"; //$NON-NLS-1$\n\t\t\t\tclipboardDiv.firstChild.focus();\n\t\t\t\tvar that = this;\n\t\t\t\tvar _getText = function() {\n\t\t\t\t\tvar noteText = that._getTextFromElement(clipboardDiv);\n\t\t\t\t\tclipboardDiv.innerHTML = \"\";\n\t\t\t\t\treturn convert(noteText);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t/* Try execCommand first. Works on firefox with clipboard permission. */\n\t\t\t\tvar result = false;\n\t\t\t\tthis._ignorePaste = true;\n\n\t\t\t\t/* Do not try execCommand if middle-click is used, because if we do, we get the clipboard text, not the primary selection text. */\n\t\t\t\tif (!util.isLinux || this._lastMouseButton !== 2) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult = doc.execCommand(\"paste\", false, null); //$NON-NLS-1$\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t/* Firefox can throw even when execCommand() works, see bug 362835. */\n\t\t\t\t\t\tresult = clipboardDiv.childNodes.length > 1 || clipboardDiv.firstChild && clipboardDiv.firstChild.childNodes.length > 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._ignorePaste = false;\n\t\t\t\tif (!result) {\n\t\t\t\t\t/* Try native paste in DOM, works for firefox during the paste event. */\n\t\t\t\t\tif (evt) {\n\t\t\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\t\t\tthat.focus();\n\t\t\t\t\t\t\t_getText();\n\t\t\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/* no event and no clipboard permission, paste can't be performed */\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis._ignoreFocus = false;\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.focus();\n\t\t\t\tthis._ignoreFocus = false;\n\t\t\t\treturn _getText();\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\t_getDOMText: function(child, offsetNode) {\n\t\t\treturn child._line.getText(offsetNode);\n\t\t},\n\t\t_getTextFromElement: function(element) {\n\t\t\tvar doc = element.ownerDocument;\n\t\t\tvar win = doc.defaultView;\n\t\t\tif (!win.getSelection) {\n\t\t\t\treturn element.innerText || element.textContent;\n\t\t\t}\n\n\t\t\tvar newRange = doc.createRange();\n\t\t\tnewRange.selectNode(element);\n\n\t\t\tvar selection = win.getSelection();\n\t\t\tvar oldRanges = [], i;\n\t\t\tfor (i = 0; i < selection.rangeCount; i++) {\n\t\t\t\toldRanges.push(selection.getRangeAt(i));\n\t\t\t}\n\n\t\t\tthis._ignoreSelect = true;\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(newRange);\n\n\t\t\tvar text = selection.toString();\n\n\t\t\tselection.removeAllRanges();\n\t\t\tfor (i = 0; i < oldRanges.length; i++) {\n\t\t\t\tselection.addRange(oldRanges[i]);\n\t\t\t}\n\n\t\t\tthis._ignoreSelect = false;\n\t\t\treturn text;\n\t\t},\n\t\t_getViewPadding: function() {\n\t\t\treturn this._metrics.viewPadding;\n\t\t},\n\t\t_getLine: function(lineIndex) {\n\t\t\tvar child = this._getLineNode(lineIndex);\n\t\t\tif (child && !child.lineChanged && !child.lineRemoved) {\n\t\t\t\treturn child._line;\n\t\t\t}\n\t\t\treturn new TextLine(this, lineIndex);\n\t\t},\n\t\t_getLineHeight: function(lineIndex, calculate) {\n\t\t\tif (lineIndex !== undefined && this._lineHeight) {\n\t\t\t\tvar lineHeight = this._lineHeight[lineIndex];\n\t\t\t\tif (lineHeight) { return lineHeight; }\n\t\t\t\tif (calculate || calculate === undefined) {\n\t\t\t\t\tvar height = this._lineHeight[lineIndex] = this._calculateLineHeight(lineIndex);\n\t\t\t\t\treturn height;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this._metrics.lineHeight;\n\t\t},\n\t\t_getLineNode: function (lineIndex) {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tvar child = clientDiv.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tif (lineIndex === child.lineIndex) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\t_getLineNext: function (lineNode) {\n\t\t\tvar node = lineNode ? lineNode.nextSibling : this._clientDiv.firstChild;\n\t\t\twhile (node && (node.lineIndex === -1 || !node._line)) {\n\t\t\t\tnode = node.nextSibling;\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\t\t_getLinePrevious: function (lineNode) {\n\t\t\tvar node = lineNode ? lineNode.previousSibling : this._clientDiv.lastChild;\n\t\t\twhile (node && (node.lineIndex === -1 || !node._line)) {\n\t\t\t\tnode = node.previousSibling;\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\t\t_getLinePixel: function(lineIndex) {\n\t\t\tlineIndex = Math.min(Math.max(0, lineIndex), this._model.getLineCount());\n\t\t\tif (this._lineHeight) {\n\t\t\t\tvar topIndex = this._getTopIndex();\n\t\t\t\tvar pixel = -this._topIndexY + this._getScroll().y, i;\n\t\t\t\tif (lineIndex > topIndex) {\n\t\t\t\t\tfor (i = topIndex; i < lineIndex; i++) {\n\t\t\t\t\t\tpixel += this._getLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = topIndex - 1; i >= lineIndex; i--) {\n\t\t\t\t\t\tpixel -= this._getLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn pixel;\n\t\t\t}\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\treturn lineHeight * lineIndex;\n\t\t},\n\t\t/**\n\t\t * @name _getLineIndex\n\t\t * @description Returns the line index closest to the given text view relative location.  Will return -1\n\t\t * \t\t\t\tif restrictToValidLines is true and y location is outside of text lines.\n\t\t * @function\n\t\t * @private\n\t\t * @param y location to search\n\t\t * @param restrictToValidLines whether to return -1 if the location is outside a valid line, otherwise return the closest valid line index\n\t\t * @returns returns The line index closest to the location or -1 if restrictToValidLines is true and location is outside text area\n\t\t */\n\t\t_getLineIndex: function(y, restrictToValidLines) {\n\t\t\tvar lineHeight, lineIndex = 0;\n\t\t\tvar lineCount = this._model.getLineCount();\n\t\t\tif (this._lineHeight) {\n\t\t\t\tlineIndex = this._getTopIndex();\n\t\t\t\tvar pixel = -this._topIndexY + this._getScroll().y;\n\t\t\t\tif (y !== pixel) {\n\t\t\t\t\tif (y < pixel) {\n\t\t\t\t\t\twhile (y < pixel && lineIndex > 0) {\n\t\t\t\t\t\t\ty += this._getLineHeight(--lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineHeight = this._getLineHeight(lineIndex);\n\t\t\t\t\t\twhile (y - lineHeight >= pixel && lineIndex < lineCount - 1) {\n\t\t\t\t\t\t\ty -= lineHeight;\n\t\t\t\t\t\t\tlineHeight = this._getLineHeight(++lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlineHeight = this._getLineHeight();\n\t\t\t\tlineIndex = Math.floor(y / lineHeight);\n\t\t\t}\n\t\t\tif (restrictToValidLines){\n\t\t\t\tif (lineCount === 0 || lineIndex < 0 || lineIndex > (lineCount-1)){\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Math.max(0, Math.min(lineCount - 1, lineIndex));\n\t\t},\n\t\t_getRulerParent: function(ruler) {\n\t\t\tswitch (ruler.getLocation()) {\n\t\t\t\tcase \"left\": return this._leftDiv; //$NON-NLS-1$\n\t\t\t\tcase \"right\": return this._rightDiv; //$NON-NLS-1$\n\t\t\t\tcase \"innerRight\": return this._innerRightDiv; //$NON-NLS-1$\n\t\t\t\tcase \"margin\": return this._marginDiv; //$NON-NLS-1$\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_getScroll: function(cancelAnimation) {\n\t\t\tif (cancelAnimation === undefined || cancelAnimation) {\n\t\t\t\tthis._cancelAnimation();\n\t\t\t}\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\treturn {x: viewDiv.scrollLeft, y: viewDiv.scrollTop};\n\t\t},\n\t\t_getSelection: function () {\n\t\t\treturn (Array.isArray(this._selection) ? this._selection[0] : this._selection).clone();\n\t\t},\n\t\t_getSelections: function () {\n\t\t\treturn (Array.isArray(this._selection) ? this._selection : [this._selection]).map(function(s) {\n\t\t\t\treturn s.clone();\n\t\t\t});\n\t\t},\n\t\t_getTopIndex: function (fullyVisible) {\n\t\t\tvar child = this._topChild;\n\t\t\tif (fullyVisible && this._getClientHeight() > this._getLineHeight()) {\n\t\t\t\tvar rect = child.getBoundingClientRect();\n\t\t\t\tvar viewPad = this._getViewPadding();\n\t\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\t\tif (rect.top < viewRect.top + viewPad.top) {\n\t\t\t\t\tchild = this._getLineNext(child) || child;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child.lineIndex;\n\t\t},\n\t\t_hookEvents: function() {\n\t\t\tvar that = this;\n\t\t\tthis._modelListener = {\n\t\t\t\t/** @private */\n\t\t\t\tonChanging: function(modelChangingEvent) {\n\t\t\t\t\tthat._onModelChanging(modelChangingEvent);\n\t\t\t\t},\n\t\t\t\t/** @private */\n\t\t\t\tonChanged: function(modelChangedEvent) {\n\t\t\t\t\tthat._onModelChanged(modelChangedEvent);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._model.addEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.addEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\t\n\t\t\tthis._themeListener = {\n\t\t\t\tonChanged: function() {\n\t\t\t\t\tthat._setThemeClass(that._themeClass);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._theme.addEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t\n\t\t\tvar handlers = this._handlers = [];\n\t\t\tvar clientDiv = this._clientDiv, viewDiv = this._viewDiv, rootDiv = this._rootDiv;\n\t\t\tvar topNode = this._overlayDiv || clientDiv;\n\t\t\tvar doc = clientDiv.ownerDocument;\n\t\t\tvar win = this._getWindow();\n\t\t\tvar grabNode = util.isIE ? doc : win;\n\t\t\thandlers.push({target: win, type: \"resize\", handler: function(e) { return that._handleResize(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"blur\", handler: function(e) { return that._handleBlur(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"focus\", handler: function(e) { return that._handleFocus(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: viewDiv, type: \"focus\", handler: function() { clientDiv.focus(); }}); //$NON-NLS-1$\n\t\t\tvar textModel = that.getModel();\n\t\t\tif(textModel && typeof textModel.deferScroll === \"function\") {//If textModel is extended to defer the scroll handler for segmental contents\n\t\t\t\tvar deferredHandler = textModel.deferScroll(that, that._handleScroll.bind(that));\n\t\t\t\thandlers.push({target: viewDiv, type: \"scroll\", handler: function(e) { return deferredHandler(e ? e : win.event);}}); //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\thandlers.push({target: viewDiv, type: \"scroll\", handler: function(e) { return that._handleScroll(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: clientDiv, type: \"textInput\", handler: function(e) { return that._handleTextInput(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keydown\", handler: function(e) { return that._handleKeyDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keypress\", handler: function(e) { return that._handleKeyPress(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keyup\", handler: function(e) { return that._handleKeyUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\tif (util.isIE) {\n\t\t\t\thandlers.push({target: doc, type: \"keyup\", handler: function(e) { return that._handleDocKeyUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: clientDiv, type: \"contextmenu\", handler: function(e) { return that._handleContextMenu(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"copy\", handler: function(e) { return that._handleCopy(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"cut\", handler: function(e) { return that._handleCut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"paste\", handler: function(e) { return that._handlePaste(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: doc, type: \"selectionchange\", handler: function(e) { return that._handleSelectionChange(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchstart\", handler: function(e) { return that._handleTouchStart(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchmove\", handler: function(e) { return that._handleTouchMove(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchend\", handler: function(e) { return that._handleTouchEnd(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\thandlers.push({target: clientDiv, type: \"selectstart\", handler: function(e) { return that._handleSelectStart(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mousedown\", handler: function(e) { return that._handleMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mouseover\", handler: function(e) { return that._handleMouseOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mouseout\", handler: function(e) { return that._handleMouseOut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: grabNode, type: \"mouseup\", handler: function(e) { return that._handleMouseUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: grabNode, type: \"mousemove\", handler: function(e) { return that._handleMouseMove(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: rootDiv, type: \"mousedown\", handler: function(e) { return that._handleRootMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: rootDiv, type: \"mouseup\", handler: function(e) { return that._handleRootMouseUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragstart\", handler: function(e) { return that._handleDragStart(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"drag\", handler: function(e) { return that._handleDrag(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragend\", handler: function(e) { return that._handleDragEnd(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragenter\", handler: function(e) { return that._handleDragEnter(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragover\", handler: function(e) { return that._handleDragOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragleave\", handler: function(e) { return that._handleDragLeave(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"drop\", handler: function(e) { return that._handleDrop(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: this._clientDiv, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\t\tif (this._clipDiv) {\n\t\t\t\t\thandlers.push({target: this._clipDiv, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\t\t}\n\t\t\t\tif (util.isFirefox && (!util.isWindows || util.isFirefox >= 15)) {\n\t\t\t\t\tvar MO = win.MutationObserver || win.MozMutationObserver;\n\t\t\t\t\tif (MO) {\n\t\t\t\t\t\tthis._mutationObserver = new MO(function(mutations) { that._handleDataModified(mutations); });\n\t\t\t\t\t\tthis._mutationObserver.observe(clientDiv, {subtree: true, characterData: true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"DOMCharacterDataModified\", handler: function (e) { return that._handleDataModified(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((util.isFirefox && (!util.isWindows || util.isFirefox >= 15)) || util.isIE || util.isWebkit) {\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionstart\", handler: function (e) { return that._handleCompositionStart(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionend\", handler: function (e) { return that._handleCompositionEnd(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionupdate\", handler: function (e) { return that._handleCompositionUpdate(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (this._overlayDiv) {\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mousedown\", handler: function(e) { return that._handleMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mouseover\", handler: function(e) { return that._handleMouseOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mouseout\", handler: function(e) { return that._handleMouseOut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"contextmenu\", handler: function(e) { return that._handleContextMenu(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (!this._isW3CEvents) {\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"dblclick\", handler: function(e) { return that._handleDblclick(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._hookRulerEvents(this._leftDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._rightDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._innerRightDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._marginDiv, handlers);\n\t\t\t\n\t\t\tfor (var i=0; i<handlers.length; i++) {\n\t\t\t\tvar h = handlers[i];\n\t\t\t\taddHandler(h.target, h.type, h.handler, h.capture);\n\t\t\t}\n\t\t},\n\t\t_hookRulerEvents: function(div, handlers) {\n\t\t\tif (!div) { return; }\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tif (util.isIE) {\n\t\t\t\thandlers.push({target: div, type: \"selectstart\", handler: function() {return false;}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: div, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\thandlers.push({target: div, type: \"click\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"dblclick\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mousemove\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mouseover\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mouseout\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t},\n\t\t_getWindow: function() {\n\t\t\treturn getWindow(this._parent.ownerDocument);\n\t\t},\n\t\t_ignoreEvent: function(e) {\n\t\t\tvar node = e.target;\n\t\t\twhile (node && node !== this._clientDiv) {\n\t\t\t\tif (node.ignore) { return true; }\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_init: function(options) {\n\t\t\tvar _parent = options.parent;\n\t\t\tif (typeof(_parent) === \"string\") { //$NON-NLS-1$\n\t\t\t\t_parent = (options.document || document).getElementById(_parent);\n\t\t\t}\n\t\t\tif (!_parent) { throw new Error(\"no parent\"); } //$NON-NLS-1$\n\t\t\toptions.parent = _parent;\n\t\t\toptions.model = options.model || new mTextModel.TextModel();\n\t\t\tvar defaultOptions = this._defaultOptions();\n\t\t\tfor (var option in defaultOptions) {\n\t\t\t\tif (defaultOptions.hasOwnProperty(option)) {\n\t\t\t\t\tvar value;\n\t\t\t\t\tif (options[option] !== undefined) {\n\t\t\t\t\t\tvalue = options[option];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = defaultOptions[option].value;\n\t\t\t\t\t}\n\t\t\t\t\tthis[\"_\" + option] = value; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._keyModes = [];\n\t\t\tthis._rulers = [];\n\t\t\tthis._selection = [new Selection(0, 0, false)];\n\t\t\tthis._linksVisible = false;\n\t\t\tthis._redrawCount = 0;\n\t\t\tthis._maxLineWidth = 0;\n\t\t\tthis._maxLineIndex = -1;\n\t\t\tthis._ignoreSelect = true;\n\t\t\tthis._ignoreFocus = false;\n\t\t\tthis._hasFocus = false;\n\t\t\tthis._dragOffset = -1;\n\t\t\tthis._isRangeRects = (!util.isIE || util.isIE >= 9) && typeof _parent.ownerDocument.createRange().getBoundingClientRect === \"function\"; //$NON-NLS-1$\n\t\t\tthis._isW3CEvents = _parent.addEventListener;\n\n\t\t\t/* Auto scroll */\n\t\t\tthis._autoScrollX = null;\n\t\t\tthis._autoScrollY = null;\n\t\t\tthis._autoScrollTimerID = null;\n\t\t\tthis._AUTO_SCROLL_RATE = 50;\n\t\t\tthis._grabControl = null;\n\t\t\tthis._moseMoveClosure  = null;\n\t\t\tthis._mouseUpClosure = null;\n\t\t\t\n\t\t\t/* Double click */\n\t\t\tthis._lastMouseX = 0;\n\t\t\tthis._lastMouseY = 0;\n\t\t\tthis._lastMouseTime = 0;\n\t\t\tthis._clickCount = 0;\n\t\t\tthis._clickTime = 250;\n\t\t\tthis._clickDist = 5;\n\t\t\tthis._isMouseDown = false;\n\t\t\tthis._doubleClickSelection = null;\n\t\t\t\n\t\t\t/* Scroll */\n\t\t\tthis._hScroll = 0;\n\t\t\tthis._vScroll = 0;\n\n\t\t\t/* IME */\n\t\t\tthis._imeOffset = -1;\n\t\t\t\n\t\t\t/* Create elements */\n\t\t\tthis._createActions();\n\t\t\tthis._createView();\n\t\t},\n\t\t_checkOverlayScroll: function() {\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tif (!this._metrics.invalid && this._metrics.scrollWidth === 0) {\n\t\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\t\tvar overlay = this._isOverOverlayScroll();\n\t\t\t\t\tif (overlay.vertical || overlay.horizontal) {\n\t\t\t\t\t\tviewDiv.style.pointerEvents = \"\"; //$NON-NLS-1$\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t},\n\t\t_isOverOverlayScroll: function() {\n\t\t\tvar scrollShowing = Date.now() - this._lastScrollTime < 1000;\n\t\t\tif (!scrollShowing) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tvar rect = this._viewDiv.getBoundingClientRect();\n\t\t\tvar x = this._lastMouseMoveX;\n\t\t\tvar y = this._lastMouseMoveY;\n\t\t\tvar overlayScrollWidth = 15;\n\t\t\treturn {\n\t\t\t\tvertical: rect.top <= y && y < rect.bottom && rect.right - overlayScrollWidth <= x && x < rect.right,\n\t\t\t\thorizontal: rect.bottom - overlayScrollWidth <= y && y < rect.bottom && rect.left <= x && x < rect.right\n\t\t\t};\n\t\t},\n\t\t_startUndo: function() {\n\t\t\tif (this._undoStack) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._compoundChange = this._undoStack.startCompoundChange({\n\t\t\t\t\tend: function() {\n\t\t\t\t\t\tthat._compoundChange = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_endUndo: function() {\n\t\t\tif (this._undoStack) {\n\t\t\t\tthis._undoStack.endCompoundChange();\n\t\t\t}\n\t\t},\n\t\t_modifyContent: function(e, caretAtEnd, show, callback) {\n\t\t\tif (this._readonly && !e._code) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\te.type = \"Verify\"; //$NON-NLS-1$\n\t\t\tvar oldStart = e.start = e.selection[0].start;\n\t\t\tvar oldEnd = e.end = e.selection[0].end;\n\t\t\tthis.onVerify(e);\n\t\t\tif (oldStart !== e.start) e.selection[0].start = e.start;\n\t\t\tif (oldEnd !== e.end) e.selection[0].end = e.end;\n\n\t\t\tif (e.text === null || e.text === undefined) { return false; }\n\t\t\t\n\t\t\tif (e.selection.length > 1) this.setRedraw(false);\n\t\t\t\n\t\t\tvar undo = this._compoundChange;\n\t\t\tif (undo) {\n\t\t\t\tif (!Selection.compare(this._getSelections(), undo.owner.selection)) {\n\t\t\t\t\tthis._endUndo();\n\t\t\t\t\tif (e.selection.length > 1) this._startUndo();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e.selection.length > 1) this._startUndo();\n\t\t\t}\n\t\t\t\n\t\t\tvar model = this._model;\n\t\t\ttry {\n\t\t\t\tif (e._ignoreDOMSelection) { this._ignoreDOMSelection = true; }\n\t\t\t\tvar offset = 0, i = 0;\n\t\t\t\te.selection.forEach(function(selection) {\n\t\t\t\t\tselection.start += offset;\n\t\t\t\t\tselection.end += offset;\n\t\t\t\t\tvar text = Array.isArray(e.text) ? e.text[i] : e.text;\n\t\t\t\t\tmodel.setText(text, selection.start, selection.end);\n\t\t\t\t\toffset += (selection.start - selection.end) + text.length;\n\t\t\t\t\tselection.setCaret(caretAtEnd ? selection.start + text.length : selection.start);\n\t\t\t\t\ti++;\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tif (e._ignoreDOMSelection) { this._ignoreDOMSelection = false; }\n\t\t\t}\n\t\t\tthis._setSelection(e.selection, show, true, callback);\n\t\t\t\n\t\t\tundo = this._compoundChange;\n\t\t\tif (undo) undo.owner.selection = e.selection;\n\t\t\t\n\t\t\tif (e.selection.length > 1) this.setRedraw(true);\n\n\t\t\tthis.onModify({type: \"Modify\"}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_onModelChanged: function(modelChangedEvent) {\n\t\t\tmodelChangedEvent.type = \"ModelChanged\"; //$NON-NLS-1$\n\t\t\tthis.onModelChanged(modelChangedEvent);\n\t\t\tmodelChangedEvent.type = \"Changed\"; //$NON-NLS-1$\n\t\t\tvar start = modelChangedEvent.start;\n\t\t\tvar addedCharCount = modelChangedEvent.addedCharCount;\n\t\t\tvar removedCharCount = modelChangedEvent.removedCharCount;\n\t\t\tvar addedLineCount = modelChangedEvent.addedLineCount;\n\t\t\tvar removedLineCount = modelChangedEvent.removedLineCount;\n\t\t\t\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.end > start) {\n\t\t\t\t\tif (selection.end > start && selection.start < start + removedCharCount) {\n\t\t\t\t\t\t// selection intersects replaced text. set caret behind text change\n\t\t\t\t\t\tselection.setCaret(start + addedCharCount);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// move selection to keep same text selected\n\t\t\t\t\t\tselection.start +=  addedCharCount - removedCharCount;\n\t\t\t\t\t\tselection.end +=  addedCharCount - removedCharCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, false, false);\n\t\t\t\n\t\t\tvar model = this._model;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar child = this._getLineNext();\n\t\t\twhile (child) {\n\t\t\t\tvar lineIndex = child.lineIndex;\n\t\t\t\tif (startLine <= lineIndex && lineIndex <= startLine + removedLineCount) {\n\t\t\t\t\tif (startLine === lineIndex && !child.modelChangedEvent && !child.lineRemoved) {\n\t\t\t\t\t\tchild.modelChangedEvent = modelChangedEvent;\n\t\t\t\t\t\tchild.lineChanged = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchild.lineRemoved = true;\n\t\t\t\t\t\tchild.lineChanged = false;\n\t\t\t\t\t\tchild.modelChangedEvent = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lineIndex > startLine + removedLineCount) {\n\t\t\t\t\tchild.lineIndex = lineIndex + addedLineCount - removedLineCount;\n\t\t\t\t\tchild._line.lineIndex = child.lineIndex;\n\t\t\t\t}\n\t\t\t\tchild = this._getLineNext(child);\n\t\t\t}\n\t\t\tif (this._lineHeight) {\n\t\t\t\tvar args = [startLine, removedLineCount].concat(newArray(addedLineCount));\n\t\t\t\tArray.prototype.splice.apply(this._lineHeight, args);\n\t\t\t}\n\t\t\tif (!this._wrapMode) {\n\t\t\t\tif (startLine <= this._maxLineIndex && this._maxLineIndex <= startLine + removedLineCount) {\n\t\t\t\t\tthis._checkMaxLineIndex = this._maxLineIndex;\n\t\t\t\t\tthis._maxLineIndex = -1;\n\t\t\t\t\tthis._maxLineWidth = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._update();\n\t\t},\n\t\t_onModelChanging: function(modelChangingEvent) {\n\t\t\tmodelChangingEvent.type = \"ModelChanging\"; //$NON-NLS-1$\n\t\t\tthis.onModelChanging(modelChangingEvent);\n\t\t\tmodelChangingEvent.type = \"Changing\"; //$NON-NLS-1$\n\t\t},\n\t\t_queueUpdate: function() {\n\t\t\tif (this._updateTimer || this._ignoreQueueUpdate) { return; }\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._updateTimer = win.setTimeout(function() { \n\t\t\t\tthat._updateTimer = null;\n\t\t\t\tthat._update();\n\t\t\t}, 0);\n\t\t},\n\t\t_rangesToSelections: function(ranges) {\n\t\t\tvar selections = [];\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\tranges.forEach(function(range) {\n\t\t\t\tvar selection;\n\t\t\t\tif (range instanceof Selection) {\n\t\t\t\t\tselection = range.clone();\n\t\t\t\t} else {\n\t\t\t\t\tvar start = range.start;\n\t\t\t\t\tvar end = range.end;\n\t\t\t\t\tvar caret = start > end;\n\t\t\t\t\tif (caret) {\n\t\t\t\t\t\tvar tmp = start;\n\t\t\t\t\t\tstart = end;\n\t\t\t\t\t\tend = tmp;\n\t\t\t\t\t}\n\t\t\t\t\tstart = Math.max(0, Math.min (start, charCount));\n\t\t\t\t\tend = Math.max(0, Math.min (end, charCount));\n\t\t\t\t\tselection = new Selection(start, end, caret);\n\t\t\t\t}\n\t\t\t\tselections.push(selection);\n\t\t\t});\n\t\t\treturn selections;\n\t\t},\n\t\t_resetLineHeight: function(startLine, endLine) {\n\t\t\tif (this._wrapMode || this._variableLineHeight) {\n\t\t\t\tif (startLine !== undefined && endLine !== undefined) {\n\t\t\t\t\tfor (var i = startLine; i < endLine; i++) {\n\t\t\t\t\t\tthis._lineHeight[i] = undefined;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._lineHeight = newArray(this._model.getLineCount());\n\t\t\t\t}\n\t\t\t\tthis._calculateLineHeightTimer();\n\t\t\t} else {\n\t\t\t\tthis._lineHeight = null;\n\t\t\t}\n\t\t},\n\t\t_resetLineWidth: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tchild.lineWidth = undefined;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_reset: function() {\n\t\t\tthis._maxLineIndex = -1;\n\t\t\tthis._maxLineWidth = 0;\n\t\t\tthis._topChild = null;\n\t\t\tthis._bottomChild = null;\n\t\t\tthis._topIndexY = 0;\n\t\t\tthis._variableLineHeight = false;\n\t\t\tthis._resetLineHeight();\n\t\t\tthis._setSelection(new Selection(0, 0, false), false, false);\n\t\t\tif (this._viewDiv) {\n\t\t\t\tthis._viewDiv.scrollLeft = 0;\n\t\t\t\tthis._viewDiv.scrollTop = 0;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tchild.lineRemoved = true;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, the caret does not show after the\n\t\t\t\t* view is refreshed.  The fix is to toggle the contentEditable state and\n\t\t\t\t* force the clientDiv to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tif (util.isFirefox < 13) {\n\t\t\t\t\tthis._fixCaret ();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_scrollViewAnimated: function (pixelX, pixelY, callback) {\n\t\t\tvar win = this._getWindow();\n\t\t\tif (callback && this._scrollAnimation) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._animation = new Animation({\n\t\t\t\t\twindow: win,\n\t\t\t\t\tduration: this._scrollAnimation,\n\t\t\t\t\tcurve: [pixelY, 0],\n\t\t\t\t\tonAnimate: function(x) {\n\t\t\t\t\t\tvar deltaY = pixelY - Math.floor(x);\n\t\t\t\t\t\tthat._scrollView (0, deltaY);\n\t\t\t\t\t\tpixelY -= deltaY;\n\t\t\t\t\t},\n\t\t\t\t\tonEnd: function() {\n\t\t\t\t\t\tthat._animation = null;\n\t\t\t\t\t\tthat._scrollView (pixelX, pixelY);\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\twin.setTimeout(callback, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._animation.play();\n\t\t\t} else {\n\t\t\t\tthis._scrollView (pixelX, pixelY);\n\t\t\t\tif (callback) {\n\t\t\t\t\twin.setTimeout(callback, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}, \n\t\t_scrollView: function (pixelX, pixelY) {\n\t\t\t/*\n\t\t\t* Always set _ensureCaretVisible to false so that the view does not scroll\n\t\t\t* to show the caret when scrollView is not called from showCaret().\n\t\t\t*/\n\t\t\tthis._ensureCaretVisible = false;\n\t\t\t\n\t\t\t/*\n\t\t\t* Scrolling is done only by setting the scrollLeft and scrollTop fields in the\n\t\t\t* view div. This causes an update from the scroll event. In some browsers \n\t\t\t* this event is asynchronous and forcing update page to run synchronously\n\t\t\t* leads to redraw problems. \n\t\t\t* On Chrome 11, the view redrawing at times when holding PageDown/PageUp key.\n\t\t\t* On Firefox 4 for Linux, the view redraws the first page when holding \n\t\t\t* PageDown/PageUp key, but it will not redraw again until the key is released.\n\t\t\t*/\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (pixelX) { viewDiv.scrollLeft += pixelX; }\n\t\t\tif (pixelY) { viewDiv.scrollTop += pixelY; }\n\t\t},\n\t\t_setClipboardText: function (text, evt) {\n\t\t\tif (util.isElectron && !evt) {\n\t\t\t\twindow.__electron.clipboard.writeText(text);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar clipboardText;\n\t\t\t// IE\n\t\t\tvar win = this._getWindow();\n\t\t\tvar clipboardData = win.clipboardData;\n\t\t\t// WebKit and Firefox > 21\n\t\t\tif (!clipboardData && evt) {\n\t\t\t\tclipboardData = evt.clipboardData;\n\t\t\t}\n\t\t\tif (clipboardData) {\n\t\t\t\tclipboardText = [];\n\t\t\t\tconvertDelimiter(text, function(t) {clipboardText.push(t);}, function() {clipboardText.push(util.platformDelimiter);});\n\t\t\t\t/*\n\t\t\t\t* Note that setData() succeeds on Firefox > 21 and WebKit, but the return value is not a boolean like IE.\n\t\t\t\t*/\n\t\t\t\tvar success = clipboardData.setData(util.isIE ? \"Text\" : \"text/plain\", clipboardText.join(\"\")); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (success || (evt && (util.isFirefox > 21 || util.isWebkit))) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (!evt) return false;\n\t\t\t}\n\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\tvar child = util.createElement(doc, \"pre\"); //$NON-NLS-1$\n\t\t\tchild.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tchild.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tconvertDelimiter(text, \n\t\t\t\tfunction(t) {\n\t\t\t\t\tchild.appendChild(doc.createTextNode(t));\n\t\t\t\t}, \n\t\t\t\tfunction() {\n\t\t\t\t\tchild.appendChild(util.createElement(doc, \"br\")); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t);\n\t\t\tchild.appendChild(doc.createTextNode(\" \")); //$NON-NLS-1$\n\t\t\tthis._clientDiv.appendChild(child);\n\t\t\tvar range = doc.createRange();\n\t\t\trange.setStart(child.firstChild, 0);\n\t\t\trange.setEndBefore(child.lastChild);\n\t\t\tvar sel = win.getSelection();\n\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\tsel.addRange(range);\n\t\t\tvar that = this;\n\t\t\t/** @ignore */\n\t\t\tvar cleanup = function() {\n\t\t\t\tif (child && child.parentNode === that._clientDiv) {\n\t\t\t\t\tthat._clientDiv.removeChild(child);\n\t\t\t\t}\n\t\t\t\tthat._updateDOMSelection();\n\t\t\t};\n\t\t\tvar result = false;\n\t\t\t/* \n\t\t\t* Try execCommand first, it works on firefox with clipboard permission,\n\t\t\t* chrome 5, safari 4.\n\t\t\t*/\n\t\t\tthis._ignoreCopy = true;\n\t\t\ttry {\n\t\t\t\tresult = doc.execCommand(\"copy\", false, null); //$NON-NLS-1$\n\t\t\t} catch (e) {}\n\t\t\tthis._ignoreCopy = false;\n\t\t\tif (!result) {\n\t\t\t\tif (evt) {\n\t\t\t\t\twin.setTimeout(cleanup, 0);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* no event and no permission, copy cannot be done */\n\t\t\tcleanup();\n\t\t\treturn true;\n\t\t},\n\t\t_setGrab: function (target) {\n\t\t\tif (target === this._grabControl) { return; }\n\t\t\tif (target) {\n\t\t\t\tif (target.setCapture) { target.setCapture(); }\n\t\t\t\tthis._grabControl = target;\n\t\t\t} else {\n\t\t\t\tif (this._grabControl.releaseCapture) { this._grabControl.releaseCapture(); }\n\t\t\t\tthis._grabControl = null;\n\t\t\t}\n\t\t},\n\t\t_setLinksVisible: function(visible) {\n\t\t\tif (this._linksVisible === visible) { return; }\n\t\t\tthis._linksVisible = visible;\n\t\t\t/*\n\t\t\t* Feature in IE.  The client div looses focus and does not regain it back\n\t\t\t* when the content editable flag is reset. The fix is to remember that it\n\t\t\t* had focus when the flag is cleared and give focus back to the div when\n\t\t\t* the flag is set.\n\t\t\t*/\n\t\t\tif (util.isIE && visible) {\n\t\t\t\tthis._hadFocus = this._hasFocus;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tclientDiv.contentEditable = !visible;\n\t\t\tif (this._hadFocus && !visible) {\n\t\t\t\tclientDiv.focus();\n\t\t\t}\n\t\t\tif (this._overlayDiv) {\n\t\t\t\tthis._overlayDiv.style.zIndex = visible ? \"-1\" : \"1\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tvar line = this._getLineNext();\n\t\t\twhile (line) {\n\t\t\t\tline._line.updateLinks();\n\t\t\t\tline = this._getLineNext(line);\n\t\t\t}\n\t\t\tthis._updateDOMSelection();\n\t\t},\n\t\t_setSelection: function (selection, _scroll, update, callback, pageScroll, add, preserveCursorX) {\n\t\t\tif (selection) {\n\t\t\t\tif (update === undefined) { update = true; }\n\t\t\t\tvar oldSelection = this._getSelections(), newSelection;\n\t\t\t\tif (Array.isArray(selection)) {\n\t\t\t\t\tnewSelection = selection;\n\t\t\t\t} else if (add) {\n\t\t\t\t\tnewSelection = oldSelection.concat([selection]);\n\t\t\t\t} else {\n\t\t\t\t\tnewSelection = [selection];\n\t\t\t\t}\n\t\t\t\tthis._selection = Selection.merge(newSelection);\n\t\t\t\t\n\t\t\t\tif (!preserveCursorX) {\n\t\t\t\t\tnewSelection.forEach(function(sel) {\n\t\t\t\t\t\tsel._columnX = -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/* \n\t\t\t\t* Always showCaret(), even when the selection is not changing, to ensure the\n\t\t\t\t* caret is visible. Note that some views do not scroll to show the caret during\n\t\t\t\t* keyboard navigation when the selection does not chanage. For example, line down\n\t\t\t\t* when the caret is already at the last line.\n\t\t\t\t*/\n\t\t\t\tif (_scroll !== false) { /*update = !*/this._showCaret(false, callback, _scroll, pageScroll); }\n\t\t\t\t\n\t\t\t\t/* \n\t\t\t\t* Sometimes the browser changes the selection \n\t\t\t\t* as result of method calls or \"leaked\" events. \n\t\t\t\t* The fix is to set the visual selection even\n\t\t\t\t* when the logical selection is not changed.\n\t\t\t\t*/\n\t\t\t\tif (update) { this._updateDOMSelection(); }\n\t\t\t\t\n\t\t\t\tif (!Selection.compare(oldSelection, newSelection)) {\n\t\t\t\t\tvar e = {\n\t\t\t\t\t\ttype: \"Selection\", //$NON-NLS-1$\n\t\t\t\t\t\toldValue: Selection.convert(oldSelection),\n\t\t\t\t\t\tnewValue: Selection.convert(newSelection)\n\t\t\t\t\t};\n\t\t\t\t\tthis.onSelection(e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setSelectionTo: function (x, y, down, extent, add, drag) {\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar pt = this.convert({x: x, y: y}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar lineIndex = this._getLineIndex(pt.y);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = line.getOffset(pt.x, pt.y - this._getLinePixel(lineIndex));\n\t\t\tif (drag && !extent) {\n\t\t\t\tif (Selection.contains(selections, offset)) {\n\t\t\t\t\tthis._dragOffset = offset;\n\t\t\t\t\tline.destroy();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._blockSelection) {\n\t\t\t\tselections = this._getBlockSelections(selections, lineIndex, pt);\n\t\t\t} else {\n\t\t\t\tvar selection;\n\t\t\t\tif (!down) {\n\t\t\t\t\tselection = Selection.editing(selections);\n\t\t\t\t} else if (extent) {\n\t\t\t\t\tselection = selections[selections.length - 1];\n\t\t\t\t\tselection._editing = true;\n\t\t\t\t} else {\n\t\t\t\t\tselection = new Selection(0, 0);\n\t\t\t\t\tselection._editing = true;\n\t\t\t\t\tif (add) {\n\t\t\t\t\t\tselections.push(selection);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselections = [selection];\n\t\t\t\t\t}\n\t\t\t\t\tselection._docX = pt.x;\n\t\t\t\t}\n\t\t\t\tif (this._clickCount === 1) {\n\t\t\t\t\tselection.extend(offset);\n\t\t\t\t\tif (!extent) { selection.collapse(); }\n\t\t\t\t} else {\n\t\t\t\t\tvar word = (this._clickCount & 1) === 0;\n\t\t\t\t\tvar start, end;\n\t\t\t\t\tif (word) {\n\t\t\t\t\t\tif (this._doubleClickSelection) {\n\t\t\t\t\t\t\tif (offset >= this._doubleClickSelection.start) {\n\t\t\t\t\t\t\t\tstart = this._doubleClickSelection.start;\n\t\t\t\t\t\t\t\tend = line.getNextOffset(offset, {unit:\"wordend\", count:1}); //$NON-NLS-1$\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstart = line.getNextOffset(offset, {unit:\"word\", count:-1}); //$NON-NLS-1$\n\t\t\t\t\t\t\t\tend = this._doubleClickSelection.end;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = line.getNextOffset(offset, {unit:\"word\", count:-1}); //$NON-NLS-1$\n\t\t\t\t\t\t\tend = line.getNextOffset(start, {unit:\"wordend\", count:1}); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this._doubleClickSelection) {\n\t\t\t\t\t\t\tvar doubleClickLine = model.getLineAtOffset(this._doubleClickSelection.start);\n\t\t\t\t\t\t\tif (lineIndex >= doubleClickLine) {\n\t\t\t\t\t\t\t\tstart = model.getLineStart(doubleClickLine);\n\t\t\t\t\t\t\t\tend = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\t\tend = model.getLineEnd(doubleClickLine);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tend = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselection.setCaret(start);\n\t\t\t\t\tselection.extend(end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._setSelection(selections, true, true, null, false);\n\t\t\tline.destroy();\n\t\t\treturn true;\n\t\t},\n\t\t_setFullSelection: function(fullSelection, init) {\n\t\t\tthis._fullSelection = fullSelection;\n\t\t\tif (util.isWebkit < 537.36) {\n\t\t\t\tthis._fullSelection = fullSelection = true;\n\t\t\t}\n\t\t\tif (!this._domSelection) {\n\t\t\t\tthis._domSelection = [];\n\t\t\t\tthis._cursorVisible = true;\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t},\n\t\t_setBlockCursor: function (visible) {\n\t\t\tthis._blockCursorVisible = visible;\n\t\t\tthis._updateBlockCursorVisible();\n\t\t},\n\t\t_setOverwriteMode: function (overwrite) {\n\t\t\tthis._overwriteMode = overwrite;\n\t\t\tthis._updateBlockCursorVisible();\n\t\t},\n\t\t_updateBlockCursorVisible: function () {\n\t\t\tif (this._blockCursorVisible || this._overwriteMode) {\n\t\t\t\tif (!this._cursorDiv) {\n\t\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\t\tvar cursorDiv = util.createElement(viewDiv.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.className = \"textviewBlockCursor\"; //$NON-NLS-1$\n\t\t\t\t\tthis._cursorDiv = cursorDiv;\n\t\t\t\t\tcursorDiv.tabIndex = -1;\n\t\t\t\t\tcursorDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.color = \"transparent\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.innerHTML = \"&nbsp;\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.appendChild(cursorDiv);\n\t\t\t\t\tthis._updateDOMSelection();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._cursorDiv) {\n\t\t\t\t\tthis._cursorDiv.parentNode.removeChild(this._cursorDiv);\n\t\t\t\t\tthis._cursorDiv = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setMarginOffset: function(marginOffset, init) {\n\t\t\tthis._marginOffset = marginOffset;\n\t\t\tthis._marginDiv.style.display = marginOffset ? \"block\" : \"none\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tif (!init) {\n\t\t\t\tthis._metrics = this._calculateMetrics();\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_setWrapOffset: function(wrapOffset, init) {\n\t\t\tthis._wrapOffset = wrapOffset;\n\t\t\tif (!init) {\n\t\t\t\tthis._metrics = this._calculateMetrics();\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_setReadOnly: function (readOnly) {\n\t\t\tthis._readonly = readOnly;\n\t\t},\n\t\t_setSingleMode: function (singleMode, init) {\n\t\t\tthis._singleMode = singleMode;\n\t\t\tthis._updateOverflow();\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setNoScroll: function (noScroll, init) {\n\t\t\tthis._noScroll = noScroll;\n\t\t\tthis._updateOverflow();\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setTabSize: function (tabSize, init) {\n\t\t\tthis._tabSize = tabSize;\n\t\t\tthis._customTabSize = undefined;\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (util.isOpera) {\n\t\t\t\tif (clientDiv) { clientDiv.style.OTabSize = this._tabSize+\"\"; }\n\t\t\t} else if (util.isWebkit >= 537.1) {\n\t\t\t\tif (clientDiv) { clientDiv.style.tabSize = this._tabSize+\"\"; }\n\t\t\t} else if (util.isFirefox >= 4) {\n\t\t\t\tif (clientDiv) {  clientDiv.style.MozTabSize = this._tabSize+\"\"; }\n\t\t\t} else if (this._tabSize !== 8) {\n\t\t\t\tthis._customTabSize = this._tabSize;\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis.redrawLines();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t},\n\t\t_setTheme: function(theme) {\n\t\t\tif (this._theme) {\n\t\t\t\tthis._theme.removeEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._theme = theme;\n\t\t\tif (this._theme) {\n\t\t\t\tthis._theme.addEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._setThemeClass(this._themeClass);\n\t\t},\n\t\t_setThemeClass: function (themeClass, init) {\n\t\t\tthis._themeClass = themeClass;\n\t\t\tvar viewContainerClass = \"textview\"; //$NON-NLS-1$\n\t\t\tvar globalThemeClass = this._theme.getThemeClass();\n\t\t\tif (globalThemeClass) { viewContainerClass += \" \" + globalThemeClass; } //$NON-NLS-1$\n\t\t\tif (this._themeClass && globalThemeClass !== this._themeClass) { viewContainerClass += \" \" + this._themeClass; } //$NON-NLS-1$\n\t\t\tthis._rootDiv.className = viewContainerClass;\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setUndoStack: function (undoStack) {\n\t\t\tthis._undoStack = undoStack;\n\t\t},\n\t\t_setWrapMode: function (wrapMode, init) {\n\t\t\tthis._wrapMode = wrapMode && this._wrappable;\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (this._wrapMode) {\n\t\t\t\tclientDiv.style.whiteSpace = \"pre-wrap\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.wordWrap = \"break-word\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tclientDiv.style.whiteSpace = \"pre\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.wordWrap = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._updateOverflow();\n\t\t\tif (!init) {\n\t\t\t\tthis.redraw();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t\tthis._resetLineHeight();\n\t\t},\n\t\t_showCaret: function (allSelection, callback, showOptions, pageScroll) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._ignoreDOMSelection) { return; }\n\t\t\tif (this._imeOffset !== -1) return;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar selection = Selection.editing(selections, this._autoScrollDir === \"down\"); //$NON-NLS-1$\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar start = selection.start;\n\t\t\tvar end = selection.end;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar endLine = model.getLineAtOffset(end);\n\t\t\tvar endInclusive = Math.max(Math.max(start, model.getLineStart(endLine)), end - 1);\n\t\t\tvar clientWidth = this._getClientWidth();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar minScroll = clientWidth / 4;\n\t\t\tvar bounds = this._getBoundsAtOffset(caret === start ? start : endInclusive);\n\t\t\tvar left = bounds.left;\n\t\t\tvar right = bounds.right;\n\t\t\tvar _top = bounds.top;\n\t\t\tvar bottom = bounds.bottom;\n\t\t\tvar selectionHeight = 0;\n\t\t\tvar hasShowOptions = typeof showOptions === \"object\"; //$NON-NLS-1$\n\t\t\tif ((allSelection || hasShowOptions) && !selection.isEmpty()) {\n\t\t\t\tbounds = this._getBoundsAtOffset(caret === end ? start : endInclusive);\n\t\t\t\tselectionHeight = (bounds.bottom > bottom ? bounds.bottom : bottom) - (bounds.top < _top ? bounds.top : _top);\n\t\t\t\tif (allSelection) {\n\t\t\t\t\tif (bounds.top === _top) {\n\t\t\t\t\t\tif (caret === start) {\n\t\t\t\t\t\t\tright = left + Math.min(bounds.right - left, clientWidth);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tleft = right - Math.min(right - bounds.left, clientWidth);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (caret === start) {\n\t\t\t\t\t\t\tbottom = _top + Math.min(bounds.bottom - _top, clientHeight);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_top = bottom - Math.min(bottom - bounds.top, clientHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar pixelX = 0;\n\t\t\tif (left < _scroll.x) {\n\t\t\t\tpixelX = Math.min(left - _scroll.x, -minScroll);\n\t\t\t}\n\t\t\tif (right > _scroll.x + clientWidth) {\n\t\t\t\tpixelX = Math.max(right - _scroll.x - clientWidth, minScroll);\n\t\t\t}\n\t\t\tvar pixelY = 0;\n\t\t\tif (_top < _scroll.y) {\n\t\t\t\tpixelY = _top - _scroll.y;\n\t\t\t} else if (bottom > _scroll.y + clientHeight) {\n\t\t\t\tpixelY = bottom - _scroll.y - clientHeight;\n\t\t\t}\n\t\t\tif (pageScroll) {\n\t\t\t\tif (pageScroll > 0) {\n\t\t\t\t\tif (pixelY > 0) {\n\t\t\t\t\t\tpixelY = Math.max(pixelY, pageScroll);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (pixelY < 0) {\n\t\t\t\t\t\tpixelY = Math.min(pixelY, pageScroll);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar alwaysScroll = hasShowOptions && showOptions.scrollPolicy === \"always\"; //$NON-NLS-1$\n\t\t\tif (pixelX !== 0 || pixelY !== 0 || alwaysScroll) {\n\t\t\t\tif (hasShowOptions) {\n\t\t\t\t\tvar flag = pixelY > 0;\n\t\t\t\t\tif (pixelY === 0) {\n\t\t\t\t\t\tpixelY = _top - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t\tvar viewAnchor = showOptions.viewAnchor;\n\t\t\t\t\tvar selectionAnchor = showOptions.selectionAnchor;\n\t\t\t\t\tvar viewAnchorOffset = Math.min(Math.max(0, showOptions.viewAnchorOffset || 0));\n//\t\t\t\t\tvar selectionAnchorOffset = Math.min(Math.max(0, showOptions.selectionAnchorOffset || 0));\n\t\t\t\t\tif (viewAnchor === \"top\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? (1 - viewAnchorOffset) * clientHeight : -viewAnchorOffset * clientHeight);\n\t\t\t\t\t} else if (viewAnchor === \"bottom\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? viewAnchorOffset * clientHeight : -(1 - viewAnchorOffset) * clientHeight);\n\t\t\t\t\t} else if (viewAnchor === \"center\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? clientHeight / 2 + viewAnchorOffset * clientHeight : clientHeight / 2  - (1 - viewAnchorOffset) * clientHeight);\n\t\t\t\t\t} else { // caret is the default\n\t\t\t\t\t\tpixelY += Math.floor(flag ? viewAnchorOffset * clientHeight : -viewAnchorOffset * clientHeight);\n\t\t\t\t\t}\n\t\t\t\t\tif (startLine !== endLine) {\n\t\t\t\t\t\tif (selectionAnchor === \"top\" && caret !== start) { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(-selectionHeight);\n\t\t\t\t\t\t} else if (selectionAnchor === \"bottom\" && caret !== end) { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(selectionHeight);\n\t\t\t\t\t\t} else if (selectionAnchor === \"center\") { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(selectionHeight / 2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// caret is the default\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (pixelY !== 0 && typeof showOptions === \"number\") { //$NON-NLS-1$\n\t\t\t\t\tif (showOptions < 0) { showOptions = 0; }\n\t\t\t\t\tif (showOptions > 1) { showOptions = 1; }\n\t\t\t\t\tpixelY += Math.floor(pixelY > 0 ? showOptions * clientHeight : -showOptions * clientHeight);\n\t\t\t\t}\n\t\t\t\tthis._scrollViewAnimated(pixelX, pixelY, callback);\n\t\t\t\t/*\n\t\t\t\t* When the view scrolls it is possible that one of the scrollbars can show over the caret.\n\t\t\t\t* Depending on the browser scrolling can be synchronous (Safari), in which case the change \n\t\t\t\t* can be detected before showCaret() returns. When scrolling is asynchronous (most browsers), \n\t\t\t\t* the detection is done during the next update page.\n\t\t\t\t*/\n\t\t\t\tif (clientHeight !== this._getClientHeight() || clientWidth !== this._getClientWidth()) {\n\t\t\t\t\tthis._showCaret();\n\t\t\t\t} else {\n\t\t\t\t\tthis._ensureCaretVisible = true;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_startIME: function () {\n\t\t\tif (this._imeOffset !== -1) { return; }\n\t\t\tvar selected = false;\n\t\t\tvar selections = this._getSelections();\n\t\t\tfor (var i=0; i<selections.length && !selected; i++) {\n\t\t\t\tselected = !selections[i].isEmpty();\n\t\t\t}\n\t\t\tif (selected) {\n\t\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\t}\n\t\t\tthis._imeOffset = selections[0].start;\n\t\t},\n\t\t_unhookEvents: function() {\n\t\t\tthis._model.removeEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.removeEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._theme.removeEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._modelListener = null;\n\t\t\tfor (var i=0; i<this._handlers.length; i++) {\n\t\t\t\tvar h = this._handlers[i];\n\t\t\t\tremoveHandler(h.target, h.type, h.handler);\n\t\t\t}\n\t\t\tthis._handlers = null;\n\t\t\tif (this._mutationObserver) {\n\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t}\n\t\t},\n\t\t_updateDOMSelection: function () {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._ignoreDOMSelection) { return; }\n\t\t\tif (this._imeOffset !== -1) return;\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar selection = this._getSelections();\n\t\t\tvar domSelection = this._domSelection, i;\n\t\t\tif (domSelection.length < selection.length) {\n\t\t\t\tfor (i=domSelection.length; i<selection.length; i++) {\n\t\t\t\t\tdomSelection.push(new DOMSelection(this));\n\t\t\t\t}\n\t\t\t} else if (domSelection.length > selection.length) {\n\t\t\t\tdomSelection.splice(selection.length).forEach(function(s) {\n\t\t\t\t\ts.destroy();\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (i=0; i<domSelection.length; i++) {\n\t\t\t\tdomSelection[i].setPrimary(i === 0);\n\t\t\t\tdomSelection[i].setSelection(selection[i]);\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tvar that = this;\n\t\t\tif (domSelection.length > 1) {\n\t\t\t\tif (!this._cursorTimer) {\n\t\t\t\t\tthis._cursorTimer = win.setInterval(function() {\n\t\t\t\t\t\tthat._cursorVisible = !that._cursorVisible;\n\t\t\t\t\t\tthat._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._cursorTimer) {\n\t\t\t\t\twin.clearInterval(this._cursorTimer);\n\t\t\t\t\tthis._cursorTimer = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_update: function(hScrollOnly) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._updateTimer) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._updateTimer);\n\t\t\t\tthis._updateTimer = null;\n\t\t\t\thScrollOnly = false;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (!clientDiv) { return; }\n\t\t\tif (this._metrics.invalid) {\n\t\t\t\tthis._ignoreQueueUpdate = true;\n\t\t\t\tthis._updateStyle();\n\t\t\t\tthis._ignoreQueueUpdate = false;\n\t\t\t}\n\t\t\tvar model = this._model;\n\t\t\tvar _scroll = this._getScroll(false);\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar needUpdate = false;\n\t\t\tvar hScroll = false, vScroll = false;\n\t\t\tvar scrollbarWidth = this._metrics.scrollWidth;\n\t\t\t\n\t\t\tif (this._wrapMode) {\n\t\t\t\tclientDiv.style.width = (this._metrics.wrapWidth || this._getClientWidth()) + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* topIndex - top line index of the view (maybe be particialy visible)\n\t\t\t* lineStart - top line minus one line (if any)\n\t\t\t* topIndexY - portion of the top line that is NOT visible.\n\t\t\t* top - topIndexY plus height of the line before top line (if any)\n\t\t\t*/\n\t\t\tvar topIndex, lineStart, _top, topIndexY,\n\t\t\t\tleftWidth, leftRect,\n\t\t\t\tclientWidth, clientHeight, scrollWidth, scrollHeight,\n\t\t\t\ttotalHeight = 0, totalLineIndex = 0, tempLineHeight;\n\t\t\tif (this._lineHeight) {\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex);\n\t\t\t\t\tif (totalHeight + tempLineHeight > _scroll.y) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\ttopIndex = totalLineIndex;\n\t\t\t\tlineStart = Math.max(0, topIndex - 1);\n\t\t\t\ttopIndexY = _top = _scroll.y - totalHeight;\n\t\t\t\tif (topIndex > 0) {\n\t\t\t\t\t_top += this._getLineHeight(topIndex - 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar firstLine = Math.max(0, _scroll.y) / lineHeight;\n\t\t\t\ttopIndex = Math.floor(firstLine);\n\t\t\t\tlineStart = Math.max(0, topIndex - 1);\n\t\t\t\t_top = Math.round((firstLine - lineStart) * lineHeight);\n\t\t\t\ttopIndexY = Math.round((firstLine - topIndex) * lineHeight);\n\t\t\t\tscrollHeight = lineCount * lineHeight;\n\t\t\t}\n\t\t\tthis._topIndexY = topIndexY;\n\t\t\tvar rootDiv = this._rootDiv;\n\t\t\tvar rootWidth = rootDiv.clientWidth;\n\t\t\tvar rootHeight = rootDiv.clientHeight;\n\t\t\tif (hScrollOnly) {\n\t\t\t\tleftWidth = 0;\n\t\t\t\tif (this._leftDiv) {\n\t\t\t\t\tleftRect = this._leftDiv.getBoundingClientRect();\n\t\t\t\t\tleftWidth = leftRect.right - leftRect.left;\n\t\t\t\t}\n\t\t\t\tclientWidth = this._getClientWidth();\n\t\t\t\tclientHeight = this._getClientHeight();\n\t\t\t\tscrollWidth = clientWidth;\n\t\t\t\tif (this._wrapMode) {\n\t\t\t\t\tif (this._metrics.wrapWidth) {\n\t\t\t\t\t\tscrollWidth = this._metrics.wrapWidth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscrollWidth = Math.max(this._maxLineWidth, scrollWidth);\n\t\t\t\t}\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex, false);\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\tscrollHeight = totalHeight;\n\t\t\t} else {\n\t\t\t\tclientHeight = this._getClientHeight();\n\n\t\t\t\tvar linesPerPage = Math.floor((clientHeight + topIndexY) / lineHeight);\n\t\t\t\tvar bottomIndex = Math.min(topIndex + linesPerPage, lineCount - 1);\n\t\t\t\tvar lineEnd = Math.min(bottomIndex + 1, lineCount - 1);\n\t\t\t\t\n\t\t\t\tvar lineIndex, lineWidth;\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tlineIndex = child.lineIndex;\n\t\t\t\t\tvar nextChild = child.nextSibling;\n\t\t\t\t\tif (!(lineStart <= lineIndex && lineIndex <= lineEnd) || child.lineRemoved || child.lineIndex === -1) {\n\t\t\t\t\t\tif (this._mouseWheelLine === child) {\n\t\t\t\t\t\t\tchild.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tchild.lineIndex = -1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclientDiv.removeChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tchild = nextChild;\n\t\t\t\t}\n\t\n\t\t\t\tchild = this._getLineNext();\n\t\t\t\tvar doc = viewDiv.ownerDocument;\n\t\t\t\tvar frag = doc.createDocumentFragment();\n\t\t\t\tfor (lineIndex=lineStart; lineIndex<=lineEnd; lineIndex++) {\n\t\t\t\t\tif (!child || child.lineIndex > lineIndex) {\n\t\t\t\t\t\tnew TextLine(this, lineIndex).create(frag, null, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (frag.firstChild) {\n\t\t\t\t\t\t\tclientDiv.insertBefore(frag, child);\n\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (child && child.lineChanged) {\n\t\t\t\t\t\t\tchild = new TextLine(this, lineIndex).create(frag, child, true);\n\t\t\t\t\t\t\tchild.lineChanged = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = this._getLineNext(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (frag.firstChild) { clientDiv.insertBefore(frag, child); }\n\t\n\t\t\t\t/*\n\t\t\t\t* Feature in WekKit. Webkit limits the width of the lines\n\t\t\t\t* computed below to the width of the client div.  This causes\n\t\t\t\t* the lines to be wrapped even though \"pre\" is set.  The fix\n\t\t\t\t* is to set the width of the client div to \"0x7fffffffpx\"\n\t\t\t\t* before computing the lines width.  Note that this value is\n\t\t\t\t* reset to the appropriate value further down.\n\t\t\t\t*/ \n\t\t\t\tif (util.isWebkit && !this._wrapMode) {\n\t\t\t\t\tclientDiv.style.width = \"0x7fffffffpx\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\n\t\t\t\tvar rect;\n\t\t\t\tchild = this._getLineNext();\n\t\t\t\tvar bottomHeight = clientHeight + _top;\n\t\t\t\tvar foundBottomIndex = false;\n\t\t\t\twhile (child) {\n\t\t\t\t\tlineWidth = child.lineWidth;\n\t\t\t\t\tif (lineWidth === undefined) {\n\t\t\t\t\t\trect = child._line.getBoundingClientRect();\n\t\t\t\t\t\tlineWidth = child.lineWidth = Math.ceil(rect.right - rect.left);\n\t\t\t\t\t\tvar lh = rect.bottom - rect.top;\n\t\t\t\t\t\tif (this._lineHeight) {\n\t\t\t\t\t\t\tthis._lineHeight[child.lineIndex] = lh;\n\t\t\t\t\t\t} else if (lineHeight !== 0 && lh !== 0 && Math.ceil(lineHeight) !== Math.ceil(lh)) {\n\t\t\t\t\t\t\tthis._variableLineHeight = true;\n\t\t\t\t\t\t\tthis._lineHeight = [];\n\t\t\t\t\t\t\tthis._lineHeight[child.lineIndex] = lh;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this._lineHeight && !foundBottomIndex) {\n\t\t\t\t\t\tbottomHeight -= this._lineHeight[child.lineIndex];\n\t\t\t\t\t\tif (bottomHeight < 0) {\n\t\t\t\t\t\t\tbottomIndex = child.lineIndex;\n\t\t\t\t\t\t\tfoundBottomIndex = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\t\tif (lineWidth >= this._maxLineWidth) {\n\t\t\t\t\t\t\tthis._maxLineWidth = lineWidth;\n\t\t\t\t\t\t\tthis._maxLineIndex = child.lineIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this._checkMaxLineIndex === child.lineIndex) { this._checkMaxLineIndex = -1; }\n\t\t\t\t\t}\n\t\t\t\t\tif (child.lineIndex === topIndex) { this._topChild = child; }\n\t\t\t\t\tif (child.lineIndex === bottomIndex) { this._bottomChild = child; }\n\t\t\t\t\tchild = this._getLineNext(child);\n\t\t\t\t}\n\t\t\t\tif (this._checkMaxLineIndex !== -1) {\n\t\t\t\t\tlineIndex = this._checkMaxLineIndex;\n\t\t\t\t\tthis._checkMaxLineIndex = -1;\n\t\t\t\t\tif (0 <= lineIndex && lineIndex < lineCount) {\n\t\t\t\t\t\tvar line = new TextLine(this, lineIndex);\n\t\t\t\t\t\trect = line.getBoundingClientRect();\n\t\t\t\t\t\tlineWidth = rect.right - rect.left;\n\t\t\t\t\t\tif (lineWidth >= this._maxLineWidth) {\n\t\t\t\t\t\t\tthis._maxLineWidth = lineWidth;\n\t\t\t\t\t\t\tthis._maxLineIndex = lineIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex, totalLineIndex <= bottomIndex);\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\tscrollHeight = totalHeight;\n\t\n\t\t\t\t// Update rulers\n\t\t\t\tthis._updateRuler(this._leftDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._rightDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._innerRightDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._marginDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\t\n\t\t\t\tleftWidth = 0;\n\t\t\t\tif (this._leftDiv) {\n\t\t\t\t\tleftRect = this._leftDiv.getBoundingClientRect();\n\t\t\t\t\tleftWidth = leftRect.right - leftRect.left;\n\t\t\t\t}\n\t\t\t\tvar rightWidth = 0;\n\t\t\t\tif (this._rightDiv) {\n\t\t\t\t\tvar rightRect = this._rightDiv.getBoundingClientRect();\n\t\t\t\t\trightWidth = rightRect.right - rightRect.left;\n\t\t\t\t}\n\t\t\t\tviewDiv.style.left = leftWidth + \"px\"; //$NON-NLS-1$\n\t\t\t\tviewDiv.style.right = rightWidth + \"px\"; //$NON-NLS-1$\n\n\t\t\t\t/* Need to set the height first in order for the width to consider the vertical scrollbar */\n\t\t\t\tvar scrollDiv = this._scrollDiv;\n\t\t\t\tscrollDiv.style.height = (scrollHeight + (util.isWebkit ? 0 : viewPad.bottom)) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\tclientWidth = this._getClientWidth();\n\t\t\t\tif (!this._singleMode && !this._wrapMode && !this._noScroll) {\n\t\t\t\t\tvar clientHeightNoScroll = clientHeight, clientHeightScroll = clientHeight;\n\t\t\t\t\tvar oldHScroll = viewDiv.style.overflowX === \"scroll\"; //$NON-NLS-1$\n\t\t\t\t\tif (oldHScroll) {\n\t\t\t\t\t\tclientHeightNoScroll += scrollbarWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclientHeightScroll -= scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t\tvar clientWidthNoScroll = clientWidth, clientWidthScroll = clientWidth;\n\t\t\t\t\tvar oldVScroll = viewDiv.style.overflowY === \"scroll\"; //$NON-NLS-1$\n\t\t\t\t\tif (oldVScroll) {\n\t\t\t\t\t\tclientWidthNoScroll += scrollbarWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclientWidthScroll -= scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t\tclientHeight = clientHeightNoScroll;\n\t\t\t\t\tclientWidth = clientWidthNoScroll;\n\t\t\t\t\tif (scrollHeight > clientHeight) {\n\t\t\t\t\t\tvScroll = true;\n\t\t\t\t\t\tclientWidth = clientWidthScroll;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._maxLineWidth > clientWidth) {\n\t\t\t\t\t\thScroll = true;\n\t\t\t\t\t\tclientHeight = clientHeightScroll;\n\t\t\t\t\t\tif (scrollHeight > clientHeight) {\n\t\t\t\t\t\t\tvScroll = true;\n\t\t\t\t\t\t\tclientWidth = clientWidthScroll;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (oldHScroll !== hScroll) {\n\t\t\t\t\t\tviewDiv.style.overflowX = hScroll ? \"scroll\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t\t}\n\t\t\t\t\tif (oldVScroll !== vScroll) {\n\t\t\t\t\t\tviewDiv.style.overflowY = vScroll ? \"scroll\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t\t}\n\t\t\t\t\tneedUpdate = oldHScroll !== hScroll || oldVScroll !== vScroll;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar width = clientWidth;\n\t\t\t\tif (this._wrapMode) {\n\t\t\t\t\tif (this._metrics.wrapWidth) {\n\t\t\t\t\t\twidth = this._metrics.wrapWidth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twidth = Math.max(this._maxLineWidth + this._getInnerRightWidth(), width);\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t* Except by IE 8 and earlier, all other browsers are not allocating enough space for the right padding \n\t\t\t\t* in the scrollbar. It is possible this a bug since all other paddings are considered.\n\t\t\t\t*/\n\t\t\t\tscrollWidth = width;\n\t\t\t\tif ((!util.isIE || util.isIE >= 9) && this._maxLineWidth > clientWidth) { width += viewPad.right + viewPad.left; }\n\t\t\t\tscrollDiv.style.width = width + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (this._clipScrollDiv) {\n\t\t\t\t\tthis._clipScrollDiv.style.width = width + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\t/* Get the left scroll after setting the width of the scrollDiv as this can change the horizontal scroll offset. */\n\t\t\t\t_scroll = this._getScroll(false);\n\n\t\t\t\tvar innerRightDiv = this._innerRightDiv;\n\t\t\t\tif (innerRightDiv) {\n\t\t\t\t\tinnerRightDiv.style.right = rightWidth + (viewDiv.style.overflowY === \"scroll\" ? this._metrics.scrollWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\tinnerRightDiv.style.bottom = (viewDiv.style.overflowX === \"scroll\" ? scrollbarWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._scrollHeight = scrollHeight;\n\t\t\tif (this._vScrollDiv) {\n\t\t\t\tvar trackHeight = clientHeight - 8;\n\t\t\t\tvar thumbHeight = Math.max(15, Math.ceil(Math.min(1, trackHeight / (scrollHeight + viewPad.top + viewPad.bottom)) * trackHeight));\n\t\t\t\tthis._vScrollDiv.style.left = (leftWidth + clientWidth - 8) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv.style.top = Math.floor(Math.max(0, (_scroll.y * trackHeight / scrollHeight))) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv.style.height = thumbHeight + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (!this._wrapMode && this._hScrollDiv) {\n\t\t\t\tvar trackWidth = clientWidth - 8;\n\t\t\t\tvar thumbWidth = Math.max(15, Math.ceil(Math.min(1, trackWidth / (this._maxLineWidth + viewPad.left + viewPad.right)) * trackWidth));\n\t\t\t\tthis._hScrollDiv.style.left = leftWidth + Math.floor(Math.max(0, Math.floor(_scroll.x * trackWidth / this._maxLineWidth))) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.top = (clientHeight - 9) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.width = thumbWidth + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar left = _scroll.x;\t\n\t\t\tvar clipDiv = this._clipDiv;\n\t\t\tvar overlayDiv = this._overlayDiv;\n\t\t\tvar marginDiv = this._marginDiv;\n\t\t\tvar clipLeft, clipTop;\n\t\t\tif (marginDiv) {\n\t\t\t\tmarginDiv.style.left = (-left + leftWidth + this._metrics.marginWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tmarginDiv.style.bottom = (viewDiv.style.overflowX === \"scroll\" ? scrollbarWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (clipDiv) {\n\t\t\t\tclipDiv.scrollLeft = left;\n\t\t\t\tclipDiv.scrollTop = 0;\n\t\t\t\tclipLeft = leftWidth + viewPad.left;\n\t\t\t\tclipTop = viewPad.top;\n\t\t\t\tvar clipWidth = clientWidth;\n\t\t\t\tvar clipHeight = clientHeight;\n\t\t\t\tvar clientLeft = 0, clientTop = -_top;\n\t\t\t\tif (_scroll.x === 0) {\n\t\t\t\t\tclipLeft -= viewPad.left;\n\t\t\t\t\tclipWidth += viewPad.left;\n\t\t\t\t\tclientLeft = viewPad.left;\n\t\t\t\t} \n\t\t\t\tif (_scroll.x + clientWidth === scrollWidth) {\n\t\t\t\t\tclipWidth += viewPad.right;\n\t\t\t\t}\n\t\t\t\tif (_scroll.y === 0) {\n\t\t\t\t\tclipTop -= viewPad.top;\n\t\t\t\t\tclipHeight += viewPad.top;\n\t\t\t\t\tclientTop += viewPad.top;\n\t\t\t\t}\n\t\t\t\tif (_scroll.y + clientHeight === scrollHeight) { \n\t\t\t\t\tclipHeight += viewPad.bottom; \n\t\t\t\t}\n\t\t\t\tclipDiv.style.left = clipLeft + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.top = clipTop + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.right = (rootWidth - clipWidth - clipLeft) + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.bottom = (rootHeight - clipHeight - clipTop) + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.left = clientLeft + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.top = clientTop + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.width = scrollWidth + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.height = (clientHeight + _top) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (overlayDiv) {\n\t\t\t\t\toverlayDiv.style.left = clientDiv.style.left;\n\t\t\t\t\toverlayDiv.style.top = clientDiv.style.top;\n\t\t\t\t\toverlayDiv.style.width = clientDiv.style.width;\n\t\t\t\t\toverlayDiv.style.height = clientDiv.style.height;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tclipLeft = left;\n\t\t\t\tclipTop = _top;\n\t\t\t\tvar clipRight = left + clientWidth;\n\t\t\t\tvar clipBottom = _top + clientHeight;\n\t\t\t\tif (clipLeft === 0) { clipLeft -= viewPad.left; }\n\t\t\t\tif (clipTop === 0) { clipTop -= viewPad.top; }\n\t\t\t\tif (clipRight === scrollWidth) { clipRight += viewPad.right; }\n\t\t\t\tif (_scroll.y + clientHeight === scrollHeight) { clipBottom += viewPad.bottom; }\n\t\t\t\tclientDiv.style.clip = \"rect(\" + clipTop + \"px,\" + clipRight + \"px,\" + clipBottom + \"px,\" + clipLeft + \"px)\"; //$NON-NLS-4$ //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-5$\n\t\t\t\tif (document.dir == \"rtl\") { /* ACGC */\n\t\t\t\t\tclientDiv.style.right = (-left + leftWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}else{\n\t\t\t\t\tclientDiv.style.left = (-left + leftWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\t  \n\t\t\t\t}\n\t\t\t\tclientDiv.style.width = (this._wrapMode || util.isWebkit ? scrollWidth : clientWidth + left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (!hScrollOnly) {\n\t\t\t\t\tclientDiv.style.top = (-_top + viewPad.top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tclientDiv.style.height = (clientHeight + _top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (overlayDiv) {\n\t\t\t\t\toverlayDiv.style.clip = clientDiv.style.clip;\n\t\t\t\t\toverlayDiv.style.left = clientDiv.style.left;\n\t\t\t\t\toverlayDiv.style.width = clientDiv.style.width;\n\t\t\t\t\tif (!hScrollOnly) {\n\t\t\t\t\t\toverlayDiv.style.top = clientDiv.style.top;\n\t\t\t\t\t\toverlayDiv.style.height = clientDiv.style.height;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._updateDOMSelection();\n\n\t\t\tif (needUpdate) {\n\t\t\t\tvar ensureCaretVisible = this._ensureCaretVisible;\n\t\t\t\tthis._ensureCaretVisible = false;\n\t\t\t\tif (ensureCaretVisible) {\n\t\t\t\t\tthis._showCaret();\n\t\t\t\t}\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_updateOverflow: function() {\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (this._noScroll) {\n\t\t\t\tviewDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t} else if (this._wrapMode) {\n\t\t\t\tviewDiv.style.overflowX = \"hidden\"; //$NON-NLS-1$\n\t\t\t\tviewDiv.style.overflowY = \"scroll\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tviewDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_updateRuler: function (divRuler, topIndex, bottomIndex, rootHeight) {\n\t\t\tif (!divRuler) { return; }\n\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar div = divRuler.firstChild;\n\t\t\twhile (div) {\n\t\t\t\tvar ruler = div._ruler;\n\t\t\t\tvar overview = ruler.getOverview();\n\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\tapplyStyle(ruler.getRulerStyle(), div);\n\t\t\t\t\tdivRuler.rulerWidth = undefined;\n\t\t\t\t}\n\t\t\t\tif (overview === \"fixed\") { //$NON-NLS-1$\n\t\t\t\t\tdiv.rulerChanged = false;\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar offset = lineHeight;\n\t\t\t\tif (overview === \"page\") { offset += this._topIndexY; } //$NON-NLS-1$\n\t\t\t\tdiv.style.top = -offset + \"px\"; //$NON-NLS-1$\n\t\t\t\tdiv.style.height = (rootHeight + offset) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar widthDiv;\n\t\t\t\tvar child = div.firstChild;\n\t\t\t\tif (child) {\n\t\t\t\t\twidthDiv = child;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\twidthDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\twidthDiv.style.visibility = \"hidden\"; //$NON-NLS-1$\n\t\t\t\t\tdiv.appendChild(widthDiv);\n\t\t\t\t}\n\t\t\t\tvar lineIndex, annotation;\n\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\tif (widthDiv) {\n\t\t\t\t\t\tlineIndex = -1;\n\t\t\t\t\t\tannotation = ruler.getWidestAnnotation();\n\t\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t\tapplyStyle(annotation.style, widthDiv);\n\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\twidthDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidthDiv.lineIndex = lineIndex;\n\t\t\t\t\t\twidthDiv.style.height = (lineHeight + viewPad.top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar lineDiv, frag, annotations;\n\t\t\t\tif (overview === \"page\") { //$NON-NLS-1$\n\t\t\t\t\tannotations = ruler.getAnnotations(topIndex, bottomIndex + 1);\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tlineIndex = child.lineIndex;\n\t\t\t\t\t\tvar nextChild = child.nextSibling;\n\t\t\t\t\t\tif (!(topIndex <= lineIndex && lineIndex <= bottomIndex) || child.lineChanged) {\n\t\t\t\t\t\t\tdiv.removeChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = nextChild;\n\t\t\t\t\t}\n\t\t\t\t\tchild = div.firstChild.nextSibling;\n\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\tfor (lineIndex=topIndex; lineIndex<=bottomIndex; lineIndex++) {\n\t\t\t\t\t\tif (!child || child.lineIndex > lineIndex) {\n\t\t\t\t\t\t\tlineDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tannotation = annotations[lineIndex];\n\t\t\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t\t\tapplyStyle(annotation.style, lineDiv);\n\t\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\t\tlineDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlineDiv.annotation = annotation;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\t\t\t\tlineDiv.style.height = this._getLineHeight(lineIndex) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tfrag.appendChild(lineDiv);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (frag.firstChild) {\n\t\t\t\t\t\t\t\tdiv.insertBefore(frag, child);\n\t\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (child) {\n\t\t\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (frag.firstChild) { div.insertBefore(frag, child); }\n\t\t\t\t} else {\n\t\t\t\t\tvar clientHeight = this._getClientHeight ();\n\t\t\t\t\tvar lineCount = this._model.getLineCount ();\n\t\t\t\t\tvar contentHeight = lineHeight * lineCount;\n\t\t\t\t\tvar trackHeight = clientHeight + viewPad.top + viewPad.bottom - 2 * this._metrics.scrollWidth;\n\t\t\t\t\tvar divHeight, arrowWidth;\n\t\t\t\t\tif (contentHeight < trackHeight) {\n\t\t\t\t\t\tdivHeight = lineHeight;\n\t\t\t\t\t\tarrowWidth = viewPad.top;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdivHeight = trackHeight / lineCount;\n\t\t\t\t\t\tarrowWidth = this._metrics.scrollWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\t\tvar count = div.childNodes.length;\n\t\t\t\t\t\twhile (count > 1) {\n\t\t\t\t\t\t\tdiv.removeChild(div.lastChild);\n\t\t\t\t\t\t\tcount--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tannotations = ruler.getAnnotations(0, lineCount);\n\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\tfor (var prop in annotations) {\n\t\t\t\t\t\t\tlineIndex = prop >>> 0;\n\t\t\t\t\t\t\tif (lineIndex < 0) { continue; }\n\t\t\t\t\t\t\tlineDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tannotation = annotations[prop];\n\t\t\t\t\t\t\tapplyStyle(annotation.style, lineDiv);\n\t\t\t\t\t\t\tlineDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tlineDiv.style.top = arrowWidth + lineHeight + Math.floor(lineIndex * divHeight) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\tlineDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineDiv.annotation = annotation;\n\t\t\t\t\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\t\t\t\tfrag.appendChild(lineDiv);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiv.appendChild(frag);\n\t\t\t\t\t} else if (div._oldTrackHeight !== trackHeight) {\n\t\t\t\t\t\tlineDiv = div.firstChild ? div.firstChild.nextSibling : null;\n\t\t\t\t\t\twhile (lineDiv) {\n\t\t\t\t\t\t\tlineDiv.style.top = this._metrics.scrollWidth + lineHeight + Math.floor(lineDiv.lineIndex * divHeight) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tlineDiv = lineDiv.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdiv._oldTrackHeight = trackHeight;\n\t\t\t\t}\n\t\t\t\tdiv.rulerChanged = false;\n\t\t\t\tdiv = div.nextSibling;\n\t\t\t}\n\t\t},\n\t\t_updateStyleSheet: function() {\n\t\t\tvar styleText = \"\";\n\t\t\tif (util.isWebkit && this._metrics.scrollWidth > 0) {\n\t\t\t\tstyleText += \"\\n.textview ::-webkit-scrollbar-corner {background: #eeeeee;}\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (styleText) {\n\t\t\t\tvar doc = this._clientDiv.ownerDocument;\n\t\t\t\tvar node = doc.getElementById(\"_textviewStyle\"); //$NON-NLS-1$\n\t\t\t\tif (!node) {\n\t\t\t\t\tnode = util.createElement(doc, \"style\"); //$NON-NLS-1$\n\t\t\t\t\tnode.id = \"_textviewStyle\"; //$NON-NLS-1$\n\t\t\t\t\tvar head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement; //$NON-NLS-1$\n\t\t\t\t\tnode.appendChild(doc.createTextNode(styleText));\n\t\t\t\t\thead.insertBefore(node, head.firstChild);\n\t\t\t\t} else {\n\t\t\t\t\tnode.removeChild(node.firstChild);\n\t\t\t\t\tnode.appendChild(doc.createTextNode(styleText));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_updateStyle: function (init, metrics) {\n\t\t\tif (!init && util.isIE) {\n\t\t\t\tthis._rootDiv.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tmetrics = this._metrics = metrics || this._calculateMetrics();\n\t\t\tif (this._variableLineHeight) {\n\t\t\t\tthis._variableLineHeight = false;\n\t\t\t\tthis._resetLineHeight();\n\t\t\t}\n\t\t\tif (util.isIE) {\n\t\t\t\tthis._rootDiv.style.lineHeight = (metrics.lineHeight - (metrics.lineTrim.top + metrics.lineTrim.bottom)) + \"px\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tthis._rootDiv.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._updateStyleSheet();\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\tif (!metrics.invalid && metrics.scrollWidth === 0) {\n\t\t\t\t\tviewDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t} else {\n\t\t\t\t\tviewDiv.style.pointerEvents = \"\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.style.zIndex = \"\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis.redraw();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t}\n\t};//end prototype\n\tmEventTarget.EventTarget.addMixin(TextView.prototype);\n\t\n\treturn {TextView: TextView};\n});\n\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/projectionTextModel\", ['orion/editor/textModel', 'orion/editor/eventTarget'], function(mTextModel, mEventTarget) { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\n\t/**\n\t * @class This object represents a projection range. A projection specifies a\n\t * range of text and the replacement text. The range of text is relative to the\n\t * base text model associated to a projection model.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.ProjectionTextModel}<br/>\n\t * {@link orion.editor.ProjectionTextModel#addProjection}<br/>\n\t * </p>\t\t \n\t * @name orion.editor.Projection\n\t * \n\t * @property {Number} start The start offset of the projection range. \n\t * @property {Number} end The end offset of the projection range. This offset is exclusive.\n\t * @property {String|orion.editor.TextModel} [text=\"\"] The projection text to be inserted\n\t */\n\t/**\n\t * Constructs a new <code>ProjectionTextModel</code> based on the specified <code>TextModel</code>.\n\t *\n\t * @param {orion.editor.TextModel} baseModel The base text model.\n\t *\n\t * @name orion.editor.ProjectionTextModel\n\t * @class The <code>ProjectionTextModel</code> represents a projection of its base text\n\t * model. Projection ranges can be added to the projection text model to hide and/or insert\n\t * ranges to the base text model.\n\t * <p>\n\t * The contents of the projection text model is modified when changes occur in the base model,\n\t * projection model or by calls to {@link #addProjection} and {@link #removeProjection}.\n\t * </p>\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextModel}\n\t * {@link orion.editor.TextView#setModel}\n\t * </p>\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction ProjectionTextModel(baseModel) {\n\t\tthis._model = baseModel;\n\t\tthis._projections = [];\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onChanged(e);\n\t\t\t},\n\t\t\tonChanging: function(e) {\n\t\t\t\tself._onChanging(e);\n\t\t\t}\n\t\t};\n\t\tbaseModel.addEventListener(\"postChanged\", this._listener.onChanged); //$NON-NLS-0$\n\t\tbaseModel.addEventListener(\"preChanging\", this._listener.onChanging); //$NON-NLS-0$\n\t}\n\n\tProjectionTextModel.prototype = /** @lends orion.editor.ProjectionTextModel.prototype */ {\n\t\t/**\n\t\t * Destroys this projection text model.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"postChanged\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tthis._model.removeEventListener(\"preChanging\", this._listener.onChanging); //$NON-NLS-0$\n\t\t\t\tthis._model = null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adds a projection range to the model.\n\t\t * <p>\n\t\t * The model must notify the listeners before and after the the text is\n\t\t * changed by calling {@link #onChanging} and {@link #onChanged} respectively. \n\t\t * </p>\n\t\t * @param {orion.editor.Projection} projection The projection range to be added.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#removeProjection\n\t\t */\n\t\taddProjection: function(projection) {\n\t\t\tif (!projection) {return;}\n\t\t\t//start and end can't overlap any exist projection\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tprojection._lineIndex = model.getLineAtOffset(projection.start);\n\t\t\tprojection._lineCount = model.getLineAtOffset(projection.end) - projection._lineIndex;\n\t\t\tvar text = projection.text;\n\t\t\tif (!text) { text = \"\"; }\n\t\t\tif (typeof text === \"string\") { //$NON-NLS-0$\n\t\t\t\tprojection._model = new mTextModel.TextModel(text, model.getLineDelimiter());\n\t\t\t} else {\n\t\t\t\tprojection._model = text;\n\t\t\t}\n\t\t\tvar eventStart = this.mapOffset(projection.start, true);\n\t\t\tvar removedCharCount = projection.end - projection.start;\n\t\t\tvar removedLineCount = projection._lineCount;\n\t\t\tvar addedCharCount = projection._model.getCharCount();\n\t\t\tvar addedLineCount = projection._model.getLineCount() - 1;\n\t\t\tvar modelChangingEvent = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: projection._model.getText(),\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\tvar index = this._binarySearch(projections, projection.start);\n\t\t\tprojections.splice(index, 0, projection);\n\t\t\tvar modelChangedEvent = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Returns all projection ranges of this model.\n\t\t * \n\t\t * @return {orion.editor.Projection[]} The projection ranges.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#addProjection\n\t\t */\n\t\tgetProjections: function() {\n\t\t\treturn this._projections.slice(0);\n\t\t},\n\t\t/**\n\t\t * Gets the base text model.\n\t\t *\n\t\t * @return {orion.editor.TextModel} The base text model.\n\t\t */\n\t\tgetBaseModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Maps offsets between the projection model and its base model.\n\t\t *\n\t\t * @param {Number} offset The offset to be mapped.\n\t\t * @param {Boolean} [baseOffset=false] <code>true</code> if <code>offset</code> is in base model and\n\t\t *\tshould be mapped to the projection model.\n\t\t * @return {Number} The mapped offset\n\t\t */\n\t\tmapOffset: function(offset, baseOffset) {\n\t\t\tvar projections = this._projections, delta = 0, i, projection;\n\t\t\tif (baseOffset) {\n\t\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > offset) { break; }\n\t\t\t\t\tif (projection.end > offset) { return -1; }\n\t\t\t\t\tdelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\treturn offset + delta;\n\t\t\t}\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn offset - delta;\n\t\t},\n\t\t/**\n\t\t * Removes a projection range from the model.\n\t\t * <p>\n\t\t * The model must notify the listeners before and after the the text is\n\t\t * changed by calling {@link #onChanging} and {@link #onChanged} respectively. \n\t\t * </p>\n\t\t * \n\t\t * @param {orion.editor.Projection} projection The projection range to be removed.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#addProjection\n\t\t */\n\t\tremoveProjection: function(projection) {\n\t\t\tthis._removeProjection(projection);\n\t\t},\n\t\t_removeProjection: function(projection, noEvents) {\n\t\t\tvar i, delta = 0;\n\t\t\tfor (i = 0; i < this._projections.length; i++) {\n\t\t\t\tvar p = this._projections[i];\n\t\t\t\tif (p === projection) {\n\t\t\t\t\tprojection = p;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdelta += p._model.getCharCount() - (p.end - p.start);\n\t\t\t}\n\t\t\tif (i < this._projections.length) {\n\t\t\t\tvar model = this._model;\n\t\t\t\tvar eventStart = projection.start + delta;\n\t\t\t\tvar addedCharCount = projection.end - projection.start;\n\t\t\t\tvar addedLineCount = projection._lineCount;\n\t\t\t\tvar removedCharCount = projection._model.getCharCount();\n\t\t\t\tvar removedLineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (!noEvents) {\n\t\t\t\t\tvar modelChangingEvent = {\n\t\t\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\t\t\ttext: model.getText(projection.start, projection.end),\n\t\t\t\t\t\tstart: eventStart,\n\t\t\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\t\t\taddedLineCount: addedLineCount\n\t\t\t\t\t};\n\t\t\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\t\t}\n\t\t\t\tthis._projections.splice(i, 1);\n\t\t\t\tif (!noEvents) {\n\t\t\t\t\tvar modelChangedEvent = {\n\t\t\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\t\t\tstart: eventStart,\n\t\t\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\t\t\taddedLineCount: addedLineCount\n\t\t\t\t\t};\n\t\t\t\t\tthis.onChanged(modelChangedEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\t_binarySearch: function (array, offset) {\n\t\t\tvar high = array.length, low = -1, index;\n\t\t\twhile (high - low > 1) {\n\t\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\t\tif (offset <= array[index].start) {\n\t\t\t\t\thigh = index;\n\t\t\t\t} else {\n\t\t\t\t\tlow = index;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn high;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getCharCount\n\t\t */\n\t\tgetCharCount: function() {\n\t\t\tvar count = this._model.getCharCount(), projections = this._projections;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tcount += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLine\n\t\t */\n\t\tgetLine: function(lineIndex, includeDelimiter) {\n\t\t\tif (lineIndex < 0) { return null; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, result = [], offset = 0, i, lineCount, projection;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection._lineIndex >= lineIndex - delta) { break; }\n\t\t\t\tlineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount >= lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\tif (projectionLineIndex < lineCount) {\n\t\t\t\t\t\treturn projection._model.getLine(projectionLineIndex, includeDelimiter);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(projection._model.getLine(lineCount));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\toffset = projection.end;\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\toffset = Math.max(offset, model.getLineStart(lineIndex - delta));\n\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection._lineIndex > lineIndex - delta) { break; }\n\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\tlineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount > lineIndex - delta) {\n\t\t\t\t\tresult.push(projection._model.getLine(0, includeDelimiter));\n\t\t\t\t\treturn result.join(\"\");\n\t\t\t\t}\n\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\toffset = projection.end;\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\tvar end = model.getLineEnd(lineIndex - delta, includeDelimiter);\n\t\t\tif (offset < end) {\n\t\t\t\tresult.push(model.getText(offset, end));\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineAtOffset\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, lineDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\tvar projectionOffset = offset - (projection.start + delta);\n\t\t\t\t\tlineDelta += projection._model.getLineAtOffset(projectionOffset);\n\t\t\t\t\tdelta += projectionOffset;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlineDelta += projection._model.getLineCount() - 1 - projection._lineCount;\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn model.getLineAtOffset(offset - delta) + lineDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineCount\n\t\t */\n\t\tgetLineCount: function() {\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar count = model.getLineCount();\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tcount += projection._model.getLineCount() - 1 - projection._lineCount;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineDelimiter\n\t\t */\n\t\tgetLineDelimiter: function() {\n\t\t\treturn this._model.getLineDelimiter();\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineEnd\n\t\t */\n\t\tgetLineEnd: function(lineIndex, includeDelimiter) {\n\t\t\tif (lineIndex < 0) { return -1; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, offsetDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection._lineIndex > lineIndex - delta) { break; }\n\t\t\t\tvar lineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount > lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\treturn projection._model.getLineEnd (projectionLineIndex, includeDelimiter) + projection.start + offsetDelta;\n\t\t\t\t}\n\t\t\t\toffsetDelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\treturn model.getLineEnd(lineIndex - delta, includeDelimiter) + offsetDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineStart\n\t\t */\n\t\tgetLineStart: function(lineIndex) {\n\t\t\tif (lineIndex < 0) { return -1; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, offsetDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection._lineIndex >= lineIndex - delta) { break; }\n\t\t\t\tvar lineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount >= lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\treturn projection._model.getLineStart (projectionLineIndex) + projection.start + offsetDelta;\n\t\t\t\t}\n\t\t\t\toffsetDelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\treturn model.getLineStart(lineIndex - delta) + offsetDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, result = [], i, projection, charCount;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start > start - delta) { break; }\n\t\t\t\tcharCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > start - delta) {\n\t\t\t\t\tif (end !== undefined && projection.start + charCount > end - delta) {\n\t\t\t\t\t\treturn projection._model.getText(start - (projection.start + delta), end - (projection.start + delta));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(projection._model.getText(start - (projection.start + delta)));\n\t\t\t\t\t\tstart = projection.end + delta + charCount - (projection.end - projection.start);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\tvar offset = start - delta;\n\t\t\tif (end !== undefined) {\n\t\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > end - delta) { break; }\n\t\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\t\tcharCount = projection._model.getCharCount();\n\t\t\t\t\tif (projection.start + charCount > end - delta) {\n\t\t\t\t\t\tresult.push(projection._model.getText(0, end - (projection.start + delta)));\n\t\t\t\t\t\treturn result.join(\"\");\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\t\toffset = projection.end;\n\t\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\tresult.push(model.getText(offset, end - delta));\n\t\t\t} else {\n\t\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\t\toffset = projection.end;\n\t\t\t\t}\n\t\t\t\tresult.push(model.getText(offset));\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t},\n\t\t/** @ignore */\n\t\t_onChanged: function(modelChangedEvent) {\n\t\t\tvar change = this._change;\n\t\t\tvar start = change.baseStart, end = change.baseEnd, i;\n\t\t\tvar projection, projections = this._projections;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.end > start) { break; }\n\t\t\t}\n\t\t\tvar rangeStart = i;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start >= end) { break; }\n\t\t\t}\n\t\t\tvar rangeEnd = i;\n\t\t\tvar model = this._model;\n\t\t\tvar changeCount = change.baseText.length - (end - start);\n\t\t\tfor (i = rangeEnd; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tprojection.start += changeCount;\n\t\t\t\tprojection.end += changeCount;\n\t\t\t\tprojection._lineIndex = model.getLineAtOffset(projection.start);\n\t\t\t}\n\t\t\tvar removed = projections.splice(rangeStart, rangeEnd - rangeStart);\n\t\t\tfor (i = 0; i < removed.length; i++) {\n\t\t\t\tif (removed[i].annotation) {\n\t\t\t\t\tremoved[i].annotation._expand();\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar modelChangedEvent1 = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: change.start,\n\t\t\t\tremovedCharCount: change.removedCharCount,\n\t\t\t\taddedCharCount: change.addedCharCount,\n\t\t\t\tremovedLineCount: change.removedLineCount,\n\t\t\t\taddedLineCount: change.addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent1);\n\t\t\tthis._change = undefined;\n\t\t},\n\t\t_onChanging: function(modelChangingEvent) {\n\t\t\tvar hasChange = !!this._change;\n\t\t\tvar change = this._change || {};\n\t\t\tvar start = modelChangingEvent.start, end = start + modelChangingEvent.removedCharCount;\n\t\t\tchange.baseStart = start;\n\t\t\tchange.baseEnd = end;\n\t\t\tchange.baseText = modelChangingEvent.text;\n\t\t\tchange.addedLineCount = modelChangingEvent.addedLineCount;\n\t\t\tif (!hasChange) {\n\t\t\t\tthis._change = change;\n\t\t\t\tchange.text = modelChangingEvent.text;\n\t\t\t\tvar projections = this._projections, delta, i, projection;\n\t\t\t\tfunction mapOffset(offset) {\n\t\t\t\t\tfor (i = 0, delta = 0; i < projections.length; i++) {\n\t\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\t\tif (projection.start > offset) { break; }\n\t\t\t\t\t\tif (projection.end > offset) { return -1; }\n\t\t\t\t\t\tdelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\t\t}\n\t\t\t\t\treturn offset + delta;\n\t\t\t\t}\n\t\t\t\tchange.start = mapOffset(start);\n\t\t\t\tif (change.start === -1) {\n\t\t\t\t\tchange.text = this._model.getText(projection.start, start) + change.text;\n\t\t\t\t\tchange.addedLineCount += this._model.getLineAtOffset(start) - this._model.getLineAtOffset(projection.start);\n\t\t\t\t\tchange.start = projection.start + delta;\n\t\t\t\t}\n\t\t\t\tchange.end = mapOffset(end);\n\t\t\t\tif (change.end === -1) {\n\t\t\t\t\tchange.text += this._model.getText(end, projection.end);\n\t\t\t\t\tchange.addedLineCount += this._model.getLineAtOffset(projection.end) - this._model.getLineAtOffset(end);\n\t\t\t\t\tchange.end = projection.start + delta;\n\t\t\t\t}\n\t\t\t}\n\t\t\tchange.addedCharCount = change.text.length;\n\t\t\tchange.removedCharCount = change.end - change.start;\n\t\t\tchange.removedLineCount = this.getLineAtOffset(change.end) - this.getLineAtOffset(change.start);\n\t\t\tvar modelChangingEvent1 = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: change.text,\n\t\t\t\tstart: change.start,\n\t\t\t\tremovedCharCount: change.removedCharCount,\n\t\t\t\taddedCharCount: change.addedCharCount,\n\t\t\t\tremovedLineCount: change.removedLineCount,\n\t\t\t\taddedLineCount: change.addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent1);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#onChanging\n\t\t */\n\t\tonChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#onChanged\n\t\t */\n\t\tonChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#setLineDelimiter\n\t\t */\n\t\tsetLineDelimiter: function(lineDelimiter) {\n\t\t\tthis._model.setLineDelimiter(lineDelimiter);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#setText\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tthis._change = {\n\t\t\t\ttext: text || \"\",\n\t\t\t\tstart: start || 0,\n\t\t\t\tend: end === undefined ? this.getCharCount() : end\n\t\t\t};\n\t\t\tvar projections = this._projections, delta, i, projection;\n\t\t\tfunction mapOffset(offset) {\n\t\t\t\tfor (i = 0, delta = 0; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\treturn offset - delta;\n\t\t\t}\n\t\t\tvar startProjection, endProjection;\n\t\t\tvar mapStart = mapOffset(this._change.start);\n\t\t\tif (mapStart === -1) {\n\t\t\t\tstartProjection = {\n\t\t\t\t\tprojection: projection,\n\t\t\t\t\tstart: this._change.start - (projection.start + delta)\n\t\t\t\t};\n\t\t\t\tmapStart = projection.end;\n\t\t\t}\n\t\t\tvar mapEnd = mapOffset(this._change.end);\n\t\t\tif (mapEnd === -1) {\n\t\t\t\tendProjection = {\n\t\t\t\t\tprojection: projection,\n\t\t\t\t\tend: this._change.end - (projection.start + delta)\n\t\t\t\t};\n\t\t\t\tmapEnd = projection.start;\n\t\t\t}\n\t\t\tif (startProjection && endProjection && startProjection.projection === endProjection.projection) {\n\t\t\t\t//TODO events - special case - change is completely inside of a projection\n\t\t\t\tprojection._model.setText(this._change.text, startProjection.start, endProjection.end);\n\t\t\t} else {\n\t\t\t\tthis._model.setText(this._change.text, mapStart, mapEnd);\n\t\t\t\tif (startProjection) {\n\t\t\t\t\tprojection = startProjection.projection;\n\t\t\t\t\tprojection._model.setText(\"\", startProjection.start);\n\t\t\t\t}\t\t\n\t\t\t\tif (endProjection) {\n\t\t\t\t\tprojection = endProjection.projection;\n\t\t\t\t\tprojection._model.setText(\"\", 0, endProjection.end);\n\t\t\t\t\tprojection.start = projection.end;\n\t\t\t\t\tprojection._lineCount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._change = undefined;\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(ProjectionTextModel.prototype);\n\n\treturn {ProjectionTextModel: ProjectionTextModel};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd, node*/\n(function(root, factory) { // UMD\n    if (typeof define === \"function\" && define.amd) { //$NON-NLS-0$\n        define('orion/Deferred',factory);\n    } else if (typeof exports === \"object\") { //$NON-NLS-0$\n        module.exports = factory();\n    } else {\n        root.orion = root.orion || {};\n        root.orion.Deferred = factory();\n    }\n}(this, function() {\n    var queue = [],\n        running = false;\n\n    function run() {\n        var fn;\n        while ((fn = queue.shift())) {\n            fn();\n        }\n        running = false;\n    }\n\n\tvar runAsync = (function() {\n\t\tif (typeof process !== \"undefined\" && typeof process.nextTick === \"function\") {\n\t\t\tvar nextTick = process.nextTick;\n    \t\treturn function() {\n    \t\t\tnextTick(run);\n    \t\t};\n\t\t} else if (typeof MutationObserver === \"function\") {\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tvar observer = new MutationObserver(run);\n\t\t\tobserver.observe(div, {\n            \tattributes: true\n        \t});\n        \treturn function() {\n        \t\tdiv.setAttribute(\"class\", \"_tick\");\n        \t};\n\t\t}\n\t\treturn function() {\n\t\t\tsetTimeout(run, 0);\n\t\t};\n\t})();\n\n    function enqueue(fn) {\n        queue.push(fn);\n        if (!running) {\n            running = true;\n            runAsync();\n        }\n    }\n\n    function noReturn(fn) {\n        return function(result) {\n            fn(result);\n        };\n    }\n    \n    function settleDeferred(fn, result, deferred) {\n    \ttry {\n    \t\tvar listenerResult = fn(result);\n    \t\tvar listenerThen = listenerResult && (typeof listenerResult === \"object\" || typeof listenerResult === \"function\") && listenerResult.then;\n    \t\tif (typeof listenerThen === \"function\") {\n    \t\t\tif (listenerResult === deferred.promise) {\n    \t\t\t\tdeferred.reject(new TypeError());\n    \t\t\t} else {\n    \t\t\t\tvar listenerResultCancel = listenerResult.cancel;\n    \t\t\t\tif (typeof listenerResultCancel === \"function\") {\n    \t\t\t\t\tdeferred._parentCancel = listenerResultCancel.bind(listenerResult);\n    \t\t\t\t} else {\n    \t\t\t\t\tdelete deferred._parentCancel;\n    \t\t\t\t}\n    \t\t\t\tlistenerThen.call(listenerResult, noReturn(deferred.resolve), noReturn(deferred.reject), noReturn(deferred.progress));\n    \t\t\t}\n    \t\t} else {\n    \t\t\tdeferred.resolve(listenerResult);\n    \t\t}\n    \t} catch (e) {\n    \t\tdeferred.reject(e);\n    \t}\n    }\n\n\n    /**\n     * @name orion.Promise\n     * @class Interface representing an eventual value.\n     * @description Promise is an interface that represents an eventual value returned from the single completion of an operation.\n     *\n     * <p>For a concrete class that implements Promise and provides additional API, see {@link orion.Deferred}.</p>\n     * @see orion.Deferred\n     * @see orion.Deferred#promise\n     */\n    /**\n     * @name then\n     * @function\n     * @memberOf orion.Promise.prototype\n     * @description Adds handlers to be called on fulfillment or progress of this promise.\n     * @param {Function} [onResolve] Called when this promise is resolved.\n     * @param {Function} [onReject] Called when this promise is rejected.\n     * @param {Function} [onProgress] May be called to report progress events on this promise.\n     * @returns {orion.Promise} A new promise that is fulfilled when the given <code>onResolve</code> or <code>onReject</code>\n     * callback is finished. The callback's return value gives the fulfillment value of the returned promise.\n     */\n    /**\n     * Cancels this promise.\n     * @name cancel\n     * @function\n     * @memberOf orion.Promise.prototype\n     * @param {Object} reason The reason for canceling this promise.\n     * @param {Boolean} [strict]\n     */\n\n    /**\n     * @name orion.Deferred\n     * @borrows orion.Promise#then as #then\n     * @borrows orion.Promise#cancel as #cancel\n     * @class Provides abstraction over asynchronous operations.\n     * @description Deferred provides abstraction over asynchronous operations.\n     *\n     * <p>Because Deferred implements the {@link orion.Promise} interface, a Deferred may be used anywhere a Promise is called for.\n     * However, in most such cases it is recommended to use the Deferred's {@link #promise} field instead, which exposes a \n     * simplified, minimally <a href=\"https://github.com/promises-aplus/promises-spec\">Promises/A+</a>-compliant interface to callers.</p>\n     */\n    function Deferred() {\n        var result, state, listeners = [],\n            _this = this;\n\n        function notify() {\n            var listener;\n            while ((listener = listeners.shift())) {\n                var deferred = listener.deferred;\n                var methodName = state === \"fulfilled\" ? \"resolve\" : \"reject\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n                var fn = listener[methodName];\n                if (typeof fn === \"function\") { //$NON-NLS-0$\n                \tsettleDeferred(fn, result, deferred);\n                } else {\n                    deferred[methodName](result);\n                }\n            }\n        }\n\n        function _reject(error) {\n            delete _this._parentCancel;\n            state = \"rejected\";\n            result = error;\n            if (listeners.length) {\n                enqueue(notify);\n            }\n        }\n\n        function _resolve(value) {\n            function once(fn) {\n                return function(result) {\n                    if (!state || state === \"assumed\") {\n                          fn(result);\n                    }\n                };\n            }\n            delete _this._parentCancel;\n            try {\n                var valueThen = value && (typeof value === \"object\" || typeof value === \"function\") && value.then;\n                if (typeof valueThen === \"function\") {\n                    if (value === _this) {\n                        _reject(new TypeError());\n                    } else {\n                        state = \"assumed\";\n                        var valueCancel = value && value.cancel;\n                        if (typeof valueCancel !== \"function\") {\n                            var deferred = new Deferred();\n                            value = deferred.promise;\n                            try {\n                                valueThen(deferred.resolve, deferred.reject, deferred.progress);\n                            } catch (thenError) {\n                                deferred.reject(thenError);\n                            }\n                            valueCancel = value.cancel;\n                            valueThen = value.then;\n                        }\n                        result = value;\n                        valueThen.call(value, once(_resolve), once(_reject));\n                        _this._parentCancel = valueCancel.bind(value);\n                    }\n                } else {\n                    state = \"fulfilled\";\n                    result = value;\n                    if (listeners.length) {\n                        enqueue(notify);\n                    }\n                }\n            } catch (error) {\n                once(_reject)(error);\n            }\n        }\n\n        function cancel() {\n            var parentCancel = _this._parentCancel;\n            if (parentCancel) {\n                delete _this._parentCancel;\n                parentCancel();\n            } else if (!state) {\n                var cancelError = new Error(\"Cancel\");\n                cancelError.name = \"Cancel\";\n                _reject(cancelError);\n            }\n        }\n\n\n        /**\n         * Resolves this Deferred.\n         * @name resolve\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} value\n         * @returns {orion.Promise}\n         */\n        this.resolve = function(value) {\n            if (!state) {\n                _resolve(value);\n            }\n            return _this;\n        };\n\n        /**\n         * Rejects this Deferred.\n         * @name reject\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} error\n         * @param {Boolean} [strict]\n         * @returns {orion.Promise}\n         */\n        this.reject = function(error) {\n            if (!state) {\n                _reject(error);\n            }\n            return _this;\n        };\n\n        /**\n         * Notifies listeners of progress on this Deferred.\n         * @name progress\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} update The progress update.\n         * @returns {orion.Promise}\n         */\n        this.progress = function(update) {\n            if (!state) {\n                listeners.forEach(function(listener) {\n                    if (listener.progress) {\n                        try {\n                            listener.progress(update);\n                        } catch (ignore) {\n                            // ignore\n                        }\n                    }\n                });\n            }\n            return _this.promise;\n        };\n\n        this.cancel = function() {\n            if (_this._parentCancel) {\n                setTimeout(cancel, 0);\n            } else {\n                cancel();\n            }\n            return _this;\n        };\n\n        // Note: \"then\" ALWAYS returns before having onResolve or onReject called as per http://promises-aplus.github.com/promises-spec/\n        this.then = function(onFulfill, onReject, onProgress) {\n        \tvar deferred = new Deferred();\n            deferred._parentCancel = _this.promise.cancel;\n            listeners.push({\n                resolve: onFulfill,\n                reject: onReject,\n                progress: onProgress,\n                deferred: deferred\n            });\n            if (state === \"fulfilled\" || state === \"rejected\") {\n                enqueue(notify);\n            }\n            return deferred.promise;\n        };\n\n        /**\n         * The promise exposed by this Deferred.\n         * @name promise\n         * @field\n         * @memberOf orion.Deferred.prototype\n         * @type orion.Promise\n         */\n        this.promise = {\n            then: _this.then,\n            cancel: _this.cancel\n        };\n    }\n\n    /**\n     * Returns a promise that represents the outcome of all the input promises.\n     * <p>When <code>all</code> is called with a single parameter, the returned promise has <dfn>eager</dfn> semantics,\n     * meaning that if any input promise rejects, the returned promise immediately rejects, without waiting for the rest of the\n     * input promises to fulfill.</p>\n     *\n     * To obtain <dfn>lazy</dfn> semantics (meaning the returned promise waits for every input promise to fulfill), pass the\n     * optional parameter <code>optOnError</code>.\n     * @name all\n     * @function\n     * @memberOf orion.Deferred\n     * @static\n     * @param {orion.Promise[]} promises The input promises.\n     * @param {Function} [optOnError] Handles a rejected input promise. <code>optOnError</code> is invoked for every rejected\n     * input promise, and is passed the reason the input promise was rejected. <p><code>optOnError</code> can return a value, which\n     * allows it to act as a transformer: the return value serves as the final fulfillment value of the rejected promise in the \n     * results array generated by <code>all</code>.\n     * @returns {orion.Promise} A new promise. The returned promise is generally fulfilled to an <code>Array</code> whose elements\n     * give the fulfillment values of the input promises. <p>However, if an input promise rejects and eager semantics is used, the \n     * returned promise will instead be fulfilled to a single error value.</p>\n     */\n    Deferred.all = function(promises, optOnError) {\n        var count = promises.length,\n            result = [],\n            rejected = false,\n            deferred = new Deferred();\n\n        deferred.then(undefined, function() {\n            rejected = true;\n            promises.forEach(function(promise) {\n                if (promise.cancel) {\n                    promise.cancel();\n                }\n            });\n        });\n\n        function onResolve(i, value) {\n            if (!rejected) {\n                result[i] = value;\n                if (--count === 0) {\n                    deferred.resolve(result);\n                }\n            }\n        }\n\n        function onReject(i, error) {\n            if (!rejected) {\n                if (optOnError) {\n                    try {\n                        onResolve(i, optOnError(error));\n                        return;\n                    } catch (e) {\n                        error = e;\n                    }\n                }\n                deferred.reject(error);\n            }\n        }\n\n        if (count === 0) {\n            deferred.resolve(result);\n        } else {\n            promises.forEach(function(promise, i) {\n                promise.then(onResolve.bind(undefined, i), onReject.bind(undefined, i));\n            });\n        }\n        return deferred.promise;\n    };\n\n    /**\n     * Applies callbacks to a promise or to a regular object.\n     * @name when\n     * @function\n     * @memberOf orion.Deferred\n     * @static\n     * @param {Object|orion.Promise} value Either a {@link orion.Promise}, or a normal value.\n     * @param {Function} onResolve Called when the <code>value</code> promise is resolved. If <code>value</code> is not a promise,\n     * this function is called immediately.\n     * @param {Function} onReject Called when the <code>value</code> promise is rejected. If <code>value</code> is not a promise, \n     * this function is never called.\n     * @param {Function} onProgress Called when the <code>value</code> promise provides a progress update. If <code>value</code> is\n     * not a promise, this function is never called.\n     * @returns {orion.Promise} A new promise.\n     */\n    Deferred.when = function(value, onResolve, onReject, onProgress) {\n        var promise, deferred;\n        if (value && typeof value.then === \"function\") { //$NON-NLS-0$\n            promise = value;\n        } else {\n            deferred = new Deferred();\n            deferred.resolve(value);\n            promise = deferred.promise;\n        }\n        return promise.then(onResolve, onReject, onProgress);\n    };\n\n    return Deferred;\n}));\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2012 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n * \r\n * Contributors: IBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine('orion/webui/littlelib',[\"orion/util\"], function(util) {\r\n\t/**\r\n\t * @name orion.webui.littlelib\r\n\t * @class A small library of DOM and UI helpers.\r\n\t */\r\n\r\n\t/**\r\n\t * Holds useful <code>keyCode</code> values.\r\n\t * @name orion.webui.littlelib.KEY\r\n\t * @static\r\n\t */\r\n\tvar KEY = {\r\n\t\tBKSPC: 8,\r\n\t\tTAB: 9,\r\n\t\tENTER: 13,\r\n\t\tSHIFT: 16,\r\n\t\tCONTROL: 17,\r\n\t\tALT: 18,\r\n\t\tESCAPE: 27,\r\n\t\tSPACE: 32,\r\n\t\tPAGEUP: 33,\r\n\t\tPAGEDOWN: 34,\r\n\t\tEND: 35,\r\n\t\tHOME: 36,\r\n\t\tLEFT: 37,\r\n\t\tUP: 38,\r\n\t\tRIGHT: 39,\r\n\t\tDOWN: 40,\r\n\t\tINSERT: 45,\r\n\t\tDEL: 46,\r\n\t\tCOMMAND: 91\r\n\t};\r\n\r\n\t/**\r\n\t * Alias for <code>node.querySelector()</code>.\r\n\t * @name orion.webui.littlelib.$\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction $(selector, node) {\r\n\t\tif (!node) {\r\n\t\t\tnode = document;\r\n\t\t}\r\n\t\treturn node.querySelector(selector);\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for <code>node.querySelectorAll()</code>.\r\n\t * @name orion.webui.littlelib.$$\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {NodeList}\r\n\t */\r\n\tfunction $$(selector, node) {\r\n\t\tif (!node) {\r\n\t\t\tnode = document;\r\n\t\t}\r\n\t\treturn node.querySelectorAll(selector);\r\n\t}\r\n\r\n\t/**\r\n\t * Identical to {@link orion.webui.littlelib.$$}, but returns an Array instead of a NodeList.\r\n\t * @name orion.webui.littlelib.$$array\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {Element[]}\r\n\t */\r\n\tfunction $$array(selector, node) {\r\n\t\treturn Array.prototype.slice.call($$(selector,node));\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for <code>document.getElementById</code>, but returns the input unmodified when passed a Node (or other non-string).\r\n\t * @function\r\n\t * @param {String|Element} elementOrId\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction node(either) {\r\n\t\tvar theNode = either;\r\n\t\tif (typeof(either) === \"string\") { //$NON-NLS-0$\r\n\t\t\ttheNode = document.getElementById(either);\r\n\t\t}\t\r\n\t\treturn theNode;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns whether <code>child</code> is a descendant of <code>parent</code> in the DOM order.\r\n\t * @function\r\n\t * @param {Node} parent\r\n\t * @param {Node} child\r\n\t * @returns {Boolean}\r\n\t */\r\n\tfunction contains(parent, child) {\r\n\t\tif (!parent || !child) { return false; }\r\n\t\tif (parent === child) { return true; }\r\n\t\tvar compare = parent.compareDocumentPosition(child);  // useful to break out for debugging\r\n\t\treturn Boolean(compare & 16);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the bounds of a node. The returned coordinates are absolute (not relative to the viewport).\r\n\t * @function\r\n\t * @param {Node} node\r\n\t * @returns {Object}\r\n\t */\r\n\tfunction bounds(node) {\r\n\t\tvar clientRect = node.getBoundingClientRect();\r\n\t\tvar scrollLeft = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n\t\tvar scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\t\treturn { \r\n\t\t\tleft: clientRect.left + scrollLeft,\r\n\t\t\ttop: clientRect.top + scrollTop,\r\n\t\t\twidth: clientRect.width,\r\n\t\t\theight: clientRect.height\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all children of the given node.\r\n\t * @name orion.webui.littlelib.empty\r\n\t * @function\r\n\t * @static\r\n\t * @param {Node} node\r\n\t */\r\n\tfunction empty(node) {\r\n\t\twhile (node.hasChildNodes()) {\r\n\t\t\tvar child = node.firstChild;\r\n\t\t\tnode.removeChild(child);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getTabIndex(node) {\r\n\t\tvar result = node.tabIndex;\r\n\t\tif (result === 0 && util.isIE) {\r\n\t\t\t/*\r\n\t\t\t * The default value of tabIndex is 0 on IE, even for elements that are not focusable\r\n\t\t\t * by default (http://msdn.microsoft.com/en-us/library/ie/ms534654(v=vs.85).aspx).\r\n\t\t\t * Handle this browser difference by treating this value as -1 if the node is a type\r\n\t\t\t * that is not focusable by default according to the MS doc and has not had this\r\n\t\t\t * attribute value explicitly set on it.\r\n\t\t\t */\r\n\t\t\tvar focusableElements = {\r\n\t\t\t\ta: true,\r\n\t\t\t\tbody: true,\r\n\t\t\t\tbutton: true,\r\n\t\t\t\tframe: true,\r\n\t\t\t\tiframe: true,\r\n\t\t\t\timg: true,\r\n\t\t\t\tinput: true,\r\n\t\t\t\tisindex: true,\r\n\t\t\t\tobject: true,\r\n\t\t\t\tselect: true,\r\n\t\t\t\ttextarea: true\r\n\t\t\t};\r\n\t\t\tif (!focusableElements[node.nodeName.toLowerCase()] && !node.attributes.tabIndex) {\r\n\t\t\t\tresult = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\t/* \r\n\t * Inspired by http://brianwhitmer.blogspot.com/2009/05/jquery-ui-tabbable-what.html\r\n\t */\r\n\tfunction firstTabbable(node) {\r\n\t\tif (_getTabIndex(node) >= 0 && !node.disabled && node.offsetParent) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tvar result = firstTabbable(node.childNodes[i]);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction lastTabbable(node) {\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i = node.childNodes.length-1; i >= 0; i--) {\r\n\t\t\t\tvar result = lastTabbable(node.childNodes[i]);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_getTabIndex(node) >= 0 && !node.disabled && node.offsetParent) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/*\r\n\t * Special hook to show the context menu on Shift + F10 (macs only)\r\n\t */\r\n\tfunction installShowContextMenu() {\r\n\t\tif (util.isMac) {\r\n\t\t\tdocument.addEventListener(\"keydown\", function (evt) {\r\n\t\t\t\tif (evt.keyCode === 121 && evt.shiftKey) {\r\n\t\t\t\t\tvar rect, xPos, yPos;\r\n\t\t\t\t\tvar focusElement = document.activeElement;\r\n\t\r\n\t\t\t\t\tif (focusElement.contentEditable === \"true\") {\r\n\t\t\t\t\t\tvar selection = window.getSelection();\r\n\t\t\t\t\t\tvar range = selection.getRangeAt(0); //get the text range\r\n\t\t\t\t\t\trect = range.getBoundingClientRect();\r\n\t\t\t\t\t\txPos = rect.left;\r\n\t\t\t\t\t\tyPos = rect.top + rect.height;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trect = bounds(focusElement);\r\n\t\t\t\t\t\txPos = rect.left + (rect.width/2);\r\n\t\t\t\t\t\tyPos = rect.top + (rect.height/2);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar e = focusElement.ownerDocument.createEvent(\"MouseEvents\");\r\n\t\t\t\t\te.initMouseEvent(\"contextmenu\", true, true,\r\n\t\t\t\t\t    focusElement.ownerDocument.defaultView, 1, 0, 0, xPos, yPos, false,\r\n\t\t\t\t\t    false, false, false,2, null);\r\n\t\t\t\t\treturn !focusElement.dispatchEvent(e);\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t}\r\n\t}\r\n\tinstallShowContextMenu();\r\n\t\r\n\t/* Trap the tabs within the given parent */\r\n\tfunction trapTabs(parentElement) {\r\n\t\tif (parentElement.tabTrapInstalled)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tparentElement.addEventListener(\"keydown\", function (e) { //$NON-NLS-0$\r\n\t\t\tif(e.keyCode === KEY.TAB) {\r\n\t\t\t\tvar first = firstTabbable(parentElement);\r\n\t\t\t\tvar last = lastTabbable(parentElement);\r\n\t\t\t\t\r\n\t\t\t\tif (first && last) {\r\n\t\t\t\t\tif (e.target === last && !e.shiftKey) {\r\n\t\t\t\t\t\t// wrap to first tabbable\r\n\t\t\t\t\t\tfirst.focus();\r\n\t\t\t\t\t\tstop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (e.target === first && e.shiftKey) {\r\n\t\t\t\t\t\t// wrap to last tabbable\r\n\t\t\t\t\t\tlast.focus();\r\n\t\t\t\t\t\tstop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t}, true);\r\n\t\tparentElement.tabTrapInstalled = true;\r\n\t}\r\n\t\r\n\tvar variableRegEx = /\\$\\{([^\\}]+)\\}/;\r\n\t// Internal helper\r\n\tfunction processNodes(node, replace) {\r\n\t\tif (node.nodeType === 3) { // TEXT_NODE\r\n\t\t\tvar matches = variableRegEx.exec(node.nodeValue);\r\n\t\t\tif (matches && matches.length > 1) {\r\n\t\t\t\treplace(node, matches);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tprocessNodes(node.childNodes[i], replace);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\n\t * @name pixelValueOf\n\t * @description Returns the pixel value of the given CSS attribute\n\t * @param node The element whose style is to be checked\n\t * @param attrName The name of the attribute to check. Use the literal CSS name\r\n\t * (i.e. 'padding-left' rather than 'paddingLeft').\n\t * @returns returns The value (in pixels) of the attribute. If the value cannot be parsed to an int the zero is returned\n\t */\n\tfunction pixelValueOf(node, attrName) {\r\n\t\tif (!node || !attrName) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\tvar doc = node.ownerDocument;\r\n\t\tvar win =  doc.defaultView || doc.parentWindow;\r\n\t\tif (win.getComputedStyle) {\r\n\t\t\tvar style = win.getComputedStyle(node, null);\r\n\t\t\tvar value = style.getPropertyValue(attrName);\r\n\t\t\t// Ensure that value ends in \"px\"\r\n\t\t\tif (value.length > 2 && value.indexOf(\"px\", value.length - 2) !== -1) {\r\n\t\t\t\tvalue = value.slice(0,-2);\r\n\t\t\t\tvar intVal = parseInt(value,10);\r\n\t\t\t\tif (intVal !== intVal) {\r\n\t\t\t\t\treturn 0;  // value was NaN\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn intVal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Performs substitution of strings into textContent within the given node and its descendants. An occurrence of <code>${n}</code>\r\n\t * in text content will be replaced with the string <code>messages[n]</code>.\r\n\t * <p>This function is recommended for binding placeholder text in template-created DOM elements to actual display strings.</p>\r\n\t * @name orion.webui.littlelib.processTextNodes\r\n\t * @function\r\n\t * @param {Node} node The node to perform replacement under.\r\n\t * @param {String[]} messages The replacement strings.\r\n\t */\r\n\tfunction processTextNodes(node, messages) {\r\n\t\tprocessNodes(node, function(targetNode, matches) {\r\n\t\t\tvar replaceText = messages[matches[1]] || matches[1];\r\n\t\t\ttargetNode.parentNode.replaceChild(document.createTextNode(replaceText), targetNode);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Performs substitution of DOM nodes into textContent within the given node and its descendants. An occurrence of <code>${n}</code>\r\n\t * in text content will be replaced by the DOM node <code>replaceNodes[n]</code>.\r\n\t * <p>This function is recommended for performing rich-text replacement within a localized string. The use of actual DOM nodes\r\n\t * avoids the need for embedded HTML in strings.</p>\r\n\t * @name orion.webui.littlelib.processDOMNodes\r\n\t * @function\r\n\t * @param {Node} node The node to perform replacement under.\r\n\t * @param {Node[]} replaceNodes The replacement nodes.\r\n\t */\r\n\tfunction processDOMNodes(node, replaceNodes) {\r\n\t\tprocessNodes(node, function(targetNode, matches) {\r\n\t\t\tvar replaceNode = replaceNodes[matches[1]];\r\n\t\t\tif (replaceNode) {\r\n\t\t\t\tvar range = document.createRange();\r\n\t\t\t\tvar start = matches.index;\r\n\t\t\t\trange.setStart(targetNode, start);\r\n\t\t\t\trange.setEnd(targetNode, start + matches[0].length);\r\n\t\t\t\trange.deleteContents();\r\n\t\t\t\trange.insertNode(replaceNode);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds auto-dismiss functionality to the document. When a click event occurs whose <code>target</code> is not a descendant of\r\n\t * one of the <code>excludeNodes</code>, the <code>dismissFunction</code> is invoked.\r\n\t * @name orion.webui.littlelib.addAutoDismiss\r\n\t * @function\r\n\t * @static\r\n\t * @param {Node[]} excludeNodes Clicks targeting any descendant of these nodes will not trigger the dismissFunction.\r\n\t * @param {Function} dismissFunction The dismiss handler.\r\n\t */\r\n\t\r\n\tvar autoDismissNodes = null;\r\n\r\n\tfunction addAutoDismiss(excludeNodes, dismissFunction) {\r\n\t\t// auto dismissal.  Click anywhere else means close.\r\n\t\tfunction onclick(event) {\r\n\t\t\tautoDismissNodes.forEach(function(autoDismissNode) {\r\n\t\t\t\tvar excludeNodeInDocument = false;\r\n\t\t\t\tvar excluded = autoDismissNode.excludeNodes.some(function(excludeNode) {\r\n\t\t\t\t\tif(document.body.contains(excludeNode)) {\r\n\t\t\t\t\t\texcludeNodeInDocument = true;\r\n\t\t\t\t\t\treturn excludeNode.contains(event.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\tif (excludeNodeInDocument && !excluded) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tautoDismissNode.dismiss(event);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tif (typeof console !== \"undefined\" && console) { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tconsole.error(e && e.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tautoDismissNodes = autoDismissNodes.filter(function(autoDismissNode) {\r\n\t\t\t\t// true if at least one excludeNode is in document.body\r\n\t\t\t\treturn autoDismissNode.excludeNodes.some(function(excludeNode) {\r\n\t\t\t\t\treturn document.body.contains(excludeNode);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Hook listener only once\r\n\t\tif (autoDismissNodes === null) {\r\n\t\t\tautoDismissNodes = [];\r\n\t\t\tdocument.addEventListener(\"click\", onclick, true); //$NON-NLS-0$\r\n\t\t\tif (util.isIOS) {\r\n\t\t\t\tdocument.addEventListener(\"touchend\", function(event){\r\n\t\t\t\t\tfunction unhook(){\r\n\t\t\t\t\t\tevent.target.removeEventListener(\"click\", unhook);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (event.touches.length === 0) {\r\n\t\t\t\t\t\t// we need a click eventlistener on the target to have ios really trigger a click\r\n\t\t\t\t\t\tevent.target.addEventListener(\"click\", unhook);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tautoDismissNodes.push({excludeNodes: excludeNodes, dismiss: dismissFunction});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes all auto-dismiss nodes which trigger the specified dismiss function.\r\n\t * \r\n\t * @name orion.webui.littlelib.removeAutoDismiss\r\n\t * @function\r\n\t * @static\r\n\t * @param {Function} dismissFunction The dismiss function to look for.\r\n\t */\r\n\tfunction removeAutoDismiss(dismissFunction) {\r\n\t\tautoDismissNodes = autoDismissNodes.filter(function(autoDismissNode) {\r\n\t\t\treturn dismissFunction !== autoDismissNode.dismiss;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the parent of the node that has the vertical scroll bar.\r\n\t * \r\n\t * @name orion.webui.littlelib.getOffsetParent\r\n\t * @function\r\n\t * @static\r\n\t * @param {Element} node The node to lookup the offset parent\r\n\t */\r\n\tfunction getOffsetParent(node) {\r\n\t\tvar offsetParent = node.parentNode, documentElement = document.documentElement;\r\n\t\twhile (offsetParent && offsetParent !== documentElement) {\r\n\t\t\tvar style = window.getComputedStyle(offsetParent, null);\r\n\t\t\tif (!style) { break; }\r\n\t\t\tvar overflow = style.getPropertyValue(\"overflow-y\"); //$NON-NLS-0$\r\n\t\t\tif (overflow === \"auto\" || overflow === \"scroll\") { break; } //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\toffsetParent = offsetParent.parentNode;\r\n\t\t}\r\n\t\treturn offsetParent;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cancels the default behavior of an event and stops its propagation.\r\n\t * @name orion.webui.littlelib.stop\r\n\t * @function\r\n\t * @static\r\n\t * @param {Event} event\r\n\t */\r\n\tfunction stop(event) {\r\n\t\tif (window.document.all) { \r\n\t\t\tevent.keyCode = 0;\r\n\t\t}\r\n\t\tif (event.preventDefault) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction setFramesEnabled(enable) {\r\n\t\tvar frames = document.getElementsByTagName(\"iframe\"); //$NON-NLS-0$\r\n\t\tfor (var i = 0; i<frames.length; i++) {\r\n\t\t\tframes[i].parentNode.style.pointerEvents = enable ? \"\" : \"none\"; //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Maps a <code>keyCode</code> to <tt>KEY</tt> name. This is the inverse of {@link orion.webui.littlelib.KEY}.\r\n\t * @private\r\n\t */\r\n\tvar KEY_CODE = Object.create(null);\r\n\tObject.keys(KEY).forEach(function(name) {\r\n\t\tKEY_CODE[KEY[name]] = name;\r\n\t});\r\n\r\n\t/**\r\n\t * @param {Number} keyCode\r\n\t * @returns The name of the <code>lib.KEY</code> entry for keyCode, or null.\r\n\t */\r\n\tfunction keyName(keyCode) {\r\n\t\treturn KEY_CODE[keyCode] || null;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates DOM nodes from the specified template string.\r\n\t * \r\n\t * @param {String} templateString \tA string containing the HTML template to use\r\n\t * @param {Node} parentNode \t\tOptional. The parent node to insert the new nodes into. \r\n\t * \t\t\t\t\t\t\t\t\tThe parent's contents will be completely replaced.\r\n\t * @returns If the template string contains a single node or a wrapper node which\r\n\t * \t\t\twraps all the other nodes that single DOM node will be returned. \r\n\t * \t\t\tOtherwise if the template string contains multiple top-level nodes an\r\n\t * \t\t\t{HTMLCollection} object containing all the top-level nodes will be returned.\r\n\t */\r\n\tfunction createNodes(templateString, parentNode) {\r\n\t\tvar parent = parentNode;\r\n\t\tvar newNodes = null;\r\n\t\t\r\n\t\tif (undefined === parent) {\r\n\t\t\tparent = document.createElement(\"div\"); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\tparent.innerHTML = templateString;\t\r\n\t\tif (parent.children.length > 1) {\r\n\t\t\tnewNodes = parent.children;\r\n\t\t} else {\r\n\t\t\tnewNodes = parent.firstChild;\r\n\t\t}\r\n\t\t\r\n\t\treturn newNodes;\r\n\t}\r\n\r\n\t//return module exports\r\n\treturn {\r\n\t\t$: $,\r\n\t\t$$: $$,\r\n\t\t$$array: $$array,\r\n\t\tnode: node,\r\n\t\tcontains: contains,\r\n\t\tbounds: bounds,\r\n\t\tempty: empty,\r\n\t\tfirstTabbable: firstTabbable,\r\n\t\tlastTabbable: lastTabbable,\r\n\t\ttrapTabs: trapTabs,\r\n\t\tpixelValueOf: pixelValueOf,\r\n\t\tstop: stop,\r\n\t\tprocessTextNodes: processTextNodes,\r\n\t\tprocessDOMNodes: processDOMNodes,\r\n\t\taddAutoDismiss: addAutoDismiss,\r\n\t\tsetFramesEnabled: setFramesEnabled,\r\n\t\tgetOffsetParent: getOffsetParent,\r\n\t\tremoveAutoDismiss: removeAutoDismiss,\r\n\t\tkeyName: keyName,\r\n\t\tKEY: KEY,\r\n\t\tcreateNodes: createNodes\r\n\t};\r\n});\r\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd, node*/\ndefine(\"orion/editor/tooltip\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textView',\n\t'orion/editor/projectionTextModel',\n\t'orion/Deferred',\n\t'orion/editor/util',\n\t'orion/webui/littlelib',\n\t'orion/util'\n], function(messages, mTextView, mProjectionTextModel, Deferred, textUtil, lib, util) {\n\n/**\n * @name Tooltip\n * @description Tooltip support for text views\n * \n * show() - Opens the tooltip\n * update() - Updates the content of the open tooltip\n * onHover() - Checks if the x,y coordinates are outside the current tooltip area and updates the tooltip if necessary\n * hide() - Closes the tooltip\n * isVisible() - Returns whether the tooltip is currently showing\n * \n * The methods above ask for a tooltipInfo object, which must contain a callback function getTooltipInfo()\n * This function must return an info object with the following contents:\n * \n * Info {\n * \tContents {string, html element, annotation array, etc.} Contents to display, if undefined, the hover service will be asked for content\n * \tContext {source, offset, offsetStart, offsetEnd}} Information used to modify the tooltip position or contents\n * \tPosition {String} One of left, right, top, bottom used to position the tooltip relative to the anchor area\n * \tAnchorArea {top, left, width, height} rectangle defining the source of the tooltip and where to position relative to\n * \tTooltipArea {top, left, width, height} rectangle to define the tooltip's exact placement rather than a relative position to the anchor\n * \tTooltipOffsetX {Number} Hint to move the tooltip position horizontally\n * \tTooltipOffsetY {Number} Hint to move the tooltip position vertically\n * \n * @param view\n */\nfunction Tooltip (view, editor) {\n\t\tthis._view = view;\n\t\tthis._editor = editor;\n\t\tvar parent = view.getOptions(\"parent\"); //$NON-NLS-0$\n\t\tthis._create(parent ? parent.ownerDocument : document);\n\t}\n\t/**\n\t * Creates a new tooltip for the given text view.\n\t * @param view {TextView} the text view the tooltip belongs to\n\t * @param editor {Editor} the editor the tooltip belongs to, optional, allows quick fixes in tooltip to run on all annotations in the editor\n\t */\n\tTooltip.getTooltip = function(view, editor) {\n\t\tif (!view._tooltip) {\n\t\t\t view._tooltip = new Tooltip(view, editor);\n\t\t}\n\t\treturn view._tooltip;\n\t};\n\tTooltip.prototype = /** @lends orion.editor.Tooltip.prototype */ {\n\t\t_create: function(document) {\n\t\t\tif (this._tooltipDiv) { return; }\n\t\t\tvar tooltipDiv = this._tooltipDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\ttooltipDiv.tabIndex = 0;\n\t\t\ttooltipDiv.className = \"textviewTooltip\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.setAttribute(\"aria-live\", \"assertive\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\ttooltipDiv.setAttribute(\"aria-atomic\", \"true\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._tooltipDiv.style.visibility = \"hidden\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = false;\n\t\t\tdocument.body.appendChild(tooltipDiv);\n\t\t\t\n\t\t\tlib.trapTabs(this._tooltipDiv);\n\t\t\t\n\t\t\tvar self = this;\n\t\t\ttextUtil.addEventListener(document, \"mousedown\", this._mouseDownHandler = function(event) {\n\t\t\t\tif (!self.isVisible()) { return; }\n\t\t\t\tif (textUtil.contains(tooltipDiv, event.target || event.srcElement)) { return; }\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself.hide();\n\t\t\t\t}\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(document, \"scroll\", this._scrollHandler = function(event) {\n\t\t\t\tif (!self.isVisible()){\n\t\t\t\t\treturn;\t\n\t\t\t\t} \n\n\t\t\t\t// Make sure the scroll isn't *inside* the tooltip...\n\t\t\t\tif (textUtil.contains(tooltipDiv, event.target || event.srcElement)) { return; }\n\n\t\t\t\tif (self._topPixel !== self._view.getTopPixel() || self._leftPixel !== self._view.getHorizontalPixel()) {\n\t\t\t\t\tself.hide();\n\t\t\t\t}\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(document, \"mousemove\", this._mouseMoveHandler = function(event) {\n\t\t\t\t// Ignore spurious mousemove events\n\t\t\t\tif (self._prevX && self._prevX === event.clientX && self._prevY && self._prevY === event.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself._prevX = event.clientX;\n\t\t\t\tself._prevY = event.clientY;\n\t\t\t\t\n\t\t\t\tif (!self.isVisible() || self._locked || self._hasFocus()) { return; }\n\t\t\t\tif (self._isInRect(self._outerArea, event.clientX, event.clientY)){ return; }\n\t\t\t\tself.hide();\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"focus\", /* @callback */ function(event) {\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself._tooltipDiv.classList.add('textViewTooltipOnFocus'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"blur\", /* @callback */ function(event) {\n\t\t\t\tself._tooltipDiv.classList.remove('textViewTooltipOnFocus'); //$NON-NLS-0$\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"mouseenter\", /* @callback */ function(event) {\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself._tooltipDiv.classList.add('textViewTooltipOnHover'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"mouseleave\", /* @callback */ function(event) {\n\t\t\t\tif (!self._hasFocus()){\n\t\t\t\t\tself._tooltipDiv.classList.remove('textViewTooltipOnHover'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"keydown\", function(event) {\n\t\t\t\tif (event.keyCode === 27) {\n\t\t\t\t\tif (!self._locked){\n\t\t\t\t\t\tself.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\tthis._view.addEventListener(\"Destroy\", function() {\n\t\t\t\tself.destroy();\n\t\t\t});\n\t\t},\n\t\tdestroy: function() {\n\t\t\tif (!this._tooltipDiv) { return; }\n\t\t\tthis.hide();\n\t\t\tvar parent = this._tooltipDiv.parentNode;\n\t\t\tif (parent) { parent.removeChild(this._tooltipDiv); }\n\t\t\tvar doc = this._tooltipDiv.ownerDocument;\n\t\t\ttextUtil.removeEventListener(doc, \"mousedown\", this._mouseDownHandler, true);\n\t\t\ttextUtil.removeEventListener(doc, \"scroll\", this._scrollHandler, true);\n\t\t\ttextUtil.removeEventListener(doc, \"mousemove\", this._mouseMoveHandler, true);\n\t\t\tthis._tooltipDiv = null;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name show\n\t\t * @description Show the tooltip using the given target information\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the tooltip contents (see _processInfo())\n\t\t * @param target The target through which the info is obtained\n\t\t * @param locked If true locks the tooltip (never hides unless 'hide' is called)\n\t\t * @param giveFocus If true forces the focus onto the tooltip (used for F2 processing)\n\t\t */\n\t\tshow: function(tooltipInfo, locked, giveFocus) {\n\t\t\tthis._locked = locked;\n\t\t\tthis._giveFocus = giveFocus;\n\t\t\tthis._topPixel = this._view.getTopPixel();\n\t\t\tthis._leftPixel = this._view.getHorizontalPixel();\n\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo());\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name update\n\t\t * @description Updates the information in an already visible tooltip\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the parameters need to update the information (see _processInfo())\n\t\t * @param noContent If true makes no attempt to gather new info and just updates the tooltip's position\n\t\t */\n\t\tupdate: function(tooltipInfo, noContent) {\n\t\t\tif (!tooltipInfo){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (noContent) {\n\t\t\t\tthis._showContents(null, tooltipInfo.getTooltipInfo(), true);\n\t\t\t} else {\n\t\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo(), true);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name onHover\n\t\t * @description Checks the x,y location and updates the tooltip contents or hides the tooltip as appropriate\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the parameters need to update the information (see _processInfo())\n\t\t * @param x coordinates of the mouse event\n\t\t * @param y coordinates of the mouse event\n\t\t */\n\t\tonHover: function(tooltipInfo, x, y) {\n\t\t\tif (!tooltipInfo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Don't process if we're in the anchor or tooltip\n\t\t\tif (this._isInRect(this._anchorArea, x, y)\n\t\t\t\t\t|| this._isInRect(this._tooltipArea, x, y)\n\t\t\t\t\t|| this._locked\n\t\t\t\t\t|| this._hasFocus()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo());\n\t\t},\t\t\n\t\n\t\t/**\n\t\t * @name hide\n\t\t * @description Hides the current tooltip (if it's showing)\n\t\t * @function\n\t\t * @public\n\t\t*/\n\t\thide: function(clearLock) {\n\t\t\tif (clearLock) {\n\t\t\t\tthis._locked = undefined;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._locked || !this.isVisible()){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\t\n\t\t\tif (this.hover) {\n\t\t\t\tthis.hover.clearQuickFixes();\n\t\t\t}\n\n\t\t\tif (this._hasFocus()) {\n\t\t\t\tthis._view.focus();\n\t\t\t}\n\t\t\tif (this._tooltipContents) {\n\t\t\t\tthis._tooltipDiv.removeChild(this._tooltipContents);\n\t\t\t\tthis._tooltipContents = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Code projections are displayed using the editor theme colors\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipCodeProjection\"); //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipOnHover\"); //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipOnFocus\"); //$NON-NLS-0$\n\t\t\t\n\t\t\tthis._tooltipDiv.style.visibility = \"hidden\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = false;\n\t\t\tthis._tooltipDiv.style.left = \"\";\n\t\t\tthis._tooltipDiv.style.right = \"\";\n\t\t\tthis._tooltipDiv.style.top = \"\";\n\t\t\tthis._tooltipDiv.style.bottom = \"\";\n\t\t\tthis._tooltipDiv.style.width = \"auto\";\t\t //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.style.maxWidth = \"\";\n\t\t\tthis._tooltipDiv.style.height = \"auto\";\t\t //$NON-NLS-0$\t\n\t\t\tthis._tooltipDiv.style.maxHeight = \"\";\n\t\t\tthis._tooltipDiv.style.overflowX = \"\";\n\t\t\tthis._tooltipDiv.style.overflowY = \"\";\n\t\t\t\n\t\t\tthis._anchorArea = undefined;  // Area of text/ruler/etc. we are showing a tooltip for\n\t\t\tthis._tooltipArea = undefined;  // The area the tooltip covers\n\t\t\tthis._outerArea = undefined; // The rectangle encapsulating both anchor and tooltip areas where we want to keep the tooltip open\n\t\t\t\n\t\t\t// cancel any outstanding defers\n\t\t\tif (this._hoverPromises) {\n\t\t\t\tthis._hoverPromises.forEach(function(info) {\n\t\t\t\t\tif (!info.resolved) {\n\t\t\t\t\t\tinfo.cancel();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._hoverPromises = undefined;\n\t\t\t\n\t\t\t// values that are calculated\n\t\t\tthis._tipRect = undefined;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name isVisible\n\t\t * @description Returns a boolean indicating whether the tooltip is currently visible\n\t\t * @function\n\t\t * @public\n\t\t * @returns {boolean} 'true' iff the tooltip is currently visible\n\t\t*/\n\t\tisVisible: function() {\n\t\t\treturn this._tipShowing;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _processInfo\n\t\t * @description Renders the content, positions the tooltip then makes the tooltip visible\n\t\t * @function\n\t\t * @private\n\t\t * @param info {Object} The info object passed by the caller\n\t\t * \n\t\t * Info:\n\t\t * 1) Contents\n\t\t * 2) Context\n\t\t * 3) Position string left, right, top, bottom\n\t\t * 4) AnchorArea x, y, width, height\n\t\t * 5) TooltipArea x, y, width, height\n\t\t * 6) TooltipOffsetX\n\t\t * 7) TooltipOffsetY\n\t\t * 8) AllowFullWidth\n\t\t * \n\t\t * @param update Whether to update the existing tooltip contents or open a new tooltip\n\t\t */\n\t\t_processInfo: function(info, update) {\n\t\t\tif (!this._tooltipDiv){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar newTooltipContents;\n\t\t\tif (update && this._tooltipContents) {\n\t\t\t\tthis._tooltipContents.innerHTML = \"\";\n\t\t\t\tnewTooltipContents = this._tooltipContents;\n\t\t\t} else {\n \t\t\t\tnewTooltipContents = util.createElement(this._tooltipDiv.ownerDocument, \"div\"); //$NON-NLS-0$\n \t\t\t}\n \t\t\t\n\t\t\tif (info) {\n\t\t\t\t// Render provided content\n\t\t\t\tif (info.contents) {\n\t\t\t\t\tif (this._renderImmediateInfo(newTooltipContents, info.contents, info.context)) {\n\t\t\t\t\t\tthis._showContents(newTooltipContents, info, update);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If no immediate content, check if hover service plug-ins have content\n\t\t\t\tif (this.hover && info.context){\n\t\t\t\t\tthis._hoverPromises = this.hover.computeHoverInfo(info.context);\n\t\t\t\t\tif (this._hoverPromises) {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tvar promises = this._hoverPromises.slice(0);\n\t\t\t\t\t\tpromises.forEach(function(hoverPromise) {\n\t\t\t\t\t\t\tDeferred.when(hoverPromise, function (data) {\n\t\t\t\t\t\t\t\t// Remove this promise from the list so we don't try cancelling it while processing (see hide())\n\t\t\t\t\t\t\t\tif (self._hoverPromises){\n\t\t\t\t\t\t\t\t\tvar index = self._hoverPromises.indexOf(hoverPromise);\n\t\t\t\t\t\t\t\t\tif (index >= 0){\n\t\t\t\t\t\t\t\t\t\tself._hoverPromises.splice(index, 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\t\tif (self._renderPluginContent(newTooltipContents, data)) {\n\t\t\t\t\t\t\t\t\t\tif (data.offsetStart){\n\t\t\t\t\t\t\t\t\t\t\tinfo.context.offsetStart = data.offsetStart;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.offsetEnd){\n\t\t\t\t\t\t\t\t\t\t\tinfo.context.offsetEnd = data.offsetEnd;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.allowFullWidth){\n\t\t\t\t\t\t\t\t\t\t\tinfo.allowFullWidth = data.allowFullWidth;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tself._showContents(newTooltipContents, info, update);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\t\t\tif (console && error && error.name !== 'Cancel') {\n\t\t\t\t\t\t\t\t\tconsole.log(\"Error computing hover tooltip\"); //$NON-NLS-0$\n\t\t\t\t\t\t\t\t\tconsole.log(error && error.stack);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @name _showContents\n\t\t * @description Takes the rendered contents, positions the tooltip, opens the tooltip\n\t\t * @function\n\t\t * @private\n\t\t * @param newContentsDiv\n\t\t * @param info\n\t\t * @param update\n\t\t */\n\t\t_showContents: function _showContents(newContentsDiv, info, update) {\n\t\t\tif (!update){\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\t// If update is called but the set tooltip area is different, recreate the tooltip with the new sizing (ex: content assist resizing)\n\t\t\t\t// We could also check if the set anchor area is different, but no one would be using it\n\t\t\t\tif (this._tooltipArea && info.tooltipArea){\n\t\t\t\t\tif (this._tooltipArea.left !== info.tooltipArea.left || this._tooltipArea.top !== info.tooltipArea.top || this._tooltipArea.width !== info.tooltipArea.width || this._tooltipArea.height !== info.tooltipArea.height){\n\t\t\t\t\t\tthis._anchorArea = null;\n\t\t\t\t\t\tthis._tooltipArea = null;\n\t\t\t\t\t\tthis._outerArea = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (newContentsDiv) {\n\t\t\t\tif (this._tooltipContents) {\n\t\t\t\t\tthis._tooltipDiv.removeChild(this._tooltipContents);\n\t\t\t\t}\n\t\t\t\tthis._tooltipContents = newContentsDiv;\n\t\t\t\tthis._tooltipDiv.appendChild(newContentsDiv);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif (!this._anchorArea){\n\t\t\t\tthis._anchorArea = this._computeAnchorArea(info);\n\t\t\t}\n\t\t\tif (!this._tooltipArea){\n\t\t\t\t// This function performs two tasks, computing the rectangle and setting all the style properties\n\t\t\t\tthis._tooltipArea = this._computeTooltipArea(info, this._anchorArea, this._tooltipDiv);\n\t\t\t}\n\t\t\tif (!this._outerArea){\n\t\t\t\tthis._outerArea = this._computeOuterArea(this._anchorArea, this._tooltipArea);\n\t\t\t}\n\t\t\t\n\t\t\tthis._tooltipDiv.style.visibility = \"visible\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = true;\n\t\t\t\n\t\t\tif (this._giveFocus) {\n\t\t\t\tthis._setInitialFocus(this._tooltipDiv);\n\t\t\t\tthis._giveFocus = undefined;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _computeAnchorArea\n\t\t * @description Computes and returns the rectangle that the tooltip is anchored to.  For example the anchor for an annotation \n\t\t * \t\t\t\tmay be its text range.\n\t\t * @function\n\t\t * @private\n\t\t * @param info {Object} the info object passed by the caller.\n\t\t * @returns returns the computed rectangle anchor area\n\t\t */\n\t\t_computeAnchorArea: function _computeAnchorArea(info){\n\t\t\tif (info.anchorArea){\n\t\t\t\tif (info.anchorArea.top && info.anchorArea.left && info.anchorArea.height && info.anchorArea.width){\n\t\t\t\t\treturn info.anchorArea;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (info.context){\n\t\t\t\tif (info.context.offsetStart && info.context.offsetEnd){\n\t\t\t\t\t// The full text content of the editor is given to the plug-in hover service, so we must adjust the offsets\n\t\t\t\t\t// for the projection model as folded comments will change the offsets/coordinates in the displayed editor\n\t\t\t\t\tvar mappedStart = this.mapOffset(info.context.offsetStart, false);\n\t\t\t\t\tvar mappedEnd = this.mapOffset(info.context.offsetEnd, false);\n\t\t\t\t\treturn this._computeRectangleFromOffset(mappedStart, mappedEnd);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (info.context.offset >= 0){\n\t\t\t\t\t// The provided offset is based on the full text content, not the projection model\n\t\t\t\t\t// Adjust the offset before finding the closest enclosing word\n\t\t\t\t\tvar mappedOffset = this.mapOffset(info.context.offset, false);\n\t\t\t\t\tvar end = this._view.getNextOffset(mappedOffset, { unit: \"wordend\", count: 0}); //$NON-NLS-0$\n\t\t\t\t\tvar start = this._view.getNextOffset(end, { unit: \"word\", count: -1}); //$NON-NLS-0$\n\t\t\t\t\treturn this._computeRectangleFromOffset(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {top: 0, left: 0, height: 0, width: 0};\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _computeTooltipPosition\n\t\t * @description Defines the tooltip area and placement.  Returns the rectangle defining the tooltip area and sets the tooltipDiv\n\t\t * \t\t\t\tstyle to match the rectangles values.\n\t\t * @param info the tooltip info object passed by the caller\n\t\t * @param anchorArea the computed tooltip anchor area to which the tooltip will be positioned\n\t\t * @param tooltipDiv the div for the tooltip, this function will modify its style to match the computed position/size\n\t\t * @returns returns the computed tooltip area rectangle\n\t\t * @function\n\t\t * @private\n\t\t */\n\t\t_computeTooltipArea: function _computeTooltipArea(info, anchorArea, tooltipDiv){\n\t\t\tvar documentElement = tooltipDiv.ownerDocument.documentElement;\n\t\t\t\n\t\t\t// TODO This padding must match what is in tooltip.css\n\t\t\tvar padding = 16;\n\t\t\t\n\t\t\t// Callers can specify the exact placement of the tooltip\n\t\t\tif (info.tooltipArea && info.tooltipArea.top && info.tooltipArea.left && info.tooltipArea.height && info.tooltipArea.width){\t\t\t\t\t\t\t\t\t\t \n\t\t\t\ttooltipDiv.style.overflowY = \"auto\"; //$NON-NLS-0$ // If caller specifies a height, allow scrolling\n\t\t\t\ttooltipDiv.style.resize = \"none\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.top = (info.tooltipArea.top) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.left = (info.tooltipArea.left) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.height = (info.tooltipArea.height - padding) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.width = (info.tooltipArea.width - padding) + \"px\"; //$NON-NLS-0$\n\t\t\t\treturn info.tooltipArea;\n\t\t\t}\n\t\t\t\n\t\t\tvar divBounds = tooltipDiv.getBoundingClientRect();\n\t\t\tvar tipRect = {\n\t\t\t\twidth: divBounds.width,\n\t\t\t\theight: divBounds.height\n\t\t\t};\n\t\t\t\n\t\t\t// If there is an unloaded image its width will not be included in the calculated size, add some buffer space so tooltip doesn't wrap (See bug 478357)\n\t\t\tvar image = tooltipDiv.getElementsByTagName('img')[0]; //$NON-NLS-1$\n\t\t\tif (image && !image.complete && image.width === 0){\n\t\t\t\ttipRect.width += 30;\n\t\t\t}\n\t\t\t\n\t\t\tvar position = info.position ? info.position : \"below\"; //$NON-NLS-0$\n\t\t\t\n\t\t\tvar viewBounds = (this._view._rootDiv ? this._view._rootDiv : documentElement).getBoundingClientRect();\n\t\t\tvar viewportLeft = viewBounds.left;\n\t\t\tvar viewportTop = viewBounds.top;\n\t\t\tvar viewportWidth = viewBounds.width;\n\t\t\tvar viewportHeight = viewBounds.height;\n\t\t\t\n\t\t\t// Set a default size for the tooltip\n\t\t\tvar defWidth = viewportWidth;\n\t\t\tvar defHeight = viewportHeight;\n\t\t\tif (!info.allowFullWidth){\n\t\t\t\tdefWidth = Math.min(viewportWidth/2, 600);\n\t\t\t\tdefHeight = Math.min(viewportHeight/2, 400);\n\t\t\t\ttipRect.width = Math.min(tipRect.width, defWidth);\n\t\t\t\ttipRect.height = Math.min(tipRect.height, defHeight);\n\t\t\t} else if (tipRect.width > viewportWidth){\n\t\t\t\ttipRect.width = viewportWidth;\n\t\t\t}\n\t\t\t\n\t\t\t// Now that we have our width recalculate the desired height...\n\t\t\ttooltipDiv.style.width = (tipRect.width - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttipRect.height = Math.min(tooltipDiv.clientHeight, defHeight);\n\t\t\t\n\t\t\t// If there will be Y overflow, increase width to fit the scrollbar\n\t\t\tif (tooltipDiv.clientHeight > defHeight){\n\t\t\t\tvar contentWidth = this._tooltipContents.offsetWidth;\n\t\t\t\ttooltipDiv.style.overflowY = \"scroll\";\n\t\t\t\tvar scrollWidth = contentWidth - this._tooltipContents.offsetWidth;\n\t\t\t\tif (scrollWidth > 0){\n\t\t\t\t\ttipRect.width += scrollWidth;\n\t\t\t\t\tif (tipRect.width > viewportWidth){\n\t\t\t\t\t\ttipRect.width = viewportWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttooltipDiv.style.overflowY = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Hack for single line tooltips that wrap, set a minimum height to make them show 2 lines without scrolling\n\t\t\t// The largest line height was MacOS Chrome with 20px+padding.  So 25 is the minimum height we are sure we are one two lines\n\t\t\t// Similarly, the minimum height for the tooltip is two lines (20px x 2 + padding) (this will actually show three lines on Win7 Chrome)\n\t\t\tif ((25+padding) > tipRect.height && tipRect.width > (defWidth-padding)){\n\t\t\t\ttipRect.height = 40+padding;\n\t\t\t}\n\n\t\t\tvar spaceBelow = viewportHeight - (anchorArea.top + anchorArea.height - viewportTop);\n\t\t\tvar spaceAbove = anchorArea.top - viewportTop;\n\t\t\tvar spaceRight = viewportWidth - (anchorArea.left + anchorArea.width - viewportLeft);\n\t\t\t\n\t\t\t// If there is not enough space above or below, swap the position.  Can't do the same for right/left because rulers are at client bounds\n\t\t\tif (position === \"above\" && tipRect.height > spaceAbove && tipRect.height <= spaceBelow){\n\t\t\t\tposition = \"below\"; //$NON-NLS-0$\n\t\t\t} else if (position === \"below\" && tipRect.height > spaceBelow && tipRect.height <= spaceAbove){\n\t\t\t\tposition = \"above\"; //$NON-NLS-0$\n\t\t\t}\n\t\t\t\n\t\t\tvar offsetX = info.tooltipOffsetX ? info.tooltipOffsetX : 0;\n\t\t\tvar offsetY = info.tooltipOffsetY ? info.tooltipOffsetY : 0;\n\t\t\t\n\t\t\t// Attempt to line up tooltip with the anchor area\n\t\t\t// If not enough space, shift the tooltip horiz (above/below) or vert (left/right) until it fits\n\t\t\t// Force the tooltip to start within the viewport area\n\t\t\t// Set maximum sizes for remaining area in the viewport area\n\t\t\tswitch (position){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tif ((tipRect.height + offsetY) > (spaceBelow + anchorArea.height)){\n\t\t\t\t\t\t// Shift the top of the tooltip upwards to fit, ignore the offset value\n\t\t\t\t\t\ttipRect.top = viewportHeight + viewportTop - tipRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.top = anchorArea.top + offsetY;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.top = Math.max(tipRect.top, viewportTop);\n\t\t\t\t\ttipRect.left = Math.max(anchorArea.left - tipRect.width + offsetX, viewportLeft);\n\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tif ((tipRect.height + offsetY) > (spaceBelow + anchorArea.height)){\n\t\t\t\t\t\t// Shift the top of the tooltip upwards to fit, ignore the offset value\n\t\t\t\t\t\ttipRect.top = viewportHeight + viewportTop - tipRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.top = anchorArea.top + offsetY;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.top = Math.max(tipRect.top, viewportTop);\n\t\t\t\t\ttipRect.left = Math.max(anchorArea.left + anchorArea.width + offsetX, viewportLeft);\n\t\t\t\tbreak;\n\t\t\t\tcase \"above\":\n\t\t\t\t\tif ((tipRect.width + offsetX) > (spaceRight + anchorArea.width)){\n\t\t\t\t\t\t// Shift the left side of the tooltip to the left, ignore the offset value\n\t\t\t\t\t\ttipRect.left = viewportWidth + viewportLeft - tipRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.left = anchorArea.left + offsetX;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.left = Math.max(tipRect.left, viewportLeft);\n\t\t\t\t\ttipRect.top = Math.max(anchorArea.top - tipRect.height + offsetY, viewportTop);\n\t\t\t\tbreak;\n\t\t\t\tcase \"below\":\n\t\t\t\t\tif ((tipRect.width + offsetX) > (spaceRight + anchorArea.width)){\n\t\t\t\t\t\t// Shift the left side of the tooltip to the left, ignore the offset value\n\t\t\t\t\t\ttipRect.left = viewportWidth + viewportLeft - tipRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.left = anchorArea.left + offsetX;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.left = Math.max(tipRect.left, viewportLeft);\n\t\t\t\t\ttipRect.top = Math.max(anchorArea.top + anchorArea.height + offsetY, viewportTop);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\ttipRect.maxWidth = Math.min(viewportWidth + viewportLeft - tipRect.left, viewportWidth);\n\t\t\ttipRect.maxHeight = Math.min(viewportHeight + viewportTop - tipRect.top, viewportHeight);\n\t\t\t\n\t\t\t// Adjust sizes for div padding, but not the actual tooltip box.\n\t\t\ttooltipDiv.style.maxWidth = (tipRect.maxWidth - padding) + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.maxHeight = (tipRect.maxHeight - padding) + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.width = (tipRect.width - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttooltipDiv.style.height = (tipRect.height - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttooltipDiv.style.left = tipRect.left + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.top = tipRect.top + \"px\"; //$NON-NLS-0$\n\t\t\treturn tipRect;\n\t\t},\n\t\t\n\t\t_computeOuterArea: function _computeOuterArea(anchorArea, tooltipArea){\n\t\t\tvar left = Math.min(anchorArea.left, tooltipArea.left);\n\t\t\tvar top = Math.min(anchorArea.top, tooltipArea.top);\n\t\t\tvar positionRight = anchorArea.left + anchorArea.width;\n\t\t\tvar tipRight = tooltipArea.left + tooltipArea.width;\n\t\t\tvar right = Math.max(positionRight, tipRight);\n\t\t\tvar positionBottom = anchorArea.top + anchorArea.height;\n\t\t\tvar tipBottom = tooltipArea.top + tooltipArea.height;\n\t\t\tvar bottom = Math.max(positionBottom, tipBottom);\n\t\t\t\t\n\t\t\treturn {\n\t\t\t\t\tleft: left,\n\t\t\t\t\ttop : top,\n\t\t\t\t\twidth: right - left,\n\t\t\t\t\theight: bottom - top\n\t\t\t\t};\n\t\t},\n\t\t\n\t\t/*\n\t\t ******************************************************************************************************************* \n\t\t * Utility: This section contains various utility methods\n\t\t ******************************************************************************************************************* \n\t\t */\n\t\t_hasFocus: function() {\n\t\t\tvar tooltipDiv = this._tooltipDiv;\n\t\t\tif (!tooltipDiv) { return false; }\n\t\t\treturn textUtil.contains(tooltipDiv, tooltipDiv.ownerDocument.activeElement);\n\t\t},\n\t\t_isNode: function (obj) {\n\t\t\treturn typeof Node === \"object\" ? obj instanceof Node :\n\t\t\t\tobj && typeof obj === \"object\" && typeof obj.nodeType === \"number\" && typeof obj.nodeName === \"string\";\n\t\t},\n\t\t_setInitialFocus: function(tooltipDiv) {\n\t\t\t// Any buttons ?\n\t\t\tvar button = lib.$(\"button\", tooltipDiv); //$NON-NLS-0$\n\t\t\tif (button) {\n\t\t\t\tbutton.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Any links ?\n\t\t\tvar link = lib.$(\"a\", tooltipDiv); //$NON-NLS-0$\n\t\t\tif (link) {\n\t\t\t\tlink.focus();\n\t\t\t\tvar self = this;\n\t\t\t\tlink.addEventListener(\"click\", function() {\n\t\t\t\t\tself.hide();\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Give up and focus on the first tabbable\n\t\t\tvar toFocus = lib.firstTabbable(tooltipDiv);\n\t\t\tif (toFocus) {\n\t\t\t\ttoFocus.focus();\n\t\t\t}\n\t\t},\n\t\t_isInRect: function(rect, x, y) {\n\t\t\tif (!rect){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar xOK = x >= rect.left && x <= (rect.left + rect.width);\n\t\t\tvar yOK = y >= rect.top && y <= (rect.top + rect.height);\n\t\t\treturn xOK && yOK;\n\t\t},\n\t\tmapOffset: function(offset) {\n\t\t\tvar textView = this._view;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset, true);\n\t\t\t}\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * Note that the offsets passed here must already be mapped to the base model being displayed (i.e. reduced by collapsed comments)\n\t\t */\n\t\t_computeRectangleFromOffset: function(start, end) {\n\t\t\tvar tv = this._view;\n\t\t\tvar curLine = tv.getLineAtOffset(start);\n\t\t\tvar endLine = tv.getLineAtOffset(end);\n\t\t\t\n\t\t\tvar height, viewRect;\n\t\t\t\n\t\t\tif (curLine !== endLine) {\n\t\t\t\tvar y = tv.getLocationAtOffset(start).y;\n\t\t\t\theight = 0;\n\t\t\t\tvar maxX = 0;\n\t\t\t\twhile (curLine <= endLine){\n\t\t\t\t\theight += tv.getLineHeight(curLine);\n\t\t\t\t\tvar lineEnd = tv.getModel().getLineEnd(curLine);\n\t\t\t\t\tvar possibleEnd = tv.getLocationAtOffset(lineEnd).x;\n\t\t\t\t\tif (possibleEnd > end){\n\t\t\t\t\t\tmaxX = possibleEnd;\n\t\t\t\t\t}\n\t\t\t\t\tcurLine++;\n\t\t\t\t}\n\t\t\t\tvar lineStart = tv.getModel().getLineStart(endLine);\n\t\t\t\tvar x = tv.getLocationAtOffset(lineStart).x;\n\t\t\t\t\n\t\t\t\tviewRect = { x: x, y: y, width: maxX - x, height: height};\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tvar startPos = tv.getLocationAtOffset(start);\n\t\t\t\tvar endPos = tv.getLocationAtOffset(end);\n\t\t\t\theight = tv.getLineHeight(curLine);\n\t\t\t\tviewRect = { x: startPos.x, y: startPos.y, \n\t\t\t\t\t\t\twidth: endPos.x - startPos.x, height: height};\n\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\tviewRect = this._view.convert(viewRect, \"document\", \"page\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {left: viewRect.x, top: viewRect.y, width: viewRect.width, height: viewRect.height};\n\t\t},\n\t\t/*\n\t\t ******************************************************************************************************************* \n\t\t * Rendering: This section deals with rendering supplied data into HTML for inclusion into the Info Popup.\n\t\t ******************************************************************************************************************* \n\t\t */\n\t\t_renderPluginContent: function(contentsDiv, data) {\n\t\t\tvar document = this._tooltipDiv.ownerDocument;\n\t\t\t// data object should be an object containing the type and content.  If no type or unknown type, default to string.\n\t\t\tif (typeof data !== 'string' && typeof data.content === 'undefined') {\n\t\t\t    return false;\n\t\t\t}\n\t\t\t\n\t\t\tvar sectionDiv = util.createElement(document, \"div\"); //$NON-NLS-0$;\n\t\t\t// render the title, if any\n\t\t\tif (data.title) {\n\t\t\t\tvar titleDiv = util.createElement(document, \"div\"); //$NON-NLS-0$;\n\t\t\t\tif (this.hover.renderMarkDown) {\n\t\t\t\t\ttitleDiv.innerHTML = this.hover.renderMarkDown(data.title);\n\t\t\t\t} else {\n\t\t\t\t\ttitleDiv.textContent = data.title;\n\t\t\t\t}\n\t\t\t\ttitleDiv.classList.add(\"hoverTooltipTitle\"); //$NON-NLS-0$\n\t\t\t\tsectionDiv.appendChild(titleDiv);\n\t\t\t}\n\t\t\tvar contentDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\n\t\t\tif (typeof data === 'string'){\n\t\t\t\tcontentDiv.appendChild(document.createTextNode(data));\n\t\t\t} else {\n\t\t\t\tswitch(data.type) {\n\t\t\t\t\tcase 'delegatedUI': {\n\t\t\t\t\t\t// The delegated UI is not included in the 8.0 release, see Bug 449240.\n\t\t\t\t\t}\n\t\t\t\t\tcase 'html': {\n\t\t\t\t\t\tif (data.content){\n\t\t\t\t\t\t\tvar iframe = document.createElement(\"iframe\");\n\t\t\t\t\t\t\tiframe.id = 'HtmlHover'; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.name = 'HTML Hover'; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.type = \"text/html\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.sandbox = \"allow-scripts allow-same-origin allow-forms\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.border = \"none\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.width = \"100%\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.height = \"100%\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.overflow = \"auto\";  //$NON-NLS-1$\n\t\t\t\t\t\t\t// TODO The iframe computed height is always 3px smaller than the tooltip, giving the impression of inconsistent padding\n\t\t\t\t\t\t\tthis._tooltipDiv.style.paddingBottom = \"5px\";  //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.srcdoc = data.content;\n\t\t\t\t\t\t\tif (data.width) {\n\t\t\t\t\t\t\t\tiframe.style.width = data.width;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.height) {\n\t\t\t\t\t\t\t\tiframe.style.height = data.height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsectionDiv.style.height = '100%';  //$NON-NLS-0$ // Height should grow on resize\n\t\t\t\t\t\t\tcontentsDiv.style.height = '100%';  //$NON-NLS-0$\n\t\t\t\t\t\t\tsectionDiv.appendChild(iframe);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'markdown': {\n\t\t\t\t\t\tif (this.hover.renderMarkDown) {\n\t\t\t\t\t\t\tcontentDiv.innerHTML = this.hover.renderMarkDown(data.content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tcontentDiv.appendChild(document.createTextNode(data.content));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsectionDiv.appendChild(contentDiv);\n\t\t\tcontentsDiv.appendChild(sectionDiv);\n\t\t\treturn true;\n\t\t},\n\t\t/*\n\t\t * Empty or empty array = call hover service for dynamic content\n\t\t * Array = annotations\n\t\t * String = HTML text\n\t\t * Node = HTML node\n\t\t * ProjectionTextModel = code projection\n\t\t */\n\t\t_renderImmediateInfo: function _renderImmediateInfo(contentsDiv, contents, context) {\t\t\t\t\t\t\n\t\t\t// If it's an annotation then process the annotation(s) to get the actual data\n\t\t\tif (contents instanceof Array) {\n\t\t\t\tcontents = this._getAnnotationContents(contents, context);\t\t\t\n\t\t\t\tif (!contents) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (typeof contents === \"string\") {\n\t\t\t\tcontentsDiv.textContent = contents;\n\t\t\t\treturn true;\n\t\t\t} else if (this._isNode(contents)) {\n\t\t\t\tcontentsDiv.appendChild(contents);\n\t\t\t\treturn true;\n\t\t\t} else if (contents instanceof mProjectionTextModel.ProjectionTextModel) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar options = view.getOptions();\n\t\t\t\toptions.wrapMode = false;\n\t\t\t\toptions.parent = contentsDiv;\n\t\t\t\tvar tooltipTheme = \"tooltipTheme\"; //$NON-NLS-0$\n\t\t\t\tvar theme = options.themeClass;\n\t\t\t\tif (theme) {\n\t\t\t\t\ttheme = theme.replace(tooltipTheme, \"\");\n\t\t\t\t\tif (theme) { theme = \" \" + theme; } //$NON-NLS-0$\n\t\t\t\t\ttheme = tooltipTheme + theme;\n\t\t\t\t} else {\n\t\t\t\t\ttheme = tooltipTheme;\n\t\t\t\t}\n\t\t\t\toptions.themeClass = theme;\n\t\t\t\tvar contentsView = this._contentsView = new mTextView.TextView(options);\n\t\t\t\t//TODO need to find a better way of sharing the styler for multiple views\n\t\t\t\tvar listener = {\n\t\t\t\t\tonLineStyle: function(e) {\n\t\t\t\t\t\tview.onLineStyle(e);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tcontentsView.addEventListener(\"LineStyle\", listener.onLineStyle);\n\t\t\t\tcontentsView.setModel(contents);\n\t\t\t\t\n\t\t\t\t// TODO This is a hack to compute the projection size we will have in the tooltip, we remove the child after computing\n\t\t\t\tthis._tooltipDiv.appendChild(contentsDiv);\n\t\t\t\t// Use the editor colors with a simple border\n\t\t\t\tthis._tooltipDiv.classList.add(\"textviewTooltipCodeProjection\"); //$NON-NLS-0$\n\t\t\t\tvar size = contentsView.computeSize();\n\t\t\t\t// Adjust the size for the padding\n\t\t\t\tcontentsDiv.style.width = (size.width+16) + \"px\"; //$NON-NLS-0$\n\t\t\t\tcontentsDiv.style.height = (size.height+16) + \"px\"; //$NON-NLS-0$\n\t\t\t\tcontentsView.resize();\n\t\t\t\tthis._tooltipDiv.removeChild(contentsDiv);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _getAnnotationContents\n\t\t * @description Takes a list of annotation and renders them in the tooltip\n\t\t * @function\n\t\t * @private\n\t\t * @param annotations the list of annotations to render\n\t\t * @param context optional object containing where the annotations are displayed (ruler, editor, etc.)\n\t\t * @returns returns document node containing rendered tooltip content\n\t\t */\n\t\t_getAnnotationContents: function(annotations, context) {\n\t\t\tvar self = this;\n\t\t\tvar inEditor = self.hover ? true : false;\n\t\t\tif (inEditor && context && context.source && context.source.indexOf('ruler') >= 0 && annotations.length > 1){ //$NON-NLS-0$\n\t\t\t\tinEditor = false;\n\t\t\t}\n\t\t\t\n\t\t\tvar annotation;\n\t\t\tvar newAnnotations = [];\n\t\t\tfor (var j = 0; j < annotations.length; j++) {\n\t\t\t\tannotation = annotations[j];\n\t\t\t\tif (annotation.title !== \"\" && !annotation.groupAnnotation) {\n\t\t\t\t\t// Don't display untitled annotations in the editor such as occurrences as the code is already visible\n\t\t\t\t\tif (!inEditor || annotation.title || annotation.type === \"orion.annotation.folding\"){\n\t\t\t\t\t\tnewAnnotations.push(annotation); \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotations = newAnnotations;\n\t\t\tif (annotations.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tvar html;\n\t\t\tvar document = this._tooltipDiv.ownerDocument;\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar baseModel = model.getBaseModel ? model.getBaseModel() : model;\n\t\t\t\n\t\t\t// If this is a code folding annotation, display code projection\n\t\t\tif (annotations.length === 1 && annotations[0].type === \"orion.annotation.folding\") {\n\t\t\t\tvar newModel = new mProjectionTextModel.ProjectionTextModel(baseModel);\n\t\t\t\tvar lineStart = baseModel.getLineStart(baseModel.getLineAtOffset(annotations[0].start));\n\t\t\t\tvar charCount = baseModel.getCharCount();\n\t\t\t\tif (annotations[0].end !== charCount) {\n\t\t\t\t\tnewModel.addProjection({start: annotations[0].end, end: charCount});\n\t\t\t\t}\n\t\t\t\tif (lineStart > 0) {\n\t\t\t\t\tnewModel.addProjection({start: 0, end: lineStart});\n\t\t\t\t}\n\t\t\t\treturn newModel;\n\t\t\t}\n\t\t\t\n\t\t\tvar allAnnotations;\n\t\t\tif (annotations.length > 0 && this._editor){\n\t\t\t\tallAnnotations = this._editor.getAnnotationModel().getAnnotations();\n\t\t\t}\n\t\t\tif (annotations.length === 1) {\n\t\t\t\thtml = getAnnotationHTML(annotations[0], allAnnotations, inEditor);\n\t\t\t\tif (html && html.firstChild) {\n\t\t\t\t\tvar className = html.firstChild.className;\n\t\t\t\t\tif (className) { className += \" \"; } //$NON-NLS-0$\n\t\t\t\t\tclassName += \"single\"; //$NON-NLS-0$\n\t\t\t\t\thtml.firstChild.className = className;\n\t\t\t\t}\n\t\t\t\treturn html;\n\t\t\t} else {\n\t\t\t\tvar tooltipHTML = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\tvar em = util.createElement(document, \"multi_anno\"); //$NON-NLS-0$\n\t\t\t\tem.appendChild(document.createTextNode(messages.multipleAnnotations));\n\t\t\t\ttooltipHTML.appendChild(em);\n\t\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\t\thtml = getAnnotationHTML(annotations[i], allAnnotations, inEditor);\n\t\t\t\t\tif (html) {\n\t\t\t\t\t\ttooltipHTML.appendChild(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn tooltipHTML;\n\t\t\t}\n\t\t\t\n\t\t\tfunction getAnnotationHTML(annotation, allAnnotations, inEditor) {\n\t\t\t\tvar title = annotation.title;\n\t\t\t\tvar result = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\tresult.className = \"tooltipRow\"; //$NON-NLS-0$\n\t\t\t\tif (annotation.html) {\n\t\t\t\t\tvar htmlHolder = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\t\thtmlHolder.className = \"tooltipImage\"; //$NON-NLS-0$\n\t\t\t\t\thtmlHolder.innerHTML = annotation.html;\n\t\t\t\t\tif (htmlHolder.lastChild) {\n\t\t\t\t\t\ttextUtil.addEventListener(htmlHolder.lastChild, \"click\", function() {\n\t\t\t\t\t\t\tvar start = annotation.start, end = annotation.end;\n\t\t\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.setSelection(start, end, 1 / 3, function() { self.hide(); });\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\t\t\t\t\tresult.appendChild(htmlHolder);\n\t\t\t\t}\n\t\t\t\tif (!title) {\n\t\t\t\t\tvar textStart = baseModel.getLineStart(baseModel.getLineAtOffset(annotation.start));\n\t\t\t\t\tvar textEnd = baseModel.getLineEnd(baseModel.getLineAtOffset(annotation.end), true);\n\t\t\t\t\ttitle = baseModel.getText(textStart, textEnd);\n\t\t\t\t}\n\t\t\t\tif (typeof title === \"function\") {\n\t\t\t\t\ttitle = annotation.title();\n\t\t\t\t}\n\t\t\t\tif (typeof title === \"string\") {\n\t\t\t\t\tvar span = util.createElement(document, \"span\"); //$NON-NLS-0$\n\t\t\t\t\tspan.className = \"tooltipTitle\"; //$NON-NLS-0$\n\t\t\t\t\tspan.appendChild(document.createTextNode(title));\n\t\t\t\t\ttitle = span;\n\t\t\t\t}\n\t\t\t\tresult.appendChild(title);\n\t\t\t\t\n\t\t\t\t// Handle quick fixes\n\t\t\t\tif (inEditor) {\n\t\t\t\t\tself.hover.renderQuickFixes(annotation, allAnnotations, result, function(){ self.hide(true)});\n\t\t\t\t}\n\t\t\t\tif (context){\t\n\t\t\t\t\t// Set the hover area to the annotation if it's not already set\n\t\t\t\t\tcontext.offsetStart = annotation.start;\n\t\t\t\t\tcontext.offsetEnd = annotation.end;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\treturn {Tooltip: Tooltip};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors:\n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/annotations\", ['i18n!orion/editor/nls/messages', 'orion/editor/eventTarget'], function(messages, mEventTarget) { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t/**\n\t * @class This object represents a regitry of annotation types.\n\t * @name orion.editor.AnnotationType\n\t */\n\tfunction AnnotationType() {\n\t}\n\t\n\t/**\n\t * @class This object represents a decoration attached to a range of text. Annotations are added to a\n\t * <code>AnnotationModel</code> which is attached to a <code>TextModel</code>.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.AnnotationModel}<br/>\n\t * {@link orion.editor.Ruler}<br/>\n\t * </p>\n\t * @name orion.editor.Annotation\n\t *\n\t * @property {String} type The annotation type (for example, orion.annotation.error).\n\t * @property {Number} start The start offset of the annotation in the text model.\n\t * @property {Number} end The end offset of the annotation in the text model.\n\t * @property {String} html The HTML displayed for the annotation.\n\t * @property {String} title The text description for the annotation.\n\t * @property {orion.editor.Style} style The style information for the annotation used in the annotations ruler and tooltips.\n\t * @property {orion.editor.Style} overviewStyle The style information for the annotation used in the overview ruler.\n\t * @property {orion.editor.Style} rangeStyle The style information for the annotation used in the text view to decorate a range of text.\n\t * @property {orion.editor.Style} lineStyle The style information for the annotation used in the text view to decorate a line of text.\n\t */\n\t/**\n\t * Constructs a new folding annotation.\n\t *\n\t * @param {Number} start The start offset of the annotation in the text model.\n\t * @param {Number} end The end offset of the annotation in the text model.\n\t * @param {orion.editor.ProjectionTextModel} projectionModel The projection text model.\n\t *\n\t * @class This object represents a folding annotation.\n\t * @name orion.editor.FoldingAnnotation\n\t */\n\tfunction FoldingAnnotation (start, end, projectionModel) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis._projectionModel = projectionModel;\n\t\tthis.html = this._expandedHTML;\n\t\tthis.style = this._expandedStyle;\n\t\tthis.expanded = true;\n\t}\n\n\tFoldingAnnotation.prototype = /** @lends orion.editor.FoldingAnnotation.prototype */ {\n\t\t_expandedHTML: \"<div class='annotationHTML expanded'></div>\", //$NON-NLS-0$\n\t\t_expandedStyle: {styleClass: \"annotation expanded\"}, //$NON-NLS-0$\n\t\t_collapsedHTML: \"<div class='annotationHTML collapsed'></div>\", //$NON-NLS-0$\n\t\t_collapsedStyle: {styleClass: \"annotation collapsed\"}, //$NON-NLS-0$\n\t\t_collapse: function() {\n\t\t\tif (!this.expanded) { return false; }\n\t\t\tthis.expanded = false;\n\t\t\tthis.html = this._collapsedHTML;\n\t\t\tthis.style = this._collapsedStyle;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.modifyAnnotation(this);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_expand: function() {\n\t\t\tif (this.expanded) { return false; }\n\t\t\tthis.expanded = true;\n\t\t\tthis.html = this._expandedHTML;\n\t\t\tthis.style = this._expandedStyle;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.modifyAnnotation(this);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_collapseImpl: function (checkOverlaping) {\n\t\t\tif (this._collapse()) {\n\t\t\t\tif (checkOverlaping) {\n\t\t\t\t\tthis._forEachOverlaping(function(annotation) {\n\t\t\t\t\t\tif (!annotation.expanded) {\n\t\t\t\t\t\t\tannotation._expandImpl(false);\n\t\t\t\t\t\t\tannotation._recollapse = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tvar projectionModel = this._projectionModel;\n\t\t\t\tvar baseModel = projectionModel.getBaseModel();\n\t\t\t\tthis._projection = {\n\t\t\t\t\tannotation: this,\n\t\t\t\t\tstart: baseModel.getLineStart(baseModel.getLineAtOffset(this.start) + 1),\n\t\t\t\t\tend: baseModel.getLineEnd(baseModel.getLineAtOffset(this.end), true)\n\t\t\t\t};\n\t\t\t\tprojectionModel.addProjection(this._projection);\n\t\t\t}\n\t\t},\n\t\t_expandImpl: function(checkOverlaping) {\n\t\t\tif (this._expand()) {\n\t\t\t\tthis._projectionModel._removeProjection(this._projection, !this._annotationModel);\n\t\t\t\tif (checkOverlaping) {\n\t\t\t\t\tthis._forEachOverlaping(function(annotation) {\n\t\t\t\t\t\tif (annotation._recollapse) {\n\t\t\t\t\t\t\tannotation._collapseImpl(false);\n\t\t\t\t\t\t\tannotation._recollapse = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_forEachOverlaping: function(callback) {\n\t\t\tif (!this._annotationModel) { return; }\n\t\t\tvar annotations = this._annotationModel.getAnnotations(this.start, this.end);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation !== this && annotation.type === AnnotationType.ANNOTATION_FOLDING) {\n\t\t\t\t\tcallback.call(this, annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Collapses the annotation.\n\t\t */\n\t\tcollapse: function () {\n\t\t\tthis._recollapse = false;\n\t\t\tthis._collapseImpl(true);\n\t\t},\n\t\t/**\n\t\t * Expands the annotation.\n\t\t */\n\t\texpand: function () {\n\t\t\tthis._recollapse = false;\n\t\t\tthis._expandImpl(true);\n\t\t}\n\t};\n\t \n\t/**\n\t * Error annotation type.\n\t */\n\tAnnotationType.ANNOTATION_ERROR = \"orion.annotation.error\"; //$NON-NLS-0$\n\t/**\n\t * Warning annotation type.\n\t */\n\tAnnotationType.ANNOTATION_WARNING = \"orion.annotation.warning\"; //$NON-NLS-0$\n\t/**\n\t * Info annotation type.\n\t * @since 14.0\n\t */\n\tAnnotationType.ANNOTATION_INFO = \"orion.annotation.info\"; //$NON-NLS-0$\n\t/**\n\t * Task annotation type.\n\t */\n\tAnnotationType.ANNOTATION_TASK = \"orion.annotation.task\"; //$NON-NLS-0$\n\t/**\n\t * Breakpoint annotation type.\n\t */\n\tAnnotationType.ANNOTATION_BREAKPOINT = \"orion.annotation.breakpoint\"; //$NON-NLS-0$\n\t/**\n\t * Bookmark annotation type.\n\t */\n\tAnnotationType.ANNOTATION_BOOKMARK = \"orion.annotation.bookmark\"; //$NON-NLS-0$\n\t/**\n\t * Folding annotation type.\n\t */\n\tAnnotationType.ANNOTATION_FOLDING = \"orion.annotation.folding\"; //$NON-NLS-0$\n\t/**\n\t * Curent bracket annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_BRACKET = \"orion.annotation.currentBracket\"; //$NON-NLS-0$\n\t/**\n\t * Matching bracket annotation type.\n\t */\n\tAnnotationType.ANNOTATION_MATCHING_BRACKET = \"orion.annotation.matchingBracket\"; //$NON-NLS-0$\n\t/**\n\t * Current line annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_LINE = \"orion.annotation.currentLine\"; //$NON-NLS-0$\n\t/**\n\t * Current search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_SEARCH = \"orion.annotation.currentSearch\"; //$NON-NLS-0$\n\t/**\n\t * Matching search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_MATCHING_SEARCH = \"orion.annotation.matchingSearch\"; //$NON-NLS-0$\n\t/**\n\t * Search range annotation type.\n\t */\n\tAnnotationType.ANNOTATION_SEARCH_RANGE = \"orion.annotation.searchRange\"; //$NON-NLS-0$\n\t/**\n\t * Read Occurrence annotation type.\n\t */\n\tAnnotationType.ANNOTATION_READ_OCCURRENCE = \"orion.annotation.readOccurrence\"; //$NON-NLS-0$\n\t/**\n\t * Write Occurrence annotation type.\n\t */\n\tAnnotationType.ANNOTATION_WRITE_OCCURRENCE = \"orion.annotation.writeOccurrence\"; //$NON-NLS-0$\n\t/**\n\t * Selected linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_SELECTED_LINKED_GROUP = \"orion.annotation.selectedLinkedGroup\"; //$NON-NLS-0$\n\t/**\n\t * Current linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_LINKED_GROUP = \"orion.annotation.currentLinkedGroup\"; //$NON-NLS-0$\n\t/**\n\t * Linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_LINKED_GROUP = \"orion.annotation.linkedGroup\"; //$NON-NLS-0$\n\t/**\n\t* Blame annotation type.\n\t*/\n\tAnnotationType.ANNOTATION_BLAME = \"orion.annotation.blame\"; //$NON-NLS-0$\n\t/**\n\t* Current Blame annotation type.\n\t*/\n\tAnnotationType.ANNOTATION_CURRENT_BLAME = \"orion.annotation.currentBlame\"; //$NON-NLS-0$\n\t/**\n\t * Diff Added annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_ADDED = \"orion.annotation.diffAdded\"; //$NON-NLS-0$\n\t/**\n\t * Diff Deleted annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_DELETED = \"orion.annotation.diffDeleted\"; //$NON-NLS-0$\n\t/**\n\t * Diff Modification annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_MODIFIED = \"orion.annotation.diffModified\"; //$NON-NLS-0$\n\n\t/** @private */\n\tvar annotationTypes = {};\n\n\t/**\n\t * Register an annotation type.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @param {Object|Function} properties The common annotation properties of the registered\n\t *\t\tannotation type. All annotations create with this annotation type will expose these\n\t *\t\tproperties.\n\t */\n\tAnnotationType.registerType = function(type, properties) {\n\t\tvar constructor = properties;\n\t\tif (typeof constructor !== \"function\") { //$NON-NLS-0$\n\t\t\tconstructor = function(start, end, title) {\n\t\t\t\tthis.start = start;\n\t\t\t\tthis.end = end;\n\t\t\t\tif (title !== undefined) { this.title = title; }\n\t\t\t};\n\t\t\tconstructor.prototype = properties;\n\t\t}\n\t\tconstructor.prototype.type = type;\n\t\tannotationTypes[type] = constructor;\n\t\treturn type;\n\t};\n\n\t/**\n\t * Creates an annotation of a given type with the specified start end end offsets.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @param {Number} start The start offset of the annotation in the text model.\n\t * @param {Number} end The end offset of the annotation in the text model.\n\t * @param {String} [title] The text description for the annotation if different then the type description.\n\t * @return {orion.editor.Annotation} the new annotation\n\t */\n\tAnnotationType.createAnnotation = function(type, start, end, title) {\n\t\treturn new (this.getType(type))(start, end, title);\n\t};\n\n\t/**\n\t * Gets the registered annotation type with specified type. The returned\n\t * value is a constructor that can be used to create annotations of the\n\t * speficied type.  The constructor takes the start and end offsets of\n\t * the annotation.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @return {Function} The annotation type constructor ( i.e function(start, end, title) ).\n\t */\n\tAnnotationType.getType = function(type) {\n\t\treturn annotationTypes[type];\n\t};\n\n\t/** @private */\n\tfunction registerType(type, lineStyling) {\n\t\tvar index = type.lastIndexOf('.'); //$NON-NLS-0$\n\t\tvar suffix = type.substring(index + 1);\n\t\tvar properties = {\n\t\t\ttitle: messages[suffix],\n\t\t\tstyle: {styleClass: \"annotation \" + suffix}, //$NON-NLS-0$\n\t\t\thtml: \"<div class='annotationHTML \" + suffix + \"'></div>\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\toverviewStyle: {styleClass: \"annotationOverview \" + suffix} //$NON-NLS-0$\n\t\t};\n\t\tif (lineStyling) {\n\t\t\tproperties.lineStyle = {styleClass: \"annotationLine \" + suffix}; //$NON-NLS-0$\n\t\t} else {\n\t\t\tproperties.rangeStyle = {styleClass: \"annotationRange \" + suffix}; //$NON-NLS-0$\n\t\t}\n\t\tAnnotationType.registerType(type, properties);\n\t}\n\tregisterType(AnnotationType.ANNOTATION_ERROR);\n\tregisterType(AnnotationType.ANNOTATION_WARNING);\n\tregisterType(AnnotationType.ANNOTATION_INFO);\n\tregisterType(AnnotationType.ANNOTATION_TASK);\n\tregisterType(AnnotationType.ANNOTATION_BREAKPOINT);\n\tregisterType(AnnotationType.ANNOTATION_BOOKMARK);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_BRACKET);\n\tregisterType(AnnotationType.ANNOTATION_MATCHING_BRACKET);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_SEARCH);\n\tregisterType(AnnotationType.ANNOTATION_MATCHING_SEARCH);\n\tregisterType(AnnotationType.ANNOTATION_SEARCH_RANGE, true);\n\tregisterType(AnnotationType.ANNOTATION_READ_OCCURRENCE);\n\tregisterType(AnnotationType.ANNOTATION_WRITE_OCCURRENCE);\n\tregisterType(AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_LINE, true);\n\tregisterType(AnnotationType.ANNOTATION_BLAME, true);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_BLAME, true);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_ADDED);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_DELETED);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_MODIFIED);\n\n\tAnnotationType.registerType(AnnotationType.ANNOTATION_FOLDING, FoldingAnnotation);\n\n\t/**\n\t * Constructs a new AnnotationTypeList object.\n\t *\n\t * @class This represents an interface of prioritized annotation types.\n\t * @name orion.editor.AnnotationTypeList\n\t */\n\tfunction AnnotationTypeList () {\n\t}\n\t/**\n\t * Adds in the annotation type interface into the specified object.\n\t *\n\t * @param {Object} object The object to add in the annotation type interface.\n\t */\n\tAnnotationTypeList.addMixin = function(object) {\n\t\tvar proto = AnnotationTypeList.prototype;\n\t\tfor (var p in proto) {\n\t\t\tif (proto.hasOwnProperty(p)) {\n\t\t\t\tobject[p] = proto[p];\n\t\t\t}\n\t\t}\n\t};\n\tAnnotationTypeList.prototype = /** @lends orion.editor.AnnotationTypeList.prototype */ {\n\t\t/**\n\t\t * Adds an annotation type to the receiver.\n\t\t * <p>\n\t\t * Only annotations of the specified types will be shown by\n\t\t * the receiver.\n\t\t * </p>\n\t\t * <p>\n\t\t * If the priority is not specified, the annotation type will be added\n\t\t * to the end of the receiver's list (lowest pririoty).\n\t\t * </p>\n\t\t *\n\t\t * @param {Object} type the annotation type to be shown\n\t\t * @param {Number} priority the priority for the annotation type\n\t\t * \n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t * @see orion.editor.AnnotationTypeList#getAnnotationTypePriority\n\t\t */\n\t\taddAnnotationType: function(type, priority) {\n\t\t\tif (!this._annotationTypes) { this._annotationTypes = []; }\n\t\t\tvar index = priority - 1;\n\t\t\tif (priority == undefined || !(0 <= index && index < this._annotationTypes.length)) {\n\t\t\t\tthis._annotationTypes.push(type);\n\t\t\t} else {\n\t\t\t\tthis._annotationTypes.splice(index, 0, type);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Gets the annotation type priority.  The priority is determined by the\n\t\t * order the annotation type is added to the receiver.  Annotation types\n\t\t * added first have higher priority.\n\t\t * <p>\n\t\t * Returns <code>0</code> if the annotation type is not added.\n\t\t * </p>\n\t\t *\n\t\t * @param {Object} type the annotation type\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t */\n\t\tgetAnnotationTypePriority: function(type) {\n\t\t\tif (this._annotationTypes) {\n\t\t\t\tfor (var i = 0; i < this._annotationTypes.length; i++) {\n\t\t\t\t\tif (this._annotationTypes[i] === type) {\n\t\t\t\t\t\treturn i + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\t/**\n\t\t * Returns an array of annotations in the specified annotation model for the given range of text sorted by type.\n\t\t *\n\t\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model.\n\t\t * @param {Number} start the start offset of the range.\n\t\t * @param {Number} end the end offset of the range.\n\t\t * @return {orion.editor.Annotation[]} an annotation array.\n\t\t */\n\t\tgetAnnotationsByType: function(annotationModel, start, end) {\n\t\t\tvar iter = annotationModel.getAnnotations(start, end);\n\t\t\tvar annotation, annotations = [];\n\t\t\twhile (iter.hasNext()) {\n\t\t\t\tannotation = iter.next();\n\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\tannotations.push(annotation);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tannotations.sort(function(a, b) {\n\t\t\t\treturn self.getAnnotationTypePriority(a.type) - self.getAnnotationTypePriority(b.type);\n\t\t\t});\n\t\t\treturn annotations;\n\t\t},\n\t\t/**\n\t\t * Returns whether the receiver shows annotations of the specified type.\n\t\t *\n\t\t * @param {Object} type the annotation type\n\t\t * @returns {Boolean} whether the specified annotation type is shown\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t */\n\t\tisAnnotationTypeVisible: function(type) {\n\t\t\tif (this.getAnnotationTypePriority(type) === 0) return false;\n\t\t\treturn !this._visibleAnnotationTypes || this._visibleAnnotationTypes[type] === undefined || this._visibleAnnotationTypes[type] === true;\n\t\t},\n\t\t/**\n\t\t * Sets whether annotations of the given annotation type are visble. By default\n\t\t * all annotations added to the receiver are visible.\n\t\t * \n\t\t * @param {Object} type\n\t\t * @param {Boolean} visible\n\t\t * @since 14.0\n\t\t */\n\t\tsetAnnotationTypeVisible: function(type, visible) {\n\t\t\tif (typeof type === \"object\") {\n\t\t\t\tthis._visibleAnnotationTypes = type;\n\t\t\t} else {\n\t\t\t\tif (!this._visibleAnnotationTypes) this._visibleAnnotationTypes = {};\n\t\t\t\tthis._visibleAnnotationTypes[type] = visible;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Removes an annotation type from the receiver.\n\t\t *\n\t\t * @param {Object} type the annotation type to be removed\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t */\n\t\tremoveAnnotationType: function(type) {\n\t\t\tif (!this._annotationTypes) { return; }\n\t\t\tfor (var i = 0; i < this._annotationTypes.length; i++) {\n\t\t\t\tif (this._annotationTypes[i] === type) {\n\t\t\t\t\tthis._annotationTypes.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/** @private */\n\tfunction binarySearch(array, offset, inclusive, low, high) {\n\t\tvar index;\n\t\tif (low === undefined) { low = -1; }\n\t\tif (high === undefined) { high = array.length; }\n\t\twhile (high - low > 1) {\n\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\tif (offset <= array[index].start) {\n\t\t\t\thigh = index;\n\t\t\t} else if (inclusive && offset < array[index].end) {\n\t\t\t\thigh = index;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlow = index;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t}\n\t\n\t/**\n\t * Constructs an annotation model.\n\t * \n\t * @param {orion.editor.TextModel} textModel The text model.\n\t * \n\t * @class This object manages annotations for a <code>TextModel</code>.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.Annotation}<br/>\n\t * {@link orion.editor.TextModel}<br/> \n\t * </p>\t\n\t * @name orion.editor.AnnotationModel\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction AnnotationModel(textModel) {\n\t\tthis._annotations = [];\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(modelChangedEvent) {\n\t\t\t\tself._onChanged(modelChangedEvent);\n\t\t\t}\n\t\t};\n\t\tthis.setTextModel(textModel);\n\t}\n\n\tAnnotationModel.prototype = /** @lends orion.editor.AnnotationModel.prototype */ {\n\t\t/**\n\t\t * Adds an annotation to the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation to be added.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\taddAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar index = binarySearch(annotations, annotation.start);\n\t\t\tannotations.splice(index, 0, annotation);\n\t\t\tannotation._annotationModel = this;\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [annotation],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Returns the text model.\n\t\t *\n\t\t * @return {orion.editor.TextModel} The text model.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#setTextModel\n\t\t */\n\t\tgetTextModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * @class This object represents an annotation iterator.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.AnnotationModel#getAnnotations}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.AnnotationIterator\n\t\t *\n\t\t * @property {Function} hasNext Determines whether there are more annotations in the iterator.\n\t\t * @property {Function} next Returns the next annotation in the iterator.\n\t\t */\n\t\t/**\n\t\t * Returns an iterator of annotations for the given range of text. If called with no parameters,\n\t\t * returns all annotations in the model.\n\t\t *\n\t\t * @param {Number} start the start offset of the range.\n\t\t * @param {Number} end the end offset of the range.\n\t\t * @return {orion.editor.AnnotationIterator} an annotation iterartor.\n\t\t */\n\t\tgetAnnotations: function(start, end) {\n\t\t\tvar annotations = this._annotations, current;\n\t\t\tvar i = 0, skip;\n\t\t\tif (start === undefined && end === undefined) {\n\t\t\t\tskip = function() {\n\t\t\t\t\treturn (i < annotations.length) ? annotations[i++] : null;\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t//TODO binary search does not work for range intersection when there are overlaping ranges, need interval search tree for this\n\t\t\t\tskip = function() {\n\t\t\t\t\twhile (i < annotations.length) {\n\t\t\t\t\t\tvar a =  annotations[i++];\n\t\t\t\t\t\tif ((start === a.start) || (a.start === a.end && a.end === end) || (start > a.start ? start < a.end : a.start < end)) {\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (a.start >= end) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t};\n\t\t\t}\n\t\t\tcurrent = skip();\n\t\t\treturn {\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar result = current;\n\t\t\t\t\tif (result) { current = skip(); }\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t\thasNext: function() {\n\t\t\t\t\treturn current !== null;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Notifies the annotation model that the given annotation has been modified.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the modified annotation.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t */\n\t\tmodifyAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar index = this._getAnnotationIndex(annotation);\n\t\t\tif (index < 0) { return; }\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: [annotation]\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the annotation model has changed.\n\t\t *\n\t\t * @param {orion.editor.Annotation[]} added The list of annotation being added to the model.\n\t\t * @param {orion.editor.Annotation[]} changed The list of annotation modified in the model.\n\t\t * @param {orion.editor.Annotation[]} removed The list of annotation being removed from the model.\n\t\t * @param {ModelChangedEvent} textModelChangedEvent the text model changed event that trigger this change, can be null if the change was trigger by a method call (for example, {@link #addAnnotation}).\n\t\t */\n\t\tonChanged: function(e) {\n\t\t\treturn this.dispatchEvent(e);\n\t\t},\n\t\t/**\n\t\t * Removes all annotations of the given <code>type</code>. All annotations\n\t\t * are removed if the type is not specified.\n\t\t * <p>The annotation model listeners are notified of this change.  Only one changed event is generated.</p>\n\t\t *\n\t\t * @param {Object} type the type of annotations to be removed.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\tremoveAnnotations: function(type) {\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar removed, i;\n\t\t\tif (type) {\n\t\t\t\tremoved = [];\n\t\t\t\tfor (i = annotations.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar annotation = annotations[i];\n\t\t\t\t\tif (annotation.type === type) {\n\t\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t\t\tremoved.splice(0, 0, annotation);\n\t\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tremoved = annotations;\n\t\t\t\tannotations = [];\n\t\t\t}\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: removed,\n\t\t\t\tadded: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Removes an annotation from the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation to be removed.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t */\n\t\tremoveAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar index = this._getAnnotationIndex(annotation);\n\t\t\tif (index < 0) { return; }\n\t\t\tannotation._annotationModel = null;\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: this._annotations.splice(index, 1),\n\t\t\t\tadded: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Removes and adds the specifed annotations to the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.  Only one changed event is generated.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} remove the annotations to be removed.\n\t\t * @param {orion.editor.Annotation} add the annotations to be added.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\treplaceAnnotations: function(remove, add) {\n\t\t\tvar annotations = this._annotations, i, index, annotation, removed = [];\n\t\t\tif (remove) {\n\t\t\t\tfor (i = remove.length - 1; i >= 0; i--) {\n\t\t\t\t\tannotation = remove[i];\n\t\t\t\t\tindex = this._getAnnotationIndex(annotation);\n\t\t\t\t\tif (index < 0) { continue; }\n\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\tannotations.splice(index, 1);\n\t\t\t\t\tremoved.splice(0, 0, annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!add) { add = []; }\n\t\t\tfor (i = 0; i < add.length; i++) {\n\t\t\t\tannotation = add[i];\n\t\t\t\tindex = binarySearch(annotations, annotation.start);\n\t\t\t\tannotation._annotationModel = this;\n\t\t\t\tannotations.splice(index, 0, annotation);\n\t\t\t}\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: removed,\n\t\t\t\tadded: add,\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\t\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Sets the text model of the annotation model.  The annotation\n\t\t * model listens for changes in the text model to update and remove\n\t\t * annotations that are affected by the change.\n\t\t *\n\t\t * @param {orion.editor.TextModel} textModel the text model.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#getTextModel\n\t\t */\n\t\tsetTextModel: function(textModel) {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._model = textModel;\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\t_getAnnotationIndex: function(annotation) {\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar index = binarySearch(annotations, annotation.start);\n\t\t\twhile (index < annotations.length && annotations[index].start === annotation.start) {\n\t\t\t\tif (annotations[index] === annotation) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t\t/** @ignore */\n\t\t_onChanged: function(modelChangedEvent) {\n\t\t\tvar start = modelChangedEvent.start;\n\t\t\tvar addedCharCount = modelChangedEvent.addedCharCount;\n\t\t\tvar removedCharCount = modelChangedEvent.removedCharCount;\n\t\t\tvar annotations = this._annotations, end = start + removedCharCount;\n\t\t\t//TODO binary search does not work for range intersection when there are overlaping ranges, need interval search tree for this\n\t\t\tvar startIndex = 0;\n\t\t\tif (!(0 <= startIndex && startIndex < annotations.length)) { return; }\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: [],\n\t\t\t\ttextModelChangedEvent: modelChangedEvent\n\t\t\t};\n\t\t\tvar changeCount = addedCharCount - removedCharCount, i;\n\t\t\tfor (i = startIndex; i < annotations.length; i++) {\n\t\t\t\tvar annotation = annotations[i];\n\t\t\t\tif (annotation.start >= end) {\n\t\t\t\t\tannotation._oldStart = annotation.start;\n\t\t\t\t\tannotation._oldEnd = annotation.end;\n\t\t\t\t\tannotation.start += changeCount;\n\t\t\t\t\tannotation.end += changeCount;\n\t\t\t\t\te.changed.push(annotation);\n\t\t\t\t} else if (annotation.end <= start) {\n\t\t\t\t\t//nothing\n\t\t\t\t} else if (annotation.start <= start && end < annotation.end) {//Annotation renderer does not render the last character\n\t\t\t\t\tannotation._oldStart = annotation.start;\n\t\t\t\t\tannotation._oldEnd = annotation.end;\n\t\t\t\t\tannotation.end += changeCount;\n\t\t\t\t\te.changed.push(annotation);\n\t\t\t\t} else {\n\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t\te.removed.push(annotation);\n\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\tif (annotation.expand) {\n\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t}\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.added.length > 0 || e.removed.length > 0 || e.changed.length > 0) {\n\t\t\t\tthis.onChanged(e);\n\t\t\t}\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(AnnotationModel.prototype);\n\n\t/**\n\t * Constructs a new styler for annotations.\n\t *\n\t * @param {orion.editor.TextView} view The styler view.\n\t * @param {orion.editor.AnnotationModel} view The styler annotation model.\n\t *\n\t * @class This object represents a styler for annotation attached to a text view.\n\t * @name orion.editor.AnnotationStyler\n\t * @borrows orion.editor.AnnotationTypeList#addAnnotationType as #addAnnotationType\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationTypePriority as #getAnnotationTypePriority\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationsByType as #getAnnotationsByType\n\t * @borrows orion.editor.AnnotationTypeList#isAnnotationTypeVisible as #isAnnotationTypeVisible\n\t * @borrows orion.editor.AnnotationTypeList#removeAnnotationType as #removeAnnotationType\n\t */\n\tfunction AnnotationStyler (view, annotationModel) {\n\t\tthis._view = view;\n\t\tthis._annotationModel = annotationModel;\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t},\n\t\t\tonLineStyle: function(e) {\n\t\t\t\tself._onLineStyle(e);\n\t\t\t},\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onAnnotationModelChanged(e);\n\t\t\t}\n\t\t};\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\tview.addEventListener(\"postLineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\tannotationModel.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t}\n\tAnnotationStyler.prototype = /** @lends orion.editor.AnnotationStyler.prototype */ {\n\t\t/**\n\t\t * Destroys the styler.\n\t\t * <p>\n\t\t * Removes all listeners added by this styler.\n\t\t * </p>\n\t\t */\n\t\tdestroy: function() {\n\t\t\tvar view = this._view;\n\t\t\tif (view) {\n\t\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tview.removeEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (annotationModel) {\n\t\t\t\tannotationModel.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tannotationModel = null;\n\t\t\t}\n\t\t},\n\t\t_mergeStyle: function(result, style) {\n\t\t\tif (style) {\n\t\t\t\tif (!result) { result = {}; }\n\t\t\t\tif (result.styleClass && style.styleClass && result.styleClass !== style.styleClass) {\n\t\t\t\t\tresult.styleClass += \" \" + style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tresult.styleClass = style.styleClass;\n\t\t\t\t}\n\t\t\t\tvar prop;\n\t\t\t\tif (style.tagName) {\n\t\t\t\t\tif (!result.tagName) {\n\t\t\t\t\t\tresult.tagName = style.tagName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.style) {\n\t\t\t\t\tif (!result.style) { result.style  = {}; }\n\t\t\t\t\tfor (prop in style.style) {\n\t\t\t\t\t\tif (!result.style[prop]) {\n\t\t\t\t\t\t\tresult.style[prop] = style.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.attributes) {\n\t\t\t\t\tif (!result.attributes) { result.attributes  = {}; }\n\t\t\t\t\tfor (prop in style.attributes) {\n\t\t\t\t\t\tif (!result.attributes[prop]) {\n\t\t\t\t\t\t\tresult.attributes[prop] = style.attributes[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.html) {\n\t\t\t\t\tresult.html = style.html;\n\t\t\t\t}\n\t\t\t\tif (style.node) {\n\t\t\t\t\tresult.node = style.node;\n\t\t\t\t}\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_mergeStyleRanges: function(ranges, styleRange) {\n\t\t\tif (!ranges) {\n\t\t\t\tranges = [];\n\t\t\t}\n\t\t\tvar mergedStyle, i = binarySearch(ranges, styleRange.start, true);\n\t\t\tfor (; i<ranges.length && styleRange; i++) {\n\t\t\t\tvar range = ranges[i];\n\t\t\t\tif (styleRange.end <= range.start) { break; }\n\t\t\t\tif (styleRange.start >= range.end) { continue; }\n\t\t\t\tmergedStyle = this._mergeStyle({}, range.style);\n\t\t\t\tmergedStyle = this._mergeStyle(mergedStyle, styleRange.style);\n\t\t\t\tvar args = [];\n\t\t\t\targs.push(i, 1);\n\t\t\t\tif (styleRange.start < range.start) {\n\t\t\t\t\targs.push({start: styleRange.start, end: range.start, style: styleRange.style});\n\t\t\t\t}\n\t\t\t\tif (styleRange.start > range.start) {\n\t\t\t\t\targs.push({start: range.start, end: styleRange.start, style: range.style});\n\t\t\t\t}\n\t\t\t\targs.push({start: Math.max(range.start, styleRange.start), end: Math.min(range.end, styleRange.end), style: mergedStyle});\n\t\t\t\tif (styleRange.end < range.end) {\n\t\t\t\t\targs.push({start: styleRange.end, end: range.end, style: range.style});\n\t\t\t\t}\n\t\t\t\tif (styleRange.end > range.end) {\n\t\t\t\t\tstyleRange = {start: range.end, end: styleRange.end, style: styleRange.style};\n\t\t\t\t} else {\n\t\t\t\t\tstyleRange = null;\n\t\t\t\t}\n\t\t\t\tArray.prototype.splice.apply(ranges, args);\n\t\t\t}\n\t\t\tif (styleRange) {\n\t\t\t\tmergedStyle = this._mergeStyle({}, styleRange.style);\n\t\t\t\tranges.splice(i, 0, {start: styleRange.start, end: styleRange.end, style: mergedStyle});\n\t\t\t}\n\t\t\treturn ranges;\n\t\t},\n\t\t_onAnnotationModelChanged: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tvar self = this;\n\t\t\tvar model = view.getModel();\n\t\t\tfunction redrawRange(start, end) {\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\tif (start !== -1 && end !== -1) {\n\t\t\t\t\tview.redrawRange(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction redraw(changes, changed) {\n\t\t\t\tfor (var i = 0; i < changes.length; i++) {\n\t\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\t\tvar change = changes[i];\n\t\t\t\t\tredrawRange(change.start, change.end);\n\t\t\t\t\tif (changed && change._oldStart !== undefined && change._oldEnd) {\n\t\t\t\t\t\tredrawRange(change._oldStart, change._oldEnd);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tredraw(e.added);\n\t\t\tredraw(e.removed);\n\t\t\tredraw(e.changed, true);\n\t\t},\n\t\t_onDestroy: function(e) {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onLineStyle: function (e) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar viewModel = e.textView.getModel();\n\t\t\tvar baseModel = annotationModel.getTextModel();\n\t\t\tvar start = e.lineStart;\n\t\t\tvar end = e.lineStart + e.lineText.length;\n\t\t\tif (baseModel !== viewModel) {\n\t\t\t\tstart = viewModel.mapOffset(start);\n\t\t\t\tend = viewModel.mapOffset(end);\n\t\t\t}\n\t\t\tvar annotations = annotationModel.getAnnotations(start, end);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\tif (annotation.rangeStyle) {\n\t\t\t\t\tvar annotationStart = annotation.start;\n\t\t\t\t\tvar annotationEnd = annotation.end;\n\t\t\t\t\tif (baseModel !== viewModel) {\n\t\t\t\t\t\tannotationStart = viewModel.mapOffset(annotationStart, true);\n\t\t\t\t\t\tannotationEnd = viewModel.mapOffset(annotationEnd, true);\n\t\t\t\t\t}\n\t\t\t\t\te.ranges = this._mergeStyleRanges(e.ranges, {start: annotationStart, end: annotationEnd, style: annotation.rangeStyle});\n\t\t\t\t}\n\t\t\t\tif (annotation.lineStyle) {\n\t\t\t\t\te.style = this._mergeStyle({}, e.style);\n\t\t\t\t\te.style = this._mergeStyle(e.style, annotation.lineStyle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tAnnotationTypeList.addMixin(AnnotationStyler.prototype);\n\n\treturn {\n\t\tFoldingAnnotation: FoldingAnnotation,\n\t\tAnnotationType: AnnotationType,\n\t\tAnnotationTypeList: AnnotationTypeList,\n\t\tAnnotationModel: AnnotationModel,\n\t\tAnnotationStyler: AnnotationStyler\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/objects',[], function() {\n\tfunction mixin(target/*, source..*/) {\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\tfor (var j = 1, len = arguments.length; j < len; j++) {\n\t\t\tvar source = arguments[j];\n\t\t\tfor (var key in source) {\n\t\t\t\tif (hasOwnProperty.call(source, key)) {\n\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn target;\n\t}\n\n\t/**\n\t * @name orion.objects\n\t * @class Object-oriented helpers.\n\t */\n\treturn {\n\t\t/**\n\t\t * Creates a shallow clone of the given <code>object</code>.\n\t\t * @name orion.objects.clone\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object|Array} object The object to clone. Must be a \"normal\" Object or Array. Other built-ins,\n\t\t * host objects, primitives, etc, will not work.\n\t\t * @returns {Object|Array} A clone of <code>object</code>.\n\t\t */\n\t\tclone: function(object) {\n\t\t\tif (Array.isArray(object)) {\n\t\t\t\treturn Array.prototype.slice.call(object);\n\t\t\t}\n\t\t\tvar clone = Object.create(Object.getPrototypeOf(object));\n\t\t\tmixin(clone, object);\n\t\t\treturn clone;\n\t\t},\n\t\t/**\n\t\t * Mixes all <code>source</code>'s own enumerable properties into <code>target</code>. Multiple source objects\n\t\t * can be passed as varargs.\n\t\t * @name orion.objects.mixin\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object} target\n\t\t * @param {Object} source\n\t\t */\n\t\tmixin: mixin,\n\t\t/**\n\t\t * Wraps an object into an Array if necessary.\n\t\t * @name orion.objects.toArray\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object} obj An object.\n\t\t * @returns {Array} Returns <code>obj</code> unchanged, if <code>obj</code> is an Array. Otherwise returns a 1-element Array\n\t\t * whose sole element is <code>obj</code>.\n\t\t */\n\t\ttoArray: function(o) {\n\t\t\treturn Array.isArray(o) ? o : [o];\n\t\t}\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2009, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/editor\", [ //$NON-NLS-0$\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\n\t'orion/editor/eventTarget', //$NON-NLS-0$\n\t'orion/editor/tooltip', //$NON-NLS-0$\n\t'orion/editor/annotations', //$NON-NLS-0$\n\t'orion/objects', //$NON-NLS-0$\n\t'orion/editor/util', //$NON-NLS-1$\n\t'orion/util' //$NON-NLS-0$\n], function(messages, mEventTarget, mTooltip, mAnnotations, objects, textUtil, util) {\n\t\n\tvar AT = mAnnotations.AnnotationType;\n\n\tvar HIGHLIGHT_ERROR_ANNOTATION = \"orion.annotation.highlightError\"; //$NON-NLS-0$\n\n\t/**\n\t * @name orion.editor.BaseEditor\n\t * @class This is the base interface for text and visual editors based on a text buffer.\n\t *\n\t * @description Creates a new Base Editor with the given options.\n\t * @param {Object} options Creation options for this editor.\n\t * @param {Object} options.domNode\n\t * @param {Object} options.statusReporter\n\t *\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction BaseEditor(options) {\n\t\toptions = options || {};\n\t\tthis._domNode = options.domNode;\n\t\tthis._model = options.model;\n\t\tthis._undoStack = options.undoStack;\n\t\tthis._statusReporter = options.statusReporter;\n\t\tthis._title = null;\n\t\tvar that = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tthat.onChanged(e);\n\t\t\t}\n\t\t};\n\t\tif (this._model) {\n\t\t\tthis._model.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t}\n\t\tthis.checkDirty();\n\t}\n\tBaseEditor.prototype = /** @lends orion.editor.BaseEditor.prototype */ {\n\t\t/**\n\t\t * Destroys the editor. Uninstall the editor view.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis.uninstall();\n\t\t\tthis._statusReporter = this._domNode = null;\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\n\t\t/** @private */\n\t\tcheckDirty : function() {\n\t\t\tthis.setDirty(this._undoStack && !this._undoStack.isClean());\n\t\t},\n\t\t/**\n\t\t * Focus the the editor view. The default implementation does nothing.\n\t\t */\n\t\tfocus: function() {\n\t\t},\n\t\t/**\n\t\t * Returns the text model of the editor.\n\t\t *\n\t\t * @returns {orion.editor.TextModel} the text model of the view.\n\t\t */\n\t\tgetModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The text does not include the character at the end offset.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextView#setText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\treturn this.getModel().getText(start, end);\n\t\t},\n\t\t/**\n\t\t * Returns the editor title.\n\t\t *\n\t\t * @returns {String} the editor title.\n\t\t */\n\t\tgetTitle: function() {\n\t\t\treturn this._title;\n\t\t},\n\t\t/**\n\t\t * Returns the editor undo stack.\n\t\t *\n\t\t * @returns {orion.editor.UndoStack} the editor undo stack.\n\t\t */\n\t\tgetUndoStack: function() {\n\t\t\treturn this._undoStack;\n\t\t},\n\t\t/**\n\t\t * Creates the DOM hierarchy of the editor and add it to the document.\n\t\t */\n\t\tinstall: function() {\n\t\t\tthis.installed = true;\n\t\t},\n\t\t/**\n\t\t * Returns <code>true</code> if the editor is dirty; <code>false</code> otherwise.\n\t\t * @returns {Boolean} whether the editor is dirty\n\t\t */\n\t\tisDirty: function() {\n\t\t\tif (this._undoStack) return !this._undoStack.isClean();\n\t\t\treturn this._dirty;\n\t\t},\n\t\t/**\n\t\t * Marks the current state of the editor as clean. Meaning there are no unsaved modifications.\n\t\t */\n\t\tmarkClean: function() {\n\t\t\tthis.getUndoStack().markClean();\n\t\t\tthis.setDirty(false);\n\t\t},\n\t\t/**\n\t\t * Called when the dirty state of the editor changes.\n\t\t * @param {Event} dirtyChangedEvent\n\t\t */\n\t\tonDirtyChanged: function(dirtyChangedEvent) {\n\t\t\treturn this.dispatchEvent(dirtyChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Called when the editor's contents have been changed or saved.\n\t\t * @param {Event} inputChangedEvent\n\t\t */\n\t\tonInputChanged: function (inputChangedEvent) {\n\t\t\treturn this.dispatchEvent(inputChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Called when the editor's text model has been changed.\n\t\t * @param {Event} inputChangedEvent\n\t\t * @callback\n\t\t */\n\t\tonChanged: function (modelChangedEvent) {\n\t\t\tthis.checkDirty();\n\t\t},\n\t\t/**\n\t\t * Report the message to the user.\n\t\t *\n\t\t * @param {String} message the message to show\n\t\t * @param {String} [type] the message type. Either normal or \"progress\" or \"error\";\n\t\t * @param {Boolean} [isAccessible] If <code>true</code>, a screen reader will read this message.\n\t\t * Otherwise defaults to the domNode default.\n\t\t */\n\t\treportStatus: function(message, type, isAccessible) {\n\t\t\tif (this._statusReporter) {\n\t\t\t\tthis._statusReporter(message, type, isAccessible);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Resizes the editor view. The default implementation does nothing.\n\t\t */\n\t\tresize: function() {\n\t\t},\n\t\t/**\n\t\t * Sets whether the editor is dirty.\n\t\t *\n\t\t * @param {Boolean} dirty\n\t\t */\n\t\tsetDirty: function(dirty) {\n\t\t\tthis._setSyntaxCheckRequired(dirty);\n\t\t\tif (this._dirty === dirty) { return; }\n\t\t\tthis._dirty = dirty;\n\t\t\tthis.onDirtyChanged({type: \"DirtyChanged\"}); //$NON-NLS-0$\n\t\t},\n\t\t/**\n\t\t * Sets a flag indicating whether the editor contents have been modified since\n\t\t * the last syntax check (validation) operation.\n\t\t * \n\t\t * @function\n\t\t * @param required {Boolean} what to set the flag to, true indicates the editor is dirty and needs syntax checking\n\t\t */\n\t\t_setSyntaxCheckRequired: function _setSyntaxCheckRequired(required){\n\t\t\tthis._syntaxCheckRequired = required;\n\t\t},\n\t\t/**\n\t\t * Returns the state of the syntax check required flag, indicating whether the editor contents have\n\t\t * been modified since the last syntax check (validation) operation.\n\t\t * \n\t\t * @function\n\t\t * @returns returns {Boolean} whether the flag has been set indicating a syntax check (validation) operation is required\n\t\t */\n\t\t_isSyntaxCheckRequired: function _isSyntaxCheckRequired() {\n\t\t\treturn this._syntaxCheckRequired;\n\t\t},\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_setModelText: function(contents) {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.setText(contents);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the editor's contents.\n\t\t *\n\t\t * @param {String} title the editor title\n\t\t * @param {String} message an error message\n\t\t * @param {String} contents the editor contents\n\t\t * @param {Boolean} contentsSaved whether the editor contents was saved.\n\t\t */\n\t\tsetInput: function(title, message, contents, contentsSaved) {\n\t\t\tthis._title = title;\n\t\t\tif (!contentsSaved) {\n\t\t\t\tif (message) {\n\t\t\t\t\tthis.reportStatus(message, \"error\"); //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tif (contents !== null && contents !== undefined) {\n\t\t\t\t\t\tif (typeof contents === \"string\") { //$NON-NLS-0$\n\t\t\t\t\t\t\tthis._setModelText(contents);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this._undoStack) {\n\t\t\t\t\t\t\tthis._undoStack.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkDirty();\n\t\t\tthis.onInputChanged({\n\t\t\t\ttype: \"InputChanged\", //$NON-NLS-0$\n\t\t\t\ttitle: title,\n\t\t\t\tmessage: message,\n\t\t\t\tcontents: contents,\n\t\t\t\tcontentsSaved: contentsSaved\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The character at the end offset is not replaced.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} text the new text.\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tthis.getModel().setText(text, start, end);\n\t\t},\n\t\t/**\n\t\t * Removes the DOM hierarchy of the editor from the document.\n\t\t */\n\t\tuninstall: function() {\n\t\t\tthis.installed = false;\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(BaseEditor.prototype);\n\n\t/**\n\t * @name orion.editor.Editor\n\t * @augments orion.editor.BaseEditor\n\t * @class An <code>Editor</code> is a user interface for editing text that provides additional features over the basic {@link orion.editor.TextView}.\n\t * Some of <code>Editor</code>'s features include:\n\t * <ul>\n\t * <li>Additional actions and key bindings for editing text</li>\n\t * <li>Content assist</li>\n\t * <li>Find and Incremental Find</li>\n\t * <li>Rulers for displaying line numbers and annotations</li>\n\t * <li>Status reporting</li>\n\t * </ul>\n\t *\n\t * @description Creates a new Editor with the given options.\n\t * @param {Object} options Options controlling the features of this Editor.\n\t * @param {Object} options.annotationFactory\n\t * @param {Object} options.contentAssistFactory\n\t * @param {Object} options.domNode\n\t * @param {Object} options.keyBindingFactory\n\t * @param {Object} options.lineNumberRulerFactory\n\t * @param {Object} options.zoomRulerFactory\n\t * @param {Object} options.foldingRulerFactory\n\t * @param {Object} options.statusReporter\n\t * @param {Object} options.textViewFactory\n\t * @param {Object} options.undoStackFactory\n\t * @param {Object} options.textDNDFactory\n\t * @param {Object} options.hoverFactory\n\t */\n\tfunction Editor(options) {\n\t\toptions = options || {};\n\t\tBaseEditor.call(this, options);\n\t\tthis._textViewFactory = options.textViewFactory;\n\t\tthis._undoStackFactory = options.undoStackFactory;\n\t\tthis._textDNDFactory = options.textDNDFactory;\n\t\tthis._annotationFactory = options.annotationFactory;\n\t\tthis._zoomRulerFactory = options.zoomRulerFactory;\n\t\tthis._foldingRulerFactory = options.foldingRulerFactory;\n\t\tthis._lineNumberRulerFactory = options.lineNumberRulerFactory;\n\t\tthis._contentAssistFactory = options.contentAssistFactory;\n\t\tthis._keyBindingFactory = options.keyBindingFactory;\n\t\tthis._hoverFactory = options.hoverFactory;\n\t\tthis._syntaxHighlighter = options.syntaxHighlighter;\n\t\tthis._annotationStyler = null;\n\t\tthis._annotationModel = null;\n\t\tthis._annotationRuler = null;\n\t\tthis._lineNumberRuler = null;\n\t\tthis._overviewRuler = null;\n\t\tthis._zoomRuler = null;\n\t\tthis._foldingRuler = null;\n\t\tthis._contentAssist = null;\n\t}\n\tEditor.prototype = new BaseEditor();\n\tobjects.mixin(Editor.prototype, /** @lends orion.editor.Editor.prototype */ {\n\t\t/**\n\t\t * Destroys the editor.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tBaseEditor.prototype.destroy.call(this);\n\t\t\tthis._textViewFactory = this._undoStackFactory = this._textDNDFactory = \n\t\t\tthis._annotationFactory = this._foldingRulerFactory = this._lineNumberRulerFactory = \n\t\t\tthis._contentAssistFactory = this._keyBindingFactory = this._hoverFactory = this._zoomRulerFactory = null;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation model of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationModel}\n\t\t */\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationRuler}\n\t\t */\n\t\tgetAnnotationRuler: function() {\n\t\t\treturn this._annotationRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether annotation ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetAnnotationRulerVisible: function() {\n\t\t\treturn this._annotationRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation styler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationStyler}\n\t\t */\n\t\tgetAnnotationStyler: function() {\n\t\t\treturn this._annotationStyler;\n\t\t},\n\t\t/**\n\t\t * Returns the content assist of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetContentAssist: function() {\n\t\t\treturn this._contentAssist;\n\t\t},\n\t\t/**\n\t\t * Returns the folding ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.FoldingRuler}\n\t\t */\n\t\tgetFoldingRuler: function() {\n\t\t\treturn this._foldingRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether folding ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetFoldingRulerVisible: function() {\n\t\t\treturn this._foldingRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Creates and add a FoldingAnnotation to the editor.\n\t\t *\n\t\t * @param {Number} start The start offset of the annotation in the text model.\n\t\t * @param {Number} end The end offset of the annotation in the text model.\n\t\t * @returns {orion.editor.FoldingAnnotation} The FoldingAnnotation added to the editor.\n\t\t */\n\t\taddFoldingAnnotation: function(start, end) {\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tif(annotationModel) {\n\t\t\t\tvar foldingAnnotation = new mAnnotations.FoldingAnnotation(start, end, this.getTextView().getModel());\n\t\t\t\tannotationModel.addAnnotation(foldingAnnotation);\n\t\t\t\treturn foldingAnnotation;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t/**\n\t\t * Returns the line number ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetLineNumberRuler: function() {\n\t\t\treturn this._lineNumberRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether lines ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetLineNumberRulerVisible: function() {\n\t\t\treturn this._lineNumberRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the Tooltip instance for this editor\n\t\t *\n\t\t * @returns {orion.editor.Tooltip}\n\t\t*/\n\t\tgetTooltip: function() {\n\t\t\treturn mTooltip.Tooltip.getTooltip(this._textView, this);\n\t\t},\n\t\t/**\n\t\t * Returns the zoom ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetZoomRuler: function() {\n\t\t\treturn this._zoomRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether zoom ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetZoomRulerVisible: function() {\n\t\t\treturn this._zoomRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the base text model of this editor.\n\t\t *\n\t\t * @returns {orion.editor.TextModel}\n\t\t */\n\t\tgetModel: function() {\n\t\t\tif (!this._textView) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar model = this._textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model;\n\t\t},\n\t\t/**\n\t\t * Returns the overview ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.OverviewRuler}\n\t\t */\n\t\tgetOverviewRuler: function() {\n\t\t\treturn this._overviewRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the underlying <code>TextView</code> used by this editor.\n\t\t * @returns {orion.editor.TextView} the editor text view.\n\t\t */\n\t\tgetTextView: function() {\n\t\t\treturn this._textView;\n\t\t},\n\t\t/**\n\t\t * Returns the editor's key modes.\n\t\t *\n\t\t * @returns {Array} the editor key modes.\n\t\t */\n\t\tgetKeyModes: function() {\n\t\t\treturn this._textView.getKeyModes();\n\t\t},\n\t\t/**\n\t\t * Returns the editor source code actions.\n\t\t *\n\t\t * @returns {orion.editor.sourceCodeActions}\n\t\t */\n\t\tgetSourceCodeActions: function() {\n\t\t\treturn this._sourceCodeActions;\n\t\t},\n\t\t/**\n\t\t * Returns the editor linked mode.\n\t\t *\n\t\t * @returns {orion.editor.LinkedMode}\n\t\t */\n\t\tgetLinkedMode: function() {\n\t\t\treturn this._linkedMode;\n\t\t},\n\t\t/**\n\t\t * Returns the editor text actions.\n\t\t *\n\t\t * @returns {orion.editor.textActions}\n\t\t */\n\t\tgetTextActions: function() {\n\t\t\treturn this._textActions;\n\t\t},\n\t\t/**\n\t\t * Gives focus to the text view.\n\t\t */\n\t\tfocus: function() {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.focus();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Resizes the text view.\n\t\t */\n\t\tresize: function() {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.resize();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the annotation ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetAnnotationRulerVisible: function(visible, force) {\n\t\t\tif (this._annotationRulerVisible === visible && !force) { return; }\n\t\t\tthis._annotationRulerVisible = visible;\n\t\t\tif (!this._annotationRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._annotationRuler, 0);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._annotationRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the folding ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetFoldingRulerVisible: function(visible, force) {\n\t\t\tif (this._foldingRulerVisible === visible && !force) { return; }\n\t\t\tif (!visible) {\n\t\t\t\tvar textActions = this.getTextActions();\n\t\t\t\tif (textActions) {\n\t\t\t\t\ttextActions.expandAnnotations(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._foldingRulerVisible = visible;\n\t\t\tif (!this._foldingRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (!textView.getModel().getBaseModel) { return; }\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._foldingRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._foldingRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the line numbering ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetLineNumberRulerVisible: function(visible, force) {\n\t\t\tif (this._lineNumberRulerVisible === visible && !force) { return; }\n\t\t\tthis._lineNumberRulerVisible = visible;\n\t\t\tif (!this._lineNumberRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._lineNumberRuler, !this._annotationRulerVisible ? 0 : 1);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._lineNumberRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the overview ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetOverviewRulerVisible: function(visible, force) {\n\t\t\tif (this._overviewRulerVisible === visible && !force) { return; }\n\t\t\tthis._overviewRulerVisible = visible;\n\t\t\tif (!this._overviewRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._overviewRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._overviewRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the zoom ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetZoomRulerVisible: function(visible, force) {\n\t\t\tif (this._zoomRulerVisible === visible && !force) { return; }\n\t\t\tthis._zoomRulerVisible = visible;\n\t\t\tif (!this._zoomRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._zoomRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._zoomRuler);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets which annotations types are shown in the annotation ruler.  Annotations are visible by default.\n\t\t * \n\t\t * @param {Object} types a hash table mapping annotation type to visibility (i.e. AnnotationType.ANNOTATION_INFO -> true).\n\t\t * @since 14.0\n\t\t */\n\t\tsetAnnotationTypesVisible: function(types) {\n\t\t\tif (textUtil.compare(this._annotationTypesVisible, types)) return;\n\t\t\tthis._annotationTypesVisible = types;\n\t\t\tif (!this._annotationRuler || !this._textView || !this._annotationRulerVisible) { return; }\n\t\t\tthis._annotationRuler.setAnnotationTypeVisible(types);\n\t\t\tthis._textView.redrawLines(0, undefined, this._annotationRuler);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets which annotations types are shown in the overview ruler.  Annotations are visible by default.\n\t\t * \n\t\t * @param {Object} types a hash table mapping annotation type to visibility (i.e. AnnotationType.ANNOTATION_INFO -> true).\n\t\t * @since 14.0\n\t\t */\n\t\tsetOverviewAnnotationTypesVisible: function(types) {\n\t\t\tif (textUtil.compare(this._overviewAnnotationTypesVisible, types)) return;\n\t\t\tthis._overviewAnnotationTypesVisible = types;\n\t\t\tif (!this._overviewRuler || !this._textView || !this._overviewRulerVisible) { return; }\n\t\t\tthis._overviewRuler.setAnnotationTypeVisible(types);\n\t\t\tthis._textView.redrawLines(0, undefined, this._overviewRuler);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets which annotations types are shown in the text.  Annotations are visible by default.\n\t\t * \n\t\t * @param {Object} types a hash table mapping annotation type to visibility (i.e. AnnotationType.ANNOTATION_INFO -> true).\n\t\t * @since 14.0\n\t\t */\n\t\tsetTextAnnotationTypesVisible: function(types) {\n\t\t\tif (textUtil.compare(this._textAnnotationTypesVisible, types)) return;\n\t\t\tthis._textAnnotationTypesVisible = types;\n\t\t\tif (!this._annotationStyler || !this._textView) { return; }\n\t\t\tthis._annotationStyler.setAnnotationTypeVisible(types);\n\t\t\tthis._textView.redrawLines(0, undefined);\n\t\t},\n\n\t\tmapOffset: function(offset, _parent) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset, _parent);\n\t\t\t}\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * @name getLineAtOffset\n\t\t * @description Returns the line number corresponding to the given offset in the source\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.Editor\n\t\t * @param {Number} offset The offset into the source\n\t\t * @returns {Number} The line number corresponding to the given offset or <code>-1</code> if out of range\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\treturn this.getModel().getLineAtOffset(this.mapOffset(offset));\n\t\t},\n\t\t/**\n\t\t * @name getLineStart\n\t\t * @description Compute the editor start offset of the given line number\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} line The line number in the editor\n\t\t * @returns {Number} Returns the start offset of the given line number in the editor.\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineStart: function(line) {\n\t\t\treturn this.getModel().getLineStart(line);\n\t\t},\n\t\tgetCaretOffset: function() {\n\t\t\treturn this.mapOffset(this._textView.getCaretOffset());\n\t\t},\n\t\t\n\t\t/**\n\t\t * Returns the text view selection text.\n\t\t * <p>\n\t\t * If there are multiple selection ranges, the result is concatenated with the specified delimiter.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} delimiter The offset into the editor\n\t\t * @returns {String} the view selection text\n\t\t * @since 10.0\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelectionText: function(delimiter) {\n\t\t\tvar textView = this._textView;\n\t\t\treturn textView.getSelectionText(delimiter);\n\t\t},\n\t\t\n\t\tgetSelection: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tvar selection = textView.getSelection();\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tselection.start = model.mapOffset(selection.start);\n\t\t\t\tselection.end = model.mapOffset(selection.end);\n\t\t\t}\n\t\t\treturn selection;\n\t\t},\n\n\t\tgetSelections: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tvar selections = textView.getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tselection.start = model.mapOffset(selection.start);\n\t\t\t\t\tselection.end = model.mapOffset(selection.end);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn selections;\n\t\t},\n\n\t\tgetStyleAccessor: function() {\n\t\t\tvar styleAccessor = null;\n\t\t\tif (this._syntaxHighlighter) {\n\t\t\t\tvar styler = this._syntaxHighlighter.getStyler();\n\t\t\t\tif (styler && styler.getStyleAccessor) {\n\t\t\t\t\tstyleAccessor = styler.getStyleAccessor();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn styleAccessor;\n\t\t},\n\n\t\t_expandOffset: function(offset) {\n\t\t\tvar model = this._textView.getModel();\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel || !model.getBaseModel) { return; }\n\t\t\tvar annotations = annotationModel.getAnnotations(offset, offset + 1);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation.type === AT.ANNOTATION_FOLDING) {\n\t\t\t\t\tif (annotation.expand) {\n\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetCaretOffset: function(caretOffset, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tthis._expandOffset(caretOffset);\n\t\t\t\tcaretOffset = model.mapOffset(caretOffset, true);\n\t\t\t}\n\t\t\ttextView.setCaretOffset(caretOffset, show, callback);\n\t\t},\n\n\t\tsetText: function(text, start, end, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tif (start !== undefined) {\n\t\t\t\t\tthis._expandOffset(start);\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t}\n\t\t\t\tif (end !== undefined) {\n\t\t\t\t\tthis._expandOffset(end);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttextView.setText(text, start, end, show, callback);\n\t\t},\n\n\t\tsetSelection: function(start, end, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tthis._expandOffset(start);\n\t\t\t\tthis._expandOffset(end);\n\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t}\n\t\t\ttextView.setSelection(start, end, show, callback);\n\t\t},\n\t\tsetSelections: function(ranges, show, callback) {\n\t\t\tvar that = this;\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tranges.forEach(function(range) {\n\t\t\t\tvar start = range.start;\n\t\t\t\tvar end = range.end;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tthat._expandOffset(start);\n\t\t\t\t\tthat._expandOffset(end);\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\trange.start = start;\n\t\t\t\trange.end = end;\n\t\t\t});\n\t\t\ttextView.setSelections(ranges, show, callback);\n\t\t},\n\n\t\t/**\n\t\t * @param {Number} start\n\t\t * @param {Number} [end]\n\t\t * @param {function} [callback] if callback is specified, scrolling to show the selection is animated and callback is called when the animation is done.\n\t\t * @param {Boolean} [focused=true] whether the text view should be focused when the selection is done.\n\t\t * @private\n\t\t * @deprecated use #setSelection instead\n\t\t */\n\t\tmoveSelection: function(start, end, callback, focused) {\n\t\t\tend = end || start;\n\t\t\tvar textView = this._textView;\n\t\t\tthis.setSelection(start, end, 1 / 3, function() {\n\t\t\t\tif (focused === undefined || focused) {\n\t\t\t\t\ttextView.focus();\n\t\t\t\t}\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/** @private */\n\t\t_getTooltipInfo: function(x, y) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tif (!annotationModel) { return null; }\n\t\t\tvar annotationStyler = this._annotationStyler;\n\t\t\tif (!annotationStyler) { return null; }\n\t\t\tif (!textView.isValidTextPosition(x, y)) { return null; }\n\t\t\tvar offset = textView.getOffsetAtLocation(x, y);\n\t\t\tif (offset === -1) { return null; }\n\t\t\toffset = this.mapOffset(offset);\n\t\t\tvar annotations = annotationStyler.getAnnotationsByType(annotationModel, offset, offset + 1);\n\t\t\tvar rangeAnnotations = [];\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tif (annotations[i].rangeStyle) {\n\t\t\t\t\trangeAnnotations.push(annotations[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar info = {\n\t\t\t\tcontents: rangeAnnotations,\n\t\t\t\tposition: \"below\", //$NON-NLS-0$\n\t\t\t\tcontext: {source: \"editor\", offset: offset} //$NON-NLS-0$\n\t\t\t};\n\t\t\treturn info;\n\t\t},\n\n\t\t/** @private */\n\t\t_highlightCurrentLine: function(newSelections, oldSelections) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (textView.getOptions(\"singleMode\")) { return; } //$NON-NLS-0$\n\t\t\toldSelections = Array.isArray(oldSelections) ? oldSelections : [oldSelections];\n\t\t\tnewSelections = Array.isArray(newSelections) ? newSelections : [newSelections];\n\t\t\tvar model = textView.getModel();\n\t\t\tfunction getHighlightLines(selections) {\n\t\t\t\tvar lines = {};\n\t\t\t\tif (selections && selections.some(function(selection) {\n\t\t\t\t\tif (selection && selection.isEmpty()) {\n\t\t\t\t\t\tlines[model.getLineAtOffset(selection.start).toString()] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t})) return {};\n\t\t\t\treturn lines;\n\t\t\t}\n\t\t\tvar oldLines = getHighlightLines(oldSelections);\n\t\t\tvar newLines = getHighlightLines(newSelections);\n\t\t\tfunction compare(o, n) {\n\t\t\t\tfor (var p1 in o) {\n\t\t\t\t\tif (!n[p1]) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!(compare(oldLines, newLines) || compare(newLines, oldLines))) return;\n\t\t\tvar remove = this._currentLineAnnotations;\n\t\t\tvar add = [];\n\t\t\tfor (var p in newLines) {\n\t\t\t\tvar lineIndex = p >> 0;\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tvar type = AT.ANNOTATION_CURRENT_LINE;\n\t\t\t\tvar annotation = AT.createAnnotation(type, start, end);\n\t\t\t\tadd.push(annotation);\n\t\t\t}\n\t\t\tthis._currentLineAnnotations = add;\n\t\t\tannotationModel.replaceAnnotations(remove, add);\n\t\t},\n\n\t\t/**\n\t\t * Creates the underlying TextView and installs the editor's features.\n\t\t */\n\t\tinstallTextView: function() {\n\t\t\tthis.install();\n\t\t},\n\n\t\tinstall : function() {\n\t\t\tif (this._textView) { return; }\n\n\t\t\t// Create textView and install optional features\n\t\t\tthis._textView = this._textViewFactory();\n\t\t\tif (this._undoStackFactory) {\n\t\t\t\tthis._undoStack = this._undoStackFactory.createUndoStack(this);\n\t\t\t\tthis._textView.setOptions({undoStack: this._undoStack});\n\t\t\t\tthis.checkDirty();\n\t\t\t}\n\t\t\tif (this._textDNDFactory) {\n\t\t\t\tthis._textDND = this._textDNDFactory.createTextDND(this, this._undoStack);\n\t\t\t}\n\t\t\tif (this._contentAssistFactory) {\n\t\t\t\tvar contentAssistMode = this._contentAssistFactory.createContentAssistMode(this);\n\t\t\t\tthis._contentAssist = contentAssistMode.getContentAssist();\n\t\t\t}\n\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._textView, this);\n\t\t\tif (this._hoverFactory) {\n\t\t\t\tthis._hover = this._hoverFactory.createHover(this);\n\t\t\t\ttooltip.hover = this._hover;\n\t\t\t}\n\t\t\t\n\t\t\tvar editor = this, textView = this._textView;\n\n\t\t\tvar that = this;\n\t\t\tthis._listener = {\n\t\t\t\tonModelChanged: /* @callback */ function(e) {\n\t\t\t\t\tthat.checkDirty();\n\t\t\t\t},\n\t\t\t\tonMouseOver: function(e) {\n\t\t\t\t\tthat._listener.onMouseMove(e);\n\t\t\t\t},\n\t\t\t\tonMouseDown: /* @callback */ function(e) {\n\t\t\t\t\tthat._listener.mouseDown = true;\n\t\t\t\t},\n\t\t\t\tonMouseUp: /* @callback */ function(e) {\n\t\t\t\t\tthat._listener.mouseDown = false;\n\t\t\t\t},\n\t\t\t\tonMouseMove: function(e) {\n\t\t\t\t\tif (!tooltip || that._listener.mouseDown) { return; }\n\n\t\t\t\t\t// Prevent spurious mouse event (e.g. on a scroll)\t\t\t\t\t\n\t\t\t\t\tif (e.event.clientX === that._listener.lastMouseX\n\t\t\t\t\t\t&& e.event.clientY === that._listener.lastMouseY) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthat._listener.lastMouseX = e.event.clientX;\n\t\t\t\t\tthat._listener.lastMouseY = e.event.clientY;\n\n\t\t\t\t\tif (that._hoverTimeout) {\n\t\t\t\t\t\twindow.clearTimeout(that._hoverTimeout);\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t}\n\t\t\t\t\tthat._hoverTimeout = window.setTimeout(function() {\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Re-check incase editor closed...\n\t\t\t\t\t\tif (!that._listener){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttooltip.onHover({\n\t\t\t\t\t\t\ty: e.y,\n\t\t\t\t\t\t\tx: e.x,\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tgetTooltipInfo: function() {\n\t\t\t\t\t\t\t\treturn that._getTooltipInfo(this.x, this.y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, e.x, e.y);\n\t\t\t\t\t}, 175);\n\t\t\t\t},\n\t\t\t\tonMouseOut: /* @callback */ function(e) {\n\t\t\t\t\t// When mouse leaves the editor, ignore any pending onMouseMove events\n\t\t\t\t\tif (that._hoverTimeout) {\n\t\t\t\t\t\twindow.clearTimeout(that._hoverTimeout);\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSelection: function(e) {\n\t\t\t\t\tif (tooltip) { tooltip.hide(); }\n\t\t\t\t\tthat._updateCursorStatus();\n\t\t\t\t\tthat._highlightCurrentLine(e.newValue, e.oldValue);\n\t\t\t\t}\n\t\t\t};\n\t\t\ttextView.addEventListener(\"ModelChanged\", this._listener.onModelChanged); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseOver\", this._listener.onMouseOver); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseOut\", this._listener.onMouseOut); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseUp\", this._listener.onMouseUp); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseMove\", this._listener.onMouseMove); //$NON-NLS-0$\n\n\t\t\t// Set up keybindings\n\t\t\tif (this._keyBindingFactory) {\n\t\t\t\tvar keyBindings;\n\t\t\t\tif (typeof this._keyBindingFactory === \"function\") { //$NON-NLS-0$\n\t\t\t\t\tkeyBindings = this._keyBindingFactory(this, this.getKeyModes(), this._undoStack, this._contentAssist);\n\t\t\t\t} else {\n\t\t\t\t\tkeyBindings = this._keyBindingFactory.createKeyBindings(editor, this._undoStack, this._contentAssist);\n\t\t\t\t}\n\t\t\t\tif (keyBindings) {\n\t\t\t\t\tthis._textActions = keyBindings.textActions;\n\t\t\t\t\tthis._linkedMode = keyBindings.linkedMode;\n\t\t\t\t\tthis._sourceCodeActions = keyBindings.sourceCodeActions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar addRemoveBookmark = /* @callback */ function(lineIndex, e) {\n\t\t\t\tif (lineIndex === undefined) { return; }\n\t\t\t\tif (lineIndex === -1) { return; }\n\t\t\t\tvar view = this.getView();\n\t\t\t\tvar viewModel = view.getModel();\n\t\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\t\tvar lineStart = editor.mapOffset(viewModel.getLineStart(lineIndex));\n\t\t\t\tvar lineEnd = editor.mapOffset(viewModel.getLineEnd(lineIndex));\n\t\t\t\tvar annotations = annotationModel.getAnnotations(lineStart, lineEnd);\n\t\t\t\tvar bookmark = null;\n\t\t\t\twhile (annotations.hasNext()) {\n\t\t\t\t\tvar annotation = annotations.next();\n\t\t\t\t\tif (annotation.type === AT.ANNOTATION_BOOKMARK) {\n\t\t\t\t\t\tbookmark = annotation;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bookmark) {\n\t\t\t\t\tannotationModel.removeAnnotation(bookmark);\n\t\t\t\t} else {\n\t\t\t\t\tbookmark = AT.createAnnotation(AT.ANNOTATION_BOOKMARK, lineStart, lineEnd, editor.getText(lineStart, lineEnd));\n\t\t\t\t\tannotationModel.addAnnotation(bookmark);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Create rulers, annotation model and styler\n\t\t\tif (this._annotationFactory) {\n\t\t\t\tvar textModel = textView.getModel();\n\t\t\t\tif (textModel.getBaseModel) { textModel = textModel.getBaseModel(); }\n\t\t\t\tthis._annotationModel = this._annotationFactory.createAnnotationModel(textModel);\n\t\t\t\tif (this._annotationModel) {\n\t\t\t\t\tvar styler = this._annotationStyler = this._annotationFactory.createAnnotationStyler(textView, this._annotationModel);\n\t\t\t\t\tif (styler) {\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_SEARCH);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_MATCHING_SEARCH);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_SEARCH_RANGE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_INFO);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_MATCHING_BRACKET);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_BRACKET);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_LINE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_READ_OCCURRENCE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_WRITE_OCCURRENCE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_SELECTED_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(HIGHLIGHT_ERROR_ANNOTATION);\n\n\t\t\t\t\t\tstyler.setAnnotationTypeVisible(this._textAnnotationTypesVisible);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar rulers = this._annotationFactory.createAnnotationRulers(this._annotationModel);\n\t\t\t\tvar ruler = this._annotationRuler = rulers.annotationRuler;\n\t\t\t\tif (ruler) {\n\t\t\t\t\truler.onDblClick = addRemoveBookmark;\n\t\t\t\t\truler.setMultiAnnotationOverlay({html: \"<div class='annotationHTML overlay'></div>\"}); //$NON-NLS-0$\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_INFO);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_TASK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BOOKMARK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t\t\t\t\n\t\t\t\t\truler.setAnnotationTypeVisible(this._annotationTypesVisible);\n\t\t\t\t}\n\t\t\t\tthis.setAnnotationRulerVisible(this._annotationRulerVisible || this._annotationRulerVisible === undefined, true);\n\n\t\t\t\t// Overview Ruler Annotation Type\n\t\t\t\truler = this._overviewRuler = rulers.overviewRuler;\n\t\t\t\tif (ruler) {\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_SEARCH);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_MATCHING_SEARCH);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_READ_OCCURRENCE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WRITE_OCCURRENCE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_BLAME);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_INFO);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_TASK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BOOKMARK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_MATCHING_BRACKET);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_BRACKET);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_LINE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t\t\t\t\n\t\t\t\t\truler.setAnnotationTypeVisible(this._overviewAnnotationTypesVisible);\n\t\t\t\t}\n\t\t\t\tthis.setOverviewRulerVisible(this._overviewRulerVisible || this._overviewRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tif (this._zoomRulerFactory) {\n\t\t\t\tthis._zoomRuler = this._zoomRulerFactory.createZoomRuler(this._annotationModel);\n\t\t\t\tthis.setZoomRulerVisible(this._zoomRulerVisible, true);\n\t\t\t}\n\n\t\t\tif (this._lineNumberRulerFactory) {\n\t\t\t\tthis._lineNumberRuler = this._lineNumberRulerFactory.createLineNumberRuler(this._annotationModel);\n\t\t\t\tthis._lineNumberRuler.addAnnotationType(AT.ANNOTATION_CURRENT_BLAME);\n\t\t\t\tthis._lineNumberRuler.addAnnotationType(AT.ANNOTATION_BLAME);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\tthis._lineNumberRuler.onDblClick = addRemoveBookmark;\n\t\t\t\tthis.setLineNumberRulerVisible(this._lineNumberRulerVisible || this._lineNumberRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tif (this._foldingRulerFactory) {\n\t\t\t\tthis._foldingRuler = this._foldingRulerFactory.createFoldingRuler(this._annotationModel);\n\t\t\t\tthis._foldingRuler.addAnnotationType(AT.ANNOTATION_FOLDING);\n\t\t\t\tthis.setFoldingRulerVisible(this._foldingRulerVisible || this._foldingRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tvar textViewInstalledEvent = {\n\t\t\t\ttype: \"TextViewInstalled\", //$NON-NLS-0$\n\t\t\t\ttextView: textView\n\t\t\t};\n\t\t\tthis.dispatchEvent(textViewInstalledEvent);\n\t\t\tBaseEditor.prototype.install.call(this);\n\t\t},\n\n\t\t/**\n\t\t * Destroys the underlying TextView.\n\t\t */\n\t\tuninstallTextView: function() {\n\t\t\tthis.uninstall();\n\t\t},\n\n\t\tuninstall: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tif (!textView) { return; }\n\n\t\t\ttextView.destroy();\n\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.setTextModel(null);\n\t\t\t}\n\t\t\tthis._textView = this._undoStack = this._textDND = this._contentAssist =\n\t\t\t\tthis._listener = this._annotationModel = this._annotationStyler =\n\t\t\t\tthis._annotationRuler = this._overviewRuler = this._zoomRuler = this._lineNumberRuler =\n\t\t\t\tthis._foldingRuler = this._currentLineAnnotations = this._title = null;\n\t\t\tthis._dirty = false;\n\t\t\tthis._foldingRulerVisible = this._overviewRulerVisible = this._zoomRulerVisible =\n\t\t\t\tthis._lineNumberRulerVisible = this._annotationRulerVisible = undefined;\n\n\t\t\tvar textViewUninstalledEvent = {\n\t\t\t\ttype: \"TextViewUninstalled\", //$NON-NLS-0$\n\t\t\t\ttextView: textView\n\t\t\t};\n\t\t\tthis.dispatchEvent(textViewUninstalledEvent);\n\t\t\tBaseEditor.prototype.uninstall.call(this);\n\t\t},\n\n\t\t_updateCursorStatus: function() {\n\t\t\t// If we are in a mode and it owns status reporting, we bail out from reporting the cursor position.\n\t\t\tvar keyModes = this.getKeyModes();\n\t\t\tfor (var i=0; i<keyModes.length; i++) {\n\t\t\t\tvar mode = keyModes[i];\n\t\t\t\tif (mode.isActive() && mode.isStatusActive && mode.isStatusActive()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar _status;\n\t\t\tvar model = this.getModel();\n\t\t\tvar selections = this.getSelections();\n\t\t\tif (selections.length > 1) {\n\t\t\t\t_status = util.formatMessage(messages.multiSelections, selections.length);\n\t\t\t} else {\n\t\t\t\tvar caretOffset = selections[0].getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caretOffset);\n\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\tvar offsetInLine = caretOffset - lineStart;\n\t\t\t\tif (localStorage.languageTools){\n\t\t\t\t\t_status = util.formatMessage(messages.lineColumnOffset, lineIndex + 1, offsetInLine + 1, caretOffset);\n\t\t\t\t} else {\n\t\t\t\t\t_status = util.formatMessage(messages.lineColumn, lineIndex + 1, offsetInLine + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.reportStatus(_status);\n\t\t},\n\n\t\tshowAnnotations: function(annotations, types, createAnnotation, getType) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar remove = [], add = [];\n\t\t\tvar model = annotationModel.getTextModel();\n\t\t\tvar iter = annotationModel.getAnnotations(), annotation;\n\t\t\twhile (iter.hasNext()) {\n\t\t\t\tannotation = iter.next();\n\t\t\t\tif (types.indexOf(annotation.type) !== -1) {\n\t\t\t\t\tif (annotation.creatorID === this) {\n\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (annotations) {\n\t\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\t\tannotation = annotations[i];\n\t\t\t\t\tif (!annotation) { continue; }\n\t\t\t\t\tif (createAnnotation) {\n\t\t\t\t\t\tannotation = createAnnotation(annotation);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar start, end;\n\t\t\t\t\t\tif (annotation.lineStart && annotation.lineEnd){\n\t\t\t\t\t\t\tstart = model.getLineStart(annotation.lineStart);\n\t\t\t\t\t\t\t// If the closing line number of the modified range is on the last line,\n\t\t\t\t\t\t\t// get the line ending offset of the previous line\n\t\t\t\t\t\t\tend = model.getLineCount() === annotation.lineEnd\n\t\t\t\t\t\t\t\t\t\t? model.getLineEnd(annotation.lineEnd - 1)\n\t\t\t\t\t\t\t\t\t\t: model.getLineStart(annotation.lineEnd);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof annotation.line === \"number\") { //$NON-NLS-0$\n\t\t\t\t\t\t\t// line/column\n\t\t\t\t\t\t\tvar lineIndex = annotation.line - 1;\n\t\t\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tstart = lineStart + annotation.start - 1;\n\t\t\t\t\t\t\tend = lineStart + annotation.end - 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// document offsets\n\t\t\t\t\t\t\tstart = annotation.start;\n\t\t\t\t\t\t\tend = annotation.end;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar type = getType(annotation);\n\t\t\t\t\t\tif (!type) { continue; }\n\t\t\t\t\t\tannotation = AT.createAnnotation(type, start, end, annotation.description);\n\t\t\t\t\t}\n\t\t\t\t\tannotation.id = annotations[i].id; //allow consumers to tag the annotation with their own identifier\n\t\t\t\t\tif(annotations[i].data) {\n\t\t\t\t\t\tannotation.data = annotations[i].data;\n\t\t\t\t\t}\n\t\t\t\t\tannotation.creatorID = this;\n\t\t\t\t\tadd.push(annotation);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations(remove, add);\n\t\t},\n\n\t\tshowProblems: function(problems) {\n\t\t\tthis.showAnnotations(problems, [\n\t\t\t\tAT.ANNOTATION_ERROR,\n\t\t\t\tAT.ANNOTATION_WARNING,\n\t\t\t\tAT.ANNOTATION_TASK,\n\t\t\t\tAT.ANNOTATION_INFO\n\t\t\t], null, function(annotation) {\n\t\t\t\tswitch (annotation.severity) {\n\t\t\t\t\tcase \"error\": return AT.ANNOTATION_ERROR; //$NON-NLS-0$\n\t\t\t\t\tcase \"warning\": return AT.ANNOTATION_WARNING; //$NON-NLS-0$\n\t\t\t\t\tcase \"task\": return AT.ANNOTATION_TASK; //$NON-NLS-0$\n\t\t\t\t\tcase \"info\": return AT.ANNOTATION_INFO;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t});\n\t\t},\n\n\t\tshowOccurrences: function(occurrences) {\n\t\t\tthis.showAnnotations(occurrences, [\n\t\t\t\tAT.ANNOTATION_READ_OCCURRENCE,\n\t\t\t\tAT.ANNOTATION_WRITE_OCCURRENCE\n\t\t\t], null, function(annotation) {\n\t\t\t\treturn annotation.readAccess ? AT.ANNOTATION_READ_OCCURRENCE : AT.ANNOTATION_WRITE_OCCURRENCE;\n\t\t\t});\n\t\t},\n\n\t\tshowBlame : function(blameMarkers) {\n\t\t\tvar blameRGB = this._blameRGB;\n\t\t\tvar doc = this.getTextView().getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\n\t\t\tif (!blameRGB) {\n\t\t\t\tvar div = util.createElement(doc, \"div\"); //$NON-NLS-0$\n\t\t\t\tdiv.className = \"annotation blame\"; //$NON-NLS-0$\n\t\t\t\tdoc.body.appendChild(div);\n\t\t\t\tvar win = doc.defaultView || doc.parentWindow;\n\t\t\t\tvar blameStyle = win.getComputedStyle(div);\n\t\t\t\tvar color = blameStyle.getPropertyValue(\"background-color\"); //$NON-NLS-0$\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tvar i1 = color.indexOf(\"(\"); //$NON-NLS-0$\n\t\t\t\tvar i2 = color.indexOf(\")\"); //$NON-NLS-0$\n\t\t\t\tcolor = color.substring(i1 + 1, i2);\n\t\t\t\tthis._blameRGB = blameRGB = color.split(\",\").slice(0,3); //$NON-NLS-0$\n\t\t\t}\n\t\t\tvar createGroup = function() {\n\t\t\t\tvar annotation = mAnnotations.AnnotationType.createAnnotation(this.groupType, this.start, this.end, this.title);\n\t\t\t\tannotation.style = objects.mixin({}, annotation.style);\n\t\t\t\tannotation.style.style = objects.mixin({}, annotation.style.style);\n\t\t\t\tannotation.style.style.backgroundColor = \"\";\n\t\t\t\tthis.groupAnnotation = annotation;\n\t\t\t\tannotation.blame = this.blame;\n\t\t\t\tannotation.html = this.html;\n\t\t\t\tannotation.creatorID = this.creatorID;\n\t\t\t\treturn annotation;\n\t\t\t};\n\t\t\tvar title = function() {\n\t\t\t\tvar titleDiv = util.createElement(doc, \"div\"); //$NON-NLS-0$\n\t\t\t\ttitleDiv.className = \"tooltipTitle\"; //$NON-NLS-0$\n\t\t\t\tvar index = this.blame.Message.indexOf(\"\\n\"); //$NON-NLS-0$\n\t\t\t\tif (index === -1) { index = this.blame.Message.length; }\n\t\t\t\tvar commitLink = util.createElement(doc, \"a\"); //$NON-NLS-0$\n\t\t\t\tcommitLink.href = this.blame.CommitLink;\n\t\t\t\tif(util.isElectron){\n\t\t\t\t\tcommitLink.target = \"_blank\";\n\t\t\t\t}\n\t\t\t\tcommitLink.appendChild(doc.createTextNode(this.blame.Message.substring(0, index)));\n\t\t\t\ttitleDiv.appendChild(commitLink);\n\t\t\t\ttitleDiv.appendChild(util.createElement(doc, \"br\")); //$NON-NLS-0$\n\t\t\t\ttitleDiv.appendChild(doc.createTextNode(util.formatMessage(messages.committerOnTime, this.blame.AuthorName, this.blame.Time)));\n\t\t\t\treturn titleDiv;\n\t\t\t};\n\t\t\tvar model = this.getModel();\n\t\t\tthis.showAnnotations(blameMarkers, [\n\t\t\t\tAT.ANNOTATION_BLAME,\n\t\t\t\tAT.ANNOTATION_CURRENT_BLAME\n\t\t\t], function (blameMarker) {\n\t\t\t\tvar start = model.getLineStart(blameMarker.Start - 1);\n\t\t\t\tvar end = model.getLineEnd(blameMarker.End - 1, true);\n\t\t\t\tvar annotation = mAnnotations.AnnotationType.createAnnotation(AT.ANNOTATION_BLAME, start, end, title);\n\t\t\t\tvar blameColor = blameRGB.slice(0);\n\t\t\t\tblameColor.push(blameMarker.Shade);\n\t\t\t\tannotation.style = objects.mixin({}, annotation.style);\n\t\t\t\tannotation.style.style = objects.mixin({}, annotation.style.style);\n\t\t\t\tannotation.style.style.backgroundColor = \"rgba(\" + blameColor.join() + \")\"; //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t\tannotation.groupId = blameMarker.Name;\n\t\t\t\tannotation.groupType = AT.ANNOTATION_CURRENT_BLAME;\n\t\t\t\tannotation.createGroupAnnotation = createGroup;\n\t\t\t\tannotation.html = '<img class=\"annotationHTML blame\" src=\"' + blameMarker.AuthorImage + '\"/>'; //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t\tannotation.blame = blameMarker;\n\t\t\t\treturn annotation;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Display git diff annotation on the editor's annotation ruler and overview ruler.\n\t\t *\n\t\t * @param diffs [] with types \"added\", \"modified\", \"deleted\"\n\t\t * \t\tEach property in diffs contains an array of objects { lineStart, lineEnd } that\n\t\t * \t\tprovides the starting and ending line index for the specified property.\n\t\t */\n\t\tshowDiffAnnotations: function(diffs) {\n\t\t\tthis.showAnnotations(diffs, [\n\t\t\t\tAT.ANNOTATION_DIFF_ADDED,\n\t\t\t\tAT.ANNOTATION_DIFF_MODIFIED,\n\t\t\t\tAT.ANNOTATION_DIFF_DELETED\n\t\t\t], null, function(annotation) {\n\t\t\t\tif(annotation.type === \"added\")//$NON-NLS-0$\n\t\t\t\t\treturn AT.ANNOTATION_DIFF_ADDED;\n\t\t\t\telse if (annotation.type === \"modified\")//$NON-NLS-0$\n\t\t\t\t\treturn AT.ANNOTATION_DIFF_MODIFIED;\n\t\t\t\treturn AT.ANNOTATION_DIFF_DELETED; // assume deleted if not added or modified\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Reveals and selects a portion of text.\n\t\t * @param {Number} start\n\t\t * @param {Number} end\n\t\t * @param {Number} line\n\t\t * @param {Number} offset\n\t\t * @param {Number} length\n\t\t */\n\t\tshowSelection: function(start, end, line, offset, len) {\n\t\t\t// We use typeof because we need to distinguish the number 0 from an undefined or null parameter\n\t\t\tif (typeof(start) === \"number\") { //$NON-NLS-0$\n\t\t\t\tif (typeof(end) !== \"number\") { //$NON-NLS-0$\n\t\t\t\t\tend = start;\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(start, end);\n\t\t\t\treturn true;\n\t\t\t} else if (typeof(line) === \"number\") { //$NON-NLS-0$\n\t\t\t\tvar model = this.getModel();\n\t\t\t\tvar pos = model.getLineStart(line-1);\n\t\t\t\tif (typeof(offset) === \"number\") { //$NON-NLS-0$\n\t\t\t\t\tpos = pos + offset;\n\t\t\t\t}\n\t\t\t\tif (typeof(len) !== \"number\") { //$NON-NLS-0$\n\t\t\t\t\tlen = 0;\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(pos, pos+len);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_setModelText: function(contents) {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.setText(contents);\n\t\t\t\tthis._textView.getModel().setLineDelimiter(\"auto\"); //$NON-NLS-0$\n\t\t\t\tthis._highlightCurrentLine(this._textView.getSelections());\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets the editor's noFocus flag.\n\t\t *\n\t\t * @param {Boolean} if true, does not set focus on the editor.\n\t\t * @param {Boolean} noFocus\n\t\t */\n\t\tsetNoFocus: function(noFocus) {\n\t\t\tthis._noFocus = noFocus;\n\t\t},\n\t\t/**\n\t\t * Sets the editor's contents.\n\t\t *\n\t\t * @param {String} title\n\t\t * @param {String} message\n\t\t * @param {String} contents\n\t\t * @param {Boolean} contentsSaved\n\t\t * @param {Boolean} noFocus\n\t\t */\n\t\tsetInput: function(title, message, contents, contentsSaved, noFocus) {\n\t\t\tBaseEditor.prototype.setInput.call(this, title, message, contents, contentsSaved);\n\t\t\tif (this._textView && !contentsSaved && !noFocus && !this._noFocus) {\n\t\t\t\tthis._textView.focus();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Reveals a line in the editor, and optionally selects a portion of the line.\n\t\t * @param {Number} line - document base line index\n\t\t * @param {Number|String} column\n\t\t * @param {Number} [end]\n\t\t */\n\t\tonGotoLine: function(line, column, end, callback) {\n\t\t\tif (this._textView) {\n\t\t\t\tvar model = this.getModel();\n\t\t\t\tline = Math.max(0, Math.min(line, model.getLineCount() - 1));\n\t\t\t\tvar lineStart = model.getLineStart(line);\n\t\t\t\tvar start = 0;\n\t\t\t\tif (end === undefined) {\n\t\t\t\t\tend = 0;\n\t\t\t\t}\n\t\t\t\tif (typeof column === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tvar index = model.getLine(line).indexOf(column);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tstart = index;\n\t\t\t\t\t\tend = start + column.length;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstart = column;\n\t\t\t\t\tvar lineLength = model.getLineEnd(line) - lineStart;\n\t\t\t\t\tstart = Math.min(start, lineLength);\n\t\t\t\t\tend = Math.min(end, lineLength);\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(lineStart + start, lineStart + end, callback);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tBaseEditor: BaseEditor,\n\t\tEditor: Editor\n\t};\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/find\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/keyModes', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/regex', //$NON-NLS-0$\r\n\t'orion/objects', //$NON-NLS-0$\r\n\t'orion/Deferred', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mKeyModes, mAnnotations, mRegex, objects, Deferred, util) {\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction IncrementalFind(editor) {\r\n\t\tvar textView = editor.getTextView();\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.editor = editor;\r\n\t\tthis._active = false;\r\n\t\tthis._success = true;\r\n\t\tthis._ignoreSelection = false;\r\n\t\tthis._prefix = \"\";\r\n\t\t\r\n\t\ttextView.setAction(\"incrementalFindCancel\", function() { //$NON-NLS-0$\r\n\t\t\tthis.setActive(false);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"incrementalFindBackspace\", function() { //$NON-NLS-0$\r\n\t\t\treturn this._backspace();\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis._listener = {\r\n\t\t\tonVerify: function(e){\r\n\t\t\t\tvar editor = self.editor;\r\n\t\t\t\tvar model = editor.getModel();\r\n\t\t\t\tvar start = editor.mapOffset(e.start), end = editor.mapOffset(e.end);\r\n\t\t\t\tvar txt = model.getText(start, end);\r\n\t\t\t\tvar prefix = self._prefix;\r\n\t\t\t\t// TODO: mRegex is pulled in just for this one call so we can get case-insensitive search\r\n\t\t\t\t// is it really necessary\r\n\t\t\t\tvar match = prefix.match(new RegExp(\"^\" + mRegex.escape(txt), \"i\")); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tif (match && match.length > 0) {\r\n\t\t\t\t\tprefix = self._prefix += e.text;\r\n\t\t\t\t\tself._success = true;\r\n\t\t\t\t\tself._status();\r\n\t\t\t\t\tself.find(self._forward, true);\r\n\t\t\t\t\te.text = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonSelection: function() {\r\n\t\t\t\tif (!self._ignoreSelection) {\r\n\t\t\t\t\tself.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tIncrementalFind.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(IncrementalFind.prototype, {\r\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"incrementalFindBackspace\", keyBinding: new KeyBinding(8)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindCancel\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindReverse\", keyBinding: new KeyBinding(38)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFind\", keyBinding: new KeyBinding(40)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindReverse\", keyBinding: new KeyBinding('k', true, true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFind\", keyBinding: new KeyBinding('k', true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\tfind: function(forward, incremental) {\r\n\t\t\tthis._forward = forward;\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\tthis.setActive(true);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar prefix = this._prefix;\r\n\t\t\tif (prefix.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar start;\r\n\t\t\tif (forward) {\r\n\t\t\t\tif (this._success) {\r\n\t\t\t\t\tstart = incremental ? this._start : editor.getCaretOffset() + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this._success) {\r\n\t\t\t\t\tstart = incremental ? this._start : editor.getCaretOffset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = model.getCharCount() - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tDeferred.when(editor.getModel().find({\r\n\t\t\t\tstring: prefix,\r\n\t\t\t\tstart: start,\r\n\t\t\t\treverse: !forward,\r\n\t\t\t\tcaseInsensitive: prefix.toLowerCase() === prefix}), \r\n\t\t\t\tfunction(iterator) {\r\n\t\t\t\t\tvar findResult = iterator.next();\r\n\t\t\t\t\tif (findResult) {\r\n\t\t\t\t\t\tif (!incremental) {\r\n\t\t\t\t\t\t\tthis._start = start;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._success = true;\r\n\t\t\t\t\t\tthis._ignoreSelection = true;\r\n\t\t\t\t\t\teditor.moveSelection(forward ? findResult.start : findResult.end, forward ? findResult.end : findResult.start);\r\n\t\t\t\t\t\tthis._ignoreSelection = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._success = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._status();\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisActive: function() {\r\n\t\t\treturn this._active;\r\n\t\t},\r\n\t\tisStatusActive: function() {\r\n\t\t\treturn this.isActive();\r\n\t\t},\r\n\t\tsetActive: function(active) {\r\n\t\t\tif (this._active === active) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._active = active;\r\n\t\t\tthis._prefix = \"\";\r\n\t\t\tthis._success = true;\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tthis._start = this.editor.getCaretOffset();\r\n\t\t\tthis.editor.setCaretOffset(this._start);\r\n\t\t\tif (this._active) {\r\n\t\t\t\ttextView.addEventListener(\"Verify\", this._listener.onVerify); //$NON-NLS-0$\r\n\t\t\t\ttextView.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\r\n\t\t\t\ttextView.addKeyMode(this);\r\n\t\t\t} else {\r\n\t\t\t\ttextView.removeEventListener(\"Verify\", this._listener.onVerify); //$NON-NLS-0$\r\n\t\t\t\ttextView.removeEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\r\n\t\t\t\ttextView.removeKeyMode(this);\r\n\t\t\t}\r\n\t\t\tthis._status();\r\n\t\t},\r\n\t\t_backspace: function() {\r\n\t\t\tvar prefix = this._prefix;\r\n\t\t\tprefix = this._prefix = prefix.substring(0, prefix.length-1);\r\n\t\t\tif (prefix.length === 0) {\r\n\t\t\t\tthis._success = true;\r\n\t\t\t\tthis._ignoreSelection = true;\r\n\t\t\t\tthis.editor.setCaretOffset(this.editor.getSelection().start);\r\n\t\t\t\tthis._ignoreSelection = false;\r\n\t\t\t\tthis._status();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn this.find(this._forward, true);\r\n\t\t},\r\n\t\t_status: function() {\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\tthis.editor.reportStatus(\"\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar msg;\r\n\t\t\tif (this._forward) {\r\n\t\t\t\tmsg = this._success ? messages.incrementalFindStr : messages.incrementalFindStrNotFound;\r\n\t\t\t} else {\r\n\t\t\t\tmsg = this._success ? messages.incrementalFindReverseStr : messages.incrementalFindReverseStrNotFound;\r\n\t\t\t}\r\n\t\t\tmsg = util.formatMessage(msg, this._prefix);\r\n\t\t\tthis.editor.reportStatus(msg, this._success ? \"\" : \"error\"); //$NON-NLS-0$\r\n\t\t}\r\n\t});\r\n\texports.IncrementalFind = IncrementalFind;\r\n\t\r\n\t\r\n\tfunction Find(editor, undoStack, options) {\r\n\t\tif (!editor) { return; }\t\r\n\t\tthis._editor = editor;\r\n\t\tthis._undoStack = undoStack;\r\n\t\tthis._showAll = true;\r\n\t\tthis._selectedLines = false;\r\n\t\tthis._visible = false;\r\n\t\tthis._caseInsensitive = true;\r\n\t\tthis._wrap = true;\r\n\t\tthis._wholeWord = false;\r\n\t\tthis._incremental = true;\r\n\t\tthis._regex = false;\r\n\t\tthis._findAfterReplace = true;\r\n\t\tthis._hideAfterFind = false;\r\n\t\tthis._reverse = false;\r\n\t\tthis._start = undefined;\r\n\t\tthis._end = undefined;\r\n\t\tthis._timer = undefined;\r\n\t\tthis._lastString = \"\";\r\n\t\tvar that = this;\r\n\t\tthis._listeners = {\r\n\t\t\tonEditorFocus: function(e) {\r\n\t\t\t\tthat._removeCurrentAnnotation(e);\r\n\t\t\t\tthat.setOptions({selectedLines: false});\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.setOptions(options);\r\n\t}\r\n\tFind.prototype = {\r\n\t\tfind: function (forward, tempOptions, incremental) {\r\n\t\t\tthis.setOptions({\r\n\t\t\t\treverse : !forward\r\n\t\t\t});\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tvar count;\r\n\t\t\tif (tempOptions) {\r\n\t\t\t\tstring = tempOptions.findString || string;\r\n\t\t\t\tcount =  tempOptions.count;\r\n\t\t\t}\r\n\t\t\tvar savedOptions = this.getOptions();\r\n\t\t\tthis.setOptions(tempOptions);\r\n\t\t\tvar startOffset = incremental ? this._startOffset : this.getStartOffset();\r\n\t\t\treturn this._doFind(string, startOffset, count).then(function(result) {\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tif (!incremental) {\r\n\t\t\t\t\t\tthis._startOffset = result.start;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setOptions(savedOptions);\r\n\t\t\t\tif (this._hideAfterFind) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tgetStartOffset: function() {\r\n\t\t\tif(this.isRangeSearch()) {\r\n\t\t\t\tvar where = this._editor.getCaretOffset();\r\n\t\t\t\tif (this._reverse) {\r\n\t\t\t\t\twhere = this._editor.getSelection().start -1;\r\n\t\t\t\t}\r\n\t\t\t\tif(where >= this._searchRangeModel.start && where <= this._searchRangeModel.end) {\r\n\t\t\t\t\treturn where;\r\n\t\t\t\t} \r\n\t\t\t\treturn this._searchRangeModel.start;\r\n\t\t\t}\r\n\t\t\tif (this._reverse) {\r\n\t\t\t\treturn this._editor.getSelection().start - 1;\r\n\t\t\t}\r\n\t\t\treturn this._editor.getCaretOffset();\r\n\t\t},\r\n\t\tgetFindString: function() {\r\n\t\t\tvar selection = this._editor.getSelection();\r\n\t\t\tvar searchString = this._editor.getText(selection.start, selection.end);\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tsearchString = mRegex.escape(searchString);\r\n\t\t\t}\r\n\t\t\treturn searchString || this._lastString;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn {\r\n\t\t\t\tshowAll: this._showAll, \r\n\t\t\t\tcaseInsensitive: this._caseInsensitive, \r\n\t\t\t\twrap: this._wrap, \r\n\t\t\t\twholeWord: this._wholeWord, \r\n\t\t\t\tincremental: this._incremental,\r\n\t\t\t\tregex: this._regex,\r\n\t\t\t\tfindAfterReplace: this._findAfterReplace,\r\n\t\t\t\thideAfterFind: this._hideAfterFind,\r\n\t\t\t\treverse: this._reverse,\r\n\t\t\t\tfindCallback: this._findCallback,\r\n\t\t\t\tstart: this._start,\r\n\t\t\t\tend: this._end\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetReplaceString: function() {\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tthis._visible = false;\r\n\t\t\tif (this._savedOptions) {\r\n\t\t\t\tthis.setOptions(this._savedOptions.pop());\r\n\t\t\t\tif (this._savedOptions.length === 0) {\r\n\t\t\t\t\tthis._savedOptions = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._removeAllAnnotations();\r\n\t\t\tif(this._selectedLines) {\r\n\t\t\t\tthis.setOptions({selectedLines: false});\r\n\t\t\t}\r\n\t\t\tvar textView = this._editor.getTextView();\r\n\t\t\tif (textView) {\r\n\t\t\t\ttextView.removeEventListener(\"Focus\", this._listeners.onEditorFocus); //$NON-NLS-0$\r\n\t\t\t\ttextView.focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_processReplaceString: function(str) {\r\n\t\t\tvar newStr = str;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tnewStr = \"\";\r\n\t\t\t\tvar escape = false;\r\n\t\t\t\tvar delimiter = this._editor.getModel().getLineDelimiter();\r\n\t\t\t\tfor (var i=0; i<str.length; i++) {\r\n\t\t\t\t\tvar c = str.substring(i, i + 1);\r\n\t\t\t\t\tif (escape) {\r\n\t\t\t\t\t\tswitch (c) {\r\n\t\t\t\t\t\t\tcase \"R\": newStr += delimiter; break;\r\n\t\t\t\t\t\t\tcase \"r\": newStr += \"\\r\"; break;\r\n\t\t\t\t\t\t\tcase \"n\": newStr += \"\\n\"; break;\r\n\t\t\t\t\t\t\tcase \"t\": newStr += \"\\t\"; break;\r\n\t\t\t\t\t\t\tcase \"\\\\\": newStr += \"\\\\\"; break;\r\n\t\t\t\t\t\t\tdefault: newStr += \"\\\\\" + c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tescape = false;\r\n\t\t\t\t\t} else if (c === \"\\\\\") {\r\n\t\t\t\t\t\tescape = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewStr += c;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (escape) {\r\n\t\t\t\t\tnewStr += \"\\\\\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\tisVisible: function() {\r\n\t\t\treturn this._visible;\r\n\t\t},\r\n\t\treplace: function() {\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tif (string) {\r\n\t\t\t\tvar editor = this._editor;\r\n\t\t\t\tvar replaceString = this._processReplaceString(this.getReplaceString());\r\n\t\t\t\tvar selection = editor.getSelection();\r\n\t\t\t\tvar start = selection.start;\r\n\t\t\t\tDeferred.when(this._editor.getModel().find({\r\n\t\t\t\t\tstring: string,\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\trangeStart: this._searchRangeModel ? this._searchRangeModel.start : undefined,\r\n\t\t\t\t\trangeEnd: this._searchRangeModel ? this._searchRangeModel.end : undefined,\r\n\t\t\t\t\treverse: false,\r\n\t\t\t\t\twrap: this._wrap,\r\n\t\t\t\t\tregex: this._regex,\r\n\t\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t\t})).then( function(iterator) {\r\n\t\t\t\t\tif(!iterator) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar result = iterator.next();\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t\t\tthis._doReplace(result.start, result.end, string, replaceString);\r\n\t\t\t\t\t\tthis.endUndo();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._findAfterReplace){\r\n\t\t\t\t\t\tthis._doFind(string, this.getStartOffset());\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\treplaceAll : function() {\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tif (string) {\r\n\t\t\t\tthis._replacingAll = true;\r\n\t\t\t\tvar editor = this._editor;\r\n\t\t\t\tvar textView = editor.getTextView();\r\n\t\t\t\teditor.reportStatus(messages.replacingAll);\r\n\t\t\t\tvar replaceString = this._processReplaceString(this.getReplaceString());\r\n\t\t\t\tvar self = this;\r\n\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\tvar startPos = 0;\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t//For replace all, we need to ignore the wrap search from the user option\r\n\t\t\t\t\t\t//Otherwise the loop will be dead, see https://bugs.eclipse.org/bugs/show_bug.cgi?id=411813\r\n\t\t\t\t\t\tvar result = self._doFindForReplaceAll(string, startPos, null, true);\r\n\t\t\t\t\t\tif (!result) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\tif (count === 1) {\r\n\t\t\t\t\t\t\ttextView.setRedraw(false);\r\n\t\t\t\t\t\t\tself.startUndo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself._doReplace(result.start, result.end, string, replaceString);\r\n\t\t\t\t\t\tstartPos = self.getStartOffset();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (count > 0) {\r\n\t\t\t\t\t\tself.endUndo();\r\n\t\t\t\t\t\ttextView.setRedraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (startPos > 0) {\r\n\t\t\t\t\t\teditor.reportStatus(util.formatMessage(messages.replacedMatches, count));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\teditor.reportStatus(messages.nothingReplaced, \"error\"); //$NON-NLS-0$ \r\n\t\t\t\t\t}\r\n\t\t\t\t\tself._replacingAll = false;\r\n\t\t\t\t}, 100);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @property {String} string the search string to be found.\r\n\t\t * @property {Boolean} [regex=false] whether or not the search string is a regular expression.\r\n\t\t * @property {Boolean} [wrap=false] whether or not to wrap search.\r\n\t\t * @property {Boolean} [wholeWord=false] whether or not to search only whole words.\r\n\t\t * @property {Boolean} [caseInsensitive=false] whether or not search is case insensitive.\r\n\t\t * @property {Boolean} [reverse=false] whether or not to search backwards.\r\n\t\t * @property {Number} [start=0] The start offset to start searching\r\n\t\t * @property {Number} [end=charCount] The end offset of the search. Used to search in a given range.\t\r\n\t\t */\r\n\t\tsetOptions : function(options) {\r\n\t\t\tif (options) {\r\n\t\t\t\tif ((options.showAll === true || options.showAll === false) && this._showAll !== options.showAll) {\r\n\t\t\t\t\tthis._showAll = options.showAll;\r\n\t\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\t\tif (this._showAll) {\r\n\t\t\t\t\t\t\tthis._markAllOccurrences();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\t\t\t\t\tif (annotationModel) {\r\n\t\t\t\t\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((options.selectedLines === true || options.selectedLines === false) && this._selectedLinesl !== options.selectedLines) {\r\n\t\t\t\t\tthis._selectedLines = options.selectedLines;\r\n\t\t\t\t\tif (this._selectedLines) {\r\n\t\t\t\t\t\tthis.annotateSearchRange(options.multipleLine);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.annotateSearchRange(options.multipleLine, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.postSelectedLines();\r\n\t\t\t\t}\r\n\t\t\t\tif (options.caseInsensitive === true || options.caseInsensitive === false) {\r\n\t\t\t\t\tthis._caseInsensitive = options.caseInsensitive;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.wrap === true || options.wrap === false) {\r\n\t\t\t\t\tthis._wrap = options.wrap;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.wholeWord === true || options.wholeWord === false) {\r\n\t\t\t\t\tthis._wholeWord = options.wholeWord;\r\n\t\t\t\t}\r\n\t\t\t\t//Allow extended TextModelFactory to disable incremental find\r\n\t\t\t\tif (options.incremental === true || options.incremental === false || options.incremental === \"disabled\") {\r\n\t\t\t\t\tif(options.incremental === \"disabled\") {\r\n\t\t\t\t\t\tthis._incremental = false;\r\n\t\t\t\t\t\tthis._incrementalDisabled = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._incremental = options.incremental;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (options.regex === true || options.regex === false) {\r\n\t\t\t\t\tthis._regex = options.regex;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.findAfterReplace === true || options.findAfterReplace === false) {\r\n\t\t\t\t\tthis._findAfterReplace = options.findAfterReplace;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hideAfterFind === true || options.hideAfterFind === false) {\r\n\t\t\t\t\tthis._hideAfterFind = options.hideAfterFind;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.reverse === true || options.reverse === false) {\r\n\t\t\t\t\tthis._reverse = options.reverse;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"findCallback\")) { //$NON-NLS-0$\r\n\t\t\t\t\tthis._findCallback = options.findCallback;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"start\")) { //$NON-NLS-0$\t\r\n\t\t\t\t\tthis._start = options.start;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"end\")) { //$NON-NLS-0$\r\n\t\t\t\t\tthis._end = options.end;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(tempOptions) {\r\n\t\t\tthis._visible = true;\r\n\t\t\tif (tempOptions) {\r\n\t\t\t\tif (!this._savedOptions) {\r\n\t\t\t\t\tthis._savedOptions = [];\r\n\t\t\t\t}\t\r\n\t\t\t\tthis._savedOptions.push(this.getOptions());\r\n\t\t\t\tthis.setOptions(tempOptions);\r\n\t\t\t\tif(tempOptions.findString && this._regex) {\r\n\t\t\t\t\ttempOptions.findString = mRegex.escape(tempOptions.findString);\r\n\t\t\t\t\ttempOptions.findString = tempOptions.findString.split(\"\\n\").join(\"\\\\n\");\r\n\t\t\t\t\ttempOptions.findString = tempOptions.findString.split(\"\\r\").join(\"\\\\r\");\r\n\t\t\t\t\ttempOptions.findString = tempOptions.findString.split(\"\\t\").join(\"\\\\t\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._startOffset = this._editor.getSelection().start;\r\n\t\t\tthis._editor.getTextView().addEventListener(\"Focus\", this._listeners.onEditorFocus); //$NON-NLS-0$\r\n\t\t\tvar self = this;\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tif (self._incremental) {\r\n\t\t\t\t\tself.find(true, null, true);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this._undoStack) {\r\n\t\t\t\tthis._undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t}, \r\n\t\tendUndo: function() {\r\n\t\t\tif (this._undoStack) {\r\n\t\t\t\tthis._undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tisRangeSearch: function() {\r\n\t\t\treturn this._searchRangeModel !== null && this._searchRangeModel !== undefined;\r\n\t\t},\r\n\t\tannotateSearchRange: function(multipleLine, remove) {\r\n\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_SEARCH_RANGE;\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(type);\r\n\t\t\t\tthis.setOptions({start: undefined, end: undefined});\r\n\t\t\t\tthis._selectedLines = false;\r\n\t\t\t\tthis._searchRangeModel = null;\r\n\t\t\t\tif(remove) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar selection = this._editor.getSelection();\r\n\t\t\t\tvar textModel = this._editor.getModel();\r\n\t\t\t\tvar startL = 0;\r\n\t\t\t\tvar endL = 0;\r\n\t\t\t\tif(textModel) {\r\n\t\t\t\t\tendL = startL = textModel.getLineAtOffset(selection.start);\r\n\t\t\t\t\tif(selection.start !== selection.end) {\r\n\t\t\t\t\t\tendL = textModel.getLineAtOffset(selection.end - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(endL > startL || !multipleLine) {\r\n\t\t\t\t\tthis._selectedLines = true;\r\n\t \t\t \t\tvar rangeStart = textModel.getLineStart(startL);\r\n\t \t\t \t\tvar rangeEnd = textModel.getLineEnd(endL, true);\r\n\t\t\t\t\tthis._editor.setSelection(rangeStart, rangeStart, true);\r\n\t\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINE);\r\n\t\t\t\t\tthis.setOptions({start: rangeStart, end: rangeEnd});\r\n\t\t\t\t\tthis._searchRangeModel = mAnnotations.AnnotationType.createAnnotation(type, rangeStart, rangeEnd);\r\n\t \t\t \t\tannotationModel.addAnnotation(this._searchRangeModel);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tpostSelectedLines: function(/*selectedLines*/) {\r\n\t\t},\r\n\t\t_findFromModel: function(string, startOffset, noWrap) {\r\n\t\t\treturn this._editor.getModel().find({\r\n\t\t\t\tstring: string,\r\n\t\t\t\tstart: startOffset,\r\n\t\t\t\trangeStart: this._searchRangeModel ? this._searchRangeModel.start : undefined,\r\n\t\t\t\trangeEnd: this._searchRangeModel ? this._searchRangeModel.end : undefined,\r\n\t\t\t\treverse: this._reverse,\r\n\t\t\t\twrap: noWrap ? false: this._wrap,\r\n\t\t\t\tregex: this._regex,\r\n\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t_find: function(editor, string, startOffset, noWrap) {\r\n\t\t\tvar iterator;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\titerator = this._findFromModel(string, startOffset, noWrap);\r\n\t\t\t\t} catch (ex) {\r\n\t\t\t\t\teditor.reportStatus(ex.message, \"error\"); //$NON-NLS-0$\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\titerator = this._findFromModel(string, startOffset, noWrap);\r\n\t\t\t}\r\n\t\t\treturn iterator;\r\n\t\t},\r\n\t\t\r\n\t\t_doFindForReplaceAll: function(string, startOffset, count, noWrap) {\r\n\t\t\tcount = count || 1;\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (!string) {\r\n\t\t\t\tthis._removeAllAnnotations();\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis._lastString = string;\r\n\t\t\tvar result, iterator;\r\n\t\t\titerator = this._find(editor, string, startOffset, noWrap);\r\n\t\t\tif(!iterator) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif(!iterator.hasNext || !iterator.next) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfor (var i=0; i<count && iterator.hasNext(); i++) {\r\n\t\t\t\tresult = iterator.next();\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t\r\n\t\t_doFind: function(string, startOffset, count, noWrap) {\r\n\t\t\tcount = count || 1;\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (!string) {\r\n\t\t\t\tthis._removeAllAnnotations();\r\n\t\t\t\treturn new Deferred().resolve();\r\n\t\t\t}\r\n\t\t\tthis._lastString = string;\r\n\t\t\tvar result;\r\n\t\t\treturn Deferred.when(this._find(editor, string, startOffset, noWrap)).then( function(iterator) {\r\n\t\t\t\tif(!iterator) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0; i<count && iterator.hasNext(); i++) {\r\n\t\t\t\t\tresult = iterator.next();\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._replacingAll) {\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tthis._editor.reportStatus(\"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._editor.reportStatus(messages.notFound, \"error\"); //$NON-NLS-0$\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH;\r\n\t\t\t\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\t\t\t\tif (annotationModel) {\r\n\t\t\t\t\t\t\tannotationModel.removeAnnotations(type);\r\n\t\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\t\tannotationModel.addAnnotation(mAnnotations.AnnotationType.createAnnotation(type, result.start, result.end));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this._showAll) {\r\n\t\t\t\t\t\t\tif (this._timer) {\r\n\t\t\t\t\t\t\t\twindow.clearTimeout(this._timer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tthis._timer = window.setTimeout(function(){\r\n\t\t\t\t\t\t\t\tthat._markAllOccurrences();\r\n\t\t\t\t\t\t\t\tthat._timer = null;\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._findCallback) {\r\n\t\t\t\t\t\tthis._findCallback(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (result) {\r\n\t\t\t\t\t\teditor.moveSelection(result.start, result.end, null, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t_doReplace: function(start, end, searchStr, newStr) {\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tnewStr = editor.getText(start, end).replace(new RegExp(searchStr, this._caseInsensitive ? \"i\" : \"\"), newStr); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\teditor.setText(newStr, start, end);\r\n\t\t\teditor.setSelection(start, start + newStr.length, true);\r\n\t\t},\r\n\t\t_markAllOccurrences: function() {\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH;\r\n\t\t\tvar iter = annotationModel.getAnnotations();\r\n\t\t\tvar remove = [], add;\r\n\t\t\twhile (iter.hasNext()) {\r\n\t\t\t\tvar annotation = iter.next();\r\n\t\t\t\tif (annotation.type === type) {\r\n\t\t\t\t\tremove.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.isVisible()) {\r\n\t\t\t\tvar string = this.getFindString();\r\n\t\t\t\tDeferred.when(this._editor.getModel().find({\r\n\t\t\t\t\tstring: string,\r\n\t\t\t\t\tstart: this._start,\r\n\t\t\t\t\trangeStart: this._searchRangeModel ? this._searchRangeModel.start : undefined,\r\n\t\t\t\t\trangeEnd: this._searchRangeModel ? this._searchRangeModel.end : undefined,\r\n\t\t\t\t\tregex: this._regex,\r\n\t\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t\t})).then( function(iterator) {\r\n\t\t\t\t\tif(!iterator) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadd = [];\r\n\t\t\t\t\twhile (iterator.hasNext()) {\r\n\t\t\t\t\t\tvar range = iterator.next();\r\n\t\t\t\t\t\tadd.push(mAnnotations.AnnotationType.createAnnotation(type, range.start, range.end));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeAllAnnotations: function() {\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH);\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeCurrentAnnotation: function(evt){\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\texports.Find = Find;\r\n\t\r\n\treturn exports;\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2014 IBM Corporation and others. All rights reserved.\r\n * This program and the accompanying materials are made available under the\r\n * terms of the Eclipse Public License v1.0\r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\r\n * \r\n * Contributors: \r\n *\tIBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine('orion/editor/findUI',[\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/editor/find',\r\n\t'orion/objects',\r\n\t'orion/editor/util',\r\n\t'orion/util', \r\n], function(messages, mFind, objects, textUtil, util) {\r\n\t\r\n\tfunction FindUI(editor, undoStack, options) {\r\n\t\tmFind.Find.call(this, editor, undoStack, options);\r\n\t}\r\n\t\r\n\tFindUI.prototype = new mFind.Find();\r\n\t\r\n\tobjects.mixin(FindUI.prototype, {\r\n\t\tgetFindString: function() {\r\n\t\t\tvar input = this._findInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn mFind.Find.prototype.getFindString.call(this);\r\n\t\t\t}\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\tgetReplaceString: function() {\r\n\t\t\tvar input = this._replaceInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn mFind.Find.prototype.getReplaceString(this);\r\n\t\t\t}\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tvar visible = this.isVisible();\r\n\t\t\tmFind.Find.prototype.hide.call(this);\r\n\t\t\tif (visible) {\r\n\t\t\t\tthis._rootDiv.className = \"textViewFind\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(options) {\r\n\t\t\tmFind.Find.prototype.show.call(this, options);\r\n\t\t\tvar findString = options.findString;\r\n\t\t\tvar replaceString = options.replaceString;\r\n\t\t\tvar input = this._findInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\tthis._create();\r\n\t\t\t\tinput = this._findInput;\r\n\t\t\t}\r\n\t\t\tif (findString) {\r\n\t\t\t\tinput.value = findString;\r\n\t\t\t}\r\n\t\t\tif (replaceString) {\r\n\t\t\t\tvar replaceInput = this._replaceInput;\r\n\t\t\t\treplaceInput.value = replaceString;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tthis.setOptions({selectedLines: true, multipleLine: true});\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tthat._rootDiv.className = \"textViewFind show\"; //$NON-NLS-0$\r\n\t\t\t\tinput.select();\r\n\t\t\t\tinput.focus();\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\tpostSelectedLines: function(/*selectedLines*/) {\r\n\t\t\tif(this._selectedLinesUI) {\r\n\t\t\t\tthis._checked(this._selectedLines, this._selectedLinesUI);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_create: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar view = this._editor.getTextView();\r\n\t\t\tvar parent = view.getOptions(\"parent\"); //$NON-NLS-0$\r\n\t\t\tvar document = parent.ownerDocument; //$NON-NLS-0$\r\n\t\t\tvar root = util.createElement(document, 'div'); //$NON-NLS-0$\r\n\t\t\troot.className = \"textViewFind\"; //$NON-NLS-0$\r\n\t\t\ttextUtil.addEventListener(root, \"keydown\", function(e) { that._handleKeyDown(e); }); //$NON-NLS-0$\r\n\t\t\tthis._rootDiv = root;\r\n\t\t\troot.setAttribute(\"role\", \"dialog\");\r\n\t\t\troot.setAttribute(\"aria-label\", messages.findReplace);\r\n\t\t\tthis._createContents(document, root);\r\n\t\t\tview._rootDiv.insertBefore(root, view._rootDiv.firstChild);\r\n\t\t},\r\n\t\t_createContents: function(document, parent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar findInput = util.createElement(document, 'input'); //$NON-NLS-0$\r\n\t\t\tfindInput.className = \"textViewFindInput\"; //$NON-NLS-0$\r\n\t\t\tthis._findInput = findInput;\r\n\t\t\tfindInput.type = \"text\"; //$NON-NLS-0$\r\n\t\t\tfindInput.placeholder = messages.findWith;\r\n\t\t\ttextUtil.addEventListener(findInput, \"input\", function(evt) { //$NON-NLS-0$\r\n\t\t\t\treturn that._handleInput(evt);\r\n\t\t\t});\r\n\t\t\tparent.appendChild(findInput);\r\n\r\n\t\t\tvar group = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.next, function() { that.find(true); });\r\n\t\t\tthat._createButton(document, group, messages.previous, function() { that.find(false); });\r\n\t\t\tparent.appendChild(group);\r\n\t\t\t\r\n\t\t\tvar readonly = that._editor.getTextView().getOptions(\"readonly\"); //$NON-NLS-0$\r\n\t\t\tif (!readonly) {\r\n\t\t\t\t// create replace text\r\n\t\t\t\tvar replaceInput = util.createElement(document, 'input'); //$NON-NLS-0$\r\n\t\t\t\treplaceInput.className = \"textViewReplaceInput\"; //$NON-NLS-0$\r\n\t\t\t\tthis._replaceInput = replaceInput;\r\n\t\t\t\treplaceInput.type = \"text\"; //$NON-NLS-0$\r\n\t\t\t\treplaceInput.placeholder = messages.replaceWith;\r\n\t\t\t\tparent.appendChild(replaceInput);\r\n\t\t\t\tgroup = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\t\tthat._createButton(document, group, messages.replace, function() { that.replace(); });\r\n\t\t\t\tthat._createButton(document, group, messages.replaceAll, function() { that.replaceAll(); });\r\n\t\t\t\tparent.appendChild(group);\r\n\t\t\t}\r\n\r\n\t\t\tgroup = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\tthat._selectedLinesUI = that._createButton(document, group, messages.selectedLines, function(evt) { that._toggle(\"selectedLines\", evt.target); }, this._selectedLines, messages.selectedLinesTooltip, messages.selectedLinesTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.regex, function(evt) { that._toggle(\"regex\", evt.target); }, this._regex, messages.regexTooltip, messages.regexTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.caseInsensitive, function(evt) { that._toggle(\"caseInsensitive\", evt.target); }, this._caseInsensitive, messages.caseInsensitiveTooltip, messages.caseInsensitiveTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.wholeWord, function(evt) { that._toggle(\"wholeWord\", evt.target); }, this._wholeWord, messages.wholeWordTooltip, messages.wholeWordTooltip); //$NON-NLS-0$\r\n\t\t\tparent.appendChild(group);\r\n\r\n\t\t\tvar close = that._createButton(document, parent, \"\", function() { that.hide(); }); //$NON-NLS-0$\r\n\t\t\tclose.className = \"textViewFindCloseButton\"; //$NON-NLS-0$\r\n\t\t\tclose.title = messages.closeTooltip;\r\n\t\t\tutil.confineDialogTab(findInput, close);\r\n\t\t},\r\n\t\t_createButton: function(document, parentDom, text, callback, checked, tooltip, ariaLabel) {\r\n\t\t\tvar button  = document.createElement(\"button\"); //$NON-NLS-0$\r\n\t\t\tbutton.type = \"button\"; //$NON-NLS-0$\r\n\t\t\tthis._checked(checked, button);\r\n\t\t\tif (tooltip) button.title = tooltip;\r\n\t\t\ttextUtil.addEventListener(button, \"click\", function(evt) { callback.call(this, evt); }, false); //$NON-NLS-0$\r\n\t\t\tif (text) {\r\n\t\t\t\tbutton.appendChild(document.createTextNode(text)); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\tif (ariaLabel) {\r\n\t\t\t\tbutton.setAttribute(\"aria-label\", ariaLabel);\r\n\t\t\t}\r\n\t\t\tparentDom.appendChild(button);\r\n\t\t\treturn button;\r\n\t\t},\r\n\t\t_toggle: function(prop, button) {\r\n\t\t\tvar options = {};\r\n\t\t\toptions[prop] = !this[\"_\" + prop]; //$NON-NLS-0$\r\n\t\t\tthis._checked(options[prop], button);\r\n\t\t\tthis.setOptions(options);\r\n\t\t},\r\n\t\t_checked: function(checked, button) {\r\n\t\t\tbutton.className = \"textViewFindButton\"; //$NON-NLS-0$\r\n\t\t\tif (checked) {\r\n\t\t\t\tbutton.className += \" checked\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t_handleInput: function() {\r\n\t\t\tif (this._incremental) {\r\n\t\t\t\tthis.find(true, null, true);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t_handleKeyDown: function(evt) {\r\n\t\t\tvar handled;\r\n\t\t\tvar ctrlKeyOnly = (util.isMac ? evt.metaKey : evt.ctrlKey) && !evt.altKey && !evt.shiftKey;\r\n\t\t\tif (ctrlKeyOnly && evt.keyCode === 70/*\"f\"*/ ) {\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\t//We can't use ctrlKeyOnly on \"k\" because ctrl+shift+k means find previous match when the find bar gets focus\r\n\t\t\tif (((util.isMac ? evt.metaKey : evt.ctrlKey) && !evt.altKey && evt.keyCode === 75/*\"k\"*/) || evt.keyCode === 13/*enter*/){\r\n\t\t\t\tif (evt.keyCode === 13) {\r\n\t\t\t\t\tthis.find(this._reverse ? evt.shiftKey : !evt.shiftKey);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.find(!evt.shiftKey);\r\n\t\t\t\t}\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (ctrlKeyOnly &&  evt.keyCode === 82 /*\"r\"*/){\r\n\t\t\t\tthis.replace();\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (evt.keyCode === 27/*ESC*/){\r\n\t\t\t\tthis.hide();\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (handled) {\r\n\t\t\t\tif (evt.stopPropagation) { \r\n\t\t\t\t\tevt.stopPropagation(); \r\n\t\t\t\t}\r\n\t\t\t\tif (evt.preventDefault) { \r\n\t\t\t\t\tevt.preventDefault(); \r\n\t\t\t\t}\r\n\t\t\t\tevt.cancelBubble = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\r\n\treturn {FindUI: FindUI};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2017 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made\r\n * available under the terms of the Eclipse Public License v1.0\r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/actions\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/editor/tooltip', //$NON-NLS-0$\r\n\t'orion/editor/find', //$NON-NLS-0$\r\n\t'orion/editor/findUI', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mAnnotations, mTooltip, mFind, mFindUI, util) {\r\n\r\n\tvar AT = mAnnotations.AnnotationType;\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction forEachSelection(actions, compound, callback, noUndo) {\r\n\t\tvar offset = 0;\r\n\t\tvar editor = actions.editor;\r\n\t\tvar selections = editor.getSelections();\r\n\t\tif (!noUndo && (compound || selections.length > 1)){ actions.startUndo(); }\r\n\t\tfunction setText(text, start, end) {\r\n\t\t\teditor.setText(text, start, end);\r\n\t\t\toffset += (start - end) + text.length;\r\n\t\t}\r\n\t\tselections.forEach(function(selection) {\r\n\t\t\tselection.start += offset;\r\n\t\t\tselection.end += offset;\r\n\t\t\tcallback(selection, setText);\r\n\t\t});\r\n\t\teditor.setSelections(selections);\r\n\t\tif (!noUndo && (compound || selections.length > 1)){ actions.endUndo(); }\r\n\t}\r\n\r\n\t/**\r\n\t * TextActions connects common text editing keybindings onto an editor.\r\n\t */\r\n\tfunction TextActions(editor, undoStack, find) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis._incrementalFind = new mFind.IncrementalFind(editor);\r\n\t\tthis._find = find ? find : new mFindUI.FindUI(editor, undoStack);\r\n\t\tthis._lastEditLocation = null;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tTextActions.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tvar textView = this.editor.getTextView();\r\n\r\n\t\t\tthis._lastEditListener = {\r\n\t\t\t\tonModelChanged: function(e) {\r\n\t\t\t\t\tif (this.editor.isDirty()) {\r\n\t\t\t\t\t\tthis._lastEditLocation = e.start + e.addedCharCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this)\r\n\t\t\t};\r\n\t\t\ttextView.addEventListener(\"ModelChanged\", this._lastEditListener.onModelChanged); //$NON-NLS-0$\r\n\r\n\t\t\ttextView.setAction(\"undo\", function(data) { //$NON-NLS-0$\r\n\t\t\t\tif (this.undoStack) {\r\n\t\t\t\t\tvar count = 1;\r\n\t\t\t\t\tif (data && data.count) {\r\n\t\t\t\t\t\tcount = data.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (count > 0) {\r\n\t\t\t\t\t\tthis.undoStack.undo();\r\n\t\t\t\t\t\t--count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.undo});\r\n\r\n\t\t\ttextView.setAction(\"redo\", function(data) { //$NON-NLS-0$\r\n\t\t\t\tif (this.undoStack) {\r\n\t\t\t\t\tvar count = 1;\r\n\t\t\t\t\tif (data && data.count) {\r\n\t\t\t\t\t\tcount = data.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (count > 0) {\r\n\t\t\t\t\t\tthis.undoStack.redo();\r\n\t\t\t\t\t\t--count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.redo});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"f\", true), \"find\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"find\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._find) {\r\n\t\t\t\t\tvar selection = this.editor.getSelection();\r\n\t\t\t\t\tthis._find.show({findString:this.editor.getText(selection.start, selection.end)});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.find});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"k\", true), \"findNext\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"findNext\", function(options) { //$NON-NLS-0$\r\n\t\t\t\tif (this._find){\r\n\t\t\t\t\tthis._find.find(true, options);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.findNext});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"k\", true, true), \"findPrevious\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"findPrevious\", function(options) { //$NON-NLS-0$\r\n\t\t\t\tif (this._find){\r\n\t\t\t\t\tthis._find.find(false, options);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.findPrevious});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"j\", true), \"incrementalFind\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"incrementalFind\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._incrementalFind) {\r\n\t\t\t\t\tthis._incrementalFind.find(true);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this), {name: messages.incrementalFind});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"j\", true, true), \"incrementalFindReverse\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"incrementalFindReverse\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._incrementalFind) {\r\n\t\t\t\t\tthis._incrementalFind.find(false);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this), {name: messages.incrementalFindReverse});\r\n\r\n\t\t\ttextView.setAction(\"tab\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.indentLines();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"shiftTab\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.unindentLines();\r\n\t\t\t}.bind(this), {name: messages.unindentLines});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(38, false, false, true), \"moveLinesUp\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"moveLinesUp\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.moveLinesUp();\r\n\t\t\t}.bind(this), {name: messages.moveLinesUp});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(40, false, false, true), \"moveLinesDown\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"moveLinesDown\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.moveLinesDown();\r\n\t\t\t}.bind(this), {name: messages.moveLinesDown});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(38, true, false, true), \"copyLinesUp\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"copyLinesUp\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.copyLinesUp();\r\n\t\t\t}.bind(this), {name: messages.copyLinesUp});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(40, true, false, true), \"copyLinesDown\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"copyLinesDown\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.copyLinesDown();\r\n\t\t\t}.bind(this), {name: messages.copyLinesDown});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('d', true, false, false), \"deleteLines\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"deleteLines\", function(data) { //$NON-NLS-0$\r\n\t\t\t\treturn this.deleteLines(data);\r\n\t\t\t}.bind(this), {name: messages.deleteLines});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"l\", !util.isMac, false, false, util.isMac), \"gotoLine\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"gotoLine\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.gotoLine();\r\n\t\t\t}.bind(this), {name: messages.gotoLine});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(190, true), \"nextAnnotation\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"nextAnnotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.nextAnnotation(true);\r\n\t\t\t}.bind(this), {name: messages.nextAnnotation});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(188, true), \"previousAnnotation\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"previousAnnotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.nextAnnotation(false);\r\n\t\t\t}.bind(this), {name: messages.prevAnnotation});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"e\", true, false, true, false), \"expand\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"expand\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotation(true);\r\n\t\t\t}.bind(this), {name: messages.expand});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"c\", true, false, true, false), \"collapse\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"collapse\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotation(false);\r\n\t\t\t}.bind(this), {name: messages.collapse});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"e\", true, true, true, false), \"expandAll\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"expandAll\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotations(true);\r\n\t\t\t}.bind(this), {name: messages.expandAll});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"c\", true, true, true, false), \"collapseAll\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"collapseAll\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotations(false);\r\n\t\t\t}.bind(this), {name: messages.collapseAll});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"q\", !util.isMac, false, false, util.isMac), \"lastEdit\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"lastEdit\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.gotoLastEdit();\r\n\t\t\t}.bind(this), {name: messages.lastEdit});\r\n\t\t},\r\n\t\tcopyLinesDown: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tvar delimiter = \"\";\r\n\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\ttext = (delimiter = model.getLineDelimiter()) + text;\r\n\t\t\t\t}\r\n\t\t\t\tvar insertOffset = lineEnd;\r\n\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\tselection.start = insertOffset + delimiter.length;\r\n\t\t\t\tselection.end = insertOffset + text.length;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tcopyLinesUp: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tvar delimiter = \"\";\r\n\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\ttext += (delimiter = model.getLineDelimiter());\r\n\t\t\t\t}\r\n\t\t\t\tvar insertOffset = lineStart;\r\n\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\tselection.start = insertOffset;\r\n\t\t\t\tselection.end = insertOffset + text.length - delimiter.length;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tdeleteLines: function(data) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar count = 1;\r\n\t\t\tif (data && data.count) {\r\n\t\t\t\tcount = data.count;\r\n\t\t\t}\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lastLine;\r\n\t\t\t\tif (selection.start !== selection.end || count === 1) {\r\n\t\t\t\t\tlastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastLine = Math.min(firstLine + count - 1, model.getLineCount() - 1);\r\n\t\t\t\t}\t\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\tselection.start = selection.end = lineStart;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\texpandAnnotation: function(expand) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tif (!editor.getFoldingRulerVisible()) return true;\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif(!annotationModel) { return true; }\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar currentOffset = editor.getCaretOffset();\r\n\t\t\tvar lineIndex = model.getLineAtOffset(currentOffset);\r\n\t\t\tvar start = model.getLineStart(lineIndex);\r\n\t\t\tvar end = model.getLineEnd(lineIndex, true);\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tstart = model.mapOffset(start);\r\n\t\t\t\tend = model.mapOffset(end);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\tvar annotation, iter = annotationModel.getAnnotations(start, end);\r\n\t\t\twhile (!annotation && iter.hasNext()) {\r\n\t\t\t\tvar a = iter.next();\r\n\t\t\t\tif (a.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING) { continue; }\r\n\t\t\t\tannotation = a;\r\n\t\t\t}\r\n\t\t\tif (annotation) {\r\n\t\t\t\tif (expand !== annotation.expanded) {\r\n\t\t\t\t\tif (expand) {\r\n\t\t\t\t\t\tannotation.expand();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\teditor.setCaretOffset(annotation.start);\r\n\t\t\t\t\t\tannotation.collapse();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\texpandAnnotations: function(expand) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tif (!editor.getFoldingRulerVisible()) return true;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif(!annotationModel) { return true; }\r\n\t\t\tvar annotation, iter = annotationModel.getAnnotations();\r\n\t\t\ttextView.setRedraw(false);\r\n\t\t\twhile (iter.hasNext()) {\r\n\t\t\t\tannotation = iter.next();\r\n\t\t\t\tif (annotation.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING) { continue; }\r\n\t\t\t\tif (expand !== annotation.expanded) {\r\n\t\t\t\t\tif (expand) {\r\n\t\t\t\t\t\tannotation.expand();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tannotation.collapse();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttextView.setRedraw(true);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tindentLines: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif(!textView.getOptions(\"tabMode\")) { return; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar offset = 0;\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\tif (selections.length > 1) { this.startUndo(); }\r\n\t\t\tif (selections.some(\r\n\t\t\t\tfunction(selection) {\r\n\t\t\t\t\tselection.start += offset;\r\n\t\t\t\t\tselection.end += offset;\r\n\t\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t\tif (firstLine !== lastLine || selections.length > 1) {\r\n\t\t\t\t\t\tvar lines = [];\r\n\t\t\t\t\t\tlines.push(\"\");\r\n\t\t\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\t\t\tlines.push(model.getLine(i, true));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\t\tvar text = lines.join(tab);\r\n\t\t\t\t\t\teditor.setText(text, lineStart, lineEnd);\r\n\t\t\t\t\t\tvar start = lineStart === selection.start ? selection.start : selection.start + tab.length;\r\n\t\t\t\t\t\tvar end = selection.end + ((lastLine - firstLine + 1) * tab.length);\r\n\t\t\t\t\t\toffset += (lineStart - lineEnd) + text.length;\r\n\t\t\t\t\t\tselection.start = start;\r\n\t\t\t\t\t\tselection.end = end;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t)){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\teditor.setSelections(selections);\r\n\t\t\tif (selections.length > 1) { this.endUndo(); }\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoLastEdit: function() {\r\n\t\t\tif (typeof this._lastEditLocation === \"number\")  { //$NON-NLS-0$\r\n\t\t\t\tthis.editor.showSelection(this._lastEditLocation);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoLine: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar line = model.getLineAtOffset(editor.getCaretOffset());\r\n\t\t\tline = prompt(messages.gotoLinePrompty, line + 1);\r\n\t\t\tif (line) {\r\n\t\t\t\tline = parseInt(line, 10);\r\n\t\t\t\teditor.onGotoLine(line - 1, 0);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmoveLinesDown: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tif (lastLine !== lineCount-1) {\r\n\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\tvar insertOffset = model.getLineEnd(lastLine+1, true) - (lineEnd - lineStart);\r\n\t\t\t\t\tvar text, delimiterLength = 0;\r\n\t\t\t\t\tif (lastLine !== lineCount-2) {\r\n\t\t\t\t\t\ttext = model.getText(lineStart, lineEnd);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Move delimiter following selection to front of the text\r\n\t\t\t\t\t\tvar lineEndNoDelimiter = model.getLineEnd(lastLine);\r\n\t\t\t\t\t\ttext = model.getText(lineEndNoDelimiter, lineEnd) + model.getText(lineStart, lineEndNoDelimiter);\r\n\t\t\t\t\t\tdelimiterLength += lineEnd - lineEndNoDelimiter;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\t\tselection.start = insertOffset + delimiterLength;\r\n\t\t\t\t\tselection.end = insertOffset + delimiterLength + text.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmoveLinesUp: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tif (firstLine !== 0) {\r\n\t\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\t\tvar insertOffset = model.getLineStart(firstLine - 1);\r\n\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\t\tvar delimiterLength = 0;\r\n\t\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\t\t// Move delimiter preceding selection to end of text\r\n\t\t\t\t\t\tvar delimiterStart = model.getLineEnd(firstLine - 1);\r\n\t\t\t\t\t\tvar delimiterEnd = model.getLineEnd(firstLine - 1, true);\r\n\t\t\t\t\t\ttext += model.getText(delimiterStart, delimiterEnd);\r\n\t\t\t\t\t\tlineStart = delimiterStart;\r\n\t\t\t\t\t\tdelimiterLength = delimiterEnd - delimiterStart;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\t\tselection.start = insertOffset;\r\n\t\t\t\t\tselection.end = insertOffset + text.length - delimiterLength;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tnextAnnotation: function (forward) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) { return true; }\r\n\t\t\tvar list = editor.getOverviewRuler() || editor.getAnnotationStyler();\r\n\t\t\tif (!list) { return true; }\r\n\r\n\t\t\tfunction ignore(annotation, iterationMode) {\r\n\t\t\t\tswitch (iterationMode) {\r\n\t\t\t\t\tcase AT.ANNOTATION_ERROR:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_ERROR && annotation.type !== AT.ANNOTATION_WARNING && annotation.type !== AT.ANNOTATION_INFO;\r\n\t\t\t\t\tcase AT.ANNOTATION_READ_OCCURRENCE:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_READ_OCCURRENCE && annotation.type !== AT.ANNOTATION_WRITE_OCCURRENCE;\r\n\t\t\t\t\tcase AT.ANNOTATION_CURRENT_SEARCH:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_CURRENT_SEARCH && annotation.type !== AT.ANNOTATION_MATCHING_SEARCH;\r\n\t\t\t\t\tcase AT.ANNOTATION_TASK:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_TASK && annotation.type !== AT.ANNOTATION_BOOKMARK;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar currentOffset = editor.getCaretOffset();\r\n\r\n\t\t\t// reset the iteration mode if the cursor moves between invocations\t\t\t\r\n\t\t\tif (!this._lastPosition || this._lastPosition !== currentOffset) {\r\n\t\t\t\tvar curAnnotations = annotationModel.getAnnotations(currentOffset, currentOffset);\r\n\t\t\t\tvar theMode = null;\r\n\t\t\t\twhile (curAnnotations.hasNext()) {\r\n\t\t\t\t\tvar annotation = curAnnotations.next();\r\n\t\t\t\t\tif (annotation.type === AT.ANNOTATION_ERROR || annotation.type === AT.ANNOTATION_WARNING || annotation.type === AT.ANNOTATION_INFO) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_ERROR;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (annotation.type === AT.ANNOTATION_READ_OCCURRENCE || annotation.type === AT.ANNOTATION_WRITE_OCCURRENCE) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_READ_OCCURRENCE;\r\n\t\t\t\t\t} else if (annotation.type === AT.ANNOTATION_TASK || annotation.type === AT.ANNOTATION_BOOKMARK && theMode !== AT.ANNOTATION_READ_OCCURRENCE) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_TASK;\r\n\t\t\t\t\t} else if (annotation.type === AT.ANNOTATION_CURRENT_SEARCH || annotation.type === AT.ANNOTATION_MATCHING_SEARCH && !theMode) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_CURRENT_SEARCH;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._iterationMode = theMode ?  theMode : AT.ANNOTATION_ERROR; // Iterate Errors / Warnings by default;\r\n\t\t\t}\r\n\r\n\t\t\tvar annotations = annotationModel.getAnnotations(forward ? currentOffset : 0, forward ? model.getCharCount() : currentOffset);\r\n\t\t\tvar foundAnnotation = null;\r\n\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\tvar annotation = annotations.next();\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tif (annotation.start <= currentOffset) { continue; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (annotation.start >= currentOffset) { continue; }\r\n\t\t\t\t}\r\n\t\t\t\tif (ignore(annotation, this._iterationMode)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfoundAnnotation = annotation;\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (foundAnnotation) {\r\n\t\t\t\tvar foundAnnotations = [foundAnnotation];\r\n\t\t\t\tannotations = annotationModel.getAnnotations(foundAnnotation.start, foundAnnotation.start);\r\n\t\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\t\tannotation = annotations.next();\r\n\t\t\t\t\tif (annotation !== foundAnnotation && !ignore(annotation, this._iterationMode)) {\r\n\t\t\t\t\t\tfoundAnnotations.push(annotation);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar view = editor.getTextView();\r\n\t\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(view, editor);\r\n\t\t\t\tthis._lastPosition = foundAnnotation.start;\r\n\t\t\t\tif (!tooltip) {\r\n\t\t\t\t\teditor.moveSelection(foundAnnotation.start);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\teditor.moveSelection(foundAnnotation.start, foundAnnotation.start, function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tvar tv = editor.getTextView();\r\n\t\t\t\t\t\tvar offset = foundAnnotation.start;\r\n\t\t\t\t\t\tvar pos = tv.getLocationAtOffset(offset);\r\n\t\t\t\t\t\ttooltip.show({\r\n\t\t\t\t\t\t\tx: pos.x,\r\n\t\t\t\t\t\t\ty: pos.y,\r\n\t\t\t\t\t\t\tgetTooltipInfo: function() {\r\n\t\t\t\t\t\t\t\treturn editor._getTooltipInfo(this.x, this.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, false, false);\t\t\t\t\t\t\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tunindentLines: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif(!textView.getOptions(\"tabMode\")) { return; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar tabSize = textView.getOptions(\"tabSize\"); //$NON-NLS-0$\r\n\t\t\t\tvar spaceTab = new Array(tabSize + 1).join(\" \"); //$NON-NLS-0$\r\n\t\t\t\tvar lines = [], removeCount = 0, firstRemoveCount = 0;\r\n\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\tvar line = model.getLine(i, true);\r\n\t\t\t\t\tif (model.getLineStart(i) !== model.getLineEnd(i)) {\r\n\t\t\t\t\t\tif (line.indexOf(\"\\t\") === 0) { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tline = line.substring(1);\r\n\t\t\t\t\t\t\tremoveCount++;\r\n\t\t\t\t\t\t} else if (line.indexOf(spaceTab) === 0) {\r\n\t\t\t\t\t\t\tline = line.substring(tabSize);\r\n\t\t\t\t\t\t\tremoveCount += tabSize;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i === firstLine) {\r\n\t\t\t\t\t\tfirstRemoveCount = removeCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlines.push(line);\r\n\t\t\t\t}\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lastLineStart = model.getLineStart(lastLine);\r\n\t\t\t\tvar text = lines.join(\"\");\r\n\t\t\t\tsetText(text, lineStart, lineEnd);\r\n\t\t\t\tvar start = lineStart === selection.start ? selection.start : selection.start - firstRemoveCount;\r\n\t\t\t\tvar end = Math.max(start, selection.end - removeCount + (selection.end === lastLineStart+1 && selection.start !== selection.end ? 1 : 0));\r\n\t\t\t\tselection.start = start;\r\n\t\t\t\tselection.end = end;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\texports.TextActions = TextActions;\r\n\r\n\t/**\r\n\t * @param {orion.editor.Editor} editor\r\n\t * @param {orion.editor.UndoStack} undoStack\r\n\t * @param {orion.editor.ContentAssist} [contentAssist]\r\n\t * @param {orion.editor.LinkedMode} [linkedMode]\r\n\t */\r\n\tfunction SourceCodeActions(editor, undoStack, contentAssist, linkedMode) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.linkedMode = linkedMode;\r\n\t\tif (this.contentAssist) {\r\n\t\t\tthis.contentAssist.addEventListener(\"ProposalApplied\", this.contentAssistProposalApplied.bind(this)); //$NON-NLS-0$\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\tSourceCodeActions.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tvar textView = this.editor.getTextView();\r\n\r\n\t\t\ttextView.setAction(\"lineStart\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.lineStart();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"enter\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoIndent();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"t\", true, false, true), \"trimTrailingWhitespaces\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"trimTrailingWhitespaces\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.trimTrailingWhitespaces();\r\n\t\t\t}.bind(this), {name: messages.trimTrailingWhitespaces});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(191, true), \"toggleLineComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"toggleLineComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.toggleLineComment();\r\n\t\t\t}.bind(this), {name: messages.toggleLineComment});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(191, true, !util.isMac, false, util.isMac), \"addBlockComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"addBlockComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.addBlockComment();\r\n\t\t\t}.bind(this), {name: messages.addBlockComment});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(220, true, !util.isMac, false, util.isMac), \"removeBlockComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"removeBlockComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.removeBlockComment();\r\n\t\t\t}.bind(this), {name: messages.removeBlockComment});\r\n\r\n\t\t\t// Autocomplete square brackets []\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"[\", false, false, false, false, \"keypress\"), \"autoPairSquareBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairSquareBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"[\", \"]\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(']', false, false, false, false, \"keypress\"), \"skipClosingSquareBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingSquareBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(']'); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete angle brackets <>\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"<\", false, false, false, false, \"keypress\"), \"autoPairAngleBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairAngleBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"<\", \">\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('>', false, false, false, false, \"keypress\"), \"skipClosingAngleBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingAngleBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket('>'); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete parentheses ()\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"(\", false, false, false, false, \"keypress\"), \"autoPairParentheses\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairParentheses\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"(\", \")\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(')', false, false, false, false, \"keypress\"), \"skipClosingParenthesis\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingParenthesis\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(\")\"); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete braces {}\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"{\", false, false, false, false, \"keypress\"), \"autoPairBraces\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairBraces\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"{\", \"}\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('}', false, false, false, false, \"keypress\"), \"skipClosingBrace\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingBrace\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(\"}\"); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete single quotations\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"'\", false, false, false, false, \"keypress\"), \"autoPairSingleQuotation\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n\t\t\ttextView.setAction(\"autoPairSingleQuotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairQuotations(\"'\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete double quotations\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('\"', false, false, false, false, \"keypress\"), \"autoPairDblQuotation\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n\t\t\ttextView.setAction(\"autoPairDblQuotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairQuotations('\"'); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"deletePrevious\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.deletePrevious();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tautoIndent: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif (textView.getOptions(\"singleMode\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tvar lineDelimiter = model.getLineDelimiter();\r\n\t\t\tvar matchCommentStart = /^[\\s]*\\/\\*[\\*]*[\\s]*$/;\r\n\t\t\tvar matchCommentDelimiter = /^[\\s]*\\*/;\r\n\t\t\tvar matchCommentEnd = /\\*\\/[\\s]*$/;\r\n\t\t\tvar self = this;\r\n\t\t\tfunction indent(selection, setText) {\r\n\t\t\t\tif (selection.start === selection.end) {\r\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(selection.start);\r\n\t\t\t\t\tvar lineText = model.getLine(lineIndex, false);\r\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tvar lineOffset = selection.start - lineStart;\r\n\t\t\t\t\tvar c;\r\n\t\t\t\t\twhile (index < lineOffset && ((c = lineText.charCodeAt(index)) === 32 || c === 9)) { index++; }\r\n\t\t\t\t\tvar prefix = lineText.substring(0, index);\r\n\t\t\t\t\tvar lineTextBeforeCaret = lineText.substring(0, lineOffset);\r\n\t\t\t\t\tvar lineTextAfterCaret = lineText.substring(lineOffset);\r\n\t\t\t\t\tvar text;\r\n\t\t\t\t\t// If the character before the caret is an opening brace, smart indent the next line.\r\n\t\t\t\t\tvar prevCharIdx;\r\n\t\t\t\t\tif (self.smartIndentation && lineText.charCodeAt(prevCharIdx = lineTextBeforeCaret.trimRight().length - 1) === 123) {\r\n\t\t\t\t\t\t// Remove any extra whitespace\r\n\t\t\t\t\t\tvar whitespaceBeforeCaret = lineOffset - prevCharIdx - 1;\r\n\t\t\t\t\t\tvar whitespaceAfterCaret = lineTextAfterCaret.length - lineTextAfterCaret.trimLeft().length;\r\n\t\r\n\t\t\t\t\t\ttext = lineText.charCodeAt(lineOffset + whitespaceAfterCaret) === 125 ?\r\n\t\t\t\t\t\t\t   lineDelimiter + prefix + tab + lineDelimiter + prefix :\r\n\t\t\t\t\t\t\t   lineDelimiter + prefix + tab;\r\n\t\r\n\t\t\t\t\t\tsetText(text, selection.start - whitespaceBeforeCaret, selection.end + whitespaceAfterCaret);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length + prefix.length + tab.length - whitespaceBeforeCaret;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t// Proceed with autocompleting multi-line comment if the text before the caret matches\r\n\t\t\t\t\t// the start or comment delimiter (*) of a multi-line comment\r\n\t\t\t\t\t} else if (self.autoCompleteComments && !matchCommentEnd.test(lineTextBeforeCaret) &&\r\n\t\t\t\t\t\t\t\t(matchCommentStart.test(lineTextBeforeCaret) || matchCommentDelimiter.test(lineTextBeforeCaret))) {\r\n\t\t\t\t\t\tvar caretOffset;\r\n\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Matches the start of a multi-line comment. Autocomplete the multi-line block comment,\r\n\t\t\t\t\t\t * moving any text after the caret into the block comment and setting the caret to be\r\n\t\t\t\t\t\t * after the comment delimiter.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tvar match = matchCommentStart.exec(lineTextBeforeCaret);\r\n\t\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \" * \"; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t// Text added into the comment block are trimmed of all preceding and trailing whitespaces.\r\n\t\t\t\t\t\t\t// If the text after the caret contains the ending of a block comment, exclude the ending.\r\n\t\t\t\t\t\t\tif (matchCommentEnd.test(lineTextAfterCaret)) {\r\n\t\t\t\t\t\t\t\ttext += lineTextAfterCaret.substring(0, lineTextAfterCaret.length - 2).trim();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttext += lineTextAfterCaret.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Add the closing to the multi-line block comment if the next line is not a\r\n\t\t\t\t\t\t\t// comment delimiter.\r\n\t\t\t\t\t\t\tif ((model.getLineCount() === lineIndex + 1) ||\r\n\t\t\t\t\t\t\t\t!matchCommentDelimiter.test(model.getLine(lineIndex + 1))) {\r\n\t\t\t\t\t\t\t\ttext += lineDelimiter + prefix + \" */\"; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetText(text, selection.start, selection.end + lineTextAfterCaret.length);\r\n\t\t\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length + prefix.length + 3;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Matches a comment delimiter (*) as the start of the line, and traverses up the lines to confirm if\r\n\t\t\t\t\t\t * it is a multi-line comment by matching the start of a block comment. If so, continue the\r\n\t\t\t\t\t\t * multi-line comment in the next line. Any text that follows after the caret is moved to the newly\r\n\t\t\t\t\t\t * added comment delimiter.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmatch = matchCommentDelimiter.exec(lineTextBeforeCaret);\r\n\t\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\t\tfor (var i = lineIndex - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tvar prevLine = model.getLine(i, false);\r\n\t\t\t\t\t\t\t\tif (matchCommentStart.test(prevLine)) {\r\n\t\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t\t * If the text after the caret matches the end of a comment block or the character in front of the\r\n\t\t\t\t\t\t\t\t\t * caret is a forward slash, continue the block comment with the caret and text after the caret on\r\n\t\t\t\t\t\t\t\t\t * the next line directly in front of the star (*).\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (matchCommentEnd.test(lineTextAfterCaret) || lineText.charCodeAt(lineOffset) === 47) {\r\n\t\t\t\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \"*\" + lineTextAfterCaret; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\t\tcaretOffset = selection.start + lineDelimiter.length + prefix.length + 1;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \"* \" + lineTextAfterCaret; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\t\tcaretOffset = selection.start + lineDelimiter.length + prefix.length + 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetText(text, selection.start, selection.end + lineTextAfterCaret.length);\r\n\t\t\t\t\t\t\t\t\tselection.start = selection.end = caretOffset;\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t} else if (!matchCommentDelimiter.test(prevLine)) {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (matchCommentEnd.test(lineTextBeforeCaret) && prefix.charCodeAt(prefix.length - 1) === 32) {\r\n\t\t\t\t\t\t// Matches the end of a block comment. Fix the indentation for the following line.\r\n\t\t\t\t\t\ttext = lineDelimiter + prefix.substring(0, prefix.length - 1);\r\n\t\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + text.length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (index > 0) {\r\n\t\t\t\t\t\t//TODO still wrong when typing inside folding\r\n\t\t\t\t\t\tindex = lineOffset;\r\n\t\t\t\t\t\twhile (index < lineText.length && ((c = lineText.charCodeAt(index++)) === 32 || c === 9)) { selection.end++; }\r\n\t\t\t\t\t\ttext = model.getLineDelimiter() + prefix;\r\n\t\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + text.length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tif (!indent(selection, setText)) {\r\n\t\t\t\t\tsetText(lineDelimiter, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddBlockComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar open, close;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tvar delimiters = styleAccessor.getBlockCommentDelimiters(selection.start);\r\n\t\t\t\t\topen = delimiters[0];\r\n\t\t\t\t\tclose = delimiters[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* fallback values */\r\n\t\t\t\t\topen = \"/*\"; //$NON-NLS-0$\r\n\t\t\t\t\tclose = \"*/\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = this._findEnclosingComment(model, selection.start, selection.end, open, close);\r\n\t\t\t\tif (result.commentStart !== undefined && result.commentEnd !== undefined) {\r\n\t\t\t\t\treturn; // Already in a comment\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar text = model.getText(selection.start, selection.end);\r\n\t\t\t\tif (text.length === 0) { return; }\r\n\t\r\n\t\t\t\tvar oldLength = text.length;\r\n\t\t\t\ttext = text.replace(open, \"\");\r\n\t\t\t\ttext = text.replace(close, \"\");\r\n\t\t\t\tvar newLength = text.length;\r\n\t\t\t\ttext = open + text + close;\r\n\t\r\n\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\tselection.start += open.length;\r\n\t\t\t\tselection.end +=  open.length + (newLength - oldLength);\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called on an opening bracket keypress.\r\n\t\t * Automatically inserts the specified opening and closing brackets around the caret or selected text.\r\n\t\t */\r\n\t\tautoPairBrackets: function(openBracket, closeBracket) {\r\n\t\t\tif (openBracket === \"[\" && !this.autoPairSquareBrackets) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"{\" && !this.autoPairBraces) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"(\" && !this.autoPairParentheses) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"<\" && !this.autoPairAngleBrackets) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar isClosingBracket = new RegExp(\"^$|[)}\\\\]>]\"); //$NON-NLS-0$ // matches any empty string and closing bracket\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1).trim(); //$NON-NLS-0$\r\n\t\t\t\tvar text;\r\n\t\t\t\tif (selection.start === selection.end && isClosingBracket.test(nextChar)) {\r\n\t\t\t\t\t// No selection and subsequent character is not a closing bracket - wrap the caret with the opening and closing brackets,\r\n\t\t\t\t\t// and maintain the caret position inbetween the brackets\r\n\t\t\t\t\ttext = openBracket + closeBracket;\r\n\t\t\t\t\tsetText(text, selection.start, selection.start);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + 1;\r\n\t\t\t\t} else if (selection.start !== selection.end) {\r\n\t\t\t\t\t// Wrap the selected text with the specified opening and closing brackets and keep selection on text\r\n\t\t\t\t\ttext = openBracket + model.getText(selection.start, selection.end) + closeBracket;\r\n\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\tselection.start += 1;\r\n\t\t\t\t\tselection.end += 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetText(openBracket, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + openBracket.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called on a quotation mark keypress.\r\n\t\t * Automatically inserts a pair of the specified quotation around the caret the caret or selected text.\r\n\t\t */\r\n\t\tautoPairQuotations: function(quotation) {\r\n\t\t\tif (!this.autoPairQuotation) { return false; }\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar isQuotation = new RegExp(\"^\\\"$|^'$\"); //$NON-NLS-0$\r\n\t\t\tvar isAlpha = new RegExp(\"\\\\w\"); //$NON-NLS-0$\r\n\t\t\tvar isClosingBracket = new RegExp(\"^$|[)}\\\\]>]\"); //$NON-NLS-0$ // matches any empty string and closing bracket\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar prevChar = (selection.start === 0) ? \"\" : model.getText(selection.start - 1, selection.start).trim(); //$NON-NLS-0$\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1).trim(); //$NON-NLS-0$\r\n\t\t\t\tfunction insertQuotation() {\r\n\t\t\t\t\tsetText(quotation, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + quotation.length;\r\n\t\t\t\t}\r\n\t\t\t\t// Wrap the selected text with the specified opening and closing quotation marks and keep selection on text\r\n\t\t\t\tif (selection.start !== selection.end) {\r\n\t\t\t\t\tvar text = model.getText(selection.start, selection.end);\r\n\t\t\t\t\tif (isQuotation.test(text)) {\r\n\t\t\t\t\t\tinsertQuotation();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetText(quotation + text + quotation, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start += 1;\r\n\t\t\t\t\t\tselection.end += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (nextChar === quotation) {\r\n\t\t\t\t\t// Skip over the next character if it matches the specified quotation mark\r\n\t\t\t\t\tselection.start = selection.end = selection.start + 1;\r\n\t\t\t\t} else if (prevChar === quotation || isQuotation.test(nextChar) || isAlpha.test(prevChar) || !isClosingBracket.test(nextChar)) {\r\n\t\t\t\t\tinsertQuotation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// No selection - wrap the caret with the opening and closing quotation marks, and maintain the caret position inbetween the quotations\r\n\t\t\t\t\tsetText(quotation + quotation, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + quotation.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called when a content assist proposal has been applied. Inserts the proposal into the\r\n\t\t * document. Activates Linked Mode if applicable for the selected proposal.\r\n\t\t * @param {orion.editor.ContentAssist#ProposalAppliedEvent} event\r\n\t\t */\r\n\t\tcontentAssistProposalApplied: function(event) {\r\n\t\t\t/*\r\n\t\t\t * The event.proposal is an object with this shape:\r\n\t\t\t * {   proposal: \"[proposal string]\", // Actual text of the proposal\r\n\t\t\t *     description: \"diplay string\", // Optional\r\n\t\t\t *     positions: [{\r\n\t\t\t *         offset: 10, // Offset of start position of parameter i\r\n\t\t\t *         length: 3  // Length of parameter string for parameter i\r\n\t\t\t *     }], // One object for each parameter; can be null\r\n\t\t\t *     escapePosition: 19, // Optional; offset that caret will be placed at after exiting Linked Mode.\r\n\t\t\t *     style: 'emphasis', // Optional: either emphasis, noemphasis, hr to provide custom styling for the proposal\r\n\t\t\t *     unselectable: false // Optional: if set to true, then this proposal cannnot be selected through the keyboard\r\n\t\t\t * }\r\n\t\t\t * Offsets are relative to the text buffer.\r\n\t\t\t */\r\n\t\t\tvar proposal = event.data.proposal;\r\n\r\n\t\t\t// If escapePosition is not provided, positioned the cursor at the end of the inserted text \r\n\t\t\tfunction escapePosition() {\r\n\t\t\t\tif (typeof proposal.escapePosition === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t\treturn proposal.escapePosition;\r\n\t\t\t\t}\r\n\t\t\t\treturn event.data.start + proposal.proposal.length;\r\n\t\t\t}\r\n\r\n\t\t\t//if the proposal specifies linked positions, build the model and enter linked mode\r\n\t\t\tif (Array.isArray(proposal.positions) && this.linkedMode) {\r\n\t\t\t\tvar positionGroups = [];\r\n\t\t\t\tproposal.positions.forEach(function(pos) {\r\n\t\t\t\t\t//ignore bad proposal values\r\n\t\t\t\t\t//@see https://bugs.eclipse.org/bugs/show_bug.cgi?id=513146\r\n\t\t\t\t\tif(typeof pos.offset === \"number\" && typeof pos.length === \"number\") {\r\n\t\t\t\t\t\tpositionGroups.push({positions: [{offset: pos.offset, length: pos.length}]});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(positionGroups.length > 0) {\r\n\t\t\t\t\tthis.linkedMode.enterLinkedMode({\r\n\t\t\t\t\t\tgroups: positionGroups,\r\n\t\t\t\t\t\tescapePosition: escapePosition()\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.editor.getTextView().setCaretOffset(escapePosition());\r\n\t\t\t\t}\r\n\t\t\t} else if (proposal.groups && proposal.groups.length > 0 && this.linkedMode) {\r\n\t\t\t\tthis.linkedMode.enterLinkedMode({\r\n\t\t\t\t\tgroups: proposal.groups,\r\n\t\t\t\t\tescapePosition: escapePosition()\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof proposal.escapePosition === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t//we don't want linked mode, but there is an escape position, so just set cursor position\r\n\t\t\t\tthis.editor.getTextView().setCaretOffset(proposal.escapePosition);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// On backspace keypress, checks if there are a pair of brackets or quotation marks to be deleted\r\n\t\tdeletePrevious: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tif (selection.start !== selection.end) { return; }\r\n\t\t\t\r\n\t\t\t\tvar prevChar = (selection.start === 0) ? \"\" : model.getText(selection.start - 1, selection.start); //$NON-NLS-0$\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1); //$NON-NLS-0$\r\n\t\r\n\t\t\t\tif (prevChar === \"(\" && nextChar === \")\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"[\" && nextChar === \"]\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"{\" && nextChar === \"}\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"<\" && nextChar === \">\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === '\"' && nextChar === '\"' || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"'\" && nextChar === \"'\") { //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tsetText(\"\", selection.start, selection.start + 1); //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t_findEnclosingComment: function(model, start, end, open, close) {\r\n\t\t\tvar firstLine = model.getLineAtOffset(start);\r\n\t\t\tvar lastLine = model.getLineAtOffset(end);\r\n\t\t\tvar i, line, extent, openPos, closePos;\r\n\t\t\tvar commentStart, commentEnd;\r\n\t\t\tfor (i = firstLine; i >= 0; i--) {\r\n\t\t\t\tline = model.getLine(i);\r\n\t\t\t\textent = (i === firstLine) ? start - model.getLineStart(firstLine) : line.length;\r\n\t\t\t\topenPos = line.lastIndexOf(open, extent);\r\n\t\t\t\tclosePos = line.lastIndexOf(close, extent);\r\n\t\t\t\tif (closePos > openPos) {\r\n\t\t\t\t\tbreak; // not inside a comment\r\n\t\t\t\t}\r\n\t\t\t\tif (openPos !== -1) {\r\n\t\t\t\t\tcommentStart = model.getLineStart(i) + openPos;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i = lastLine; i < model.getLineCount(); i++) {\r\n\t\t\t\tline = model.getLine(i);\r\n\t\t\t\textent = (i === lastLine) ? end - model.getLineStart(lastLine) : 0;\r\n\t\t\t\topenPos = line.indexOf(open, extent);\r\n\t\t\t\tclosePos = line.indexOf(close, extent);\r\n\t\t\t\tif (openPos !== -1 && openPos < closePos) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (closePos !== -1) {\r\n\t\t\t\t\tcommentEnd = model.getLineStart(i) + closePos;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {commentStart: commentStart, commentEnd: commentEnd};\r\n\t\t},\r\n\t\tlineStart: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection/*, setText*/) {\r\n\t\t\t\tvar caretOffset = selection.getCaret();\r\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caretOffset);\r\n\t\t\t\tvar lineOffset = model.getLineStart(lineIndex);\r\n\t\t\t\tvar lineText = model.getLine(lineIndex);\r\n\t\t\t\tvar offset;\r\n\t\t\t\tfor (offset=0; offset<lineText.length; offset++) {\r\n\t\t\t\t\tvar c = lineText.charCodeAt(offset);\r\n\t\t\t\t\tif (!(c === 32 || c === 9)) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toffset += lineOffset;\r\n\t\t\t\tif (caretOffset !== offset) {\r\n\t\t\t\t\tselection.setCaret(offset);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tselection.setCaret(lineOffset);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tremoveBlockComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar open, close;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tvar delimiters = styleAccessor.getBlockCommentDelimiters(selection.start);\r\n\t\t\t\t\topen = delimiters[0];\r\n\t\t\t\t\tclose = delimiters[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* fallback values, should not be needed */\r\n\t\t\t\t\topen = \"/*\"; //$NON-NLS-0$\r\n\t\t\t\t\tclose = \"*/\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Try to shrink selection to a comment block\r\n\t\t\t\tvar selectedText = model.getText(selection.start, selection.end);\r\n\t\t\t\tvar newStart, newEnd;\r\n\t\t\t\tvar i;\r\n\t\t\t\tfor (i = 0; i < selectedText.length; i++) {\r\n\t\t\t\t\tif (selectedText.substring(i, i + open.length) === open) {\r\n\t\t\t\t\t\tnewStart = selection.start + i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (; i < selectedText.length; i++) {\r\n\t\t\t\t\tif (selectedText.substring(i, i + close.length) === close) {\r\n\t\t\t\t\t\tnewEnd = selection.start + i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar text;\r\n\t\t\t\tif (newStart !== undefined && newEnd !== undefined) {\r\n\t\t\t\t\ttext = model.getText(newStart + open.length, newEnd);\r\n\t\t\t\t\tsetText(text, newStart, newEnd + close.length);\r\n\t\t\t\t\tselection.start = newStart;\r\n\t\t\t\t\tselection.end = newEnd;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Otherwise find enclosing comment block\r\n\t\t\t\t\tvar result = this._findEnclosingComment(model, selection.start, selection.end, open, close);\r\n\t\t\t\t\tif (!(result.commentStart === undefined || result.commentEnd === undefined)) {\r\n\t\t\t\t\t\ttext = model.getText(result.commentStart + open.length, result.commentEnd);\r\n\t\t\t\t\t\tsetText(text, result.commentStart, result.commentEnd + close.length);\r\n\t\t\t\t\t\tselection.start = selection.start - open.length;\r\n\t\t\t\t\t\tselection.end = selection.end - close.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttoggleLineComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\ttextView.setRedraw(false);\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\r\n\t\t\t\tvar comment;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tcomment = styleAccessor.getLineCommentDelimiter(model.getLineStart(firstLine));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomment = \"//\"; /* fallback value */ //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uncomment = true, lineIndices = [], index;\r\n\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\tvar lineText = model.getLine(i, true);\r\n\t\t\t\t\tindex = lineText.indexOf(comment);\r\n\t\t\t\t\tlineIndices.push(index);\r\n\t\t\t\t\tif (!uncomment || index === -1) {\r\n\t\t\t\t\t\tuncomment = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (index !== 0) {\r\n\t\t\t\t\t\t\tvar j;\r\n\t\t\t\t\t\t\tfor (j = 0; j < index; j++) {\r\n\t\t\t\t\t\t\t\tvar c = lineText.charCodeAt(j);\r\n\t\t\t\t\t\t\t\tif (!(c === 32 || c === 9)) {\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuncomment = j === index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar selStart, selEnd, l = comment.length, k;\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tif (uncomment) {\r\n\t\t\t\t\tfor (k = lineIndices.length - 1; k >= 0; k--) {\r\n\t\t\t\t\t\tindex = lineIndices[k] + model.getLineStart(firstLine + k);\r\n\t\t\t\t\t\tsetText(\"\", index, index + l);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar lastLineStart = model.getLineStart(lastLine);\r\n\t\t\t\t\tselStart = lineStart === selection.start ? selection.start : selection.start - l;\r\n\t\t\t\t\tselEnd = selection.end - (l * (lastLine - firstLine + 1)) + (selection.end === lastLineStart + 1 ? l : 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (k = lineIndices.length - 1; k >= 0; k--) {\r\n\t\t\t\t\t\tindex = model.getLineStart(firstLine + k);\r\n\t\t\t\t\t\tsetText(comment, index, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tselStart = lineStart === selection.start ? selection.start : selection.start + l;\r\n\t\t\t\t\tselEnd = selection.end + (l * (lastLine - firstLine + 1));\r\n\t\t\t\t}\r\n\t\t\t\tselection.start = selStart;\r\n\t\t\t\tselection.end = selEnd;\r\n\t\t\t});\r\n\t\t\ttextView.setRedraw(true);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttrimTrailingWhitespaces: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\teditor.getTextView().setRedraw(false);\r\n\t\t\tthis.startUndo();\r\n\t\t\tvar matchTrailingWhiteSpace = /(\\s+$)/;\r\n\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\tfor (var i = 0; i < lineCount; i++) {\r\n\t\t\t\tvar lineText = model.getLine(i);\r\n\t\t\t\tvar match = matchTrailingWhiteSpace.exec(lineText);\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\tvar lineStartOffset = model.getLineStart(i);\r\n\t\t\t\t\tvar matchLength = match[0].length;\r\n\t\t\t\t\tvar start = lineStartOffset + match.index;\r\n\t\t\t\t\tmodel.setText(\"\", start, start + matchLength);\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Move the caret to its original position prior to the save. If the caret\r\n\t\t\t\t\t * was in the trailing whitespaces, move the caret to the end of the line.\r\n\t\t\t\t\t */\r\n\t\t\t\t\tselections.forEach(function(selection) {\r\n\t\t\t\t\t\tif (selection.start > start) {\r\n\t\t\t\t\t\t\tselection.start = Math.max(start, selection.start - matchLength);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (selection.start !== selection.end && selection.end > start) {\r\n\t\t\t\t\t\t\tselection.end = Math.max(start, selection.end - matchLength);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.endUndo();\r\n\t\t\teditor.setSelections(selections, false);\r\n\t\t\teditor.getTextView().setRedraw(true);\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @name handleClosingBracket\n\t\t * @description When the user types a closing bracket we should skip auto-paired brackets and reduce indenting if\r\n\t\t * \t\t\t\twe are on a new line.\n\t\t * @function\n\t\t * @param closingChar {String} the closing bracket character\n\t\t * @returns returns <code>true</code> to skip printing the closing bracket, false to print it\n\t\t */\n\t\thandleClosingBracket: function(closingChar) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\tif (selections.length === 1 && selections[0].start === selections[0].end) {\r\n\t\t\t\t// If the next character is the same bracket close, skip it\r\n\t\t\t\tvar nextChar = selections[0].start === model.getCharCount() ? \"\" : model.getText(selections[0].start, selections[0].start + 1); //$NON-NLS-0$\r\n\t\t\t\tif (nextChar === closingChar) {\r\n\t\t\t\t\tselections[0].start = selections[0].end = selections[0].start + 1;\r\n\t\t\t\t\teditor.setSelections(selections);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t// If the close bracket is on a new line, reduce the indentation\r\n\t\t\t\tvar lineNum = model.getLineAtOffset(selections[0].start);\r\n\t\t\t\tvar line = model.getLine(lineNum, true);\r\n\t\t\t\tif (line.match(/^\\s*$/)){\r\n\t\t\t\t\tif(textView.getOptions(\"tabMode\")){ //$NON-NLS-1$\r\n\t\t\t\t\t\tvar tabSize = textView.getOptions(\"tabSize\"); //$NON-NLS-1$\r\n\t\t\t\t\t\tvar spaceTab = new Array(tabSize + 1).join(\" \"); //$NON-NLS-1$\r\n\t\t\t\t\t\tvar lineStart = model.getLineStart(lineNum);\r\n\t\t\t\t\t\tvar lineEnd = model.getLineEnd(lineNum);\r\n\t\t\t\t\t\tif (lineStart !== lineEnd) {\r\n\t\t\t\t\t\t\tif (line.indexOf(\"\\t\") === 0) { //$NON-NLS-1$\r\n\t\t\t\t\t\t\t\tline = line.substring(1);\r\n\t\t\t\t\t\t\t\tmodel.setText(line, lineStart, lineEnd);\r\n\t\t\t\t\t\t\t\teditor.setSelection(selections[0].start-1, selections[0].end-1);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t} else if (line.indexOf(spaceTab) === 0) {\r\n\t\t\t\t\t\t\t\tline = line.substring(tabSize);\r\n\t\t\t\t\t\t\t\tmodel.setText(line, lineStart, lineEnd);\r\n\t\t\t\t\t\t\t\teditor.setSelection(selections[0].start-tabSize, selections[0].end-tabSize);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetAutoPairParentheses: function(enabled) {\r\n\t\t\tthis.autoPairParentheses = enabled;\r\n\t\t},\r\n\t\tsetAutoPairBraces: function(enabled) {\r\n\t\t\tthis.autoPairBraces = enabled;\r\n\t\t},\r\n\t\tsetAutoPairSquareBrackets: function(enabled) {\r\n\t\t\tthis.autoPairSquareBrackets = enabled;\r\n\t\t},\r\n\t\tsetAutoPairAngleBrackets: function(enabled) {\r\n\t\t\tthis.autoPairAngleBrackets = enabled;\r\n\t\t},\r\n\t\tsetAutoPairQuotations: function(enabled) {\r\n\t\t\tthis.autoPairQuotation = enabled;\r\n\t\t},\r\n\t\tsetAutoCompleteComments: function(enabled) {\r\n\t\t\tthis.autoCompleteComments = enabled;\r\n\t\t},\r\n\t\tsetSmartIndentation: function(enabled) {\r\n\t\t\tthis.smartIndentation = enabled;\r\n\t\t}\r\n\t};\r\n\texports.SourceCodeActions = SourceCodeActions;\r\n\r\n\tif (!String.prototype.trimLeft) {\r\n\t\tString.prototype.trimLeft = function(){\r\n\t\t\treturn this.replace(/^\\s+/g, '');\r\n\t\t};\r\n\t}\r\n\tif (!String.prototype.trimRight) {\r\n\t\tString.prototype.trimRight = function(){\r\n\t\t\treturn this.replace(/\\s+$/g, '');\r\n\t\t};\r\n\t}\r\n\r\n\treturn exports;\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/undoStack\", [], function() { //$NON-NLS-0$\n\n\t/** \n\t * Constructs a new Change object.\n\t * \n\t * @class \n\t * @name orion.editor.Change\n\t * @private\n\t */\n\tfunction Change(model, offset, text, previousText, type) {\n\t\tthis.model = model;\n\t\tthis.offset = offset;\n\t\tthis.text = text;\n\t\tthis.previousText = previousText;\n\t\tthis.type = type;\n\t}\n\tChange.prototype = {\n\t\t/** @ignore */\n\t\tgetRedoChanges: function() {\n\t\t\treturn [{start: this.offset, end: this.offset + this.previousText.length, text: this.text}];\n\t\t},\n\t\t/** @ignore */\n\t\tgetUndoChanges: function() {\n\t\t\treturn [{start: this.offset, end: this.offset + this.text.length, text: this.previousText}];\n\t\t},\n\t\t/** @ignore */\n\t\tundo: function (view, select) {\n\t\t\tthis._doUndoRedo(this.offset, this.previousText, this.text, view, select);\n\t\t\treturn true;\n\t\t},\n\t\t/** @ignore */\n\t\tredo: function (view, select) {\n\t\t\tthis._doUndoRedo(this.offset, this.text, this.previousText, view, select);\n\t\t\treturn true;\n\t\t},\n\t\tmerge: function(start, text, previousText, type, end) {\n\t\t\tif (type === this.type) {\n\t\t\t\tif (type === 1 && start === this.offset + this.text.length) {\n\t\t\t\t\tthis.text += text;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (type === -1 && end === this.offset) {\n\t\t\t\t\tthis.offset = start;\n\t\t\t\t\tthis.previousText = previousText + this.previousText;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (type === -1 && start === this.offset) {\n\t\t\t\t\tthis.previousText = this.previousText + previousText;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_doUndoRedo: function(offset, text, previousText, view, select) {\n\t\t\tthis.model.setText(text, offset, offset + previousText.length);\n\t\t\tif (select && view) {\n\t\t\t\tvar model = view.getModel();\n\t\t\t\tif (model !== this.model) {\n\t\t\t\t\toffset = model.mapOffset(offset, true);\n\t\t\t\t}\n\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t}\n\t\t}\n\t};\n\n\t/** \n\t * Constructs a new CompoundChange object.\n\t * \n\t * @param owner the owner of the compound change\n\t *\n\t * @class \n\t * @name orion.editor.CompoundChange\n\t * @private\n\t */\n\tfunction CompoundChange (owner) {\n\t\tthis.owner = owner;\n\t\tthis.changes = [];\n\t}\n\tCompoundChange.prototype = {\n\t\t/** @ignore */\n\t\tgetRedoChanges: function() {\n\t\t\tvar changes = [];\n\t\t\tfor (var i=0; i<this.changes.length; i++) {\n\t\t\t\tchanges = changes.concat(this.changes[i].getRedoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/** @ignore */\n\t\tgetUndoChanges: function() {\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.changes.length - 1; i >= 0; i--) {\n\t\t\t\tchanges = changes.concat(this.changes[i].getUndoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/** @ignore */\n\t\tadd: function (change) {\n\t\t\tthis.changes.push(change);\n\t\t},\n\t\t/** @ignore */\n\t\tend: function (view) {\n\t\t\tif (view) {\n\t\t\t\tthis.endSelection = view.getSelections();\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.end) {\n\t\t\t\towner.end();\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\tundo: function (view, select) {\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(false);\n\t\t\t}\n\t\t\tfor (var i=this.changes.length - 1; i >= 0; i--) {\n\t\t\t\tthis.changes[i].undo(view, false);\n\t\t\t}\n\t\t\tif (select && view) {\n\t\t\t\tview.setSelections(this.startSelection);\n\t\t\t}\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(true);\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.undo) {\n\t\t\t\towner.undo();\n\t\t\t}\n\t\t\treturn this.changes.length > 0;\n\t\t},\n\t\t/** @ignore */\n\t\tredo: function (view, select) {\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(false);\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.changes.length; i++) {\n\t\t\t\tthis.changes[i].redo(view, false);\n\t\t\t}\n\t\t\tif (select && view) {\n\t\t\t\tview.setSelections(this.endSelection);\n\t\t\t}\n\t\t\tif (this.changes.length > 1, view) {\n\t\t\t\tview.setRedraw(true);\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.redo) {\n\t\t\t\towner.redo();\n\t\t\t}\n\t\t\treturn this.changes.length > 0;\n\t\t},\n\t\tmerge: function(start, text, previousText, type, end, compoundChange) {\n\t\t\tvar length = this.changes.length;\n\t\t\tif (length > 0 && this === compoundChange) {\n\t\t\t\treturn this.changes[length - 1].merge(start, text, previousText, type, end);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/** @ignore */\n\t\tstart: function (view) {\n\t\t\tif (view) {\n\t\t\t\tthis.startSelection = view.getSelections();\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.start) {\n\t\t\t\towner.start();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Constructs a new UndoStack on a text view.\n\t *\n\t * @param {orion.editor.TextView} view the text view for the undo stack.\n\t * @param {Number} [size=100] the size for the undo stack.\n\t *\n\t * @name orion.editor.UndoStack\n\t * @class The UndoStack is used to record the history of a text model associated to an view. Every\n\t * change to the model is added to stack, allowing the application to undo and redo these changes.\n\t *\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * </p>\n\t */\n\tfunction UndoStack (view, size) {\n\t\tthis.size = size !== undefined ? size : 100;\n\t\tthis.reset();\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanging: function(e) {\n\t\t\t\tself._onChanging(e);\n\t\t\t},\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t}\n\t\t};\n\t\tif (view.getModel) {\n\t\t\tvar model = view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tthis.model = model;\n\t\t\tthis.setView(view);\n\t\t} else {\n\t\t\tthis.shared = true;\n\t\t\tthis.model = view;\n\t\t}\n\t\tthis.model.addEventListener(\"Changing\", this._listener.onChanging); //$NON-NLS-0$\n\t}\n\tUndoStack.prototype = /** @lends orion.editor.UndoStack.prototype */ {\n\t\t/**\n\t\t * Destroy the undo stack.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis._onDestroy();\n\t\t},\n\t\t/**\n\t\t * Adds a change to the stack.\n\t\t * \n\t\t * @param change the change to add.\n\t\t */\n\t\tadd: function (change) {\n\t\t\tif (this.compoundChange) {\n\t\t\t\tthis.compoundChange.add(change);\n\t\t\t} else {\n\t\t\t\tvar length = this.stack.length;\n\t\t\t\tthis.stack.splice(this.index, length-this.index, change);\n\t\t\t\tthis.index++;\n\t\t\t\tif (this.stack.length > this.size) {\n\t\t\t\t\tthis.stack.shift();\n\t\t\t\t\tthis.index--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/** \n\t\t * Marks the current state of the stack as clean.\n\t\t *\n\t\t * <p>\n\t\t * This function is typically called when the content of view associated with the stack is saved.\n\t\t * </p>\n\t\t *\n\t\t * @see orion.editor.UndoStack#isClean\n\t\t */\n\t\tmarkClean: function() {\n\t\t\tthis._commitUndo();\n\t\t\tthis.cleanChange = this.stack[this.index - 1];\n\t\t\tif (this.cleanChange) {\n\t\t\t\tthis.cleanChange.type = 2;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns true if current state of stack is the same\n\t\t * as the state when markClean() was called.\n\t\t *\n\t\t * <p>\n\t\t * For example, the application calls markClean(), then calls undo() four times and redo() four times.\n\t\t * At this point isClean() returns true.  \n\t\t * </p>\n\t\t * <p>\n\t\t * This function is typically called to determine if the content of the view associated with the stack\n\t\t * has changed since the last time it was saved.\n\t\t * </p>\n\t\t *\n\t\t * @return {Boolean} returns if the state is the same as the state when markClean() was called.\n\t\t *\n\t\t * @see orion.editor.UndoStack#markClean\n\t\t */\n\t\tisClean: function() {\n\t\t\treturn this.cleanChange === this.stack[this.index - 1];\n\t\t},\n\t\t/**\n\t\t * Returns true if there is at least one change to undo.\n\t\t *\n\t\t * @return {Boolean} returns true if there is at least one change to undo.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t * @see orion.editor.UndoStack#undo\n\t\t */\n\t\tcanUndo: function() {\n\t\t\treturn this.index > 0;\n\t\t},\n\t\t/**\n\t\t * Returns true if there is at least one change to redo.\n\t\t *\n\t\t * @return {Boolean} returns true if there is at least one change to redo.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t * @see orion.editor.UndoStack#redo\n\t\t */\n\t\tcanRedo: function() {\n\t\t\treturn (this.stack.length - this.index) > 0;\n\t\t},\n\t\t/**\n\t\t * Finishes a compound change.\n\t\t *\n\t\t * @see orion.editor.UndoStack#startCompoundChange\n\t\t */\n\t\tendCompoundChange: function() {\n\t\t\tif (this.compoundChange) {\n\t\t\t\tthis.compoundChange.end(this.view);\n\t\t\t}\n\t\t\tthis.compoundChange = undefined;\n\t\t},\n\t\t/**\n\t\t * Returns the sizes of the stack.\n\t\t *\n\t\t * @return {object} a object where object.undo is the number of changes that can be un-done, \n\t\t *  and object.redo is the number of changes that can be re-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t */\n\t\tgetSize: function() {\n\t\t\treturn {\n\t\t\t\tundo: this.index,\n\t\t\t\tredo: this.stack.length - this.index\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * @class This object represents a text change.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.UndoStack}<br/>\n\t\t * {@link orion.editor.UndoStack#getUndoChanges}<br/>\n\t\t * {@link orion.editor.UndoStack#getRedoChanges}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.TextChange\n\t\t * \n\t\t * @property {Number} start The start offset in the model of the range to be replaced.\n\t\t * @property {Number} end The end offset in the model of the range to be replaced\n\t\t * @property {String} text the text to be inserted\n\t\t */\n\t\t/**\n\t\t * Returns the redo changes.\n\t\t *\n\t\t * @return {orion.editor.TextChange[]} an array of TextChanges that are returned in the order\n\t\t * that they occurred (most recent change last).\n\t\t *\n\t\t * @see orion.editor.UndoStack#getUndoChanges\n\t\t */\n\t\tgetRedoChanges: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.index; i<this.stack.length; i++) {\n\t\t\t\tchanges = changes.concat(this.stack[i].getRedoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/**\n\t\t * Returns the undo changes.\n\t\t *\n\t\t * @return {orion.editor.TextChange[]} an array of TextChanges that are returned in the reverse order\n\t\t * that they occurred (most recent change first).\n\t\t *\n\t\t * @see orion.editor.UndoStack#getRedoChanges\n\t\t */\n\t\tgetUndoChanges: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.index; i >= 0; i--) {\n\t\t\t\tchanges = changes.concat(this.stack[i].getUndoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/**\n\t\t * Undo the last change in the stack.\n\t\t *\n\t\t * @return {Boolean} returns true if a change was un-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#redo\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t */\n\t\tundo: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar change, result = false;\n\t\t\tthis._ignoreUndo = true;\n\t\t\tdo {\n\t\t\t\tif (this.index <= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tchange = this.stack[--this.index];\n\t\t\t} while (!(result = change.undo(this.view, true)));\n\t\t\tthis._ignoreUndo = false;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Redo the last change in the stack.\n\t\t *\n\t\t * @return {Boolean} returns true if a change was re-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#undo\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t */\n\t\tredo: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar change, result = false;\n\t\t\tthis._ignoreUndo = true;\n\t\t\tdo {\n\t\t\t\tif (this.index >= this.stack.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tchange = this.stack[this.index++];\n\t\t\t} while (!(result = change.redo(this.view, true)));\n\t\t\tthis._ignoreUndo = false;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Reset the stack to its original state. All changes in the stack are thrown away.\n\t\t */\n\t\treset: function() {\n\t\t\tthis.index = 0;\n\t\t\tthis.cleanChange = undefined;\n\t\t\tthis.stack = [];\n\t\t\tthis._ignoreUndo = false;\n\t\t\tthis._compoundChange = undefined;\n\t\t},\n\t\tsetView: function(view) {\n\t\t\tif (this.view === view) { return; }\n\t\t\tif (this.view) {\n\t\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis.view = view;\n\t\t\tif (this.view) {\n\t\t\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Starts a compound change. \n\t\t * <p>\n\t\t * All changes added to stack from the time startCompoundChange() is called\n\t\t * to the time that endCompoundChange() is called are compound on one change that can be un-done or re-done\n\t\t * with one single call to undo() or redo().\n\t\t * </p>\n\t\t *\n\t\t * @param owner the owner of the compound change which is called for start, end, undo and redo.\n\t\t *\t\t \n\t\t * @return the compound change\n\t\t *\n\t\t * @see orion.editor.UndoStack#endCompoundChange\n\t\t */\n\t\tstartCompoundChange: function(owner) {\n\t\t\tthis._commitUndo();\n\t\t\tvar change = new CompoundChange(owner);\n\t\t\tthis.add(change);\n\t\t\tthis.compoundChange = change;\n\t\t\tthis.compoundChange.start(this.view);\n\t\t\treturn this.compoundChange;\n\t\t},\n\t\t_commitUndo: function () {\n\t\t\tthis.endCompoundChange();\n\t\t},\n\t\t_onDestroy: function(evt) {\n\t\t\tif (!evt /* undo stack destroyed */ || !this.shared) {\n\t\t\t\tthis.model.removeEventListener(\"Changing\", this._listener.onChanging); //$NON-NLS-0$\n\t\t\t}\n\t\t\tif (this.view) {\n\t\t\t\tthis.view.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t},\n\t\t_trackUnsavedChanges: function(e) {\n\t\t\tif (!this._unsavedChanges) return;\n\t\t\tvar length = this._unsavedChanges.length;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar start = e.start;\n\t\t\tvar end = e.start + removedCharCount;\n\t\t\tvar type = 0;\n\t\t\tif (addedCharCount === 0) {\n\t\t\t\ttype = -1;\n\t\t\t} else if (removedCharCount === 0) {\n\t\t\t\ttype = 1;\n\t\t\t}\n\t\t\tif (length > 0) {\n\t\t\t\tif (type === this._previousChangeType) {\n\t\t\t\t\tvar previousChange = this._unsavedChanges[length-1];\n\t\t\t\t\tif (removedCharCount === 0 && start === previousChange.end + previousChange.text.length) {\n\t\t\t\t\t\tpreviousChange.text += e.text;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.addedCharCount === 0 && end === previousChange.start) {\n\t\t\t\t\t\tpreviousChange.start = start;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._previousChangeType = type;\n\t\t\tthis._unsavedChanges.push({start:start, end:end, text:e.text});\n\t\t},\n\t\t_onChanging: function(e) {\n\t\t\tthis._trackUnsavedChanges(e);\n\t\t\tif (this._ignoreUndo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar text = e.text;\n\t\t\tvar start = e.start;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar end = start + removedCharCount;\n\t\t\tvar type = 0;\n\t\t\tif (addedCharCount === 0 && removedCharCount === 1) {\n\t\t\t\ttype = -1;\n\t\t\t} else if (addedCharCount === 1 && removedCharCount === 0) {\n\t\t\t\ttype = 1;\n\t\t\t}\n\t\t\tvar length = this.stack.length;\n\t\t\tvar previousText = this.model.getText(start, end);\n\t\t\tif (length > 0 && this.index === length) {\n\t\t\t\tvar change = this.stack[length - 1];\n\t\t\t\tif (change.merge(start, text, previousText, type, end, this.compoundChange)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.add(new Change(this.model, start, text, previousText, type));\n\t\t}\n\t};\n\t\n\treturn {\n\t\tUndoStack: UndoStack\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/**\n * @class Provides the various rulers that show up on the left and right sides of the editor.  The rulers\n * \t\t\tcontain annotations with varying styles, hovers and on click behaviours.\n */\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/rulers\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textView',\n\t'orion/editor/annotations',\n\t'orion/editor/tooltip', \n\t'orion/objects',\n\t'orion/editor/util',\n\t'orion/util'\n], function(messages, mTextView, mAnnotations, mTooltip, objects, textUtil, util) {\n\n\tfunction BaseRuler (rulerLocation, rulerOverview, rulerStyle) {\n\t\tthis._location = rulerLocation || \"left\"; //$NON-NLS-0$\n\t\tthis._overview = rulerOverview || \"page\"; //$NON-NLS-0$\n\t\tthis._rulerStyle = rulerStyle;\n\t\tthis._view = null;\n\t}\n\tBaseRuler.prototype = /** @lends orion.editor.BaseRuler.prototype */ {\n\t\t/**\n\t\t * Returns the ruler location.\n\t\t *\n\t\t * @returns {String} the ruler location, which is either \"left\" or \"right\" or \"margin\".\n\t\t *\n\t\t * @see orion.editor.Ruler#getOverview\n\t\t */\n\t\tgetLocation: function() {\n\t\t\treturn this._location;\n\t\t},\n\t\t/**\n\t\t * Returns the ruler overview type.\n\t\t *\n\t\t * @returns {String} the overview type, which is either \"page\" or \"document\" or \"fixed\".\n\t\t *\n\t\t * @see orion.editor.Ruler#getLocation\n\t\t */\n\t\tgetOverview: function() {\n\t\t\treturn this._overview;\n\t\t},\n\t\t/**\n\t\t * Returns the style information for the ruler.\n\t\t *\n\t\t * @returns {orion.editor.Style} the style information.\n\t\t */\n\t\tgetRulerStyle: function() {\n\t\t\treturn this._rulerStyle;\n\t\t},\n\t\t/**\n\t\t * Returns the text view.\n\t\t *\n\t\t * @returns {orion.editor.TextView} the text view.\n\t\t *\n\t\t * @see orion.editor.Ruler#setView\n\t\t */\n\t\tgetView: function() {\n\t\t\treturn this._view;\n\t\t},\n\t\t/**\n\t\t * Sets the view for the ruler.\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler\n\t\t * is added to the view.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.TextView} view the text view.\n\t\t */\n\t\tsetView: function (view) {\n\t\t\tif (this._onTextModelChanged && this._view) {\n\t\t\t\tthis._view.removeEventListener(\"ModelChanged\", this._listener.onTextModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._view = view;\n\t\t\tif (this._onTextModelChanged && this._view) {\n\t\t\t\tthis._view.addEventListener(\"ModelChanged\", this._listener.onTextModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t};\n\n\t/**\n\t * Constructs a new ruler. \n\t * <p>\n\t * The default implementation does not implement all the methods in the interface\n\t * and is useful only for objects implementing rulers.\n\t * <p/>\n\t * \n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {String} [rulerOverview=\"page\"] the overview for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle] the style for the ruler. \n\t * \n\t * @class This interface represents a ruler for the text view.\n\t * <p>\n\t * A Ruler is a graphical element that is placed either on the left or on the right side of \n\t * the view. It can be used to provide the view with per line decoration such as line numbering,\n\t * bookmarks, breakpoints, folding disclosures, etc. \n\t * </p><p>\n\t * There are two types of rulers: page and document. A page ruler only shows the content for the lines that are\n\t * visible, while a document ruler always shows the whole content.\n\t * </p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.LineNumberRuler}<br/>\n\t * {@link orion.editor.AnnotationRuler}<br/>\n\t * {@link orion.editor.OverviewRuler}<br/> \n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#addRuler}\n\t * </p>\t\t \n\t * @name orion.editor.Ruler\n\t * @borrows orion.editor.AnnotationTypeList#addAnnotationType as #addAnnotationType\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationTypePriority as #getAnnotationTypePriority\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationsByType as #getAnnotationsByType\n\t * @borrows orion.editor.AnnotationTypeList#isAnnotationTypeVisible as #isAnnotationTypeVisible\n\t * @borrows orion.editor.AnnotationTypeList#removeAnnotationType as #removeAnnotationType\n\t */\n\tfunction Ruler (annotationModel, rulerLocation, rulerOverview, rulerStyle) {\n\t\tBaseRuler.call(this, rulerLocation, rulerOverview, rulerStyle);\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonTextModelChanged: function(e) {\n\t\t\t\tself._onTextModelChanged(e);\n\t\t\t},\n\t\t\tonAnnotationModelChanged: function(e) {\n\t\t\t\tself._onAnnotationModelChanged(e);\n\t\t\t}\n\t\t};\n\t\tthis.setAnnotationModel(annotationModel);\n\t}\n\tRuler.prototype = objects.mixin(new BaseRuler(), /** @lends orion.editor.Ruler.prototype */ {\n\t\t/**\n\t\t * Returns the annotations for a given line range merging multiple\n\t\t * annotations when necessary.\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler is redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} startLine the start line index\n\t\t * @param {Number} endLine the end line index\n\t\t * @return {orion.editor.Annotation[]} the annotations for the line range. The array might be sparse.\n\t\t */\n\t\tgetAnnotations: function(startLine, endLine) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) { return []; }\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar start = model.getLineStart(startLine);\n\t\t\tvar end = model.getLineEnd(endLine - 1);\n\t\t\tvar baseModel = model;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tbaseModel = model.getBaseModel();\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tend = model.mapOffset(end);\n\t\t\t}\n\t\t\tvar result = [];\n\t\t\tvar annotations = this.getAnnotationsByType(annotationModel, start, end);\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tvar annotation = annotations[i];\n\t\t\t\tvar annotationLineStart = baseModel.getLineAtOffset(annotation.start);\n\t\t\t\tvar annotationLineEnd = baseModel.getLineAtOffset(Math.max(annotation.start, annotation.end - 1));\n\t\t\t\tfor (var lineIndex = annotationLineStart; lineIndex<=annotationLineEnd; lineIndex++) {\n\t\t\t\t\tvar visualLineIndex = lineIndex;\n\t\t\t\t\tif (model !== baseModel) {\n\t\t\t\t\t\tvar ls = baseModel.getLineStart(lineIndex);\n\t\t\t\t\t\tls = model.mapOffset(ls, true);\n\t\t\t\t\t\tif (ls === -1) { continue; }\n\t\t\t\t\t\tvisualLineIndex = model.getLineAtOffset(ls);\n\t\t\t\t\t}\n\t\t\t\t\tif (!(startLine <= visualLineIndex && visualLineIndex < endLine)) { continue; }\n\t\t\t\t\tvar rulerAnnotation = this._mergeAnnotation(result[visualLineIndex], annotation, lineIndex - annotationLineStart, annotationLineEnd - annotationLineStart + 1);\n\t\t\t\t\tif (rulerAnnotation) {\n\t\t\t\t\t\tresult[visualLineIndex] = rulerAnnotation;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._multiAnnotation && this._multiAnnotationOverlay) {\n\t\t\t\tfor (var k in result) {\n\t\t\t\t\tif (result[k]._multiple) {\n\t\t\t\t\t\tresult[k].html = result[k].html + this._multiAnnotationOverlay.html;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation model.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationModel} the ruler annotation model.\n\t\t *\n\t\t * @see orion.editor.Ruler#setAnnotationModel\n\t\t */\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\t/**\n\t\t * Returns the widest annotation which determines the width of the ruler.\n\t\t * <p>\n\t\t * If the ruler does not have a fixed width it should provide the widest\n\t\t * annotation to avoid the ruler from changing size as the view scrolls.\n\t\t * </p>\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler is redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @returns {orion.editor.Annotation} the widest annotation.\n\t\t *\n\t\t * @see orion.editor.Ruler#getAnnotations\n\t\t */\n\t\tgetWidestAnnotation: function() {\n\t\t\treturn null;\n\t\t},\n\t\t/**\n\t\t * Sets the annotation model for the ruler.\n\t\t *\n\t\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model.\n\t\t *\n\t\t * @see orion.editor.Ruler#getAnnotationModel\n\t\t */\n\t\tsetAnnotationModel: function (annotationModel) {\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.removeEventListener(\"Changed\", this._listener.onAnnotationModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._annotationModel = annotationModel;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.addEventListener(\"Changed\", this._listener.onAnnotationModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the annotation that is displayed when a given line contains multiple\n\t\t * annotations.  This annotation is used when there are different types of\n\t\t * annotations in a given line.\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation for lines with multiple annotations.\n\t\t * \n\t\t * @see orion.editor.Ruler#setMultiAnnotationOverlay\n\t\t */\n\t\tsetMultiAnnotation: function(annotation) {\n\t\t\tthis._multiAnnotation = annotation;\n\t\t},\n\t\t/**\n\t\t * Sets the annotation that overlays a line with multiple annotations.  This annotation is displayed on\n\t\t * top of the computed annotation for a given line when there are multiple annotations of the same type\n\t\t * in the line. It is also used when the multiple annotation is not set.\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation overlay for lines with multiple annotations.\n\t\t * \n\t\t * @see orion.editor.Ruler#setMultiAnnotation\n\t\t */\n\t\tsetMultiAnnotationOverlay: function(annotation) {\n\t\t\tthis._multiAnnotationOverlay = annotation;\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user clicks a line annotation. We select an annotation on the line using\n\t\t * the following logic:\n\t\t * 1) If no selection or selection is on another line, select the first annotation\n\t\t * 2) If an annotation is selected, select the next annotation in the model\n\t\t * 3) If there is a selection that does not match an annotation, select the first annotation after the selection start\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the click event.\n\t\t */\n\t\tonClick: function(lineIndex, e) {\n\t\t\tif (lineIndex === undefined) { return; }\n\t\t\tvar view = this._view;\n\t\t\t\n\t\t\tvar model = view.getModel();\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex, true);\n\t\t\tvar selectionStart = view.getSelection().start;\n\t\t\tvar selectionEnd = view.getSelection().end;\n\t\t\t\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar annotation, start, end;\n\t\t\tif (annotationModel){\n\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tlineStart = model.mapOffset(lineStart);\n\t\t\t\t\tlineEnd = model.mapOffset(lineEnd);\n\t\t\t\t\tselectionStart = model.mapOffset(selectionStart);\n\t\t\t\t\tselectionEnd = model.mapOffset(selectionEnd);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar self = this;\n\t\t\t\tannotation = this._findNextAnnotation(annotationModel, lineStart, lineEnd, selectionStart, selectionEnd, \n\t\t\t\t\tfunction(annotationType){\n\t\t\t\t\t\treturn self.isAnnotationTypeVisible(annotationType);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t// Select the annotation or the start of the line\n\t\t\t\tstart = annotation ? annotation.start : lineStart;\n\t\t\t\tend = annotation ? annotation.end : lineStart;\n\t\t\t\t\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// TODO What does this code do\n\t\t\t\tif (annotation && annotation.groupId !== undefined) {\n\t\t\t\t\tif (this._currentClickGroup === annotation.groupId) {\n\t\t\t\t\t\tthis._currentClickGroup = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._currentClickGroup = annotation.groupId;\n\t\t\t\t\t}\n\t\t\t\t\tthis._setCurrentGroup(lineIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Set the selection before opening the tooltip otherwise the tooltip will be closed immediately\n\t\t\tthis._view.setSelection(end, start, 1/3, function(){});\n\t\t\t\n\t\t\t// Open the tooltip for the selected annotation in the same location as the multi-annotation ruler tooltip.\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (tooltip) {\n\t\t\t\tif (annotation && this.getLocation() === \"left\"){ //$NON-NLS-0$\n\t\t\t\t\ttooltip.show({getTooltipInfo: function() {\n\t\t\t\t\t\t\treturn self._getTooltipInfo([annotation]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false, false);\n\t\t\t\t} else {\n\t\t\t\t\ttooltip.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user double clicks a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the double click event.\n\t\t * @callback\n\t\t */\n\t\tonDblClick: function(lineIndex, e) {\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user moves the mouse over a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse move event.\n\t\t */\n\t\tonMouseMove: function(lineIndex, e) {\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (!tooltip) { return; }\n\t\t\tif (tooltip.isVisible() && this._tooltipLineIndex === lineIndex) { return; }\n\t\t\tthis._tooltipLineIndex = lineIndex;\n\t\t\t\n\t\t\t// Prevent spurious mouse event (e.g. on a scroll)\t\t\t\t\t\n\t\t\tif (e.clientX === this._lastMouseX\n\t\t\t\t&& e.clientY === this._lastMouseY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._lastMouseX = e.clientX;\n\t\t\tthis._lastMouseY = e.clientY;\n\n\t\t\tif (this._hoverTimeout) {\n\t\t\t\twindow.clearTimeout(this._hoverTimeout);\n\t\t\t\tthis._hoverTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\tvar target = e.target ? e.target : e.srcElement;\n\t\t\tvar bounds = target.getBoundingClientRect();\n\t\t\tthis._curElementBounds = Object.create(null);\n\t\t\tthis._curElementBounds.top = bounds.top;\n\t\t\tthis._curElementBounds.left = bounds.left;\n\t\t\tthis._curElementBounds.height = bounds.height;\n\t\t\tthis._curElementBounds.width = bounds.width;\n\t\t\t\n\t\t\t// If we have the entire ruler selected, just use a 1 pixel high area in the ruler (Bug 463486)\n\t\t\tif (target === this.node){\n\t\t\t\tthis._curElementBounds.top = e.clientY;\n\t\t\t\tthis._curElementBounds.height = 1;\n\t\t\t}\n\t\t\t\n\t\t\tvar self = this;\n\t\t\tself._hoverTimeout = window.setTimeout(function() {\n\t\t\t\tself._hoverTimeout = null;\n\t\t\t\ttooltip.onHover({\n\t\t\t\t\tgetTooltipInfo: function() {\n\t\t\t\t\t\tvar annotations = self._getAnnotationsAtLineIndex(self._tooltipLineIndex);\n\t\t\t\t\t\tvar content = self._getTooltipContents(self._tooltipLineIndex, annotations);\n\t\t\t\t\t\treturn self._getTooltipInfo(content, e.clientY, {source: \"ruler\", rulerLocation: self.getLocation()}); //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t\t}, e.clientX, e.clientY);\n\t\t\t}, 175);\n\t\t},\n\t\t/**\n\t\t * This event is sent when the mouse pointer enters a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse over event.\n\t\t */\n\t\tonMouseOver: function(lineIndex, e) {\n\t\t\tthis.onMouseMove(lineIndex, e);\n\t\t\tif (!this._currentClickGroup) {\n\t\t\t\tthis._setCurrentGroup(lineIndex);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This event is sent when the mouse pointer exits a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse out event.\n\t\t * @callback\n\t\t */\n\t\tonMouseOut: function(lineIndex, e) {\n\t\t\tif (!this._currentClickGroup) {\n\t\t\t\tthis._setCurrentGroup(-1);\n\t\t\t}\n\n\t\t\tif (this._hoverTimeout) {\n\t\t\t\twindow.clearTimeout(this._hoverTimeout);\n\t\t\t\tthis._hoverTimeout = null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @name _findNextAnnotation\n\t\t * @description Looks at all annotations in the given range and attempt to find the next valid\n\t\t * \t\t\t\tannotation after the current selection.\n\t\t * @function\n\t\t * @private\n\t\t * @param annotationModel The annotation model to lookup annotations in\n\t\t * @param rangeStart The start range to search for annotations (required)\n\t\t * @param rangeEnd The end range to search for annotations (required)\n\t\t * @param selectionStart The start of the current selection (optional)\n\t\t * @param selectionEnd The end of the current selection (optional)\n\t\t * @param isAnnotationTypeVisible A function callback to check if a given annotation type is valid or visible (optional)\n\t\t * @returns The next annotation in the list or <code>null</code>\n\t\t */\n\t\t_findNextAnnotation: function(annotationModel, rangeStart, rangeEnd, selectionStart, selectionEnd, isAnnotationTypeVisible){\n\t\t\tvar annotation = null;\n\t\t\tvar selectedAnnotation;\n\t\t\tvar searchStart = rangeStart;\n\t\t\t\n\t\t\tif (selectionStart >= 0 && selectionEnd >= 0){\n\t\t\t\tif (selectionStart >= rangeStart && selectionStart < rangeEnd){\n\t\t\t\t\tsearchStart = selectionStart;\n\t\t\t\t\tvar selectedAnnotations = annotationModel.getAnnotations(selectionStart, selectionEnd);\n\t\t\t\t\twhile (!selectedAnnotation && selectedAnnotations.hasNext()){\n\t\t\t\t\t\tvar current = selectedAnnotations.next();\n\t\t\t\t\t\tif (isAnnotationTypeVisible && !isAnnotationTypeVisible(current.type)) { continue; }\n\t\t\t\t\t\tif (current.start === selectionStart && current.end === selectionEnd){\n\t\t\t\t\t\t\tselectedAnnotation = current;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar iter = annotationModel.getAnnotations(searchStart, rangeEnd);\n\t\t\tvar useNextValid;\n\t\t\twhile (iter.hasNext()){\n\t\t\t\tcurrent = iter.next();\n\t\t\t\tif (isAnnotationTypeVisible && !isAnnotationTypeVisible(current.type)) { continue; }\n\t\t\t\t// Default to first visible annotation\n\t\t\t\tif (!annotation){\n\t\t\t\t\tannotation = current;\n\t\t\t\t}\n\t\t\t\t// If no selected annotation, use the first in the list\n\t\t\t\tif (!selectedAnnotation){\n\t\t\t\t\tannotation = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// If the selected annotation was found, use the next annotation\n\t\t\t\t// NOTE: If two annotations have the same range, we skip to the next annotation so don't flip between them\n\t\t\t\tif (useNextValid && (selectedAnnotation.start !== current.start || selectedAnnotation.end !== current.end)){\n\t\t\t\t\tuseNextValid = false;\n\t\t\t\t\tannotation = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Found the selected annotation, use the next in the list\n\t\t\t\tif (selectedAnnotation && selectedAnnotation === current){\n\t\t\t\t\tuseNextValid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useNextValid){\n\t\t\t\tannotation = null; // Last annotation on the line was selected, go to line start\n\t\t\t}\n\t\t\t\n\t\t\treturn annotation;\n\t\t},\n\t\t\n\t\t_getAnnotationsAtLineIndex: function _getAnnotationsAtLineIndex(lineIndex){\n\t\t\tif (lineIndex === undefined) { return; }\n\t\t\tvar view = this._view;\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar annotations = [];\n\t\t\tvar model;\n\t\t\t\n\t\t\t//check if the current view exists, if not return empty array\n\t\t\tif (view) {\n\t\t\t\tmodel = view.getModel();\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t\n\t\t\t// check if both model exists\n\t\t\tif (annotationModel && model) {\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tannotations = this.getAnnotationsByType(annotationModel, start, end);\n\t\t\t}\n\t\t\treturn annotations;\n\t\t},\n\t\t/** @ignore */\n\t\t_getTooltipInfo: function(contents, y, context) {\n\t\t\tif (!contents) { return null; } // TODO: shouldn't this check the length, it'll never be null\n\t\t\n\t\t\tvar hoverArea = Object.create(null);\n\t\t\thoverArea.top = this._curElementBounds.top;\n\t\t\thoverArea.left = this._curElementBounds.left;\n\t\t\thoverArea.height = this._curElementBounds.height;\n\t\t\thoverArea.width = this._curElementBounds.width;\n\t\t\t\n\t\t\tif (typeof contents === 'string' && y) {\n\t\t\t\t// Hack for line numbers\n\t\t\t\thoverArea.top = y;\n\t\t\t\thoverArea.height = 1;\n\t\t\t}\n\t\t\t\n\t\t\tvar rulerLocation = this.getLocation();\n\t\t\tvar rulerStyle = this.getRulerStyle();\n\t\t\t// The tooltip is positioned opposite to where the ruler is\n\t\t\tvar position = rulerLocation === \"left\" ? \"right\" : \"left\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\n\t\t\tvar offsetX = 0;\n\t\t\tvar offsetY = 0;\n\t\t\tif (this._view){\n\t\t\t\tvar viewRect = this._view._clientDiv.getBoundingClientRect();\n\t\t\t\toffsetX = viewRect.left - (hoverArea.left + hoverArea.width);\n\t\t\t} else {\n\t\t\t\toffsetX = hoverArea.width;\n\t\t\t}\n\t\t\toffsetY = hoverArea.height;\n\t\t\tif (position === \"left\") {\n\t\t\t\toffsetX = -25;\n\t\t\t\t// Hack for when the hoverArea is a sliver of the ruler, ruler is 2px wider than annotations\n\t\t\t\tif (hoverArea.height === 1){\n\t\t\t\t\toffsetX += 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Adjust the tooltip for folding comments to exactly cover the unfolded text location\n\t\t\tif (rulerStyle.styleClass.indexOf(\"folding\") >= 0){ //$NON-NLS-0$\n\t\t\t\toffsetY -= 14;\n\t\t\t}\n\t\t\t\n\t\t\tvar info = {\n\t\t\t\tcontents: contents,\n\t\t\t\tposition: position,\n\t\t\t\ttooltipOffsetX: offsetX,\n\t\t\t\ttooltipOffsetY: offsetY,\n\t\t\t\tanchorArea: hoverArea,\n\t\t\t\tcontext: context\n\t\t\t};\n\t\t\treturn info;\n\t\t},\n\t\t/**\n\t\t * @name _getTooltipContents\n\t\t * @description Overridden by different rulers to provide customer tooltip content\n\t\t * @function\n\t\t * @private\n\t\t * @param lineIndex\n\t\t * @param annotations\n\t\t * @returns returns\n\t\t * @callback\n\t\t */\n\t\t_getTooltipContents: function _getTooltipContents(lineIndex, annotations){\n\t\t\treturn annotations;\n\t\t},\n\t\t\n\t\t_getOnClickTooltipInfo: function(annotation) {\n\t\t\tvar view = this._view;\n\t\t\tvar hoverArea = Object.create(null);\n\t\t\thoverArea.top = this._curElementBounds.top;\n\t\t\thoverArea.left = this._curElementBounds.left;\n\t\t\thoverArea.height = this._curElementBounds.height;\n\t\t\thoverArea.width = this._curElementBounds.width;\n\t\t\tvar rulerLocation = this.getLocation();\n\t\t\tvar position = rulerLocation === \"left\" ? \"right\" : \"left\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar info = {\n\t\t\t\tcontents: [annotation],\n\t\t\t\tposition: position,\n\t\t\t\tanchorArea: hoverArea\n\t\t\t};\n\t\t\t\n\t\t\tif (view){\n\t\t\t\tvar viewRect = view._clientDiv.getBoundingClientRect();\n\t\t\t\tinfo.offsetX = viewRect.left - (hoverArea.left + hoverArea.width);\n\t\t\t} else {\n\t\t\t\tinfo.offsetX = hoverArea.width;\n\t\t\t}\n\n\t\t\tinfo.offsetY = hoverArea.height;\n\t\t\tif (info.position === \"left\") {\n\t\t\t\tinfo.offsetX = 20;\n\t\t\t}\n\t\t\treturn info;\n\t\t},\n\t\t/** @ignore */\n\t\t_onAnnotationModelChanged: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tvar model = view.getModel(), self = this;\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tif (e.textModelChangedEvent) {\n\t\t\t\tvar start = e.textModelChangedEvent.start;\n\t\t\t\tif (model.getBaseModel) { start = model.mapOffset(start, true); }\n\t\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\t\tview.redrawLines(startLine, lineCount, self);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfunction redraw(changes) {\n\t\t\t\tfor (var i = 0; i < changes.length; i++) {\n\t\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\t\tstart = changes[i].start;\n\t\t\t\t\tvar end = changes[i].end;\n\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t\t}\n\t\t\t\t\tif (start !== -1 && end !== -1) {\n\t\t\t\t\t\tview.redrawLines(model.getLineAtOffset(start), model.getLineAtOffset(Math.max(start, end - 1)) + 1, self);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tredraw(e.added);\n\t\t\tredraw(e.removed);\n\t\t\tredraw(e.changed);\n\t\t},\n\t\t/** @ignore */\n\t\t_mergeAnnotation: function(result, annotation, annotationLineIndex, annotationLineCount) {\n\t\t\tif (!result) { result = {}; }\n\t\t\tif (annotationLineIndex === 0) {\n\t\t\t\tif (result.html && annotation.html) {\n\t\t\t\t\tif (annotation.html !== result.html) {\n\t\t\t\t\t\tif (!result._multiple && this._multiAnnotation) {\n\t\t\t\t\t\t\tresult.html = this._multiAnnotation.html;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\tresult._multiple = true;\n\t\t\t\t} else {\n\t\t\t\t\tresult.html = annotation.html;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.style = this._mergeStyle(result.style, annotation.style);\n\t\t\treturn result;\n\t\t},\n\t\t/** @ignore */\n\t\t_mergeStyle: function(result, style) {\n\t\t\tif (style) {\n\t\t\t\tif (!result) { result = {}; }\n\t\t\t\tif (result.styleClass && style.styleClass && result.styleClass !== style.styleClass) {\n\t\t\t\t\tresult.styleClass += \" \" + style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tresult.styleClass = style.styleClass;\n\t\t\t\t}\n\t\t\t\tvar prop;\n\t\t\t\tif (style.style) {\n\t\t\t\t\tif (!result.style) { result.style  = {}; }\n\t\t\t\t\tfor (prop in style.style) {\n\t\t\t\t\t\tif (result.style[prop] === undefined) {\n\t\t\t\t\t\t\tresult.style[prop] = style.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.attributes) {\n\t\t\t\t\tif (!result.attributes) { result.attributes  = {}; }\n\t\t\t\t\tfor (prop in style.attributes) {\n\t\t\t\t\t\tif (result.attributes[prop] === undefined) {\n\t\t\t\t\t\t\tresult.attributes[prop] = style.attributes[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_setCurrentGroup: function(lineIndex) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar groupAnnotation = null;\n\t\t\tvar model = annotationModel.getTextModel();\n\t\t\tvar annotation;\n\t\t\tvar annotations;\n\t\t\tvar currentGroupAnnotation = this._currentGroupAnnotation;\n\t\t\tif (lineIndex !== -1) {\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tannotations = annotationModel.getAnnotations(start, end);\n\t\t\t\twhile(annotations.hasNext()){\n\t\t\t\t\tannotation = annotations.next();\n\t\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\t\tif (annotation.start <= start && annotation.end >= end){\n\t\t\t\t\t\tif (annotation.groupId !== undefined) {\n\t\t\t\t\t\t\tgroupAnnotation = annotation;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (currentGroupAnnotation && groupAnnotation) {\n\t\t\t\t\tif (currentGroupAnnotation.groupId === groupAnnotation.groupId) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._currentGroupAnnotation = null;\n\t\t\tif (currentGroupAnnotation) {\n\t\t\t\tannotationModel.removeAnnotations(currentGroupAnnotation.groupType);\n\t\t\t}\n\t\t\tif (!groupAnnotation) { return; }\n\t\t\t\n\t\t\tif (lineIndex === -1) { return; }\n\t\t\tthis._currentGroupAnnotation = groupAnnotation;\n\t\t\tannotations = annotationModel.getAnnotations();\n\t\t\tvar add = [];\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tannotation = annotations.next();\n\t\t\t\tdelete annotation.groupAnnotation;\n\t\t\t\tif (annotation.groupId === groupAnnotation.groupId) {\n\t\t\t\t\tannotation = annotation.createGroupAnnotation();\n\t\t\t\t\tadd.push(annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations(null, add);\n\t\t}\n\t});\n\tmAnnotations.AnnotationTypeList.addMixin(Ruler.prototype);\n\n\t/**\n\t * Constructs a new line numbering ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t * @param {orion.editor.Style} [oddStyle={style: {backgroundColor: \"white\"}] the style for lines with odd line index.\n\t * @param {orion.editor.Style} [evenStyle={backgroundColor: \"white\"}] the style for lines with even line index.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements a line numbering ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.Ruler}\n\t * </p>\n\t * @name orion.editor.LineNumberRuler\n\t */\n\tfunction LineNumberRuler (annotationModel, rulerLocation, rulerStyle, oddStyle, evenStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"page\", rulerStyle); //$NON-NLS-0$\n\t\tthis._oddStyle = oddStyle || {style: {backgroundColor: \"white\"}}; //$NON-NLS-0$\n\t\tthis._evenStyle = evenStyle || {style: {backgroundColor: \"white\"}}; //$NON-NLS-0$\n\t\tthis._numOfDigits = 0;\n\t\tthis._firstLine = 1;\n\t}\n\tLineNumberRuler.prototype = new Ruler(); \n\t/** @ignore */\n\tLineNumberRuler.prototype.getAnnotations = function(startLine, endLine) {\n\t\tvar result = Ruler.prototype.getAnnotations.call(this, startLine, endLine);\n\t\tvar model = this._view.getModel();\n\t\tfor (var lineIndex = startLine; lineIndex < endLine; lineIndex++) {\n\t\t\tvar style = (lineIndex - this._firstLine) & 1 ? this._oddStyle : this._evenStyle;\n\t\t\tvar mapLine = lineIndex;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tvar lineStart = model.getLineStart(mapLine);\n\t\t\t\tmapLine = model.getBaseModel().getLineAtOffset(model.mapOffset(lineStart));\n\t\t\t}\n\t\t\tif (!result[lineIndex]) { result[lineIndex] = {}; }\n\t\t\tresult[lineIndex].html = (this._firstLine + mapLine) + \"\";\n\t\t\tif (!result[lineIndex].style) { result[lineIndex].style = style; }\n\t\t}\n\t\treturn result;\n\t};\n\t/** @ignore */\n\tLineNumberRuler.prototype.getWidestAnnotation = function() {\n\t\tvar lineCount = this._view.getModel().getLineCount();\n\t\treturn this.getAnnotations(lineCount - 1, lineCount)[lineCount - 1];\n\t};\n\t/**\n\t * Sets the line index displayed for the first line. The default value is\n\t * <code>1</code>.\n\t *\n\t * @param {Number} [lineIndex=1] the first line index displayed\n\t */\n\tLineNumberRuler.prototype.setFirstLine = function(lineIndex) {\n\t\tthis._firstLine = lineIndex !== undefined ? lineIndex : 1;\n\t};\n\t/** @ignore */\n\tLineNumberRuler.prototype._onTextModelChanged = function(e) {\n\t\tvar start = e.start;\n\t\tvar model = this._view.getModel();\n\t\tvar lineCount = model.getBaseModel ? model.getBaseModel().getLineCount() : model.getLineCount();\n\t\tvar numOfDigits = ((this._firstLine + lineCount - 1)+\"\").length;\n\t\tif (this._numOfDigits !== numOfDigits) {\n\t\t\tthis._numOfDigits = numOfDigits;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tthis._view.redrawLines(startLine,  model.getLineCount(), this);\n\t\t}\n\t};\n\t\n\t/** \n\t * @class This is class represents an annotation for the AnnotationRuler. \n\t * <p> \n\t * <b>See:</b><br/> \n\t * {@link orion.editor.AnnotationRuler}\n\t * </p> \n\t * \n\t * @name orion.editor.Annotation \n\t * \n\t * @property {String} [html=\"\"] The html content for the annotation, typically contains an image.\n\t * @property {orion.editor.Style} [style] the style for the annotation.\n\t * @property {orion.editor.Style} [overviewStyle] the style for the annotation in the overview ruler.\n\t */ \n\t/**\n\t * Constructs a new annotation ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t * @param {orion.editor.Annotation} [defaultAnnotation] the default annotation.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an annotation ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.Ruler}<br/>\n\t * {@link orion.editor.Annotation}\n\t * </p>\n\t * @name orion.editor.AnnotationRuler\n\t */\n\tfunction AnnotationRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"page\", rulerStyle); //$NON-NLS-0$\n\t}\n\tAnnotationRuler.prototype = new Ruler();\n\t\n\t/**\n\t * Constructs a new overview ruler. \n\t * <p>\n\t * The overview ruler is used in conjunction with a AnnotationRuler, for each annotation in the \n\t * AnnotationRuler this ruler displays a mark in the overview. Clicking on the mark causes the \n\t * view to scroll to the annotated line.\n\t * </p>\n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tfunction OverviewRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"document\", rulerStyle); //$NON-NLS-0$\n\t}\n\tOverviewRuler.prototype = new Ruler();\n\t\n\t/** @ignore */\n\tOverviewRuler.prototype.getRulerStyle = function() {\n\t\tvar result = {style: {lineHeight: \"1px\", fontSize: \"1px\"}}; //$NON-NLS-1$ //$NON-NLS-0$\n\t\tresult = this._mergeStyle(result, this._rulerStyle);\n\t\treturn result;\n\t};\n\t/** @ignore */\n\tOverviewRuler.prototype._getTooltipContents = function(lineIndex, annotations) {\n\t\tif (annotations && annotations.length === 0) {\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar mapLine = lineIndex;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tvar lineStart = model.getLineStart(mapLine);\n\t\t\t\tmapLine = model.getBaseModel().getLineAtOffset(model.mapOffset(lineStart));\n\t\t\t}\n\t\t\treturn util.formatMessage(messages.line, mapLine + 1);\n\t\t}\n\t\treturn Ruler.prototype._getTooltipContents.call(this, lineIndex, annotations);\n\t};\n\t/** @ignore */\n\tOverviewRuler.prototype._mergeAnnotation = function(previousAnnotation, annotation, annotationLineIndex, annotationLineCount) {\n\t\tif (annotationLineIndex !== 0) { return undefined; }\n\t\tvar result = previousAnnotation;\n\t\tif (!result) {\n\t\t\t//TODO annotationLineCount does not work when there are folded lines\n\t\t\tvar height = 3 * annotationLineCount;\n\t\t\tresult = {html: \"&nbsp;\", style: { style: {height: height + \"px\"}}}; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\tresult.style = this._mergeStyle(result.style, annotation.overviewStyle);\n\t\t}\n\t\treturn result;\n\t};\n\n\t/**\n\t * Constructs a new folding ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tfunction FoldingRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tAnnotationRuler.call(this, annotationModel, rulerLocation, rulerStyle);\n\t}\n\tFoldingRuler.prototype = new AnnotationRuler();\n\t\n\t/** @ignore */\n\tFoldingRuler.prototype.onClick =  /* @callback */ function(lineIndex, e) {\n\t\tif (lineIndex === undefined) { return; }\n\t\tvar annotationModel = this._annotationModel;\n\t\tif (!annotationModel) { return; }\n\t\tvar view = this._view;\n\t\tvar model = view.getModel();\n\t\tvar start = model.getLineStart(lineIndex);\n\t\tvar end = model.getLineEnd(lineIndex, true);\n\t\tif (model.getBaseModel) {\n\t\t\tstart = model.mapOffset(start);\n\t\t\tend = model.mapOffset(end);\n\t\t\tmodel = model.getBaseModel();\n\t\t}\n\t\tvar annotation, iter = annotationModel.getAnnotations(start, end);\n\t\twhile (!annotation && iter.hasNext()) {\n\t\t\tvar a = iter.next();\n\t\t\tif (!this.isAnnotationTypeVisible(a.type)) { continue; }\n\t\t\tif (model.getLineAtOffset(a.start) !== model.getLineAtOffset(start)) { continue; }\n\t\t\tannotation = a;\n\t\t}\n\t\tif (annotation) {\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (tooltip) {\n\t\t\t\ttooltip.hide();\n\t\t\t}\n\t\t\tif (annotation.expanded) {\n\t\t\t\tannotation.collapse();\n\t\t\t} else {\n\t\t\t\tannotation.expand();\n\t\t\t}\n\t\t}\n\t};\n\t/** @ignore */\n\tFoldingRuler.prototype._getTooltipContents = function(lineIndex, annotations) {\n\t\tif (annotations && annotations.length > 0) {\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tvar mapLineIndex = model.getLineAtOffset(start);\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tvar a = annotations[i];\n\t\t\t\tif (!this.isAnnotationTypeVisible(a.type)) { continue; }\n\t\t\t\tif (model.getLineAtOffset(a.start) !== mapLineIndex) { continue; }\n\t\t\t\tif (annotations[i].expanded) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn AnnotationRuler.prototype._getTooltipContents.call(this, lineIndex, [a]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t/** @ignore */\n\tFoldingRuler.prototype._onAnnotationModelChanged = function(e) {\n\t\tif (e.textModelChangedEvent) {\n\t\t\tAnnotationRuler.prototype._onAnnotationModelChanged.call(this, e);\n\t\t\treturn;\n\t\t}\n\t\tvar view = this._view;\n\t\tif (!view) { return; }\n\t\tvar model = view.getModel(), self = this, i;\n\t\tvar lineCount = model.getLineCount(), lineIndex = lineCount;\n\t\tfunction redraw(changes) {\n\t\t\tfor (i = 0; i < changes.length; i++) {\n\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\tvar start = changes[i].start;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t}\n\t\t\t\tif (start !== -1) {\n\t\t\t\t\tlineIndex = Math.min(lineIndex, model.getLineAtOffset(start));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tredraw(e.added);\n\t\tredraw(e.removed);\n\t\tredraw(e.changed);\n\t\tvar rulers = view.getRulers();\n\t\tfor (i = 0; i < rulers.length; i++) {\n\t\t\tview.redrawLines(lineIndex, lineCount, rulers[i]);\n\t\t}\n\t};\n\t\n\n\t/**\n\t * Constructs a new zoom ruler. \n\t *\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tvar ZoomRuler = function(rulerLocation, rulerStyle) {\n\t\tBaseRuler.call(this, rulerLocation, \"fixed\", rulerStyle); //$NON-NLS-0$\n\t};\n\t\n\tZoomRuler.prototype = objects.mixin(new BaseRuler(), {\n\t\tsetView: function (view) {\n\t\t\tthis._destroy();\n\t\t\tBaseRuler.prototype.setView.call(this, view);\n\t\t\tthis._create();\n\t\t},\n\t\t_create: function() {\n\t\t\tvar textView = this.getView();\n\t\t\tif (!textView) return;\n\t\t\tfunction getOptions(options) {\n\t\t\t\tvar rulerTheme = \"textviewZoom\"; //$NON-NLS-0$\n\t\t\t\tvar theme = options.themeClass;\n\t\t\t\tif (theme) {\n\t\t\t\t\ttheme = theme.replace(rulerTheme, \"\");\n\t\t\t\t\tif (theme) { theme = \" \" + theme; } //$NON-NLS-0$\n\t\t\t\t\ttheme = rulerTheme + theme;\n\t\t\t\t} else {\n\t\t\t\t\ttheme = rulerTheme;\n\t\t\t\t}\n\t\t\t\toptions.themeClass = theme;\n\t\t\t\toptions.noScroll = true;\n\t\t\t\toptions.readonly = true;\n\t\t\t\treturn options;\n\t\t\t}\n\t\t\tvar options = getOptions(textView.getOptions());\n\t\t\toptions.parent = this.node;\n\t\t\tvar zoomView = this._zoomView = new mTextView.TextView(options);\n\t\t\tzoomView._clientDiv.contentEditable = false;\n\t\t\tzoomView.setModel(textView.getModel());\n\t\t\tvar document = textView.getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\n\t\t\tvar windowDiv = this._windowDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\twindowDiv.className =\"rulerZoomWindow\"; //$NON-NLS-0$\n\t\t\tthis.node.appendChild(windowDiv);\n\t\t\tvar border = parseInt(textUtil.getNodeStyle(windowDiv, \"border-top-width\", 0)) + //$NON-NLS-0$\n\t\t\t\t\tparseInt(textUtil.getNodeStyle(windowDiv, \"border-bottom-width\", 0)); //$NON-NLS-0$\n\t\t\tvar that = this;\n\t\t\tfunction updateWindow(scroll, p) {\n\t\t\t\tvar top = scroll.y * p.zoomFactor;\n\t\t\t\tvar height = p.clientHeight * p.zoomFactor;\n\t\t\t\tthat.top = top;\n\t\t\t\tthat.bottom = top + height;\n\t\t\t\ttop = zoomView.convert({y: top}, \"document\", \"page\").y; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\ttop = top - that.node.getBoundingClientRect().top;\n\t\t\t\twindowDiv.style.top = top + \"px\"; //$NON-NLS-0$\n\t\t\t\twindowDiv.style.height = (height - border) + \"px\"; //$NON-NLS-0$\n\t\t\t}\n\t\t\tfunction getProps() {\n\t\t\t\tvar padding = textView._metrics.viewPadding;\n\t\t\t\tvar zoomPadding = textView._metrics.viewPadding;\n\t\t\t\tvar lineHeight = textView.getLineHeight();\n\t\t\t\tvar zoomLineHeight = zoomView.getLineHeight();\n\t\t\t\tvar lineCount = textView.getModel().getLineCount();\n\t\t\t\tvar documentHeight = textView._lineHeight ? textView._scrollHeight : lineCount * lineHeight;\n\t\t\t\tvar zoomDocumentHeight = zoomView._lineHeight ? zoomView._scrollHeight : lineCount * zoomLineHeight;\n\t\t\t\tvar zoomFactor = zoomDocumentHeight / documentHeight;\n\t\t\t\tvar clientHeight = textView.getClientArea().height + padding.top + padding.bottom;\n\t\t\t\tvar zoomClientHeight = zoomView.getClientArea().height + zoomPadding.top + zoomPadding.bottom;\n\t\t\t\tvar windowHeight = clientHeight * zoomFactor;\n\t\t\t\tvar scrollWidth = textView._metrics.scrollWidth;\n\t\t\t\treturn {\n\t\t\t\t\tzoomFactor: zoomFactor,\n\t\t\t\t\tdocumentHeight: documentHeight,\n\t\t\t\t\tzoomDocumentHeight: zoomDocumentHeight,\n\t\t\t\t\tclientHeight: clientHeight,\n\t\t\t\t\tzoomClientHeight: zoomClientHeight,\n\t\t\t\t\tscrollWidth: scrollWidth,\n\t\t\t\t\twindowHeight: windowHeight,\n\t\t\t\t\tpadding: padding\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction toZoom(scroll, p) {\n\t\t\t\treturn scroll.y * (p.zoomFactor + (p.windowHeight - p.clientHeight - p.scrollWidth) / p.documentHeight);\n\t\t\t}\n\t\t\tfunction updateScroll(scroll) {\n\t\t\t\tscroll = scroll || {y: textView.getTopPixel()};\n\t\t\t\tvar p = getProps();\n\t\t\t\tvar y = toZoom(scroll, p);\n\t\t\t\tzoomView.setTopPixel(y);\n\t\t\t\tupdateWindow(scroll, p);\n\t\t\t}\n\t\t\tfunction updateWidth(options) {\n\t\t\t\tvar width;\n\t\t\t\tif (options.wrapMode && !options.wrapOffset && textView._metrics.charWidth) {\n\t\t\t\t\tvar div1 = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-0$\n\t\t\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-0$\n\t\t\t\t\tzoomView._clientDiv.appendChild(div1);\n\t\t\t\t\tdiv1.textContent = new Array(Math.ceil(textView.getClientArea().width / textView._metrics.charWidth) + 1).join(\"a\"); //$NON-NLS-0$\n\t\t\t\t\tvar rect1 = div1.getBoundingClientRect();\n\t\t\t\t\twidth = Math.min(150, Math.ceil(rect1.right - rect1.left)) + \"px\"; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\twidth = \"\";\n\t\t\t\t}\n\t\t\t\tvar oldWidth = that.node.style.width;\n\t\t\t\tthat.node.style.width = width;\n\t\t\t\treturn oldWidth !== width;\n\t\t\t}\n\t\t\ttextView.addEventListener(\"Scroll\", this._scrollListener = function(event) { //$NON-NLS-0$\n\t\t\t\tupdateScroll(event.newValue);\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Resize\", this._resizeListener = function() { //$NON-NLS-0$\n\t\t\t\tupdateWidth(zoomView.getOptions());\n\t\t\t\tupdateScroll();\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Redraw\", this._redrawListener = function(event) { //$NON-NLS-0$\n\t\t\t\tif (!event.ruler) {\n\t\t\t\t\tzoomView.redrawLines(event.startLine, event.endLine);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Options\", this._optionsListener = function(event) { //$NON-NLS-0$\n\t\t\t\tvar options = getOptions(event.options);\n\t\t\t\tzoomView.setOptions(options);\n\t\t\t\tupdateWidth(zoomView.getOptions());\n\t\t\t});\n\t\t\tzoomView.addEventListener(\"LineStyle\", this._lineListener = function(e) { //$NON-NLS-0$\n\t\t\t\ttextView.onLineStyle(e);\n\t\t\t});\n\t\t\tfunction down(event, clientY, touch) {\n\t\t\t\tif (touch || (that.top <= event.y && event.y <= that.bottom)) {\n\t\t\t\t\tthat.mouseDown = true;\n\t\t\t\t\tthat.delta = clientY - windowDiv.getBoundingClientRect().top + that.node.getBoundingClientRect().top;\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = zoomView.getOffsetAtLocation(event.x, event.y);\n\t\t\t\t\ttextView.setSelection(offset, offset, 0.5, function() {});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction up() {\n\t\t\t\tthat.mouseDown = false;\n\t\t\t}\n\t\t\tfunction move(clientY) {\n\t\t\t\tif (that.mouseDown) {\n\t\t\t\t\tvar p = getProps();\n\t\t\t\t\tvar thumbPos = Math.min(p.zoomClientHeight - p.windowHeight, Math.max(0, clientY - that.delta));\n\t\t\t\t\ttextView.setTopPixel(thumbPos * (p.documentHeight - p.clientHeight) / Math.min(p.zoomDocumentHeight, p.zoomClientHeight - p.windowHeight));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction stop(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\twindowDiv.addEventListener(\"touchstart\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 1) {\n\t\t\t\t\t\tdown(event, event.touches[0].clientY, true);\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindowDiv.addEventListener(\"touchend\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 0) {\n\t\t\t\t\t\tup();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindowDiv.addEventListener(\"touchmove\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 1) {\n\t\t\t\t\t\tmove(event.touches[0].clientY);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"TouchStart\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tif (event.touchCount === 1) {\n\t\t\t\t\t\tdown(event, event.event.touches[0].clientY);\n\t\t\t\t\t\tstop(event);\n\t\t\t\t\t}\n\t\t\t\t});\n//\t\t\t\twindowDiv.style.pointerEvents = \"none\"; //$NON-NLS-0$\n//\t\t\t\tzoomView.addEventListener(\"TouchEnd\", function(event) { //$NON-NLS-0$\n//\t\t\t\t\tif (event.touchCount === 0) {\n//\t\t\t\t\t\tup(event);\n//\t\t\t\t\t}\n//\t\t\t\t});\n//\t\t\t\tzoomView.addEventListener(\"TouchMove\", function(event) { //$NON-NLS-0$\n//\t\t\t\t\tif (event.touchCount === 1) {\n//\t\t\t\t\t\tmove(event.event.touches[0].clientY);\n//\t\t\t\t\t}\n//\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindowDiv.style.pointerEvents = \"none\"; //$NON-NLS-0$\n\t\t\t\tzoomView.addEventListener(\"MouseDown\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar e = event.event;\n\t\t\t\t\tif (e.which ? e.button === 0 : e.button === 1) {\n\t\t\t\t\t\tdown(event, e.clientY);\n\t\t\t\t\t}\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"MouseUp\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tup();\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"MouseMove\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tmove(event.event.clientY);\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t}\n\t\t\t(document.defaultView || document.parentWindow).setTimeout(function() {\n\t\t\t\tupdateScroll();\n\t\t\t}, 0);\n\t\t},\n\t\t_destroy: function() {\n\t\t\tvar textView = this.getView();\n\t\t\tif (textView) {\n\t\t\t\ttextView.removeEventListener(\"Scroll\", this._scrollListener); //$NON-NLS-0$\n\t\t\t\tthis._scrollListener = null;\n\t\t\t\ttextView.removeEventListener(\"Resize\", this._resizeListener); //$NON-NLS-0$\n\t\t\t\tthis._resizeListener = null;\n\t\t\t\ttextView.removeEventListener(\"Redraw\", this._redrawListener); //$NON-NLS-0$\n\t\t\t\tthis._redrawListener = null;\n\t\t\t\ttextView.removeEventListener(\"Options\", this._optionsListener); //$NON-NLS-0$\n\t\t\t\tthis._optionsListener = null;\n\t\t\t}\n\t\t\tvar zoomView = this._zoomView;\n\t\t\tif (zoomView) {\n\t\t\t\tzoomView.removeEventListener(\"LineStyle\", this._lineListener); //$NON-NLS-0$\n\t\t\t\tzoomView.setModel(null);\n\t\t\t\tzoomView.destroy();\n\t\t\t\tthis._zoomView = null;\n\t\t\t}\n\t\t}\n\t});\n\t\n\treturn {\n\t\tBaseRuler: BaseRuler,\n\t\tRuler: Ruler,\n\t\tAnnotationRuler: AnnotationRuler,\n\t\tLineNumberRuler: LineNumberRuler,\n\t\tOverviewRuler: OverviewRuler,\n\t\tFoldingRuler: FoldingRuler,\n\t\tZoomRuler: ZoomRuler,\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textDND\", ['orion/util'], function(util) { //$NON-NLS-1$ //$NON-NLS-0$\n\n\tfunction TextDND(view, undoStack) {\n\t\tthis._view = view;\n\t\tthis._undoStack = undoStack;\n\t\tthis._dragSelection = null;\n\t\tthis._dropOffset = -1;\n\t\tthis._dropText = null;\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonDragStart: function (evt) {\n\t\t\t\tself._onDragStart(evt);\n\t\t\t},\n\t\t\tonDragEnd: function (evt) {\n\t\t\t\tself._onDragEnd(evt);\n\t\t\t},\n\t\t\tonDragEnter: function (evt) {\n\t\t\t\tself._onDragEnter(evt);\n\t\t\t},\n\t\t\tonDragOver: function (evt) {\n\t\t\t\tself._onDragOver(evt);\n\t\t\t},\n\t\t\tonDrop: function (evt) {\n\t\t\t\tself._onDrop(evt);\n\t\t\t},\n\t\t\tonDestroy: function (evt) {\n\t\t\t\tself._onDestroy(evt);\n\t\t\t}\n\t\t};\n\t\tview.addEventListener(\"DragStart\", this._listener.onDragStart); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragEnd\", this._listener.onDragEnd); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragEnter\", this._listener.onDragEnter); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragOver\", this._listener.onDragOver); //$NON-NLS-0$\n\t\tview.addEventListener(\"Drop\", this._listener.onDrop); //$NON-NLS-0$\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t}\n\tTextDND.prototype = {\n\t\tdestroy: function() {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tview.removeEventListener(\"DragStart\", this._listener.onDragStart); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragEnd\", this._listener.onDragEnd); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragEnter\", this._listener.onDragEnter); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragOver\", this._listener.onDragOver); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"Drop\", this._listener.onDrop); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\tthis._view = null;\n\t\t},\n\t\t_onDestroy: function(e) {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onDragStart: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tvar text = view.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\tthis._dragSelection = view.getSelections();\n\t\t\t\te.event.dataTransfer.effectAllowed = \"copyMove\"; //$NON-NLS-0$\n\t\t\t\te.event.dataTransfer.setData(\"Text\", text); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t_onDragEnd: function(e) {\n\t\t\tif (this._dragSelection) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar dropEffect = e.event.dataTransfer.dropEffect;\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\tif (dropEffect !== \"none\" || this._dropText) { //$NON-NLS-0$\n\t\t\t\t\t\tdropEffect = e.event.dataTransfer.dropEffect = this._dropEffect;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this._undoStack) { this._undoStack.startCompoundChange(); }\n\t\t\t\tvar move = dropEffect === \"move\"; //$NON-NLS-0$\n\t\t\t\tif (move) {\n\t\t\t\t\tview.setText({text: \"\", selection: this._dragSelection});\n\t\t\t\t}\n\t\t\t\tif (this._dropText) {\n\t\t\t\t\tvar text = this._dropText;\n\t\t\t\t\tvar offset = this._dropOffset;\n\t\t\t\t\tif (move) {\n\t\t\t\t\t\tthis._dragSelection.forEach(function(selection) {\n\t\t\t\t\t\t\tif (offset >= selection.end) {\n\t\t\t\t\t\t\t\toffset -= selection.end - selection.start;\n\t\t\t\t\t\t\t} else if (offset >= selection.start) {\n\t\t\t\t\t\t\t\toffset = selection.start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tview.setText(text, offset, offset);\n\t\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t\t\tthis._dropText = null;\n\t\t\t\t\tthis._dropOffset = -1;\n\t\t\t\t}\n\t\t\t\tif (this._undoStack) { this._undoStack.endCompoundChange(); }\n\t\t\t\tthis._dragSelection = null;\n\t\t\t}\n\t\t},\n\t\t_onDragEnter: function(e) {\n\t\t\tthis._onDragOver(e);\n\t\t},\n\t\t_onDragOver: function(e) {\n\t\t\tvar types = e.event.dataTransfer.types;\n\t\t\tvar allowed = !this._view.getOptions(\"readonly\"); //$NON-NLS-0$\n\t\t\tif (allowed) {\n\t\t\t\tif (types) {\n\t\t\t\t\tallowed = types.contains ? \n\t\t\t\t\t\ttypes.contains(\"text/plain\") || types.contains(\"Text\") : //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t\ttypes.indexOf(\"text/plain\") !== -1 || types.indexOf(\"Text\") !== -1; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (!allowed) {\n\t\t\t\te.event.dataTransfer.dropEffect = \"none\"; //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\tvar copy = util.isMac ? e.event.altKey : e.event.ctrlKey;\n\t\t\t\t\tthis._dropEffect = e.event.dataTransfer.dropEffect = copy ? \"copy\" : \"move\"; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onDrop: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tvar text = e.event.dataTransfer.getData(\"Text\"); //$NON-NLS-0$\n\t\t\tif (text) {\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\te.event.dataTransfer.dropEffect = this._dropEffect; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\tvar offset = view.getOffsetAtLocation(e.x, e.y);\n\t\t\t\tif (this._dragSelection) {\n\t\t\t\t\tthis._dropOffset = offset;\n\t\t\t\t\tthis._dropText = text;\n\t\t\t\t} else {\n\t\t\t\t\tview.setText(text, offset, offset);\n\t\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {TextDND: TextDND};\n});\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2016 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/linkedMode\", [\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/keyBinding',\r\n\t'orion/editor/keyModes',\r\n\t'orion/editor/annotations',\r\n\t'orion/objects',\r\n\t'orion/util'\r\n], function(messages, mKeyBinding, mKeyModes, mAnnotations, objects) {\r\n\r\n\tvar exports = {};\r\n\r\n\t/**\r\n\t * @name LinkedContentAssist\r\n\t * @description Creates a new LinkedContentAssist object which is used for linked data in templates\r\n\t * @constructor \r\n\t * @param {Object} linkedData The linked data\r\n\t * @returns A new LinkedContentAssist object\r\n\t * @since 9.0\r\n\t */\r\n\tfunction LinkedContentAssist(linkedData) {\r\n\t\tthis._data = linkedData;\r\n\t}\r\n\t\r\n\tLinkedContentAssist.prototype = {\r\n\t\t/**\n\t\t * @description Removes the prefix from the given string\n\t\t * @function\n\t\t * @param {String} prefix\n\t\t * @param {String} string\n\t\t * @returns {String} The substring after removing the prefix\n\t\t */\n\t\tchop: function(prefix, string) {\r\n\t\t\treturn string.substring(prefix.length);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @callback\r\n\t\t */\r\n\t\tcomputeProposals: function(buffer, offset, context) {\r\n\t\t\tvar prefix = context.prefix;\r\n\t\t\tvar proposals = [];\r\n\t\t\tvar linkedstyle = this._data.style ? this._data.style : null;\r\n\t\t\tlinkedstyle = linkedstyle ? linkedstyle : 'emphasis'; //$NON-NLS-1$\r\n\t\t\tvar values = this._data.values;\r\n\t\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\t\tvar val = values[i];\r\n\t\t\t\tif(typeof val === 'string' && val.indexOf(prefix) === 0) {\r\n\t\t\t\t\tproposals.push({proposal: this.chop(prefix, val), \r\n\t\t\t\t\t\tdescription: val,\r\n\t\t\t\t\t\thover: val,\r\n\t\t\t\t\t\tstyle: linkedstyle\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if(typeof val === 'object' && val.proposal) {\r\n\t\t\t\t\tproposals.push({proposal: this.chop(prefix, val.proposal), \r\n\t\t\t\t\t\tdescription: val.description ? val.description : val.proposal,\r\n\t\t\t\t\t\thover: val.hover ? val.hover : val.proposal,\r\n\t\t\t\t\t\tstyle: linkedstyle\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar linkedtitle = this._data.title ? this._data.title : null;\r\n\t\t\tif (0 < proposals.length) {\r\n\t\t\t\tproposals.splice(0, 0,{\r\n\t\t\t\t\tproposal: '',\r\n\t\t\t\t\tdescription: linkedtitle ? linkedtitle : 'Options', //$NON-NLS-0$\r\n\t\t\t\t\tstyle: 'noemphasis_title', //$NON-NLS-0$\r\n\t\t\t\t\tunselectable: true\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\treturn proposals;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\n\t * @name LinkedMode\n\t * @description Create a new LinkedMode\n\t * @param {Editor} editor The backing editor\n\t * @param {UndoStack} undoStack The undo stack\n\t * @param contentAssist\n\t * @returns returns\n\t */\n\tfunction LinkedMode(editor, undoStack, contentAssist) {\r\n\t\tvar textView = editor.getTextView();\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\t\r\n\t\tthis.linkedModeModel = null;\r\n\t\t\r\n\t\ttextView.setAction(\"linkedModeEnter\", function() { //$NON-NLS-0$\r\n\t\t\tthis.exitLinkedMode(true);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModeCancel\", function() { //$NON-NLS-0$\r\n\t\t\tthis.exitLinkedMode(true);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModeNextGroup\", function() { //$NON-NLS-0$\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup((model.selectedGroupIndex + 1) % model.groups.length);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModePreviousGroup\", function() { //$NON-NLS-0$\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup(model.selectedGroupIndex > 0 ? model.selectedGroupIndex-1 : model.groups.length-1);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\t/**\r\n\t\t * Listener called when Linked Mode is active. Updates position's offsets and length\r\n\t\t * on user change. Also escapes the Linked Mode if the text buffer was modified outside of the Linked Mode positions.\r\n\t\t */\r\n\t\tthis.linkedModeListener = {\r\n\t\t\r\n\t\t\tonActivating: /* @callback */ function(evnt) {\r\n\t\t\t\tif (this._groupContentAssistProvider) {\r\n\t\t\t\t\tthis.contentAssist.setProviders([this._groupContentAssistProvider]);\r\n\t\t\t\t\tthis.contentAssist.setProgress(null);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this),\r\n\t\t\t\r\n\t\t\tonModelChanged: function(evnt) {\r\n\t\t\t\tif (this.ignoreVerify) { return; }\r\n\r\n\t\t\t\t// Get the position being modified\r\n\t\t\t\tvar start = this.editor.mapOffset(evnt.start);\r\n\t\t\t\tvar model = this.linkedModeModel, positionChanged, changed;\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tpositionChanged = this._getPositionChanged(model, start, start + evnt.removedCharCount);\r\n\t\t\t\t\tchanged = positionChanged.position;\r\n\t\t\t\t\tif (changed === undefined || changed.model !== model) {\r\n\t\t\t\t\t\t// The change has been done outside of the positions, exit the Linked Mode\r\n\t\t\t\t\t\tthis.exitLinkedMode(false);\r\n\t\t\t\t\t\tmodel = this.linkedModeModel;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!model) { return; }\r\n\r\n\t\t\t\t// Update position offsets for this change. Group changes are done in #onVerify\r\n\t\t\t\tvar deltaCount = 0;\r\n\t\t\t\tvar changeCount = evnt.addedCharCount - evnt.removedCharCount;\r\n\t\t\t\tvar sortedPositions = positionChanged.positions, position, pos;\r\n\t\t\t\tfor (var i = 0; i < sortedPositions.length; ++i) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tposition = pos.position;\r\n\t\t\t\t\tvar inside = position.offset <= start && start <= position.offset + position.length;\r\n\t\t\t\t\tif (inside && !pos.ansestor) {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\tdeltaCount += changeCount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tif (pos.ansestor && inside) {\r\n\t\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.escape) {\r\n\t\t\t\t\t\tpos.model.escapePosition = position.offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._updateAnnotations(sortedPositions);\r\n\t\t\t}.bind(this),\r\n\r\n\t\t\tonVerify: function(evnt) {\r\n\t\t\t\tif (this.ignoreVerify) { return; }\r\n\r\n\t\t\t\t// Get the position being modified\r\n\t\t\t\tvar start = this.editor.mapOffset(evnt.start);\r\n\t\t\t\tvar end = this.editor.mapOffset(evnt.end);\r\n\t\t\t\tvar model = this.linkedModeModel, positionChanged, changed;\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tpositionChanged = this._getPositionChanged(model, start, end);\r\n\t\t\t\t\tchanged = positionChanged.position;\r\n\t\t\t\t\tif (changed === undefined || changed.model !== model) {\r\n\t\t\t\t\t\t// The change has been done outside of the positions, exit the Linked Mode\r\n\t\t\t\t\t\tthis.exitLinkedMode(false);\r\n\t\t\t\t\t\tmodel = this.linkedModeModel;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!model) { return; }\r\n\t\t\t\t\r\n\t\t\t\t// Make sure changes in a same group are compound\r\n\t\t\t\tvar undo = this._compoundChange;\r\n\t\t\t\tif (undo) {\r\n\t\t\t\t\tif (!(undo.owner.model === model && undo.owner.group === changed.group)) {\r\n\t\t\t\t\t\tthis.endUndo();\r\n\t\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodel.selectedGroupIndex = changed.group;\r\n\t\t\t\t\r\n\t\t\t\t// Update position offsets taking into account all positions in the same changing group\r\n\t\t\t\tvar deltaCount = 0;\r\n\t\t\t\tvar changeCount = evnt.text.length - (end - start);\r\n\t\t\t\tvar sortedPositions = positionChanged.positions, position, pos;\r\n\t\t\t\tvar deltaStart = start - changed.position.offset, deltaEnd = end - changed.position.offset;\r\n\t\t\t\tfor (var i = 0; i < sortedPositions.length; ++i) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tposition = pos.position;\r\n\t\t\t\t\tpos.oldOffset = position.offset;\r\n\t\t\t\t\tif (pos.model === model && pos.group === changed.group) {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\tdeltaCount += changeCount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tif (pos.ansestor) {\r\n\t\t\t\t\t\t\tposition.length += changed.count * changeCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.escape) {\r\n\t\t\t\t\t\tpos.model.escapePosition = position.offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Cancel this modification and apply same modification to all positions in changing group\r\n\t\t\t\tthis.ignoreVerify = true;\r\n\t\t\t\tfor (i = sortedPositions.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tif (pos.model === model && pos.group === changed.group) {\r\n\t\t\t\t\t\tthis.editor.setText(evnt.text, pos.oldOffset + deltaStart , pos.oldOffset + deltaEnd, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.ignoreVerify = false;\r\n\t\t\t\tevnt.text = null;\r\n\t\t\t\tthis._updateAnnotations(sortedPositions);\r\n\t\t\t}.bind(this)\r\n\t\t};\r\n\t}\r\n\tLinkedMode.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(LinkedMode.prototype, {\r\n\t\t/**\n\t\t * @description Create the keybindings\n\t\t * @function\n\t\t * @returns {Array.<Object>} The keybindings\n\t\t */\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"linkedModeEnter\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModeCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModeNextGroup\", keyBinding: new KeyBinding(9)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModePreviousGroup\", keyBinding: new KeyBinding(9, false, true)}); //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Starts Linked Mode, selects the first position and registers the listeners.\r\n\t\t * @param {Object} linkedModeModel An object describing the model to be used by linked mode.\r\n\t\t * Contains one or more position groups. If a position in a group is edited, the other positions in\r\n\t\t * the same group are edited the same way. The model structure is as follows:\r\n\t\t * <pre>{\r\n\t\t *\t\tgroups: [{\r\n\t\t *\t\t\tdata: {},\r\n\t\t *\t\t\tpositions: [{\r\n\t\t *\t\t\t\toffset: 10, // Relative to the text buffer\r\n\t\t *\t\t\t\tlength: 3\r\n\t\t *\t\t\t}]\r\n\t\t *\t\t}],\r\n\t\t *\t\tescapePosition: 19, // Relative to the text buffer\r\n\t\t * }</pre>\r\n\t\t *\r\n\t\t * Each group in the model has an optional <code>data</code> property which can be\r\n\t\t * used to provide additional content assist for the group.  The <code>type</code> in\r\n\t\t * data determines what kind of content assist is provided. These are the support\r\n\t\t * structures for the <code>data</code> property.\r\n\t\t * <pre>{\r\n\t\t *\t\ttype: \"link\"\r\n\t\t *\t\tvalues: [\"proposal0\", \"proposal1\", ...]\r\n\t\t * }</pre>\r\n\t\t *\r\n\t\t * The \"link\" data struture provides static content assist proposals stored in the\r\n\t\t * <code>values</code> property.\r\n\t\t *\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.Template}<br/>\r\n\t\t * {@link orion.editor.TemplateContentAssist}<br/>\r\n\t\t * </p>\r\n\t\t */\r\n\t\tenterLinkedMode: function(linkedModeModel) {\r\n\t\t\tif (!this.linkedModeModel) {\r\n\t\t\t\tvar textView = this.editor.getTextView();\r\n\t\t\t\ttextView.addKeyMode(this);\r\n\t\t\t\ttextView.addEventListener(\"Verify\", this.linkedModeListener.onVerify);\r\n\t\t\t\ttextView.addEventListener(\"ModelChanged\", this.linkedModeListener.onModelChanged);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tcontentAssist.addEventListener(\"Activating\", this.linkedModeListener.onActivating);\r\n\t\t\t\tthis.editor.reportStatus(messages.linkedModeEntered, null, true);\r\n\t\t\t}\r\n\t\t\tthis._sortedPositions = null;\r\n\t\t\tif (this.linkedModeModel) {\r\n\t\t\t\tlinkedModeModel.previousModel = this.linkedModeModel;\r\n\t\t\t\tlinkedModeModel.parentGroup = this.linkedModeModel.selectedGroupIndex;\r\n\t\t\t\tthis.linkedModeModel.nextModel = linkedModeModel;\r\n\t\t\t}\r\n\t\t\tthis.linkedModeModel = linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup(0);\r\n\t\t},\r\n\t\t/** \r\n\t\t * Exits Linked Mode. Optionally places the caret at linkedMode escapePosition. \r\n\t\t * @param {Boolean} [escapePosition=false] if true, place the caret at the  escape position.\r\n\t\t */\r\n\t\texitLinkedMode: function(escapePosition) {\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._compoundChange) {\r\n\t\t\t\tthis.endUndo();\r\n\t\t\t\tthis._compoundChange = null;\r\n\t\t\t}\r\n\t\t\tthis._sortedPositions = null;\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.linkedModeModel = model.previousModel;\r\n\t\t\tmodel.parentGroup = model.previousModel = undefined;\r\n\t\t\tif (this.linkedModeModel) {\r\n\t\t\t\tthis.linkedModeModel.nextModel = undefined;\r\n\t\t\t}\r\n\t\t\tif (!this.linkedModeModel) {\r\n\t\t\t\tvar editor = this.editor;\r\n\t\t\t\tvar textView = editor.getTextView();\r\n\t\t\t\ttextView.removeKeyMode(this);\r\n\t\t\t\ttextView.removeEventListener(\"Verify\", this.linkedModeListener.onVerify);\r\n\t\t\t\ttextView.removeEventListener(\"ModelChanged\", this.linkedModeListener.onModelChanged);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tcontentAssist.removeEventListener(\"Activating\", this.linkedModeListener.onActivating);\r\n\t\t\t\tcontentAssist.offset = undefined;\r\n\t\t\t\tthis.editor.reportStatus(messages.linkedModeExited, null, true);\r\n\t\t\t}\r\n\t\t\tif (escapePosition && typeof model.escapePosition === \"number\") {\r\n\t\t\t\teditor.setCaretOffset(model.escapePosition, false);\r\n\t\t\t}\r\n\t\t\tthis.selectLinkedGroup(0);\r\n\t\t},\r\n\t\t/**\n\t\t * @description Start undoing\n\t\t */\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tvar slf = this;\r\n\t\t\t\tvar model = this.linkedModeModel;\r\n\t\t\t\tthis._compoundChange = this.undoStack.startCompoundChange({\r\n\t\t\t\t\tmodel: model,\r\n\t\t\t\t\tgroup: model.selectedGroupIndex,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @callback \n\t\t\t\t\t */\n\t\t\t\t\tend: function() {\r\n\t\t\t\t\t\tslf._compoundChange = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, \r\n\t\t/**\n\t\t * @description Ends the undo\n\t\t */\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns if linked mode is active in the current editor\n\t\t * @function\n\t\t * @returns {Boolean} If linked mode is active\n\t\t */\n\t\tisActive: function() {\r\n\t\t\treturn !!this.linkedModeModel;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @description Returns if linked mode status is active in the current editor\r\n\t\t * @function\r\n\t\t * @returns {Boolean} If linked mode status is active\r\n\t\t */\r\n\t\tisStatusActive: function() {\r\n\t\t\treturn !!this.linkedModeModel;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @description Selects the group of the given index from the currently active model\r\n\t\t * @param {Number} index The group index to select\r\n\t\t */\r\n\t\tselectLinkedGroup: function(index) {\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tif (model) {\r\n\t\t\t\tmodel.selectedGroupIndex = index;\r\n\t\t\t\tvar group = model.groups[index];\r\n\t\t\t\tvar position = group.positions[0];\r\n\t\t\t\tvar editor = this.editor;\r\n\t\t\t\teditor.setSelection(position.offset, position.offset + position.length);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tif (contentAssist) {\r\n\t\t\t\t\tcontentAssist.offset = undefined;\r\n\t\t\t\t\tif (group.data && group.data.type === \"link\" && group.data.values) {\r\n\t\t\t\t\t\tvar provider = this._groupContentAssistProvider = new LinkedContentAssist(group.data);\r\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @callback \n\t\t\t\t\t\t */\n\t\t\t\t\t\tprovider.getPrefix = function() {\r\n\t\t\t\t\t\t\tvar selection = editor.getSelection();\r\n\t\t\t\t\t\t\tif (selection.start === selection.end) {\r\n\t\t\t\t\t\t\t\tvar caretOffset = editor.getCaretOffset();\r\n\t\t\t\t\t\t\t\tif (position.offset <= caretOffset && caretOffset <= position.offset + position.length) {\r\n\t\t\t\t\t\t\t\t\treturn editor.getText(position.offset, caretOffset);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcontentAssist.offset = position.offset;\r\n\t\t\t\t\t\tcontentAssist.deactivate();\r\n\t\t\t\t\t\tcontentAssist.activate();\r\n\t\t\t\t\t} else if (this._groupContentAssistProvider) {\r\n\t\t\t\t\t\tthis._groupContentAssistProvider = null;\r\n\t\t\t\t\t\tcontentAssist.deactivate();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._updateAnnotations();\r\n\t\t},\r\n\t\t/**\n\t\t * @description Collect all model positions into the <code>all</code> array\n\t\t * @function\n\t\t * @private\n\t\t * @param {Array.<Object>} all The collector for the position objects\n\t\t * @param {Object} model The linked model to collect all positions from\n\t\t * @param {Object} delta The change in position\n\t\t */\n\t\t_getModelPositions: function(all, model, delta) {\r\n\t\t\tvar groups = model.groups;\r\n\t\t\tfor (var i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar positions = groups[i].positions;\r\n\t\t\t\tfor (var j = 0; j < positions.length; j++) {\r\n\t\t\t\t\tvar position = positions[j];\r\n\t\t\t\t\tif (delta) {\r\n\t\t\t\t\t\tposition = {offset: position.offset + delta, length: position.length};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar pos = {\r\n\t\t\t\t\t\tindex: j,\r\n\t\t\t\t\t\tgroup: i,\r\n\t\t\t\t\t\tcount: positions.length,\r\n\t\t\t\t\t\tmodel: model,\r\n\t\t\t\t\t\tposition: position\r\n\t\t\t\t\t};\r\n\t\t\t\t\tall.push(pos);\r\n\t\t\t\t\tif (model.nextModel && model.nextModel.parentGroup === i) {\r\n\t\t\t\t\t\tpos.ansestor = true;\r\n\t\t\t\t\t\tthis._getModelPositions(all, model.nextModel, (delta || 0) + positions[j].offset - positions[0].offset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns an array of all of the positions sorted \n\t\t * @function\n\t\t * @private\n\t\t * @param {Object} model The linked model to get and sort positions from\n\t\t * @returns {Array.<Object>} The sorted array of positions from the given model\n\t\t */\n\t\t_getSortedPositions: function(model) {\r\n\t\t\tvar all = this._sortedPositions;\r\n\t\t\tif (!all) {\r\n\t\t\t\tall = [];\r\n\t\t\t\t// Get the root linked model\r\n\t\t\t\twhile (model.previousModel) {\r\n\t\t\t\t\tmodel = model.previousModel;\r\n\t\t\t\t}\r\n\t\t\t\t// Get all positions under model expanding group positions of stacked linked modes\r\n\t\t\t\tthis._getModelPositions(all, model);\r\n\t\t\t\t// Add escape position for all models\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tif (typeof model.escapePosition === \"number\") {\r\n\t\t\t\t\t\tall.push({\r\n\t\t\t\t\t\t\tescape: true,\r\n\t\t\t\t\t\t\tmodel: model,\r\n\t\t\t\t\t\t\tposition: {offset: model.escapePosition, length: 0}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodel = model.nextModel;\r\n\t\t\t\t}\r\n\t\t\t\tall.sort(function(a, b) {\r\n\t\t\t\t\treturn a.position.offset - b.position.offset;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sortedPositions = all;\r\n\t\t\t}\r\n\t\t\treturn all;\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns if the given start - end position has changed in the given model\n\t\t * @function\n\t\t * @private\n\t\t * @param {Object} model The model to check\n\t\t * @param {Number} start The start\n\t\t * @param {Number} end The end\n\t\t * @returns {Object} The changed position\n\t\t */\n\t\t_getPositionChanged: function(model, start, end) {\r\n\t\t\tvar changed;\r\n\t\t\tvar sortedPositions = this._getSortedPositions(model);\r\n\t\t\tfor (var i = sortedPositions.length - 1; i >= 0; i--) {\r\n\t\t\t\tif (sortedPositions[i].escape) {\r\n\t\t\t\t\tcontinue;\n\t\t\t\t}\r\n\t\t\t\tvar position = sortedPositions[i].position;\r\n\t\t\t\tif (position.offset <= start && end <= position.offset + position.length) {\r\n\t\t\t\t\tchanged = sortedPositions[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {position: changed, positions: sortedPositions};\r\n\t\t},\r\n\t\t/**\n\t\t * @description Updates the editor annotations based on the given positions\n\t\t * @function\n\t\t * @private\n\t\t * @param {Array.<Object>} positions The positions\n\t\t */\n\t\t_updateAnnotations: function(positions) {\r\n\t\t\tvar annotationModel = this.editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) { return; }\r\n\t\t\tvar remove = [], add = [];\r\n\t\t\tvar annotations = annotationModel.getAnnotations(), annotation;\r\n\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\tannotation = annotations.next();\r\n\t\t\t\tswitch (annotation.type) {\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_LINKED_GROUP:\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP:\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:\r\n\t\t\t\t\t\tremove.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tif (model) {\r\n\t\t\t\tpositions = positions || this._getSortedPositions(model);\r\n\t\t\t\tfor (var i = 0; i < positions.length; i++) {\r\n\t\t\t\t\tvar position = positions[i];\r\n\t\t\t\t\tif (position.model !== model) { continue; }\r\n\t\t\t\t\tif (position.escape) { continue; }\r\n\t\t\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_LINKED_GROUP;\r\n\t\t\t\t\tif (position.group === model.selectedGroupIndex) {\r\n\t\t\t\t\t\tif (position.index === 0 && position.count > 1) {\r\n\t\t\t\t\t\t\ttype = mAnnotations.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttype = mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tposition = position.position;\r\n\t\t\t\t\tannotation = mAnnotations.AnnotationType.createAnnotation(type, position.offset, position.offset + position.length, \"\");\r\n\t\t\t\t\tadd.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t}\r\n\t});\r\n\texports.LinkedMode = LinkedMode;\r\n\r\n\treturn exports;\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/factories\", [ //$NON-NLS-0$\r\n\t'orion/editor/actions', //$NON-NLS-0$\r\n\t'orion/editor/undoStack', //$NON-NLS-0$\r\n\t'orion/editor/rulers', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/editor/textDND', //$NON-NLS-0$\r\n\t'orion/editor/linkedMode', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(mActions, mUndoStack, mRulers, mAnnotations, mTextDND, mLinkedMode, util) {\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction KeyBindingsFactory() {\r\n\t}\r\n\tKeyBindingsFactory.prototype = {\r\n\t\tcreateKeyBindings: function(editor, undoStack, contentAssist, searcher) {\r\n\t\t\t// Create keybindings for generic editing, no dependency on the service model\r\n\t\t\tvar textActions = new mActions.TextActions(editor, undoStack , searcher);\r\n\t\t\t// Linked Mode\r\n\t\t\tvar linkedMode = new mLinkedMode.LinkedMode(editor, undoStack, contentAssist);\r\n\t\t\t// create keybindings for source editing\r\n\t\t\t// TODO this should probably be something that happens more dynamically, when the editor changes input\r\n\t\t\tvar sourceCodeActions = new mActions.SourceCodeActions(editor, undoStack, contentAssist, linkedMode);\r\n\t\t\treturn {\r\n\t\t\t\ttextActions: textActions,\r\n\t\t\t\tlinkedMode: linkedMode,\r\n\t\t\t\tsourceCodeActions: sourceCodeActions\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\texports.KeyBindingsFactory = KeyBindingsFactory;\r\n\t\r\n\tfunction UndoFactory() {\r\n\t}\r\n\tUndoFactory.prototype = {\r\n\t\tcreateUndoStack: function(editor) {\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\treturn new mUndoStack.UndoStack(textView, 200);\r\n\t\t}\r\n\t};\r\n\texports.UndoFactory = UndoFactory;\r\n\r\n\tfunction LineNumberRulerFactory() {\r\n\t}\r\n\tLineNumberRulerFactory.prototype = {\r\n\t\tcreateLineNumberRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.LineNumberRuler(annotationModel, \"left\", {styleClass: \"ruler lines\"}, {styleClass: \"rulerLines odd\"}, {styleClass: \"rulerLines even\"}); //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.LineNumberRulerFactory = LineNumberRulerFactory;\r\n\t\r\n\tfunction FoldingRulerFactory() {\r\n\t}\r\n\tFoldingRulerFactory.prototype = {\r\n\t\tcreateFoldingRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.FoldingRuler(annotationModel, \"left\", {styleClass: \"ruler folding\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.FoldingRulerFactory = FoldingRulerFactory;\r\n\t\r\n\tfunction ZoomRulerFactory() {\r\n\t}\r\n\tZoomRulerFactory.prototype = {\r\n\t\tcreateZoomRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.ZoomRuler(util.isIOS || util.isAndroid ? \"right\" : \"innerRight\", {styleClass: \"ruler zoom\"}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.ZoomRulerFactory = ZoomRulerFactory;\r\n\t\r\n\tfunction AnnotationFactory() {\r\n\t}\r\n\tAnnotationFactory.prototype = {\r\n\t\tcreateAnnotationModel: function(model) {\r\n\t\t\treturn new mAnnotations.AnnotationModel(model);\r\n\t\t},\r\n\t\tcreateAnnotationStyler: function(annotationModel, view) {\r\n\t\t\treturn new mAnnotations.AnnotationStyler(annotationModel, view);\r\n\t\t},\r\n\t\tcreateAnnotationRulers: function(annotationModel) {\r\n\t\t\tvar annotationRuler = new mRulers.AnnotationRuler(annotationModel, \"left\", {styleClass: \"ruler annotations\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar overviewRuler = new mRulers.OverviewRuler(annotationModel, \"right\", {styleClass: \"ruler overview\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn {annotationRuler: annotationRuler, overviewRuler: overviewRuler};\r\n\t\t}\r\n\t};\r\n\texports.AnnotationFactory = AnnotationFactory;\r\n\t\r\n\tfunction TextDNDFactory() {\r\n\t}\r\n\tTextDNDFactory.prototype = {\r\n\t\tcreateTextDND: function(editor, undoStack) {\r\n\t\t\treturn new mTextDND.TextDND(editor.getTextView(), undoStack);\r\n\t\t}\r\n\t};\r\n\texports.TextDNDFactory = TextDNDFactory;\r\n\t\r\n\treturn exports;\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/editorFeatures\", [ //$NON-NLS-0$\n\t'orion/editor/factories', //$NON-NLS-0$\n\t'orion/editor/actions', //$NON-NLS-0$\n\t'orion/editor/linkedMode', //$NON-NLS-0$\n\t'orion/objects' //$NON-NLS-0$\n], function(mFactories, mActions, mLinkedMode, objects) {\n\treturn objects.mixin({}, mFactories, mActions, mLinkedMode);\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2011, 2016 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\n/*eslint-disable no-else-return, no-extra-parens*/\ndefine(\"orion/editor/contentAssist\", [\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/keyBinding',\r\n\t'orion/editor/keyModes',\r\n\t'orion/editor/eventTarget',\r\n\t'orion/Deferred',\r\n\t'orion/objects',\r\n\t'orion/editor/tooltip',\r\n\t'orion/editor/util',\r\n\t'orion/util',\r\n\t'orion/webui/littlelib',\r\n\t'orion/metrics'\r\n], function(messages, mKeyBinding, mKeyModes, mEventTarget, Deferred, objects, mTooltip, textUtil, util, lib, mMetrics) {\r\n\t/**\r\n\t * @name orion.editor.ContentAssistProvider\r\n\t * @class Interface defining a provider of content assist proposals.\r\n\t */\r\n\t/**\r\n\t * @memberOf orion.editor.ContentAssistProvider.prototype\r\n\t * @function\r\n\t * @name computeProposals\r\n\t * @param {String} buffer The buffer being edited.\r\n\t * @param {Number} offset The position in the buffer at which content assist is being requested.\r\n\t * @param {orion.editor.ContentAssistProvider.Context} context\r\n\t * @returns {Object[]} This provider's proposals for the given buffer and offset.\r\n\t */\r\n\t/**\r\n\t * @name orion.editor.ContentAssistProvider.Context\r\n\t * @class\r\n\t * @property {String} line The text of the line on which content assist is being requested.\r\n\t * @property {String} prefix Any non-whitespace, non-symbol characters preceding the offset.\r\n\t * @property {orion.editor.Selection} selection The current selection.\r\n\t */\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssist\r\n\t * @class Provides content assist for a TextView.\r\n\t * @description Creates a <code>ContentAssist</code> for a TextView. A ContentAssist consults a set of \r\n\t * {@link orion.editor.ContentAssistProvider}s to obtain proposals for text that may be inserted into a\r\n\t * TextView at a given offset.<p>\r\n\t * A ContentAssist is generally activated by its TextView action, at which point it computes the set of \r\n\t * proposals available. It will re-compute the proposals in response to subsequent changes on the TextView \r\n\t * (for example, user typing) for as long as the ContentAssist is active. A proposal may be applied by calling \r\n\t * {@link #apply}, after which the ContentAssist becomes deactivated. An active ContentAssist may be deactivated\r\n\t * by calling {@link #deactivate}.<p>\r\n\t * A ContentAssist dispatches events when it becomes activated or deactivated, and when proposals have been computed.\r\n\t * @param {orion.editor.TextView} textView The TextView to provide content assist for.\r\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\r\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\r\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist is about to be activated.\r\n\t * @name orion.editor.ContentAssist#ActivatingEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist is about to be deactivated.\r\n\t * @name orion.editor.ContentAssist#DeactivatingEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist has applied a proposal. <p>This event's <code>data</code> field gives information\r\n\t * about the proposal that was applied.\r\n\t * @name orion.editor.ContentAssist#ProposalAppliedEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched whenever a ContentAssist has obtained proposals from its providers. <p>This event's\r\n\t * <code>data</code> field gives information about the proposals.\r\n\t * @name orion.editor.ContentAssist#ProposalsComputedEvent\r\n\t * @event\r\n\t */\r\n\t\t\r\n\t// INACTIVE --Ctrl+Space--> ACTIVE --ModelChanging--> FILTERING\r\n\tvar State = {\r\n\t\tINACTIVE: 1,\r\n\t\tACTIVE: 2,\r\n\t\tFILTERING: 3\r\n\t};\r\n\t\r\n\tvar STYLES = {\r\n\t\tselected : \"selected\", //$NON-NLS-0$\r\n\t\thr : \"proposal-hr\", //$NON-NLS-0$\r\n\t\temphasis : \"proposal-emphasis\", //$NON-NLS-0$\r\n\t\tstrikethrough: \"proposal-strikethrough\",\r\n\t\tnoemphasis : \"proposal-noemphasis\", //$NON-NLS-0$\r\n\t\tnoemphasis_title : \"proposal-noemphasis-title\", //$NON-NLS-0$\r\n\t\tnoemphasis_title_keywords : \"proposal-noemphasis-title-keywords\", //$NON-NLS-0$\r\n\t\tdfault : \"proposal-default\" //$NON-NLS-0$\r\n\t};\r\n\t\r\n\t/**\n\t * @name ContentAssist\n\t * @description Creates a new content assist manager for the given text view\n\t * @param textView The text view to provide content assist for\n\t * @param serviceRegistry Optional, used to look up page message service for status\n\t */\n\tfunction ContentAssist(textView, serviceRegistry) {\r\n\t\tthis.textView = textView;\r\n\t\tif (serviceRegistry){\r\n\t\t\tthis.pageMessage = serviceRegistry.getService(\"orion.page.message\"); //$NON-NLS-1$\r\n\t\t}\r\n\t\tthis.state = State.INACTIVE;\r\n\t\tthis.clearProviders();\r\n\t\tvar self = this;\r\n\t\tthis._textViewListeners = {\r\n\t\t\tonModelChanging: (function(event) {\r\n\t\t\t\tthis._latestModelChangingEvent = event;\r\n\t\t\t\tif (event) {\r\n\t\t\t\t\tthis._updateFilterText(event);\t\r\n\t\t\t\t}\r\n\t\t\t}).bind(this),\r\n\t\t\tonSelection: (function(event) {\r\n\t\t\t\tif (this.isDeactivatingChange(this._latestModelChangingEvent, event)) {\r\n\t\t\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.isActive()) {\r\n\t\t\t\t\t\tif (this.state === State.ACTIVE) {\r\n\t\t\t\t\t\t\tthis.setState(State.FILTERING);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.filterProposals();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._latestModelChangingEvent = null;\r\n\t\t\t}).bind(this),\r\n\t\t\tonScroll: (function(event) {\r\n\t\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\t}).bind(this)\r\n\t\t};\r\n\t\t\r\n\t\ttextView.setKeyBinding(util.isMac ? new mKeyBinding.KeyBinding(' ', false, false, false, true) : new mKeyBinding.KeyBinding(' ', true), \"contentAssist\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\ttextView.setKeyBinding(util.isMac ? new mKeyBinding.KeyBinding(' ', false, false, true, true) : new mKeyBinding.KeyBinding(' ', true, false, true), \"contentAssist\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\ttextView.setAction(\"contentAssist\", function() { //$NON-NLS-0$\r\n\t\t\tif (!textView.getOptions(\"readonly\")) { //$NON-NLS-0$\r\n\t\t\t\tself.activate();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}, {name: messages.contentAssist});\r\n\t}\r\n\tContentAssist.prototype = /** @lends orion.editor.ContentAssist.prototype */ {\r\n\t\t/**\r\n\t\t * Applies the given proposal to the TextView.\r\n\t\t * @param {Object} [proposal]\r\n\t\t * @returns {Boolean} <code>true</code> if the proposal was applied; <code>false</code> if no proposal was provided.\r\n\t\t */\r\n\t\tapply: function(proposal) {\r\n\t\t\tif (!proposal) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\t// now handle prefixes\r\n\t\t\t// if there is a non-empty selection, then replace it,\r\n\t\t\t// if overwrite is truthy, then also replace the prefix\r\n\t\t\tvar view = this.textView;\r\n\t\t\tvar sel = view.getSelection();\r\n\t\t\tvar start = this._initialCaretOffset;\r\n\t\t\tvar mapStart = start;\r\n\t\t\tvar end = Math.max(sel.start, sel.end), mapEnd = end;\r\n\t\t\tvar model = view.getModel();\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tmapStart = model.mapOffset(mapStart);\r\n\t\t\t\tmapEnd = model.mapOffset(mapEnd);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (proposal.overwrite) {\r\n\t\t\t    if(typeof proposal.prefix === 'string') {\r\n\t\t\t        start = mapStart-proposal.prefix.length;\r\n\t\t\t    } else {\r\n\t\t\t\t    start = this.getPrefixStart(model, mapStart);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tproposal: proposal,\r\n\t\t\t\tstart: mapStart,\r\n\t\t\t\tend: mapEnd\r\n\t\t\t};\r\n\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\tvar proposalText = typeof proposal === \"string\" ? proposal : proposal.proposal;\r\n\t\t\tview.setText(proposalText, start, end);\r\n\t\t\tif (proposal.additionalEdits) {\r\n\t\t\t\tvar edit;\r\n\t\t\t\tfor (var i = 0; i < proposal.additionalEdits.length; i++) {\r\n\t\t\t\t\tedit = proposal.additionalEdits[i];\r\n\t\t\t\t\tview.setText(edit.text, edit.offset, edit.offset + edit.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dispatchEvent({type: \"ProposalApplied\", data: data}); //$NON-NLS-0$\r\n\t\t\tmMetrics.logEvent(\"contentAssist\", \"apply\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tactivate: function(providers, autoTriggered) {\r\n\t\t\tif (this.state === State.INACTIVE) {\r\n\t\t\t\tmMetrics.logEvent(\"contentAssist\", \"activate\", undefined, autoTriggered ? 0 : 1); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tthis._autoTriggered = autoTriggered ? true : false;\r\n\t\t\t\tthis.setState(State.ACTIVE, providers);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeactivate: function() {\r\n\t\t\tthis.setState(State.INACTIVE);\r\n\t\t},\r\n\t\t/** @returns {orion.editor.TextView} */\r\n\t\tgetTextView: function() {\r\n\t\t\treturn this.textView;\r\n\t\t},\r\n\t\t/** @returns {Boolean} */\r\n\t\tisActive: function() {\r\n\t\t\treturn this.state === State.ACTIVE || this.state === State.FILTERING;\r\n\t\t},\r\n\t\t/** @returns {Boolean} <code>true</code> if the event describes a change that should deactivate content assist. */\r\n\t\tisDeactivatingChange: function(/**orion.editor.ModelChangingEvent*/ event, selectionEvent) {\r\n\t\t\tvar isDeactivating = false;\r\n\t\t\t\r\n\t\t\tvar selections = Array.isArray(selectionEvent.newValue) ? selectionEvent.newValue : [selectionEvent.newValue];\r\n\t\t\tvar isPriorToInitialCaretOffset = selections[0].start < this._initialCaretOffset;\r\n\t\t\t\r\n\t\t\tif (isPriorToInitialCaretOffset || !event) {\r\n\t\t\t\tisDeactivating = true;\r\n\t\t\t} else if (event) {\r\n\t\t\t\tisDeactivating = (event.removedLineCount > 0) || (event.addedLineCount > 0);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn isDeactivating;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tsetState: function(state, /* Optional. Array of providers to pass to dispatched event.*/ providers) {\r\n\t\t\tvar eventType;\r\n\t\t\tif (state === State.ACTIVE) {\r\n\t\t\t\teventType = \"Activating\"; //$NON-NLS-0$\r\n\t\t\t\tif (this._mode) { this._mode.setActive(true); }\r\n\t\t\t} else if (state === State.INACTIVE) {\r\n\t\t\t\teventType = \"Deactivating\"; //$NON-NLS-0$\r\n\t\t\t\tif (this._mode) { this._mode.setActive(false); }\r\n\t\t\t}\r\n\t\t\tif (eventType) {\r\n\t\t\t\tthis.dispatchEvent({type: eventType, providers: providers});\r\n\t\t\t}\r\n\t\t\tthis.state = state;\r\n\t\t\tthis.onStateChange(state);\r\n\t\t},\r\n\t\tsetMode: function(mode) {\r\n\t\t\tthis._mode = mode;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tonStateChange: function(state) {\r\n\t\t\tif (state === State.INACTIVE) {\r\n\t\t\t\tthis._removeTextViewListeners();\r\n\t\t\t\tthis._filterText = \"\";\r\n\t\t\t\tthis._initialCaretOffset = -1;\r\n\t\t\t\tthis._computedProposals = null;\r\n\t\t\t} else if (state === State.ACTIVE) {\r\n\t\t\t\tthis._filterText = \"\";\r\n\t\t\t\tthis._addTextViewListeners();\r\n\t\t\t\tthis.computeProposals();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Computes the proposals at the TextView's current caret offset.\r\n\t\t */\r\n\t\tcomputeProposals: function() {\r\n\t\t\t// figure out initial offset, it should be the minimum between \r\n\t\t\t// the beginning of the selection and the current caret offset\r\n\t\t\tvar offset = this.textView.getCaretOffset();\r\n\t\t\tvar sel = this.textView.getSelection();\r\n\t\t\tvar selectionStart = Math.min(sel.start, sel.end);\t\t\t\r\n\t\t\tthis._initialCaretOffset = Math.min(offset, selectionStart);\r\n\t\t\tthis._computedProposals = null;\r\n\t\t\tdelete this._autoApply;\r\n\t\t\tthis._computeProposals(this._initialCaretOffset).then(function(proposals) {\r\n\t\t\t\tif (this.isActive()) {\r\n\t\t\t\t\tvar flatProposalArray = this._flatten(proposals);\r\n\t\t\t\t\t//check if flattened proposals form a valid array with at least one entry\r\n\t\t\t\t\tif (flatProposalArray && Array.isArray(flatProposalArray) && (0 < flatProposalArray.length)) {\r\n\t\t\t\t\t\tthis._computedProposals = proposals;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar autoApply = typeof this._autoApply === 'boolean' ? this._autoApply : !this._autoTriggerEnabled;\r\n\t\t\t\t\tthis.dispatchEvent({type: \"ProposalsComputed\", data: {proposals: flatProposalArray}, autoApply: autoApply}); //$NON-NLS-0$\r\n\t\t\t\t\tif (this._computedProposals && this._filterText) {\r\n\t\t\t\t\t\t// force filtering here because user entered text after\r\n\t\t\t\t\t\t// computeProposals() was called but before the plugins\r\n\t\t\t\t\t\t// returned the computed proposals\r\n\t\t\t\t\t\tthis.filterProposals(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetPrefixStart: function(model, end) {\r\n\t\t\tvar index = end;\r\n\t\t\twhile (index > 0 && /[A-Za-z0-9_]/.test(model.getText(index - 1, index))) {\r\n\t\t\t\tindex--;\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\thandleError: function(error) {\r\n\t\t\tif (typeof console !== \"undefined\") {\r\n\t\t\t\tconsole.log(\"Error retrieving content assist proposals\"); //$NON-NLS-0$\r\n\t\t\t\tconsole.log(error && error.stack);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Initializes the providers. A provider must define an <tt>initialize()</tt> method to be initialized.\r\n\t\t * @since 6.0\r\n\t\t */\r\n\t\tinitialize: function() {\r\n\t\t\tthis._providers.forEach(function(info) {\r\n\t\t\t\tvar provider = info.provider;\r\n\t\t\t\tif (typeof provider.initialize === \"function\") {\r\n\t\t\t\t\tprovider.initialize();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Retrieves the proposals at the given offset.\r\n\t\t * @private\r\n\t\t * @param {Number} offset The caret offset.\r\n\t\t * @returns {Deferred} A promise that will provide the proposals.\r\n\t\t */\r\n\t\t_computeProposals: function(offset) {\r\n\t\t\tvar providerInfoArray = this._providers;\r\n\t\t\tvar textView = this.textView;\r\n\t\t\tvar sel = textView.getSelection();\r\n\t\t\tvar model = textView.getModel(), mapOffset = offset;\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tmapOffset = model.mapOffset(mapOffset);\r\n\t\t\t\tsel.start = model.mapOffset(sel.start);\r\n\t\t\t\tsel.end = model.mapOffset(sel.end);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\tvar line = model.getLine(model.getLineAtOffset(mapOffset));\r\n\t\t\tvar index = 0;\r\n\t\t\twhile (index < line.length && /\\s/.test(line.charAt(index))) {\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\tvar indentation = line.substring(0, index);\r\n\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar lineDelimiter = model.getLineDelimiter();\r\n\t\t\tvar _self = this;\r\n\t\t\tvar promises = providerInfoArray.map(function(providerInfo) {\r\n\t\t\t\tvar provider = providerInfo.provider;\r\n\t\t\t\tvar computePrefixFunc = provider.computePrefix;\r\n\t\t\t\tvar ecProvider;\r\n\t\t\t\tvar editorContext;\r\n\t\t\t\tvar proposals;\r\n\t\t\t\tvar func;\r\n\t\t\t\tvar promise;\r\n\t\t\t\tvar params;\r\n\t\t\t\tif(typeof providerInfo.autoApply === 'boolean') {\r\n\t\t\t\t\t_self._autoApply = providerInfo.autoApply;\r\n\t\t\t\t}\r\n\t\t\t\tif (computePrefixFunc) {\r\n\t\t\t\t\tecProvider = _self.editorContextProvider;\r\n\t\t\t\t\teditorContext = ecProvider.getEditorContext();\r\n\t\t\t\t\tvar result = computePrefixFunc.apply(provider, [editorContext, mapOffset]);\r\n\t\t\t\t\treturn result.then(function(prefix) {\r\n\t\t\t\t\t\tparams = {\r\n\t\t\t\t\t\t\tline: line,\r\n\t\t\t\t\t\t\toffset: mapOffset,\r\n\t\t\t\t\t\t\tprefix: prefix,\r\n\t\t\t\t\t\t\tselection: sel,\r\n\t\t\t\t\t\t\tdelimiter: lineDelimiter,\r\n\t\t\t\t\t\t\ttab: tab,\r\n\t\t\t\t\t\t\tindentation: indentation\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif ((func = provider.computeContentAssist)) {\r\n\t\t\t\t\t\t\t\tparams = objects.mixin(params, ecProvider.getOptions());\r\n\t\t\t\t\t\t\t\tpromise = func.apply(provider, [editorContext, params]);\r\n\t\t\t\t\t\t\t} else if ((func = provider.getProposals || provider.computeProposals)) {\r\n\t\t\t\t\t\t\t\t// old API\r\n\t\t\t\t\t\t\t\tpromise = func.apply(provider, [model.getText(), mapOffset, params]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tproposals = _self.progress ? _self.progress.progress(promise, \"Generating content assist proposal\") : promise; //$NON-NLS-0$\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treturn new Deferred().reject(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Deferred.when(proposals);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(err) {\r\n\t\t\t\t\t\treturn new Deferred().reject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// no computePrefix function is defined for the provider. Use the default prefix\r\n\t\t\t\tparams = {\r\n\t\t\t\t\tline: line,\r\n\t\t\t\t\toffset: mapOffset,\r\n\t\t\t\t\tprefix: model.getText(_self.getPrefixStart(model, mapOffset), mapOffset),\r\n\t\t\t\t\tselection: sel,\r\n\t\t\t\t\tdelimiter: lineDelimiter,\r\n\t\t\t\t\ttab: tab,\r\n\t\t\t\t\tindentation: indentation\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif ((func = provider.computeContentAssist)) {\r\n\t\t\t\t\t\tecProvider = _self.editorContextProvider;\r\n\t\t\t\t\t\teditorContext = ecProvider.getEditorContext();\r\n\t\t\t\t\t\tparams = objects.mixin(params, ecProvider.getOptions());\r\n\t\t\t\t\t\tpromise = func.apply(provider, [editorContext, params]);\r\n\t\t\t\t\t} else if ((func = provider.getProposals || provider.computeProposals)) {\r\n\t\t\t\t\t\t// old API\r\n\t\t\t\t\t\tpromise = func.apply(provider, [model.getText(), mapOffset, params]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproposals = _self.progress ? _self.progress.progress(promise, \"Generating content assist proposal\") : promise; //$NON-NLS-0$\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn new Deferred().reject(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn Deferred.when(proposals);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// TODO should we allow error to propagate instead of handling here?\r\n\t\t\tvar allPromises = Deferred.all(promises, this.handleError);\r\n\t\t\t\r\n\t\t\tif (this.pageMessage){\r\n\t\t\t\tallPromises = Deferred.when(allPromises, function(proposals){\r\n\t\t\t\t\t_self.pageMessage.close();\r\n\t\t\t\t\tvar foundProposal = false;\r\n\t\t\t\t\tif (proposals && proposals.length > 0){\r\n\t\t\t\t\t\tfor (var i=0; i<proposals.length; i++) {\r\n\t\t\t\t\t\t\tif (Array.isArray(proposals[i]) && proposals[i].length > 0){\r\n\t\t\t\t\t\t\t\tfoundProposal = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!foundProposal){\r\n\t\t\t\t\t\t_self.pageMessage.setErrorMessage(messages[\"noProposals\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn proposals;\r\n\t\t\t\t});\r\n\t\t\t\tthis.pageMessage.showWhile(allPromises, messages[\"computingProposals\"]);\r\n\t\t\t}\r\n\t\t\treturn allPromises;\r\n\t\t},\r\n\r\n\t\tfilterProposals: function(force) {\r\n\t\t\tif (this._computedProposals && (this._latestModelChangingEvent || force)) {\r\n\t\t\t\tvar model = this.textView.getModel();\r\n\t\t\t\tif (model.getBaseModel) {\r\n\t\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t\t}\r\n\t\t\t\tvar prefixStart = this.getPrefixStart(model, this._initialCaretOffset);\r\n\t\t\t\tvar defaultPrefix = this.textView.getText(prefixStart, this._initialCaretOffset);\r\n\t\t\t\tvar prefixText = defaultPrefix;\r\n\t\t\t\t// filter proposals based on prefixes and _filterText\r\n\t\t\t\tvar proposals = []; //array of arrays of proposals\r\n\t\t\t\tthis._computedProposals.forEach(function(proposalArray) {\r\n\t\t\t\t\tif (proposalArray && Array.isArray(proposalArray)) {\r\n\t\t\t\t\t\tvar includedProposals = proposalArray.filter(function(proposal) {\r\n\t\t\t\t\t\t\tfunction getRegexp(prefix, filter) {\r\n\t\t\t\t\t\t\t\tvar modifiedFilter = filter.replace(/([.+^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\"); //add start of line character and escape all special characters except * and ? //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tmodifiedFilter = modifiedFilter.replace(/([*?])/g, \".$1\"); //convert user input * and ? to .* and .? //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\treturn new RegExp(\"^\" + prefix + modifiedFilter, \"i\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar pattern;\r\n\t\t\t\t\t\t\tif (!proposal) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(typeof proposal.prefix === 'string') {\r\n\t\t\t\t\t\t\t\tprefixText = proposal.prefix;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tprefixText = defaultPrefix;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (STYLES[proposal.style] === STYLES.hr\r\n\t\t\t\t\t\t\t\t|| STYLES[proposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar proposalString = \"\";\r\n\t\t\t\t\t\t\tif (proposal.overwrite) {\r\n\t\t\t\t\t\t\t\tif (proposal.name) {\r\n\t\t\t\t\t\t\t\t\tproposalString = proposal.name;\r\n\t\t\t\t\t\t\t\t} else if (proposal.proposal) {\r\n\t\t\t\t\t\t\t\t\tproposalString = proposal.proposal;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn false; // unknown format\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpattern = getRegexp(prefixText, this._filterText);\r\n\t\t\t\t\t\t\t\treturn pattern.test(proposalString);\r\n\t\t\t\t\t\t\t} else if (proposal.name || proposal.proposal) {\r\n\t\t\t\t\t\t\t\tvar activated = false;\r\n\t\t\t\t\t\t\t\t// try matching name\r\n\t\t\t\t\t\t\t\tif (proposal.name) {\r\n\t\t\t\t\t\t\t\t\tpattern = getRegexp(prefixText, this._filterText);\r\n\t\t\t\t\t\t\t\t\tactivated = pattern.test(proposal.name);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// try matching proposal text\r\n\t\t\t\t\t\t\t\tif (!activated && proposal.proposal) {\r\n\t\t\t\t\t\t\t\t\tpattern = getRegexp(\"\", this._filterText);\r\n\t\t\t\t\t\t\t\t\tactivated = pattern.test(proposal.proposal);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn activated;\r\n\t\t\t\t\t\t\t} else if (typeof proposal === \"string\") {\r\n\t\t\t\t\t\t\t\tpattern = getRegexp(\"\", this._filterText);\r\n\t\t\t\t\t\t\t\treturn pattern.test(proposal);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (includedProposals.length > 0) {\r\n\t\t\t\t\t\t\tproposals.push(includedProposals);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\t\r\n\t\t\t\tvar flatProposalArray = [];\r\n\t\t\t\tif (proposals) {\r\n\t\t\t\t\t// filter out extra separators and titles\r\n\t\t\t\t\tproposals = this._removeExtraUnselectableElements(proposals);\r\n\t\t\t\t\tflatProposalArray = this._flatten(proposals);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatchEvent({type: \"ProposalsComputed\", data: {proposals: flatProposalArray}, autoApply: false}); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Helper method which removes extra separators and titles from\r\n\t\t * an array containing arrays of proposals from the various providers.\r\n\t\t * @param{Array[]} proposals An array with each element containing an array of proposals\r\n\t\t * @returns {Array} An array without the extra unselectable elements\r\n\t\t */\r\n\t\t_removeExtraUnselectableElements: function(proposals) {\r\n\t\t\t// get rid of extra separators and titles\r\n\t\t\tvar mappedProposals = proposals.map(function(proposalArray) {\r\n\t\t\t\tvar element = proposalArray.filter(function(proposal, index) {\r\n\t\t\t\t\tvar keepElement = true;\r\n\t\t\t\t\tif (STYLES[proposal.style] === STYLES.hr) {\r\n\t\t\t\t\t\tif ((0 === index) || ((proposalArray.length - 1) === index)) {\r\n\t\t\t\t\t\t\tkeepElement = false; // remove separators at first or last element\r\n\t\t\t\t\t\t} else if (STYLES.hr === STYLES[proposalArray[index - 1].style]) {\r\n\t\t\t\t\t\t\tkeepElement = false; // remove separator preceeded by another separator\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (STYLES[proposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\tvar nextProposal = proposalArray[index + 1];\r\n\t\t\t\t\t\tif (nextProposal) {\r\n\t\t\t\t\t\t\t// remove titles that preceed other titles, all of their subelements have already been filtered out\r\n\t\t\t\t\t\t\tif (STYLES[nextProposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\t\t\tkeepElement = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeepElement = false; //remove titles that are at the end of the array\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn keepElement;\r\n\t\t\t\t});\r\n\t\t\t\treturn element;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn mappedProposals;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Sets the provider that will be invoked to generate the Editor Context service and options to any\r\n\t\t * content assist providers that implement the v4.0 content assist API.\r\n\t\t * @param {Object} editorContextProvider\r\n\t\t */\r\n\t\tsetEditorContextProvider: function(editorContextProvider) {\r\n\t\t\tthis.editorContextProvider = editorContextProvider;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Helper method used to generate a unique ID for a provider.\r\n\t\t * Note that the uniqueness of the ID is only guaranteed for the life of this\r\n\t\t * object and if all of the other IDs are also generated using this method.\r\n\t\t */\r\n\t\t_generateProviderId: function() {\r\n\t\t\tif (this._idcount) {\r\n\t\t\t\tthis._idcount++;\r\n\t\t\t} else {\r\n\t\t\t\tthis._idcount = 0;\r\n\t\t\t}\r\n\t\t\treturn \"ContentAssistGeneratedID_\" +  this._idcount; //$NON-NLS-0$\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets whether or not automatic content assist triggering is enabled.\r\n\t\t * @param {Boolean} enableAutoTrigger\r\n\t\t */\r\n\t\tsetAutoTriggerEnabled: function(enableAutoTrigger) {\r\n\t\t\tthis._autoTriggerEnabled = enableAutoTrigger;\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @name orion.editor.ContentAssistProviderInfo\r\n\t\t * @class Encapsulates a content assist provider and its automatic triggers.\r\n\t\t *\r\n\t\t * @property {String} id Unique ID of this provider.\r\n\t\t * @property {RegExp} charTriggers A regular expression matching the characters that, when typed,\r\n\t\t * will cause this provider to be activated automatically by the content assist engine.\r\n\t\t * @property {RegExp} excludedStyles A regular expression matching the style names that are\r\n\t\t * exclusions to this provider's <tt>charTriggers</tt> matching.\r\n\t\t * @property {orion.editor.ContentAssistProvider} provider The actual content assist provider.\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * Sets the content assist providers that this ContentAssist will consult to obtain proposals.\r\n\t\t *\r\n\t\t * @param {orion.editor.ContentAssistProvider[]|orion.edit.ContentAssistProviderInfo[]} providers The\r\n\t\t * providers. Each element may be either a plain {@link orion.editor.ContentAssistProvider}, or a\r\n\t\t * {@link orion.edit.ContentAssistProviderInfo}.\r\n\t\t */\r\n\t\tsetProviders: function(providers) {\r\n\t\t\tvar _self = this;\r\n\t\t\tthis.setProviderInfoArray(providers.map(function(p) {\r\n\t\t\t\t// Wrap any plain Provider into a ProviderInfo\r\n\t\t\t\treturn p.id ? p : {\r\n\t\t\t\t\tprovider: p,\r\n\t\t\t\t\tid: _self._generateProviderId()\r\n\t\t\t\t};\r\n\t\t\t}));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tsetProviderInfoArray: function(providerInfoArray) {\r\n\t\t\tthis.clearProviders();\r\n\t\t\t\r\n\t\t\tthis._providers = providerInfoArray;\r\n\t\t\tthis._charTriggersInstalled = providerInfoArray.some(function(info){\r\n\t\t\t\treturn info.charTriggers;\r\n\t\t\t});\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @returns orion.edit.ContentAssistProviderInfo[]\r\n\t\t */\r\n\t\tgetProviders: function() {\r\n\t\t\treturn this._providers.slice();\r\n\t\t},\r\n\r\n\t\tclearProviders: function() {\r\n\t\t\tthis._providers = [];\r\n\t\t\tthis._charTriggersInstalled = false;\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets the progress handler that will display progress information, if any are generated by content assist providers.\r\n\t\t */\r\n\t\tsetProgress: function(progress){\r\n\t\t\tthis.progress = progress;\r\n\t\t},\r\n\t\t\r\n\t\tsetStyleAccessor: function(styleAccessor) {\r\n\t\t\tthis._styleAccessor = styleAccessor;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Flattens an array of arrays into a one-dimensional array.\r\n\t\t * @param {Array[]} array\r\n\t\t * @returns {Array}\r\n\t\t */\r\n\t\t_flatten: function(arrayOrObjectArray) {\r\n\t\t\t\r\n\t\t\treturn arrayOrObjectArray.reduce(function(prev, curr) {\r\n\t\t\t\tvar returnValue = prev;\r\n\t\t\t\tvar filteredArray = null;\r\n\t\t\t\t\r\n\t\t\t\tif (curr && Array.isArray(curr)) {\r\n\t\t\t\t\tfilteredArray = curr.filter(function(element){\r\n\t\t\t\t\t\treturn element; //filter out falsy elements\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// add current proposal array to flattened array\r\n\t\t\t\t// skip current elements that are not arrays\r\n\t\t\t\tif (filteredArray && Array.isArray(filteredArray) && (filteredArray.length > 0)) {\r\n\t\t\t\t\tvar first = filteredArray;\r\n\t\t\t\t\tvar last = prev;\r\n\t\t\t\t\tvar filteredArrayStyle = filteredArray[0].style;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (filteredArrayStyle && STYLES[filteredArrayStyle] && (0 === STYLES[filteredArrayStyle].indexOf(STYLES.noemphasis))) {\r\n\t\t\t\t\t\t// the style of the first element starts with noemphasis\r\n\t\t\t\t\t\t// add these proposals to the end of the array\r\n\t\t\t\t\t\tfirst = prev;\r\n\t\t\t\t\t\tlast = filteredArray;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (first.length > 0) {\r\n\t\t\t\t\t\tvar firstArrayStyle = first[first.length - 1].style;\r\n\t\t\t\t\t\tif (firstArrayStyle && (STYLES.hr !== STYLES[firstArrayStyle])) {\r\n\t\t\t\t\t\t\t// add separator between proposals from different providers \r\n\t\t\t\t\t\t\t// if the previous array didn't already end with a separator\r\n\t\t\t\t\t\t\tfirst = first.concat({\r\n\t\t\t\t\t\t\t\tproposal: '',\r\n\t\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\t\tdescription: '---------------------------------', //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tstyle: 'hr', //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tunselectable: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturnValue = first.concat(last);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn returnValue;\r\n\t\t\t}, []);\r\n\t\t},\r\n\t\t\r\n\t\t_triggerListener: function(/*event*/) {\r\n\t\t\tvar caretOffset = this.textView.getCaretOffset();\r\n\t\t\tvar stylesAtOffset = null;\r\n\t\t\tvar providerInfosToActivate = [];\r\n\r\n\t\t\tif (this._charTriggersInstalled) {\r\n\t\t\t\tvar currentChar = this.textView.getText(caretOffset - 1, caretOffset);\r\n\r\n\t\t\t\tthis._providers.forEach(function(info) {\r\n\t\t\t\t\t// check if the charTriggers RegExp matches the currentChar\r\n\t\t\t\t\t// we're assuming that this will fail much more often than\r\n\t\t\t\t\t// the excludedStyles test so do this first for better performance\r\n\t\t\t\t\tvar charTriggers = info.charTriggers;\r\n\t\t\t\t\tif (charTriggers && charTriggers.test(currentChar)) {\r\n\t\t\t\t\t\tvar isExcluded = false;\r\n\t\t\t\t\t\tvar excludedStyles = info.excludedStyles;\r\n\t\t\t\t\t\tif (this._styleAccessor && excludedStyles) {\r\n\t\t\t\t\t\t\tif (!stylesAtOffset) {\r\n\t\t\t\t\t\t\t\t// lazily initialize this variable to avoid getting the styles\r\n\t\t\t\t\t\t\t\t// for every model modification, only ones that may trigger\r\n\t\t\t\t\t\t\t\tstylesAtOffset = this._styleAccessor.getStyles(caretOffset - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// check if any of the styles match the excludedStyles RegExp\r\n\t\t\t\t\t\t\tisExcluded = stylesAtOffset.some(function (element) {\r\n\t\t\t\t\t\t\t\treturn excludedStyles.test(element.style);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isExcluded) {\r\n\t\t\t\t\t\t\tproviderInfosToActivate.push(info);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tif (providerInfosToActivate.length > 0) {\r\n\t\t\t\t\tthis.activate(providerInfosToActivate, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Private helper to install/uninstall the automatic trigger\r\n\t\t * listener based on the state of the relevant booleans\r\n\t\t */\r\n\t\t_updateAutoTriggerListenerState: function() {\r\n\t\t\tif (!this._boundTriggerListener) {\r\n\t\t\t\tthis._boundTriggerListener = this._triggerListener.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._triggerListenerInstalled) {\r\n\t\t\t\t// uninstall the listener if necessary\r\n\t\t\t\tif (!this._autoTriggerEnabled || !this._charTriggersInstalled) {\r\n\t\t\t\t\tthis.textView.removeEventListener(\"Modify\", this._boundTriggerListener);\r\n\t\t\t\t\tthis._triggerListenerInstalled = false;\r\n\t\t\t\t}\r\n\t\t\t} else if (this._autoTriggerEnabled && this._charTriggersInstalled){\r\n\t\t\t\t// install the listener if necessary\r\n\t\t\t\tthis.textView.addEventListener(\"Modify\", this._boundTriggerListener);\r\n\t\t\t\tthis._triggerListenerInstalled = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_addTextViewListeners: function() {\r\n\t\t\tif (!this._textViewListenersAdded) {\r\n\t\t\t\tthis.textView.addEventListener(\"ModelChanging\", this._textViewListeners.onModelChanging);\r\n\t\t\t\tthis.textView.addEventListener(\"Scroll\", this._textViewListeners.onScroll);\r\n\t\t\t\tthis.textView.addEventListener(\"Selection\", this._textViewListeners.onSelection);\r\n\t\t\t\tthis._textViewListenersAdded = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_removeTextViewListeners: function() {\r\n\t\t\tif (this._textViewListenersAdded) {\r\n\t\t\t\tthis._latestModelChangingEvent = null;\r\n\t\t\t\tthis.textView.removeEventListener(\"ModelChanging\", this._textViewListeners.onModelChanging);\r\n\t\t\t\tthis.textView.removeEventListener(\"Scroll\", this._textViewListeners.onScroll);\r\n\t\t\t\tthis.textView.removeEventListener(\"Selection\", this._textViewListeners.onSelection);\r\n\t\t\t\tthis._textViewListenersAdded = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_updateFilterText: function(modelChangingEvent) {\r\n\t\t\t// update this._filterText based on the modification info\r\n\t\t\t// contained in the event\r\n\t\t\tvar removedCharCount = modelChangingEvent.removedCharCount;\r\n\t\t\tif (removedCharCount) {\r\n\t\t\t\tvar lastIndex = this._filterText.length - removedCharCount;\r\n\t\t\t\tthis._filterText = this._filterText.substring(0, lastIndex);\r\n\t\t\t}\r\n\t\t\tvar text = modelChangingEvent.text;\r\n\t\t\tif (text) {\r\n\t\t\t\tthis._filterText = this._filterText.concat(text);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmEventTarget.EventTarget.addMixin(ContentAssist.prototype);\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssistMode\r\n\t * @class Editor mode for interacting with content assist proposals.\r\n\t * @description Creates a ContentAssistMode. A ContentAssistMode is a key mode for {@link orion.editor.Editor}\r\n\t * that provides interaction with content assist proposals retrieved from an {@link orion.editor.ContentAssist}. \r\n\t * Interaction is performed via the {@link #lineUp}, {@link #lineDown}, and {@link #enter} actions. An \r\n\t * {@link orion.editor.ContentAssistWidget} may optionally be provided to display which proposal is currently selected.\r\n\t * @param {orion.editor.ContentAssist} contentAssist\r\n\t * @param {orion.editor.ContentAssistWidget} [ContentAssistWidget]\r\n\t */\r\n\tfunction ContentAssistMode(contentAssist, ContentAssistWidget) {\r\n\t\tvar textView = contentAssist.textView;\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.widget = ContentAssistWidget;\r\n\t\tthis.proposals = [];\r\n\t\tvar self = this;\r\n\t\tthis.contentAssist.addEventListener(\"ProposalsComputed\", function(event) {\r\n\t\t\tself.proposals = event.data.proposals;\r\n\t\t\tif (self.proposals.length === 0) {\r\n\t\t\t\tself.selectedIndex = -1;\r\n\t\t\t\tself.cancel();\r\n\t\t\t} else {\r\n\t\t\t\tself.selectedIndex = 0;\r\n\t\t\t\twhile(self.proposals[self.selectedIndex] && self.proposals[self.selectedIndex].unselectable) {\r\n\t\t\t\t\tself.selectedIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.proposals[self.selectedIndex]) {\r\n\t\t\t\t\tif (self.widget) {\r\n\t\t\t\t\t\tvar showWidget = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (event.autoApply) {\r\n\t\t\t\t\t\t\tvar nextIndex = self.selectedIndex + 1;\r\n\t\t\t\t\t\t\twhile (self.proposals[nextIndex] && self.proposals[nextIndex].unselectable) {\r\n\t\t\t\t\t\t\t\tnextIndex++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!self.proposals[nextIndex]) {\r\n\t\t\t\t\t\t\t\t// if there is only one selectable proposal apply it automatically\r\n\t\t\t\t\t\t\t\tshowWidget = false;\r\n\t\t\t\t\t\t\t\tself.contentAssist.apply(self.proposals[self.selectedIndex]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (showWidget) {\r\n\t\t\t\t\t\t\tself.widget.show();\r\n\t\t\t\t\t\t\tself.widget.selectNode(self.selectedIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.selectedIndex = -1; // didn't find any selectable items\r\n\t\t\t\t\tself.cancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\ttextView.setAction(\"contentAssistApply\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.enter();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistCancel\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.cancel();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistNextProposal\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineDown();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistPreviousProposal\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineUp();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistNextPage\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.pageDown();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistPreviousPage\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.pageUp();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistHome\", function() { //$NON-NLS-0$\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.scrollIndex(0, true);\r\n\t\t\t}\r\n\t\t\treturn this.lineDown(0); // select first selectable element starting at the top and moving downwards\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistEnd\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineUp(this.proposals.length - 1); // select first selectable element starting at the bottom and moving up\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistTab\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.tab();\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tif (this.widget) {\r\n\t\t\tthis.widget.setContentAssistMode(this);\r\n\t\t\tthis.widget.createAccessible();\r\n\t\t}\r\n\t}\r\n\tContentAssistMode.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(ContentAssistMode.prototype, {\r\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"contentAssistApply\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistNextProposal\", keyBinding: new KeyBinding(40)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistPreviousProposal\", keyBinding: new KeyBinding(38)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistNextPage\", keyBinding: new KeyBinding(34)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistPreviousPage\", keyBinding: new KeyBinding(33)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistHome\", keyBinding: new KeyBinding(lib.KEY.HOME)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistEnd\", keyBinding: new KeyBinding(lib.KEY.END)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistTab\", keyBinding: new KeyBinding(9)}); //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\tcancel: function() {\r\n\t\t\tthis.getContentAssist().deactivate();\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetContentAssist: function() {\r\n\t\t\treturn this.contentAssist;\r\n\t\t},\r\n\t\tgetProposals: function() {\r\n\t\t\treturn this.proposals;\t\r\n\t\t},\r\n\t\tisActive: function() {\r\n\t\t\treturn this.getContentAssist().isActive();\r\n\t\t},\r\n\t\tsetActive: function(active) {\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.contentAssist.textView.addKeyMode(this);\r\n\t\t\t} else {\r\n\t\t\t\tthis.contentAssist.textView.removeKeyMode(this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects a selectable item in the content assist widget\r\n\t\t * iterating backwards for .\r\n\t\t * \r\n\t\t * @param index {number} Optional. The index of the item to try and select. \r\n\t\t */\r\n\t\tlineUp: function(index, noWrap) {\r\n\t\t\treturn this.selectNew(index, noWrap, false);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects the item at the specified index or the next\r\n\t\t * selectable item\r\n\t\t */\r\n\t\tlineDown: function(index, noWrap) {\r\n\t\t\treturn this.selectNew(index, noWrap, true);\r\n\t\t},\r\n\t\tselectNew: function(index, noWrap, forward) {\r\n\t\t\tvar newIndex = index;\r\n\t\t\t\r\n\t\t\tif (forward) {\r\n\t\t\t\tif (undefined === newIndex) {\r\n\t\t\t\t\tnewIndex = this.selectedIndex + 1;\r\n\t\t\t\t}\r\n\t\t\t\t// handle wrap around\r\n\t\t\t\tif (newIndex >= this.proposals.length) {\r\n\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex = 0;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (undefined === newIndex) {\r\n\t\t\t\t\tnewIndex = this.selectedIndex - 1;\r\n\t\t\t\t}\r\n\t\t\t\t// handle wrap around\r\n\t\t\t\tif (0 > newIndex) {\r\n\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex = this.proposals.length - 1;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar startIndex = newIndex;\r\n\t\t\twhile (this.proposals[newIndex] && this.proposals[newIndex].unselectable) {\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tnewIndex++;\r\n\t\t\t\t\t// handle wrap around\r\n\t\t\t\t\tif (newIndex >= this.proposals.length) {\r\n\t\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewIndex = 0;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewIndex--;\r\n\t\t\t\t\t// handle wrap around\r\n\t\t\t\t\tif (0 > newIndex) {\r\n\t\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewIndex = this.proposals.length - 1;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (newIndex === startIndex) {\r\n\t\t\t\t\t// looped through all nodes and didn't find any that were selectable\r\n\t\t\t\t\tnewIndex = -1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.selectedIndex = newIndex;\r\n\t\t\t\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.selectNode(newIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._showTooltip(true);\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Opens the tooltip for the selected proposal beside the content assist window\r\n\t\t * @param update if false, the tooltip will be hidden then reopened with the new contents\r\n\t\t * @param noContent if true the current tooltip contents will not be replaced, just size and position updated\r\n\t\t */\r\n\t\t_showTooltip: function(update, noContent) {\r\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\tvar self = this;\r\n\t\t\tvar target = {\r\n\t\t\t\tgetTooltipInfo: function() {\r\n\t\t\t\t\tvar bounds = self.widget.parentNode.getBoundingClientRect();\r\n\t\t\t\t\tvar tipArea = {width: 350, height: bounds.height, top: bounds.top};\r\n\t\t\t\t\tif ((bounds.left + bounds.width) >= document.documentElement.clientWidth){\r\n\t\t\t\t\t\ttipArea.left = bounds.left - tipArea.width;\r\n\t\t\t\t\t\ttipArea.left -= 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttipArea.left = bounds.left + bounds.width;\r\n\t\t\t\t\t\ttipArea.left += 10;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar info = {\r\n\t\t\t\t\t\tcontext: {proposal: self.proposals[self.selectedIndex]},\r\n\t\t\t\t\t\tanchorArea: bounds,\r\n\t\t\t\t\t\ttooltipArea: tipArea\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn info;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (update) {\r\n\t\t\t\ttooltip.update(target, noContent);\r\n\t\t\t} else {\r\n\t\t\t\ttooltip.show(target, true, false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_hideTooltip: function() {\r\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\ttooltip.hide(true); // Clear the lock\r\n\t\t},\r\n\r\n\t\tpageUp: function() {\r\n\t\t\t//TODO find out why this doesn't always go to the very top\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tvar newSelected = this.widget.getTopIndex();\r\n\t\t\t\tif (newSelected === this.selectedIndex) {\r\n\t\t\t\t\tthis.widget.scrollIndex(newSelected, false);\r\n\t\t\t\t\tnewSelected = this.widget.getTopIndex();\r\n\t\t\t\t}\r\n\t\t\t\tif (0 === newSelected) {\r\n\t\t\t\t\t// if we're attempting to select the first item in the list\r\n\t\t\t\t\t// move down to the next one if it is not selectable\r\n\t\t\t\t\treturn this.lineDown(newSelected, true);\t\r\n\t\t\t\t}\r\n\t\t\t\treturn this.lineUp(newSelected, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.lineUp();\r\n\t\t\t}\r\n\t\t},\r\n\t\tpageDown: function() {\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tvar newSelected = this.widget.getBottomIndex();\r\n\t\t\t\tif (newSelected === this.selectedIndex) {\r\n\t\t\t\t\tthis.widget.scrollIndex(newSelected, true);\r\n\t\t\t\t\tnewSelected = this.widget.getBottomIndex();\r\n\t\t\t\t}\r\n\t\t\t\treturn this.lineDown(newSelected, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.lineDown();\r\n\t\t\t}\r\n\t\t},\r\n\t\tenter: function() {\r\n\t\t\tvar proposal = this.proposals[this.selectedIndex] || null;\r\n\t\t\treturn this.contentAssist.apply(proposal);\r\n\t\t},\r\n\t\ttab: function() {\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.parentNode.focus();\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssistWidget\r\n\t * @class Displays proposals from a {@link orion.editor.ContentAssist}.\r\n\t * @description Creates a ContentAssistWidget that will display proposals from the given {@link orion.editor.ContentAssist}\r\n\t * in the given <code>parentNode</code>. Clicking a proposal will cause the ContentAssist to apply that proposal.\r\n\t * @param {orion.editor.ContentAssist} contentAssist\r\n\t * @param {String|DomNode} [parentNode] The ID or DOM node to use as the parent for displaying proposals. If not provided,\r\n\t * a new DIV will be created inside &lt;body&gt; and assigned the CSS class <code>contentassist</code>.\r\n\t */\r\n\tfunction ContentAssistWidget(contentAssist, parentNode) {\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.textView = this.contentAssist.getTextView();\r\n\t\tthis.textViewListenerAdded = false;\r\n\t\tthis.isShowing = false;\r\n\t\tthis._useResizeTimer = false;\r\n\t\tvar document = this.textView.getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\r\n\t\tthis.parentNode = typeof parentNode === \"string\" ? document.getElementById(parentNode) : parentNode;\r\n\t\tif (!this.parentNode) {\r\n\t\t\tthis.parentNode = util.createElement(document, \"div\"); //$NON-NLS-0$\r\n\t\t\tthis.parentNode.className = \"contentassist\"; //$NON-NLS-0$\r\n\t\t\tvar body = document.getElementsByTagName(\"body\")[0]; //$NON-NLS-0$\r\n\t\t\tif (body) {\r\n\t\t\t\tbody.appendChild(this.parentNode);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"parentNode is required\"); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar MO = window.MutationObserver || window.MozMutationObserver;\r\n\t\tif (MO && util.isFirefox) {//MutationObserver does not work in chrome for resize https://code.google.com/p/chromium/issues/detail?id=293948\r\n\t\t\tthis._mutationObserver = new MO(function(mutations) {\r\n\t\t\t\tthis._contentAssistMode._showTooltip(true, true);\r\n\t\t\t}.bind(this));\r\n\t\t} else {\r\n\t\t\tthis._useResizeTimer = true;\r\n\t\t}\r\n\t\t\r\n\t\ttextUtil.addEventListener(this.parentNode, \"scroll\", this.onScroll.bind(this));\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.textViewListener = {\r\n\t\t\tonMouseDown: function(event) {\r\n\t\t\t\tvar target = event.event.target || event.event.srcElement;\r\n\t\t\t\tif (target.parentElement !== self.parentNode) {\r\n\t\t\t\t\tself.contentAssist.deactivate();\r\n\t\t\t\t}\r\n\t\t\t\t// ignore the event if this is a click inside of the parentNode\r\n\t\t\t\t// the click is handled by the onClick() function\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.contentAssist.addEventListener(\"Deactivating\", function(event) {\r\n\t\t\tself.hide();\r\n\t\t});\r\n\t\tthis.scrollListener = function(e) {\r\n\t\t\tif (self.isShowing) {\r\n\t\t\t\tself.position();\r\n\t\t\t\t//TODO: code edit widget : redo the tooltip positioning by the same new api\r\n\t\t\t}\r\n\t\t};\r\n\t\t//TODO: code edit widget : clean up the code to remove the listener here\r\n\t\ttextUtil.addEventListener(document, \"scroll\", this.scrollListener);\r\n\t}\r\n\tContentAssistWidget.prototype = /** @lends orion.editor.ContentAssistWidget.prototype */ {\r\n\t\t/** @private */\r\n\t\tonClick: function(e) {\r\n\t\t\tif (!e) { e = window.event; }\r\n\t\t\tthis.contentAssist.apply(this.getProposal(e.target || e.srcElement));\r\n\t\t\tthis.textView.focus();\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tonScroll: function(e) {\r\n\t\t\tif (this.previousCloneNode && !this.preserveCloneThroughScroll) {\r\n\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\tthis.previousSelectedNode.classList.add(STYLES.selected);\r\n\t\t\t}\r\n\t\t\tthis.preserveCloneThroughScroll = false;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tcreateDiv: function(proposal, parent, itemIndex) {\r\n\t\t\tvar document = parent.ownerDocument;\r\n\t\t\tvar div = util.createElement(document, \"div\"); //$NON-NLS-0$\r\n\t\t\tdiv.id = \"contentoption\" + itemIndex; //$NON-NLS-0$\r\n\t\t\tdiv.setAttribute(\"role\", \"option\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tdiv.className = STYLES[proposal.style] ? STYLES[proposal.style] : STYLES.dfault;\r\n\t\t\tvar node;\r\n\t\t\tif (proposal.style === \"hr\") {\r\n\t\t\t\tnode = util.createElement(document, \"hr\"); //$NON-NLS-0$\r\n\t\t\t} else {\r\n\t\t\t\tnode = this._createDisplayNode(proposal, itemIndex);\r\n\t\t\t\tdiv.contentAssistProposalIndex = itemIndex; // make div clickable\r\n\t\t\t}\r\n\t\t\tdiv.appendChild(node);\r\n\t\t\tparent.appendChild(div);\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tcreateAccessible: function() {\r\n\t\t\tvar mode = this._contentAssistMode;\r\n\t\t\tvar self = this;\r\n\t\t\ttextUtil.addEventListener(this.parentNode, \"keydown\", function(evt) {\r\n\t\t\t\tif (!evt) { evt = window.event; }\r\n\t\t\t\tif (evt.preventDefault) {\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tif(evt.keyCode === lib.KEY.ESCAPE) {\r\n\t\t\t\t\treturn mode.cancel(); \r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.UP) {\r\n\t\t\t\t\treturn mode.lineUp();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.DOWN) {\r\n\t\t\t\t\treturn mode.lineDown();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.ENTER) {\r\n\t\t\t\t\treturn mode.enter(); \r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.PAGEDOWN) {\r\n\t\t\t\t\treturn mode.pageDown();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.PAGEUP) {\r\n\t\t\t\t\treturn mode.pageUp();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.HOME) {\r\n\t\t\t\t\tself.scrollIndex(0, true);\r\n\t\t\t\t\treturn mode.lineDown(0); // select first selectable element starting at the top and moving downwards\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.END) {\r\n\t\t\t\t\treturn mode.lineUp(mode.getProposals().length - 1); // select first selectable element starting at the bottom and moving up\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_createDisplayNode: function(proposal, index) {\r\n\t\t\tvar node = document.createElement(\"span\");\r\n\t\t\t\r\n\t\t\tif (!proposal){\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof proposal === \"string\"){\r\n\t\t\t\tvar simpleName = this._createNameNode(proposal);\r\n\t\t\t\tsimpleName.contentAssistProposalIndex = index;\r\n\t\t\t\treturn simpleName;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar nameNode;\r\n\t\t\tvar usingDescription; // Proposals are allowed to use the description as the name\r\n\t\t\tif (proposal.name && typeof proposal.name === \"string\") {\r\n\t\t\t\tnameNode = this._createNameNode(proposal.name);\r\n\t\t\t} else if (proposal.description && typeof proposal.description === \"string\"){\r\n\t\t\t\tnameNode = this._createNameNode(proposal.description);\r\n\t\t\t\tusingDescription = true;\r\n\t\t\t} else if (proposal.proposal && typeof proposal.proposal === \"string\"){\r\n\t\t\t\tnameNode = this._createNameNode(proposal.proposal);\r\n\t\t\t} else {\r\n\t\t\t\t// Must have a name\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar tagsNode = this._createTagsNode(proposal.tags);\r\n\t\t\t\r\n\t\t\tvar descriptionNode;\r\n\t\t\tif (!usingDescription && proposal.description && typeof proposal.description === \"string\") {\r\n\t\t\t\tdescriptionNode = document.createTextNode(proposal.description);\r\n\t\t\t}\r\n\r\n\t\t\tif (tagsNode) { node.appendChild(tagsNode); }\r\n\t\t\tnode.appendChild(nameNode);\r\n\t\t\tif (descriptionNode) { node.appendChild(descriptionNode); }\r\n\r\n\t\t\tnameNode.contentAssistProposalIndex = index;\r\n\t\t\tnode.contentAssistProposalIndex = index;\r\n\t\t\t\r\n\t\t\treturn node;\t\t\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_stopResizeTimer: function() {\r\n\t\t\tif (this._resizeTimer) {\r\n\t\t\t\twindow.clearInterval(this._resizeTimer);\r\n\t\t\t\tthis._resizeTimer = null; \r\n\t\t\t}\r\n\t\t},\r\n\t\t_startResizeTimer: function() {\r\n\t\t\tthis._stopResizeTimer();\r\n\t\t\tthis._cachedResizeBound = this.parentNode.getBoundingClientRect();\r\n\t\t\tthis._resizeTimer = window.setInterval(function() {\r\n\t\t\t\tif(this._contentAssistMode) {\r\n\t\t\t\t\tvar bound = this.parentNode.getBoundingClientRect();\r\n\t\t\t\t\tif(bound.left === this._cachedResizeBound.left && \r\n\t\t\t\t\t   bound.top === this._cachedResizeBound.top &&\r\n\t\t\t\t\t   bound.width === this._cachedResizeBound.width &&\r\n\t\t\t\t\t   bound.height === this._cachedResizeBound.height) {\r\n\t\t\t\t\t\treturn;   \t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._cachedResizeBound = bound;\r\n\t\t\t\t\tthis._contentAssistMode._showTooltip(true, true);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this), 100);\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_createNameNode: function(name) {\r\n\t\t\tvar node = document.createElement(\"span\");\r\n\t\t\tnode.classList.add(\"proposal-name\"); //$NON-NLS-0$\r\n\t\t\tnode.appendChild(document.createTextNode(name));\r\n\t\t\treturn node;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @param tags {Array} The array of tags to display\r\n\t\t * @returns {Object} the dom node for the tags or <code>null</code>\n\t\t */\n\t\t_createTagsNode: function(tags) {\r\n\t\t\tvar tagsNode = null;\r\n\t\t\tif (tags && tags.constructor === Array && tags.length > 0){\r\n\t\t\t\ttagsNode = document.createElement(\"span\");\r\n\t\t\t\tfor (var i=0; i<tags.length; i++) {\r\n\t\t\t\t\tvar tag = tags[i];\r\n\t\t\t\t\tif (tag.content || tag.cssClass || tag.color){\r\n\t\t\t\t\t\tvar tagNode = document.createElement(\"span\");\r\n\t\t\t\t\t\tif (tag.cssClass){\r\n\t\t\t\t\t\t\ttagNode.classList.add(tag.cssClass);\r\n\t\t\t\t\t\t} else if (typeof tag.color === 'string' && tag.color.match(/^[\\w-]*$/)){\r\n\t\t\t\t\t\t\ttagNode.classList.add('colorTag'); //$NON-NLS-1$\r\n\t\t\t\t\t\t\ttagNode.style.backgroundColor = tag.color;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttagNode.classList.add('proposalTag'); //$NON-NLS-1$\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tag.content){\r\n\t\t\t\t\t\t\ttagNode.textContent = tag.content;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttagsNode.appendChild(tagNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tagsNode;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @returns {Object} The proposal represented by the given node.\r\n\t\t */\r\n\t\tgetProposal: function(/**DOMNode*/ node) {\r\n\t\t\tvar proposal = null;\r\n\t\t\t\r\n\t\t\tvar nodeIndex = node.contentAssistProposalIndex;\r\n\t\t\t\r\n\t\t\tif (undefined !== nodeIndex){\r\n\t\t\t\tproposal = this._contentAssistMode.getProposals()[nodeIndex] || null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn proposal;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetTopIndex: function() {\r\n\t\t\tvar nodes = this.parentNode.childNodes;\r\n\t\t\tfor (var i=0; i < nodes.length; i++) {\r\n\t\t\t\tvar child = nodes[i];\r\n\t\t\t\tif (child.offsetTop >= this.parentNode.scrollTop) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetBottomIndex: function() {\r\n\t\t\tvar nodes = this.parentNode.childNodes;\r\n\t\t\tfor (var i=0; i < nodes.length; i++) {\r\n\t\t\t\tvar child = nodes[i];\r\n\t\t\t\tif ((child.offsetTop + child.offsetHeight) > (this.parentNode.scrollTop + this.parentNode.clientHeight)) {\r\n\t\t\t\t\treturn Math.max(0, i - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn nodes.length - 1;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tscrollIndex: function(index, top) {\r\n\t\t\tvar nodeAtIndex = this.parentNode.childNodes[index];\r\n\t\t\tif (nodeAtIndex){\r\n\t\t\t\tnodeAtIndex.scrollIntoView(top);\r\n\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Visually selects the node at the specified nodeIndex\r\n\t\t * by updating its CSS class and scrolling it into view\r\n\t\t * if necessary.\r\n\t\t * @param{Number} nodeIndex The index of the node to select\r\n\t\t */\r\n\t\tselectNode: function(nodeIndex) {\r\n\t\t\tvar node = null;\r\n\t\t\t\r\n\t\t\tif (this._hideTimeout) {\r\n\t\t\t\twindow.clearTimeout(this._hideTimeout);\r\n\t\t\t\tthis._hideTimeout = null;\r\n\t\t\t}\r\n\t\t\tif (this._fadeTimer) {\r\n\t\t\t\twindow.clearTimeout(this._fadeTimer);\r\n\t\t\t\tthis._fadeTimer = null;\r\n\t\t\t}\r\n\t\t\tif (this.previousSelectedNode) {\r\n\t\t\t\tthis.previousSelectedNode.classList.remove(STYLES.selected);\r\n\t\t\t\tthis.previousSelectedNode = null;\r\n\t\t\t\tif (this.previousCloneNode) {\r\n\t\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (-1 !== nodeIndex) {\r\n\t\t\t\tnode = this.parentNode.childNodes[nodeIndex];\r\n\t\t\t\tif (node){\r\n\t\t\t\t\tnode.classList.add(STYLES.selected);\r\n\t\t\t\t\tthis.parentNode.setAttribute(\"aria-activedescendant\", node.id); //$NON-NLS-0$\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t\tif (node.offsetTop < this.parentNode.scrollTop) {\r\n\t\t\t\t\t\tnode.scrollIntoView(true);\r\n\t\t\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t\t\t} else if ((node.offsetTop + node.offsetHeight) > (this.parentNode.scrollTop + this.parentNode.clientHeight)) {\r\n\t\t\t\t\t\tnode.scrollIntoView(false);\r\n\t\t\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar textNode = node.firstChild || node;  \r\n\t\t\t\t\tvar textBounds = textNode.getBoundingClientRect();\r\n\t\t\t\t\tvar parentWidth = this.parentNode.clientWidth ? this.parentNode.clientWidth : this.parentNode.getBoundingClientRect(); // Scrollbar can cover text\r\n\t\t\t\t\tvar parentStyle = window.getComputedStyle(this.parentNode);\r\n\t\t\t\t\tvar nodeStyle = window.getComputedStyle(node);\r\n\t\t\t\t\tvar allPadding = parseInt(parentStyle.paddingLeft) + parseInt(parentStyle.paddingRight) + parseInt(nodeStyle.paddingLeft) + parseInt(nodeStyle.paddingRight);\r\n\t\t\t\t\tif (textBounds.width >= (parentWidth - allPadding)) {\r\n\t\t\t\t\t\tvar parentTop = parseInt(parentStyle.top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// create clone node\r\n\t\t\t\t\t\tvar clone = node.cloneNode(true); // deep clone\r\n\t\t\t\t\t\tclone.classList.add(\"cloneProposal\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tclone.style.top = parentTop + node.offsetTop - this.parentNode.scrollTop + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t\tclone.style.left = parentStyle.left;\r\n\t\t\t\t\t\tclone.setAttribute(\"id\", clone.id + \"_clone\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// try to fit clone node on page horizontally\r\n\t\t\t\t\t\tvar viewportWidth = document.documentElement.clientWidth;\r\n\t\t\t\t\t\tvar horizontalOffset = (textBounds.left + textBounds.width) - parseInt(viewportWidth);\r\n\t\t\t\t\t\tif (horizontalOffset > 0) {\r\n\t\t\t\t\t\t\tvar cloneLeft = parseInt(parentStyle.left) - horizontalOffset;\r\n\t\t\t\t\t\t\tif (0 > cloneLeft) {\r\n\t\t\t\t\t\t\t\tcloneLeft = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclone.style.left = cloneLeft + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// create wrapper parent node (to replicate css class hierarchy)\r\n\t\t\t\t\t\tvar parentClone = document.createElement(\"div\");\r\n\t\t\t\t\t\tparentClone.id = \"clone_contentassist\";  //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.classList.add(\"contentassist\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.classList.add(\"cloneWrapper\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.appendChild(clone);\r\n\t\t\t\t\t\tparentClone.onclick = this.parentNode.onclick;\r\n\t\t\t\t\t\tthis.parentNode.parentNode.insertBefore(parentClone, this.parentNode);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// make all the cloned nodes clickable by setting their contentAssistProposalIndex\r\n\t\t\t\t\t\tvar recursiveSetIndex = function(cloneNode){\r\n\t\t\t\t\t\t\tcloneNode.contentAssistProposalIndex = node.contentAssistProposalIndex;\r\n\t\t\t\t\t\t\tif (cloneNode.hasChildNodes()) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0 ; i < cloneNode.childNodes.length ; i++){\r\n\t\t\t\t\t\t\t\t\trecursiveSetIndex(cloneNode.childNodes[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\trecursiveSetIndex(parentClone);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar self = this;\r\n\t\t\t\t\t\tthis._hideTimeout = window.setTimeout(function() {\r\n\t\t\t\t\t\t\tself._hideTimeout = null;\r\n\t\t\t\t\t\t\tnode.classList.add(STYLES.selected);\r\n\t\t\t\t\t\t\tvar opacity = 1;\r\n\t\t\t\t\t\t\tself._fadeTimer = window.setInterval(function() {\r\n\t\t\t\t\t\t\t\tif (!self.previousCloneNode || opacity <= 0.01){\r\n\t\t\t\t\t\t\t\t\tself._removeCloneNode();\r\n\t\t\t\t\t\t\t\t\twindow.clearInterval(self._fadeTimer);\r\n\t\t\t\t\t\t\t\t\tself._fadeTimer = null;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tparentClone.style.opacity = opacity;\r\n\t\t\t\t\t\t\t\t\tparentClone.style.filter = 'alpha(opacity=' + opacity * 100 + \")\";\r\n\t        \t\t\t\t\t\topacity -= opacity * 0.1;\r\n\t        \t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 50);\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnode.classList.remove(STYLES.selected);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.previousCloneNode = parentClone;\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.previousSelectedNode = node;\r\n\t\t},\r\n\t\tsetContentAssistMode: function(mode) {\r\n\t\t\tthis._contentAssistMode = mode;\r\n\t\t},\r\n\t\tshow: function() {\r\n\t\t\tvar proposals = this._contentAssistMode.getProposals();\r\n\t\t\tif (proposals.length === 0) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.innerHTML = \"\";\r\n\t\t\t\tfor (var i = 0; i < proposals.length; i++) {\r\n\t\t\t\t\tthis.createDiv(proposals[i], this.parentNode, i);\r\n\t\t\t\t}\r\n\t\t\t\tthis.position();\r\n\t\t\t\tthis.parentNode.onclick = this.onClick.bind(this);\r\n\t\t\t\tthis.isShowing = true;\r\n\t\t\t\t\r\n\t\t\t\tthis._contentAssistMode._showTooltip(false);\r\n\t\t\t\t\r\n\t\t\t\tif(this._useResizeTimer) {\r\n\t\t\t\t\tthis._startResizeTimer();\r\n\t\t\t\t} else if(this._mutationObserver){\r\n\t\t\t\t\tthis._mutationObserver.observe(this.parentNode, {attributes: true});\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.textViewListenerAdded) {\r\n\t\t\t\t\tthis.textView.addEventListener(\"MouseDown\", this.textViewListener.onMouseDown);\r\n\t\t\t\t\tthis.textViewListenerAdded = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tif(this.parentNode.ownerDocument.activeElement === this.parentNode) {\r\n\t\t\t\tthis.textView.focus();\r\n\t\t\t}\r\n\t\t\tthis.parentNode.style.display = \"none\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.onclick = null;\r\n\t\t\tthis.isShowing = false;\r\n\t\t\t\r\n\t\t\tif(this._useResizeTimer) {\r\n\t\t\t\tthis._stopResizeTimer();\r\n\t\t\t} else if(this._mutationObserver){\r\n\t\t\t\tthis._mutationObserver.disconnect();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._contentAssistMode._hideTooltip();\r\n\t\t\t\r\n\t\t\tif (this.textViewListenerAdded) {\r\n\t\t\t\tthis.textView.removeEventListener(\"MouseDown\", this.textViewListener.onMouseDown);\r\n\t\t\t\tthis.textViewListenerAdded = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.previousSelectedNode) {\r\n\t\t\t\tthis.previousSelectedNode = null;\r\n\t\t\t\tif (this.previousCloneNode) {\r\n\t\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tposition: function() {\r\n\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\tvar offset;\r\n\t\t\tvar view = this.textView;\r\n\t\t\tif (contentAssist.offset !== undefined) {\r\n\t\t\t\toffset = contentAssist.offset;\r\n\t\t\t\tvar model = view.getModel();\r\n\t\t\t\tif (model.getBaseModel) {\r\n\t\t\t\t\toffset = model.mapOffset(offset, true);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset = this.textView.getCaretOffset();\r\n\t\t\t}\r\n\t\t\tvar caretLocation = view.getLocationAtOffset(offset);\r\n\t\t\tcaretLocation.y += view.getLineHeight();\r\n\t\t\tthis.textView.convert(caretLocation, \"document\", \"page\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.position = \"fixed\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.left = caretLocation.x + \"px\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.top = caretLocation.y + \"px\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.display = \"block\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.scrollTop = 0;\r\n\r\n\t\t\t// Make sure that the panel is never outside the viewport\r\n\t\t\tvar document = this.parentNode.ownerDocument;\r\n\t\t\tvar viewportWidth = document.documentElement.clientWidth,\r\n\t\t\t    viewportHeight =  document.documentElement.clientHeight;\r\n\t\t\t    \r\n\t\t\tvar spaceBelow = viewportHeight - caretLocation.y;\t\t\t    \r\n\t\t\tif (this.parentNode.offsetHeight > spaceBelow) {\r\n\t\t\t\t// Check if div is too large to fit above\r\n\t\t\t\tvar spaceAbove = caretLocation.y - this.textView.getLineHeight();\r\n\t\t\t\tif (this.parentNode.offsetHeight > spaceAbove){\r\n\t\t\t\t\t// Squeeze the div into the larger area\r\n\t\t\t\t\tif (spaceBelow > spaceAbove) {\r\n\t\t\t\t\t\tthis.parentNode.style.maxHeight = spaceBelow + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.parentNode.style.maxHeight = spaceAbove + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t\tthis.parentNode.style.top = \"0\"; //$NON-NLS-0$\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Put the div above the line\r\n\t\t\t\t\tthis.parentNode.style.top = (caretLocation.y - this.parentNode.offsetHeight - this.textView.getLineHeight()) + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\tthis.parentNode.style.maxHeight = spaceAbove + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.style.maxHeight = spaceBelow + \"px\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (caretLocation.x + this.parentNode.offsetWidth > viewportWidth) {\r\n\t\t\t\tvar leftSide = viewportWidth - this.parentNode.offsetWidth;\r\n\t\t\t\tif (leftSide < 0) {\r\n\t\t\t\t\tleftSide = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.parentNode.style.left = leftSide + \"px\"; //$NON-NLS-0$\r\n\t\t\t\tthis.parentNode.style.maxWidth = viewportWidth - leftSide;\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.style.maxWidth = viewportWidth + caretLocation.x + \"px\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeCloneNode: function(){\r\n\t\t\tif (this.parentNode.parentNode.contains(this.previousCloneNode)) {\r\n\t\t\t\tthis.parentNode.parentNode.removeChild(this.previousCloneNode);\t\r\n\t\t\t}\r\n\t\t\tthis.previousCloneNode = null;\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tContentAssist: ContentAssist,\r\n\t\tContentAssistMode: ContentAssistMode,\r\n\t\tContentAssistWidget: ContentAssistWidget\r\n\t};\r\n});\r\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n *               Alex Lakatos - fix for bug#369781\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textStyler\", ['orion/editor/annotations', 'orion/editor/eventTarget', 'orion/metrics'], //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\tfunction(mAnnotations, mEventTarget, mMetrics) {\n\n\t/*\n\t * Throughout textStyler \"block\" refers to a potentially multi-line token.\n\t * Typical examples are multi-line comments and multi-line strings.\n\t */\n\n\tvar binarySearch = function(array, offset, inclusive, low, high) {\n\t\tvar index;\n\t\tif (low === undefined) { low = -1; }\n\t\tif (high === undefined) { high = array.length; }\n\t\twhile (high - low > 1) {\n\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\tif (offset <= array[index].start) {\n\t\t\t\thigh = index;\n\t\t\t} else if (inclusive && offset < array[index].end) {\n\t\t\t\thigh = index;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlow = index;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t};\n\t\n\tfunction copy(object) {\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\n\tvar createPatternBasedAdapter = function(grammars, rootIds, contentType) {\n\t\treturn new PatternBasedAdapter(grammars, rootIds, contentType);\n\t};\n\n\tfunction PatternBasedAdapter(grammars, rootIds, contentType) {\n\t\tthis._patternManager = new PatternManager(grammars, rootIds);\n\t\tthis._contentType = contentType;\n\t}\n\tPatternBasedAdapter.prototype = {\n\t\tblockSpansBeyondEnd: function(block) {\n\t\t\treturn block.pattern.regexEnd === this._eolRegex;\n\t\t},\n\t\tcomputeBlocks: function(model, text, block, offset, startIndex, endIndex, maxBlockCount) {\n\t\t\tif (!text) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar results = [];\n\t\t\tvar matches = [];\n\t\t\tvar result;\n\t\t\tstartIndex = startIndex || 0;\n\t\t\tendIndex = endIndex || Infinity;\n\t\t\tmaxBlockCount = maxBlockCount || Infinity;\n\t\t\tblock.blockPatterns.forEach(function(current) {\n\t\t\t\tresult = this._findMatch(current.regexBegin || current.regex, text, startIndex);\n\t\t\t\tif (result) {\n\t\t\t\t\tmatches.push({result: result, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tif (!matches.length) {\n\t\t\t\treturn results;\n\t\t\t}\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\tif (a.result.index < b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index > b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t});\n\n\t\t\tvar index = 0;\n\t\t\twhile (matches.length > 0) {\n\t\t\t\tvar current = matches[0];\n\t\t\t\tmatches.splice(0,1);\n\n\t\t\t\tif (endIndex < current.result.index) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (current.result.index < index) {\n\t\t\t\t\t/* processing of another match has moved index beyond this match */\n\t\t\t\t\tthis._updateMatch(current, text, matches, index, endIndex);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar start = offset + current.result.index;\n\t\t\t\tvar contentStart = current.result.index;\n\t\t\t\tvar resultEnd = null;\n\n\t\t\t\tvar endRegex = current.pattern.regexEnd;\n\t\t\t\tif (!endRegex) {\n\t\t\t\t\tresultEnd = this.createBlock(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\tend: start + current.result[0].length,\n\t\t\t\t\t\t\tcontentStart: start,\n\t\t\t\t\t\t\tcontentEnd: start + current.result[0].length\n\t\t\t\t\t\t},\n\t\t\t\t\t\tblock.styler,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tblock,\n\t\t\t\t\t\tcurrent.pattern);\n\t\t\t\t} else {\n\t\t\t\t\tcontentStart += current.result[0].length;\n\t\t\t\t\tvar testPattern = current.pattern;\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end regex contains a capture reference (eg.- \"\\1\") then substitute\n\t\t\t\t\t * the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tvar resolvedEndRegex = this._substituteCaptureValues(endRegex, current.result);\n\t\t\t\t\tif (resolvedEndRegex !== endRegex) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * A substitution was made, so make a copy of the test pattern and set its\n\t\t\t\t\t\t * end regex to the resolved one.  This will cause end-match detection to be\n\t\t\t\t\t\t * performed with this concrete end regex value, but the original pattern\n\t\t\t\t\t\t * definition containing the capture reference will not be affected.\n\t\t\t\t\t\t */\n\t\t\t\t\t\ttestPattern = {\n\t\t\t\t\t\t\tpattern: testPattern.pattern,\n\t\t\t\t\t\t\tregexBegin: testPattern.regexBegin,\n\t\t\t\t\t\t\tregexEnd: resolvedEndRegex\n\t\t\t\t\t\t};\n\t\t\t\t\t\tendRegex = resolvedEndRegex;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar lastIndex = contentStart;\n\t\t\t\t\twhile (!resultEnd) {\n\t\t\t\t\t\tresult = this._findMatch(endRegex, text, lastIndex);\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\t\tresult = this._eolRegex.exec(text);\n\t\t\t\t\t\t\ttestPattern = {\n\t\t\t\t\t\t\t\tpattern: testPattern.pattern,\n\t\t\t\t\t\t\t\tregexBegin: testPattern.regexBegin,\n\t\t\t\t\t\t\t\tregexEnd: this._eolRegex\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar testBlock = this.createBlock(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\t\tend: offset + result.index + result[0].length,\n\t\t\t\t\t\t\t\tcontentStart: offset + contentStart,\n\t\t\t\t\t\t\t\tcontentEnd: offset + result.index\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tblock.styler,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\ttestPattern);\n\t\t\t\t\t\tvar subBlocks = testBlock.getBlocks();\n\t\t\t\t\t\tif (!subBlocks.length || subBlocks[subBlocks.length - 1].end <= (result.index + offset)) {\n\t\t\t\t\t\t\tresultEnd = testBlock;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastIndex = result.index + result[0].length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresults.push(resultEnd);\n\t\t\t\tif (results.length === maxBlockCount || endIndex <= resultEnd.end) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tindex = resultEnd.end - offset;\n\t\t\t\tthis._updateMatch(current, text, matches, index, endIndex);\n\t\t\t}\n\t\t\treturn results;\n\t\t},\n\t\tcomputeStyle: function(block, model, offset) {\n\t\t\tif (!block.pattern) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar fullBlock = {\n\t\t\t\tstart: block.start,\n\t\t\t\tend: block.end,\n\t\t\t\tstyle: block.pattern.pattern.name\n\t\t\t};\n\t\t\tif (block.contentStart <= offset && offset < block.contentEnd) {\n\t\t\t\tif (block.pattern.pattern.contentName) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstart: block.contentStart,\n\t\t\t\t\t\tend: block.contentEnd,\n\t\t\t\t\t\tstyle: block.pattern.pattern.contentName\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn fullBlock;\n\t\t\t}\n\n\t\t\tvar regex, captures, testString, index;\n\t\t\tif (offset < block.contentStart) {\n\t\t\t\tcaptures = block.pattern.pattern.beginCaptures || block.pattern.pattern.captures;\n\t\t\t\tif (!captures) {\n\t\t\t\t\treturn fullBlock;\n\t\t\t\t}\n\t\t\t\tregex = block.pattern.regexBegin;\n\t\t\t\ttestString = model.getText(block.start, block.contentStart);\n\t\t\t\tindex = block.start;\n\t\t\t} else {\n\t\t\t\tcaptures = block.pattern.pattern.endCaptures || block.pattern.pattern.captures;\n\t\t\t\tif (!captures) {\n\t\t\t\t\treturn fullBlock;\n\t\t\t\t}\n\t\t\t\tregex = block.pattern.regexEnd;\n\t\t\t\ttestString = model.getText(block.contentEnd, block.end);\n\t\t\t\tindex = block.contentEnd;\n\t\t\t}\n\n\t\t\tregex.lastIndex = 0;\n\t\t\tvar result = regex.exec(testString);\n\t\t\tif (result) {\n\t\t\t\tvar styles = [];\n\t\t\t\tthis._getCaptureStyles(result, captures, index, styles);\n\t\t\t\tvar style = styles[binarySearch(styles, offset, true)];\n\t\t\t\tif (style && style.start <= offset && offset < style.end) {\n\t\t\t\t\treturn style;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn fullBlock;\n\t\t},\n\t\tcreateBlock: function(bounds, styler, model, parent, data) {\n\t\t\t/* for pattern-based matching data is a pattern */\n\t\t\treturn new Block(\n\t\t\t\tbounds,\n\t\t\t\tdata ? data.pattern.name : null,\n\t\t\t\tdata ? data.pattern.id : null,\n\t\t\t\tstyler,\n\t\t\t\tmodel,\n\t\t\t\tparent,\n\t\t\t\tfunction(newBlock) {\n\t\t\t\t\tnewBlock.pattern = data;\n\t\t\t\t\tnewBlock.linePatterns = [];\n\t\t\t\t\tnewBlock.blockPatterns = [];\n\t\t\t\t\tnewBlock.enclosurePatterns = {};\n\t\t\t\t\tthis._initPatterns(this._patternManager, newBlock);\n\t\t\t\t}.bind(this));\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._textModel.removeEventListener(\"Changed\", this._listener); //$NON-NLS-0$\n\t\t},\n\t\tgetBlockCommentDelimiters: function(index) {\n\t\t\tvar languageBlock = this._getLanguageBlock(index);\n\t\t\tvar blockPatterns = languageBlock.blockPatterns;\n\t\t\tif (blockPatterns) {\n\t\t\t\tvar COMMENT_BLOCK = \"comment.block\"; //$NON-NLS-0$\n\t\t\t\tfor (var i = 0; i < blockPatterns.length; i++) {\n\t\t\t\t\tvar current = blockPatterns[i].pattern;\n\t\t\t\t\tvar name = current.name || current.contentName;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_BLOCK) !== -1) {\n\t\t\t\t\t\tif (current.begin && current.end && current.begin.literal && current.end.literal) {\n\t\t\t\t\t\t\treturn [current.begin.literal, current.end.literal];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\"\", \"\"];\n\t\t},\n\t\tgetBlockContentStyleName: function(block) {\n\t\t\treturn block.pattern.pattern.contentName || block.pattern.pattern.name;\n\t\t},\n\t\tgetBlockEndStyle: function(block, text, endIndex, _styles) {\n\t\t\t/* pattern-defined blocks specify an end style by either a capture or name */\n\t\t\tvar result;\n\t\t\tif (block.pattern.regexEnd) {\n\t\t\t\tresult = this._findMatch(block.pattern.regexEnd, text, 0);\n\t\t\t\tif (result) {\n\t\t\t\t\t/* the end match is still valid */\n\t\t\t\t\tvar captures = block.pattern.pattern.endCaptures || block.pattern.pattern.captures;\n\t\t\t\t\tif (captures) {\n\t\t\t\t\t\tthis._getCaptureStyles(result, captures, endIndex - result[0].length, _styles);\n\t\t\t\t\t} else if (block.pattern.pattern.name) {\n\t\t\t\t\t\t_styles.push({start: endIndex - result[0].length, end: endIndex, style: block.pattern.pattern.name});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result ? result[0] : null;\n\t\t},\n\t\tgetBlockFoldBounds: function(block, model) {\n\t\t\treturn {start: block.start, end: block.end};\n\t\t},\n\t\tgetBlockOverrideStyles: function(block, text, index, _styles) {\n\t\t\t/* if the block's pattern is a single-line regex with capture(s) then compute the styles for the capture(s) */\n\t\t\tif (block.pattern.regex && block.pattern.pattern.captures && this._containsCaptureRegex.test(block.pattern.regex)) {\n\t\t\t\tvar match = this._findMatch(block.pattern.regex, text, 0);\n\t\t\t\tif (match) {\n\t\t\t\t\tthis._getCaptureStyles(match, block.pattern.pattern.captures, index, _styles);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetBlockStartStyle: function(block, text, index, _styles) {\n\t\t\t/* pattern-defined blocks specify a start style by either a capture or name */\n\t\t\tvar result;\n\t\t\tif (block.pattern.regexBegin) {\n\t\t\t\tresult = this._findMatch(block.pattern.regexBegin, text, 0);\n\t\t\t\tif (result) {\n\t\t\t\t\t/* the begin match is still valid */\n\t\t\t\t\tvar captures = block.pattern.pattern.beginCaptures || block.pattern.pattern.captures;\n\t\t\t\t\tif (captures) {\n\t\t\t\t\t\tthis._getCaptureStyles(result, captures, index, _styles);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_styles.push({start: index, end: index + result[0].length, style: block.pattern.pattern.name});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result ? result[0] : null;\n\t\t},\n\t\tgetBracketMatch: function(block, text) {\n\t\t\tvar match;\n\t\t\tvar keys = Object.keys(block.enclosurePatterns);\n\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\tvar current = block.enclosurePatterns[keys[i]];\n\t\t\t\tvar result = this._findMatch(current.regex, text, 0);\n\t\t\t\tif (result && result.index === 0) {\n\t\t\t\t\tmatch = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!match) { return null; }\n\n\t\t\tvar closingName;\n\t\t\tvar atStart = false;\n\t\t\tif (match.pattern.name.indexOf(this._PUNCTUATION_SECTION_BEGIN) !== -1) {\n\t\t\t\tatStart = true;\n\t\t\t\tclosingName = match.pattern.name.replace(this._PUNCTUATION_SECTION_BEGIN, this._PUNCTUATION_SECTION_END);\n\t\t\t} else {\n\t\t\t\tclosingName = match.pattern.name.replace(this._PUNCTUATION_SECTION_END, this._PUNCTUATION_SECTION_BEGIN);\n\t\t\t}\n\t\t\tvar closingBracket = block.enclosurePatterns[closingName];\n\t\t\tif (!closingBracket) { return null; }\n\n\t\t\treturn {\n\t\t\t\tbeginName: match.pattern.name,\n\t\t\t\tendName: closingName,\n\t\t\t\tatStart: atStart\n\t\t\t};\n\t\t},\n\t\tgetContentType: function() {\n\t\t\treturn this._contentType;\n\t\t},\n\t\tgetLineCommentDelimiter: function(index) {\n\t\t\tvar COMMENT_LINE = \"comment.line\"; //$NON-NLS-0$\n\t\t\tvar languageBlock = this._getLanguageBlock(index);\n\t\t\tvar linePatterns = languageBlock.linePatterns;\n\t\t\tif (linePatterns) {\n\t\t\t\tfor (var i = 0; i < linePatterns.length; i++) {\n\t\t\t\t\tvar current = linePatterns[i].pattern;\n\t\t\t\t\tvar name = current.name;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_LINE) !== -1) {\n\t\t\t\t\t\tif (current.match && current.match.literal) {\n\t\t\t\t\t\t\treturn current.match.literal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar blockPatterns = languageBlock.blockPatterns;\n\t\t\tif (blockPatterns) {\n\t\t\t\tfor (i = 0; i < blockPatterns.length; i++) {\n\t\t\t\t\tcurrent = blockPatterns[i].pattern;\n\t\t\t\t\tname = current.name || current.contentName;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_LINE) !== -1) {\n\t\t\t\t\t\tif (current.begin && current.begin.literal) {\n\t\t\t\t\t\t\treturn current.begin.literal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\tparse: function(text, offset, startIndex, block, _styles, ignoreCaptures) {\n\t\t\tif (!text) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar patterns = block.linePatterns;\n\t\t\tif (!patterns) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar matches = [];\n\t\t\tvar result;\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar regex = current.regex || current.regexBegin;\n\t\t\t\tregex.oldLastIndex = regex.lastIndex;\n\t\t\t\tresult = this._findMatch(regex, text, startIndex);\n\t\t\t\tif (result) {\n\t\t\t\t\tmatches.push({result: result, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\tif (a.result.index < b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index > b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t});\n\n\t\t\tvar index = startIndex;\n\t\t\twhile (matches.length > 0) {\n\t\t\t\tvar current = matches[0];\n\t\t\t\tmatches.splice(0,1);\n\n\t\t\t\tif (current.result.index < index) {\n\t\t\t\t\t/* processing of another match has moved index beyond this match */\n\t\t\t\t\tthis._updateMatch(current, text, matches, index);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/* apply the style */\n\t\t\t\tvar start = current.result.index;\n\t\t\t\tvar end;\n\t\t\t\tif (current.pattern.regex) {\t/* line pattern defined by a \"match\" */\n\t\t\t\t\tvar substyles = [];\n\t\t\t\t\tresult = current.result;\n\t\t\t\t\tend = start + result[0].length;\n\t\t\t\t\tvar tokenStyle = {start: offset + start, end: offset + end, style: current.pattern.pattern.name};\n\t\t\t\t\tif (!ignoreCaptures) {\n\t\t\t\t\t\tif (current.pattern.pattern.captures) {\n\t\t\t\t\t\t\tthis._getCaptureStyles(result, current.pattern.pattern.captures, offset + start, substyles);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsubstyles.sort(function(a,b) {\n\t\t\t\t\t\t\tif (a.start < b.start) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (a.start > b.start) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (var j = 0; j < substyles.length - 1; j++) {\n\t\t\t\t\t\t\tif (substyles[j + 1].start < substyles[j].end) {\n\t\t\t\t\t\t\t\tvar newStyle = {start: substyles[j + 1].end, end: substyles[j].end, style: substyles[j].style};\n\t\t\t\t\t\t\t\tsubstyles[j].end = substyles[j + 1].start;\n\t\t\t\t\t\t\t\tsubstyles.splice(j + 2, 0, newStyle);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._mergeStyles(tokenStyle, substyles, _styles);\n\t\t\t\t} else {\t/* pattern defined by a \"begin/end\" pair */\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end match contains a capture reference (eg.- \"\\1\") then update\n\t\t\t\t\t * its regex with the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tvar endRegex = current.pattern.regexEnd;\n\t\t\t\t\tendRegex = this._substituteCaptureValues(endRegex, current.result);\n\n\t\t\t\t\tresult = this._findMatch(endRegex, text, current.result.index + current.result[0].length);\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\tresult = this._eolRegex.exec(text);\n\t\t\t\t\t}\n\t\t\t\t\tend = result.index + result[0].length;\n\t\t\t\t\t_styles.push({start: offset + start, end: offset + end, style: current.pattern.pattern.name});\n\t\t\t\t}\n\t\t\t\tindex = result.index + result[0].length;\n\t\t\t\tthis._updateMatch(current, text, matches, index);\n\t\t\t}\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar regex = current.regex || current.regexBegin;\n\t\t\t\tregex.lastIndex = regex.oldLastIndex;\n\t\t\t});\n\t\t},\n\t\tsetStyler: function(styler) {\n\t\t\tif (this._styler) {\n\t\t\t\tthis._textModel.removeEventListener(\"Changed\", this._listener); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._styler = styler;\n\t\t\tthis._listener = this._onModelChanged.bind(this);\n\t\t\tthis._textModel = this._styler.getTextModel();\n\t\t\tthis._textModel.addEventListener(\"Changed\", this._listener); //$NON-NLS-0$\n\t\t\tthis._patternManager.firstLineChanged(this._textModel.getLine(0));\n\t\t},\n\t\tverifyBlock: function(baseModel, text, ancestorBlock, changeCount) {\n\t\t\tvar result = null;\n\t\t\tvar matches = [];\n\t\t\tvar match;\n\t\t\tvar parentBlock = ancestorBlock.parent;\n\t\t\tparentBlock.blockPatterns.forEach(function(current) {\n\t\t\t\tmatch = this._findMatch(current.regexBegin || current.regex, text, 0);\n\t\t\t\tif (match) {\n\t\t\t\t\tmatches.push({result: match, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\t/* ensure that matches at index 0 make it to the front, other matches do not matter */\n\t\t\t\tif (!a.result.index && b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index && !b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (!a.result.index && !b.result.index) {\n\t\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\tif (!matches.length || matches[0].result.index !== 0 || matches[0].pattern.pattern.id !== ancestorBlock.pattern.pattern.id) {\n\t\t\t\tresult = false;\n\t\t\t} else {\n\t\t\t\t/* the block start appears to be unchanged, now verify that the block end is unchanged */\n\t\t\t\tmatch = matches[0];\n\t\t\t\tvar endRegex = match.pattern.regexEnd;\n\t\t\t\tif (!endRegex) {\n\t\t\t\t\t/* single-match block, just verify its length */\n\t\t\t\t\tresult = ancestorBlock.start + match.result[0].length === ancestorBlock.end + changeCount;\n\t\t\t\t} else {\n\t\t\t\t\t/* begin/end-match block */\n\n\t\t\t\t\t /*\n\t\t\t\t\t  * Determine whether an earlier match of the block's end pattern has been introduced.\n\t\t\t\t\t  * Verifying that this has NOT happened (the most typical case) can be quickly done by\n\t\t\t\t\t  * verifying that the first occurrence of its end pattern is still at its former location.\n\t\t\t\t\t  * However if a match is found prior to this then the blocks preceding it must be computed\n\t\t\t\t\t  * to verify that it is a valid end match (ie.- it is not contained within another block).\n\t\t\t\t \t  */\n\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end regex contains a capture reference (eg.- \"\\1\") then substitute\n\t\t\t\t\t * the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tendRegex = this._substituteCaptureValues(endRegex, match.result);\n\n\t\t\t\t\tvar searchStartIndex = match.result[0].length;\n\t\t\t\t\tvar currentMatch = this._findMatch(endRegex, text, searchStartIndex);\n\t\t\t\t\twhile (result === null && currentMatch && ancestorBlock.start + currentMatch.index !== ancestorBlock.contentEnd + changeCount) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * A match was found preceeding the former end match, so now compute\n\t\t\t\t\t\t * blocks to determine whether it is in fact a valid new end match.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar blocks = this.computeBlocks(baseModel, text, ancestorBlock, ancestorBlock.start, searchStartIndex, currentMatch.index + 1, null);\n\t\t\t\t\t\tif (!blocks.length || blocks[blocks.length - 1].end <= ancestorBlock.start + currentMatch.index) {\n\t\t\t\t\t\t\t/* the match is valid, so the attempt to use ancestorBlock as-is fails */\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t/* the match is not valid, so search for the next potential end match */\n\t\t\t\t\t\t\tif (!blocks.length) {\n\t\t\t\t\t\t\t\tcurrentMatch = null;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearchStartIndex = blocks[blocks.length - 1].end - ancestorBlock.start;\n\t\t\t\t\t\t\t\tcurrentMatch = this._findMatch(endRegex, text, searchStartIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!currentMatch) {\n\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\tcurrentMatch = this._eolRegex.exec(text);\n\t\t\t\t\t\tresult = ancestorBlock.start + currentMatch.index === ancestorBlock.end + changeCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result !== null ? result : true;\n\t\t},\n\n\t\t/** @private */\n\n\t\t_findMatch: function(regex, text, startIndex, testBeforeMatch) {\n\t\t\t/*\n\t\t\t * testBeforeMatch provides a potential optimization for callers that do not strongly expect to find\n\t\t\t * a match.  If this argument is defined then test() is initially called on the regex, which executes\n\t\t\t * significantly faster than exec().  If a match is found then the regex's lastIndex is reverted to\n\t\t\t * its pre-test() value, and exec() is then invoked on it in order to get the match details.\n\t\t\t */\n\n\t\t\tvar index = startIndex;\n\t\t\tvar initialLastIndex = regex.lastIndex;\n\t\t\tthis._linebreakRegex.lastIndex = startIndex;\n\n\t\t\tvar currentLine = this._linebreakRegex.exec(text);\n\t\t\t/*\n\t\t\t * Processing of the first line is treated specially, as it may not start at the beginning of a logical line, but\n\t\t\t * regex's may be dependent on matching '^'.  To resolve this, compute the full line corresponding to the start\n\t\t\t * of the text, even if it begins prior to startIndex, and adjust the regex's lastIndex accordingly to begin searching\n\t\t\t * for matches at the correct location.\n\t\t\t */\n\t\t\tvar lineString, indexAdjustment;\n\t\t\tregex.lastIndex = 0;\n\t\t\tif (currentLine) {\n\t\t\t\tvar lineStart = currentLine.index;\n\t\t\t\twhile (0 <= --lineStart) {\n\t\t\t\t\tvar char = text.charAt(lineStart);\n\t\t\t\t\tif (char === this._NEWLINE || char === this._CR) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineString = text.substring(lineStart + 1, currentLine.index + currentLine[1].length);\n\t\t\t\tregex.lastIndex = indexAdjustment = currentLine.index - lineStart - 1;\n\t\t\t}\n\t\t\twhile (currentLine && currentLine.index < text.length) {\n\t\t\t\tvar result;\n\t\t\t\tif (testBeforeMatch) {\n\t\t\t\t\tvar revertIndex = regex.lastIndex;\n\t\t\t\t\tif (regex.test(lineString)) {\n\t\t\t\t\t\tregex.lastIndex = revertIndex;\n\t\t\t\t\t\tresult = regex.exec(lineString);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = regex.exec(lineString);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tresult.index += index;\n\t\t\t\t\tresult.index -= indexAdjustment;\n\t\t\t\t\tregex.lastIndex = initialLastIndex;\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tindexAdjustment = 0;\n\t\t\t\tindex += currentLine[0].length;\n\t\t\t\tcurrentLine = this._linebreakRegex.exec(text);\n\t\t\t\tif (currentLine) {\n\t\t\t\t\tlineString = currentLine[1];\n\t\t\t\t\tregex.lastIndex = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tregex.lastIndex = initialLastIndex;\n\t\t\treturn null;\n\t\t},\n\t\t_getCaptureStyles: function(result, captures, offset, _styles) {\n\t\t\tif (captures[0]) {\n\t\t\t\t/* capture index 0 is the full result */\n\t\t\t\t_styles.push({start: offset, end: offset + result[0].length, style: captures[0].name});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar stringIndex = 0;\n\t\t\tfor (var i = 1; i < result.length; i++) {\n\t\t\t\tif (result[i]) {\n\t\t\t\t\tvar capture = captures[i];\n\t\t\t\t\tif (capture) {\n\t\t\t\t\t\tvar styleStart = offset + stringIndex;\n\t\t\t\t\t\t_styles.push({start: styleStart, end: styleStart + result[i].length, style: capture.name});\n\t\t\t\t\t}\n\t\t\t\t\tstringIndex += result[i].length;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_getLanguageBlock: function(index) {\n\t\t\t/* Returns the parent block that dictates the language in effect at index */\n\t\t\tvar block = this._styler.getBlockAtIndex(index);\n\t\t\tvar embeddedNameRegex = /^source\\..+\\.embedded/;\n\t\t\twhile (block) {\n\t\t\t\tif (block.pattern) {\n\t\t\t\t\tvar pattern = block.pattern.pattern;\n\t\t\t\t\tif (embeddedNameRegex.test(pattern.name || pattern.contentName)) {\n\t\t\t\t\t\treturn block;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tblock = block.parent;\n\t\t\t}\n\t\t\treturn this._styler.getRootBlock();\n\t\t},\n\t\t_initPatterns: function(patternManager, block) {\n\t\t\tif (block.pattern && block.pattern.pattern.linePatterns) {\n\t\t\t\tblock.linePatterns = block.pattern.pattern.linePatterns;\n\t\t\t\tblock.blockPatterns = block.pattern.pattern.blockPatterns;\n\t\t\t\tblock.enclosurePatterns = block.pattern.pattern.enclosurePatterns;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar patterns = patternManager.getPatterns(block.pattern ? block.pattern.pattern : null);\n\t\t\tvar initRegex = function(match) {\n\t\t\t\tvar matchString = typeof(match) === \"string\" ? match : match.match;\n\t\t\t\tvar result = this._ignoreCaseRegex.exec(matchString);\n\t\t\t\tvar flags = this._FLAGS;\n\t\t\t\tif (result) {\n\t\t\t\t\tmatchString = matchString.substring(result[0].length);\n\t\t\t\t\tflags += \"i\";\n\t\t\t\t}\n\t\t\t\treturn new RegExp(matchString, flags);\n\t\t\t}.bind(this);\n\t\t\tvar lastBlock = -1;\n\t\t\tvar index = 0;\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar pattern;\n\t\t\t\tif (current.match && !current.begin && !current.end) {\n\t\t\t\t\tpattern = {regex: initRegex(current.match), pattern: current};\n\t\t\t\t\tblock.linePatterns.push(pattern);\n\t\t\t\t\tif (current.name && current.name.indexOf(\"punctuation.section\") === 0 && (current.name.indexOf(this._PUNCTUATION_SECTION_BEGIN) !== -1 || current.name.indexOf(this._PUNCTUATION_SECTION_END) !== -1)) { //$NON-NLS-0$\n\t\t\t\t\t\tblock.enclosurePatterns[current.name] = pattern;\n\t\t\t\t\t}\n\t\t\t\t} else if (!current.match && current.begin && current.end) {\n\t\t\t\t\tlastBlock = index;\n\t\t\t\t\tpattern = {regexBegin: initRegex(current.begin), regexEnd: initRegex(current.end), pattern: current};\n\t\t\t\t\tblock.linePatterns.push(pattern);\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t}.bind(this));\n\t\t\tblock.blockPatterns = block.linePatterns.slice(0, lastBlock + 1);\n\t\t\tif (block.pattern) {\n\t\t\t\tblock.pattern.pattern.enclosurePatterns = block.enclosurePatterns;\n\t\t\t\tblock.pattern.pattern.linePatterns = block.linePatterns;\n\t\t\t\tblock.pattern.pattern.blockPatterns = block.blockPatterns;\n\t\t\t}\n\t\t},\n\t\t_mergeStyles: function(fullStyle, substyles, resultStyles) {\n\t\t\tvar i = fullStyle.start;\n\t\t\tsubstyles.forEach(function(current) {\n\t\t\t\tif (i <= current.start) {\n\t\t\t\t\tresultStyles.push({start: i, end: current.start, style: fullStyle.style});\n\t\t\t\t}\n\t\t\t\tresultStyles.push(current);\n\t\t\t\ti = current.end;\n\t\t\t});\n\t\t\tif (i < fullStyle.end) {\n\t\t\t\tresultStyles.push({start: i, end: fullStyle.end, style: fullStyle.style});\n\t\t\t}\n\t\t},\n\t\t_onModelChanged: function(e) {\n\t\t\tvar startLine = this._textModel.getLineAtOffset(e.start);\n\t\t\tif (startLine === 0) {\n\t\t\t\t/* a change in the first line can change the grammar to be applied throughout */\n\t\t\t\tif (this._patternManager.firstLineChanged(this._textModel.getLine(0))) {\n\t\t\t\t\t/* the grammar has changed */\n\t\t\t\t\tthis._styler.computeRootBlock(this._textModel);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_substituteCaptureValues: function(regex, resolvedResult) {\n\t\t\tvar regexString = regex.toString();\n\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\tif (!this._captureReferenceRegex.test(regexString)) {\n\t\t\t\t/* nothing to do */\n\t\t\t\treturn regex;\n\t\t\t}\n\n\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\tvar result = this._captureReferenceRegex.exec(regexString);\n\t\t\twhile (result) {\n\t\t\t\tregexString = regexString.replace(result[0], resolvedResult[result[1]] || \"\");\n\t\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\t\tresult = this._captureReferenceRegex.exec(regexString);\n\t\t\t}\n\t\t\t/* return an updated regex, remove the leading '/' and trailing /FLAGS */\n\t\t\treturn new RegExp(regexString.substring(1, regexString.length - 1 - this._FLAGS.length), this._FLAGS);\n\t\t},\n\t\t_updateMatch: function(match, text, matches, minimumIndex, endIndex) {\n\t\t\tvar regEx = match.pattern.regex ? match.pattern.regex : match.pattern.regexBegin;\n\t\t\tendIndex = endIndex || Infinity;\n\t\t\tvar result = this._findMatch(regEx, text, minimumIndex, true);\n\t\t\tif (result && result.index < endIndex) {\n\t\t\t\tmatch.result = result;\n\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\t\t\t\t\tif (result.index < matches[i].result.index || (result.index === matches[i].result.index && match.pattern.pattern.index < matches[i].pattern.pattern.index)) {\n\t\t\t\t\t\tmatches.splice(i, 0, match);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t}\n\t\t},\n\t\t_captureReferenceRegex: /\\\\(\\d)/g,\n\t\t_containsCaptureRegex: /\\((?!\\?:)/, //$NON-NLS-0$\n\t\t_eolRegex: /$/,\n\t\t_ignoreCaseRegex: /^\\(\\?i\\)\\s*/,\n\t\t_linebreakRegex: /([\\s\\S]*?)(?:[\\r\\n]|$)/g,\n\t\t_CR: \"\\r\", //$NON-NLS-0$\n\t\t_FLAGS: \"g\", //$NON-NLS-0$\n\t\t_NEWLINE: \"\\n\", //$NON-NLS-0$\n\t\t_PUNCTUATION_SECTION_BEGIN: \".begin\", //$NON-NLS-0$\n\t\t_PUNCTUATION_SECTION_END: \".end\" //$NON-NLS-0$\n\t};\n\n\tfunction PatternManager(grammars, rootIds) {\n\t\tthis._unnamedCounter = 0;\n\t\tthis._patterns = [];\n\t\tthis._firstLineMatches = {};\n\t\tif (!Array.isArray(rootIds)) {\n\t\t\trootIds = [rootIds];\n\t\t}\n\t\tthis._rootIds = rootIds;\n\t\tgrammars.forEach(function(grammar) {\n\t\t\tthis._addRepositoryPatterns(grammar.repository || {}, grammar.id);\n\t\t\tthis._addPatterns(grammar.patterns || [], grammar.id);\n\t\t\tif (grammar.firstLineMatch) {\n\t\t\t\tthis._firstLineMatches[grammar.id] = new RegExp(grammar.firstLineMatch);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\tPatternManager.prototype = {\n\t\tfirstLineChanged: function(text) {\n\t\t\tvar newId = this._computeRootId(text);\n\t\t\tvar changed = this._rootId !== newId;\n\t\t\tthis._rootId = newId;\n\t\t\treturn changed;\n\t\t},\n\t\tgetPatterns: function(pattern) {\n\t\t\tvar parentId;\n\t\t\tif (!pattern) {\n\t\t\t\tif (!this._rootId) { /* currently no root id */\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\tparentId = this._rootId + \"#\" + this._NO_ID;\n\t\t\t} else {\n\t\t\t\tif (typeof(pattern) === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tparentId = pattern;\n\t\t\t\t} else {\n\t\t\t\t\tparentId = pattern.qualifiedId;\n\t\t\t\t}\n\t\t\t\tparentId += \"#\";\n\t\t\t}\n\t\t\t/* indexes on patterns are used to break ties when multiple patterns match the same start text */\n\t\t\tvar indexCounter = [0];\n\t\t\tvar resultObject = {};\n\t\t\tvar regEx = new RegExp(\"^\" + parentId + \"[^#]+$\"); //$NON-NLS-0$\n\t\t\tthis._patterns.forEach(function(current) {\n\t\t\t\tif (regEx.test(current.qualifiedId)) {\n\t\t\t\t\tif (current.include) {\n\t\t\t\t\t\tthis._processInclude(current, indexCounter, resultObject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar newPattern = copy(current);\n\t\t\t\t\t\tnewPattern.index = indexCounter[0]++;\n\t\t\t\t\t\tresultObject[current.qualifiedId] = newPattern;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\n\t\t\tvar result = [];\n\t\t\tvar keys = Object.keys(resultObject);\n\t\t\tkeys.forEach(function(current) {\n\t\t\t\tresult.push(resultObject[current]);\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/** @private */\n\n\t\t_addPattern: function(pattern, patternId, parentId) {\n\t\t\tpattern.parentId = parentId;\n\t\t\tpattern.id = patternId;\n\t\t\tpattern.qualifiedId = pattern.parentId + \"#\" + pattern.id;\n\t\t\tthis._patterns.push(pattern);\n\t\t\tif (pattern.patterns && !pattern.include) {\n\t\t\t\tthis._addPatterns(pattern.patterns, pattern.qualifiedId);\n\t\t\t}\n\t\t},\n\t\t_addPatterns: function(patterns, parentId) {\n\t\t\tpatterns.forEach(function(pattern) {\n\t\t\t\tthis._addPattern(pattern, this._NO_ID + this._unnamedCounter++, parentId);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_addRepositoryPatterns: function(repository, parentId) {\n\t\t\tvar keys = Object.keys(repository);\n\t\t\tkeys.forEach(function(key) {\n\t\t\t\tthis._addPattern(repository[key], key, parentId);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_computeRootId: function(firstLineText) {\n\t\t\tvar defaultId = null; /* an acceptable fallback if no firstLineMatches are made */\n\t\t\tvar matchId = null;\n\t\t\tfor (var i = 0; i < this._rootIds.length; i++) {\n\t\t\t\tvar firstLineMatch = this._firstLineMatches[this._rootIds[i]]; \n\t\t\t\tif (!firstLineMatch) {\n\t\t\t\t\tdefaultId = this._rootIds[i];\n\t\t\t\t} else if (firstLineMatch.test(firstLineText)) {\n\t\t\t\t\tmatchId = this._rootIds[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn matchId || defaultId; \n\t\t},\n\t\t_processInclude: function(pattern, indexCounter, resultObject) {\n\t\t\tvar searchExp;\n\t\t\tvar index = pattern.include.indexOf(\"#\");\n\t\t\tif (index === 0) {\n\t\t\t\t/* inclusion of pattern from same grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.qualifiedId.substring(0, pattern.qualifiedId.indexOf(\"#\")) + pattern.include + \"$\");\n\t\t\t} else if (index === -1) {\n\t\t\t\t/* inclusion of whole grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.include + \"#\" + this._NO_ID + \"[^#]+$\");\n\t\t\t} else {\n\t\t\t\t/* inclusion of specific pattern from another grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.include + \"$\");\n\t\t\t}\n\t\t\tthis._patterns.forEach(function(current) {\n\t\t\t\tif (searchExp.test(current.qualifiedId)) {\n\t\t\t\t\tif (current.include) {\n\t\t\t\t\t\tthis._processInclude(current, indexCounter, resultObject);\n\t\t\t\t\t} else if (!resultObject[current.qualifiedId]) {\n\t\t\t\t\t\tvar newPattern = copy(current);\n\t\t\t\t\t\tnewPattern.index = indexCounter[0]++;\n\t\t\t\t\t\tresultObject[current.qualifiedId] = newPattern;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\t_NO_ID: \"NoID\"\t//$NON-NLS-0$\n\t};\n\n\tfunction Block(bounds, name, typeId, styler, model, parent, initFn) {\n\t\tthis.start = bounds.start;\n\t\tthis.end = bounds.end;\n\t\tthis.contentStart = bounds.contentStart;\n\t\tthis.contentEnd = bounds.contentEnd;\n\t\tthis.name = name;\n\t\tthis.typeId = typeId;\n\t\tthis.styler = styler;\n\t\tthis.parent = parent;\n\t\tif (initFn) {\n\t\t\tinitFn(this);\n\t\t}\n\t\tthis._subBlocks = styler.computeBlocks(model, model.getText(this.contentStart, this.end), this, this.contentStart, null, null, null);\n\t}\n\tBlock.prototype = {\n\t\tadjustBounds: function(index, value) {\n\t\t\tif (index < this.start) {\n\t\t\t\tthis.start += value;\n\t\t\t}\n\t\t\tif (index < this.contentStart) {\n\t\t\t\tthis.contentStart += value;\n\t\t\t}\n\t\t\tif (index <= this.end) {\n\t\t\t\tthis.end += value;\n\t\t\t}\n\t\t\tif (index <= this.contentEnd) {\n\t\t\t\tthis.contentEnd += value;\n\t\t\t}\n\t\t\tthis._subBlocks.forEach(function(current) {\n\t\t\t\tif (index <= current.end) {\n\t\t\t\t\tcurrent.adjustBounds(index, value);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetBlocks: function() {\n\t\t\treturn this._subBlocks;\n\t\t},\n\t\tgetBlockAtIndex: function(index) {\n\t\t\treturn binarySearch(this.getBlocks(), index, true);\n\t\t},\n\t\tisRenderingWhitespace: function() {\n\t\t\treturn this.styler._isRenderingWhitespace();\n\t\t}\n\t};\n\n\tfunction TextStylerAccessor(styler) {\n\t\tthis._styler = styler;\n\t}\n\tTextStylerAccessor.prototype = {\n\t\tgetBlockCommentDelimiters: function(offset) {\n\t\t\treturn this._styler.getBlockCommentDelimiters(offset);\n\t\t},\n\t\tgetLineCommentDelimiter: function(offset) {\n\t\t\treturn this._styler.getLineCommentDelimiter(offset);\n\t\t},\n\t\tgetStyles: function(offset) {\n\t\t\treturn this._styler.getStyles(offset);\n\t\t}\n\t};\n\n\tfunction TextStyler(view, annotationModel, stylerAdapter) {\t\t\n\t\tthis._whitespacesVisible = false;\n\t\tthis._highlightCaretLine = false;\n\t\tthis._foldingEnabled = true;\n\t\tthis._detectTasks = true;\n\t\tthis._annotationProviders = [];\n\t\tthis._view = view;\n\t\tthis._annotationModel = annotationModel;\n\t\tthis._stylerAdapter = stylerAdapter;\n\t\tthis._stylerAdapter.setStyler(this);\n\t\tthis._accessor = new TextStylerAccessor(this);\n\t\tthis._bracketAnnotations;\n\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onModelChanged(e);\n\t\t\t},\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t},\n\t\t\tonLineStyle: function(e) {\n\t\t\t\tself._onLineStyle(e);\n\t\t\t},\n\t\t\tonMouseDown: function(e) {\n\t\t\t\tself._onMouseDown(e);\n\t\t\t},\n\t\t\tonSelection: function(e) {\n\t\t\t\tself._onSelection(e);\n\t\t\t}\n\t\t};\n\t\tvar model = view.getModel();\n\t\tif (model.getBaseModel) {\n\t\t\tmodel = model.getBaseModel();\n\t\t}\n\t\tmodel.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\tview.addEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\tview.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\tview.addEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\tthis.computeRootBlock(model);\n\t}\n\tTextStyler.prototype = {\n\t\taddAnnotationProvider: function(value) {\n\t\t\tif (typeof value === \"function\") { //$NON-NLS-0$\n\t\t\t\tthis._annotationProviders.push(value);\n\t\t\t}\n\t\t},\n\t\tcomputeBlocks: function(model, text, block, offset, startIndex, endIndex, maxBlockCount) {\n\t\t\treturn this._stylerAdapter.computeBlocks(model, text, block, offset, startIndex, endIndex, maxBlockCount);\n\t\t},\n\t\tcomputeRootBlock: function(model) {\n\t\t\tvar charCount = model.getCharCount();\n\t\t\tvar rootBounds = {start: 0, contentStart: 0, end: charCount, contentEnd: charCount};\n\t\t\tif (charCount >= 50000) {\n\t\t\t\tvar startTime = Date.now();\n\t\t\t}\n\t\t\tthis._rootBlock = this._stylerAdapter.createBlock(rootBounds, this, model, null);\n\t\t\tif (startTime) {\n\t\t\t\tvar interval = Date.now() - startTime;\n\t\t\t\tif (interval > 10) {\n\t\t\t\t\tmMetrics.logTiming(\n\t\t\t\t\t\t\"editor\", //$NON-NLS-0$\n\t\t\t\t\t\t\"styler compute blocks (ms/50000 chars)\", //$NON-NLS-0$\n\t\t\t\t\t\tinterval * 50000 / charCount,\n\t\t\t\t\t\tthis._stylerAdapter.getContentType());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._annotationModel) {\n\t\t\t\tvar add = [];\n\t\t\t\tthis._annotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_FOLDING);\n\t\t\t\tthis._computeFolding(this._rootBlock.getBlocks(), this._view.getModel(), add);\n\t\t\t\tif (this._detectTasks) {\n\t\t\t\t\tthis._annotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_TASK);\n\t\t\t\t\tthis._computeTasks(this._rootBlock, model, add);\n\t\t\t\t}\n\t\t\t\tthis._replaceAnnotations([], add);\n\t\t\t}\n\t\t\tthis._view.redrawLines();\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._stylerAdapter.destroy();\n\t\t\tif (this._view) {\n\t\t\t\tvar model = this._view.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tmodel.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tthis._view = null;\n\t\t\t}\n\t\t},\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\tgetBlockAtIndex: function(index) {\n\t\t\treturn this._findBlock(this._rootBlock, index);\n\t\t},\n\t\tgetBlockCommentDelimiters: function(index) {\n\t\t\treturn this._stylerAdapter.getBlockCommentDelimiters(index);\n\t\t},\n\t\tgetLineCommentDelimiter: function(index) {\n\t\t\treturn this._stylerAdapter.getLineCommentDelimiter(index);\n\t\t},\n\t\tgetRootBlock: function() {\n\t\t\treturn this._rootBlock;\n\t\t},\n\t\tgetStyleAccessor: function() {\n\t\t\treturn this._accessor;\n\t\t},\n\t\tgetStyles: function(offset) {\n\t\t\tvar result = [];\n\t\t\tif (this._view) {\n\t\t\t\tvar model = this._view.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, offset);\n\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\t\tvar styles = [];\n\t\t\t\tthis._stylerAdapter.parse(lineText, model.getLineStart(lineIndex), 0, block, styles);\n\t\t\t\tvar style = styles[binarySearch(styles, offset, true)];\n\t\t\t\tif (style && style.start <= offset && offset < style.end) {\n\t\t\t\t\tresult.push(style);\n\t\t\t\t}\n\t\t\t\twhile (block) {\n\t\t\t\t\tstyle = this._stylerAdapter.computeStyle(block, model, offset);\n\t\t\t\t\tif (style) {\n\t\t\t\t\t\tresult.splice(0, 0, style);\n\t\t\t\t\t}\n\t\t\t\t\tblock = block.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tgetTextModel: function() {\n\t\t\tvar model = this._view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model;\n\t\t},\n\t\tremoveAnnotationProvider: function(value) {\n\t\t\tif (typeof value !== \"function\") { //$NON-NLS-0$\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar index = this._annotationProviders.indexOf(value);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis._annotationProviders.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tsetDetectHyperlinks: function() {\n\t\t},\n\t\tsetDetectTasks: function(enabled) {\n\t\t\tthis._detectTasks = enabled;\n\t\t},\n\t\tsetFoldingEnabled: function(enabled) {\n\t\t\tthis._foldingEnabled = enabled;\n\t\t},\n\t\tsetHighlightCaretLine: function(highlight) {\n\t\t\tthis._highlightCaretLine = highlight;\n\t\t},\n\t\tsetWhitespacesVisible: function(visible, redraw) {\n\t\t\tif (this._whitespacesVisible === visible) { return; }\n\t\t\tthis._whitespacesVisible = visible;\n\t\t\tif (redraw) {\n\t\t\t\tthis._view.redraw();\n\t\t\t}\n\t\t},\n\n\t\t/** @private */\n\n\t\t_computeFolding: function(blocks, viewModel, _add) {\n\t\t\tif (!viewModel.getBaseModel) { return; }\n\t\t\tvar baseModel = viewModel.getBaseModel();\n\t\t\tblocks.forEach(function(block) {\n\t\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\t\tvar annotation = this._createFoldingAnnotation(viewModel, baseModel, foldBounds.start, foldBounds.end);\n\t\t\t\tif (annotation) {\n\t\t\t\t\t_add.push(annotation);\n\t\t\t\t}\n\t\t\t\tthis._computeFolding(block.getBlocks(), viewModel, _add);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_computeTasks: function(block, baseModel, annotations, start, end) {\n\t\t\tstart = start || block.start;\n\t\t\tend = end || block.end;\n\t\t\tif (block.start <= end && start <= block.end) {\n\t\t\t\tif (!this._annotationModel) { return; }\n\n\t\t\t\tif (block.name && block.name.indexOf(\"comment\") === 0) {\n\t\t\t\t\tvar substyles = [];\n\t\t\t\t\tvar lineIndex = baseModel.getLineAtOffset(block.contentStart);\n\t\t\t\t\tvar lineStart = baseModel.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(baseModel.getText(lineStart, block.end), lineStart, block.contentStart - lineStart, block, substyles, true);\n\t\t\t\t\tfor (var i = 0; i < substyles.length; i++) {\n\t\t\t\t\t\tif (substyles[i].style === \"meta.annotation.task.todo\" && start <= substyles[i].start && substyles[i].end <= end) {\n\t\t\t\t\t\t\tannotations.push(this._createAnnotation(\n\t\t\t\t\t\t\t\tmAnnotations.AnnotationType.ANNOTATION_TASK,\n\t\t\t\t\t\t\t\tsubstyles[i].start,\n\t\t\t\t\t\t\t\tsubstyles[i].end,\n\t\t\t\t\t\t\t\tbaseModel.getText(substyles[i].start, substyles[i].end)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tblock.getBlocks().forEach(function(current) {\n\t\t\t\t\tthis._computeTasks(current, baseModel, annotations, start, end);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t_createAnnotation: function(type, start, end, title) {\n\t\t\tvar result = mAnnotations.AnnotationType.createAnnotation(type, start, end, title);\n\t\t\tresult.source = this._TEXTSTYLER;\n\t\t\treturn result;\n\t\t},\n\t\t_createFoldingAnnotation: function(viewModel, baseModel, start, end) {\n\t\t\tvar startLine = baseModel.getLineAtOffset(start);\n\t\t\tvar endLine = baseModel.getLineAtOffset(end);\n\t\t\tif (startLine === endLine) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (startLine + 1 === endLine && baseModel.getLineStart(endLine) === baseModel.getLineEnd(endLine)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this._createAnnotation(mAnnotations.AnnotationType.ANNOTATION_FOLDING, start, end, viewModel);\n\t\t},\n\t\t_findBlock: function(parentBlock, offset) {\n\t\t\tvar blocks = parentBlock.getBlocks();\n\t\t\tif (!blocks.length) {\n\t\t\t\treturn parentBlock;\n\t\t\t}\n\n\t\t\tvar index = binarySearch(blocks, offset, true);\n\t\t\tif (index < blocks.length && blocks[index].start <= offset && offset < blocks[index].end) {\n\t\t\t\treturn this._findBlock(blocks[index], offset);\n\t\t\t}\n\t\t\treturn parentBlock;\n\t\t},\n\t\t_findBrackets: function(model, bracketMatch, block, text, offset, end) {\n\t\t\tvar result = [], styles = [];\n\t\t\tvar start = offset, blocks = block.getBlocks();\n\t\t\tvar startIndex = binarySearch(blocks, offset, true);\n\t\t\tfor (var i = startIndex; i < blocks.length; i++) {\n\t\t\t\tif (blocks[i].start >= end) { break; }\n\t\t\t\tvar blockStart = blocks[i].start;\n\t\t\t\tvar blockEnd = blocks[i].end;\n\t\t\t\tif (start < blockStart) {\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(start);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, blockStart - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\t\tstyles.forEach(function(current) {\n\t\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\t\tif (current.style.indexOf(bracketMatch.beginName) === 0) {\n\t\t\t\t\t\t\t\tresult.push(current.start + 1);\n\t\t\t\t\t\t\t} else if (current.style.indexOf(bracketMatch.endName) === 0) {\n\t\t\t\t\t\t\t\tresult.push(-(current.start + 1));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tstyles = [];\n\t\t\t\t}\n\t\t\t\tstart = blockEnd;\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\tlineIndex = model.getLineAtOffset(start);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, end - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\tstyles.forEach(function(current) {\n\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\tif (current.style.indexOf(bracketMatch.beginName) === 0) {\n\t\t\t\t\t\t\tresult.push(current.start + 1);\n\t\t\t\t\t\t} else if (current.style.indexOf(bracketMatch.endName) === 0) {\n\t\t\t\t\t\t\tresult.push(-(current.start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_findMatchingBracket: function(model, block, offset) {\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tvar text = model.getText(offset, lineEnd);\n\n\t\t\tvar bracketMatch = this._stylerAdapter.getBracketMatch(block, text);\n\t\t\tif (!bracketMatch) { return -1; }\n\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar brackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\tfor (var i = 0; i < brackets.length; i++) {\n\t\t\t\tvar sign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\tif (brackets[i] * sign - 1 === offset) {\n\t\t\t\t\tvar level = 1;\n\t\t\t\t\tif (!bracketMatch.atStart) {\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tfor (; i>=0; i--) {\n\t\t\t\t\t\t\tsign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\treturn brackets[i] * sign - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex -= 1;\n\t\t\t\t\t\twhile (lineIndex >= 0) {\n\t\t\t\t\t\t\tlineText = model.getLine(lineIndex);\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tlineEnd = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\tbrackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\t\t\t\t\tfor (var j = brackets.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\t\tsign = brackets[j] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\t\treturn brackets[j] * sign - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tfor (; i<brackets.length; i++) {\n\t\t\t\t\t\t\tsign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\treturn brackets[i] * sign - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex += 1;\n\t\t\t\t\t\tvar lineCount = model.getLineCount();\n\t\t\t\t\t\twhile (lineIndex < lineCount) {\n\t\t\t\t\t\t\tlineText = model.getLine(lineIndex);\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tlineEnd = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\tbrackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\t\t\t\t\tfor (var k=0; k<brackets.length; k++) {\n\t\t\t\t\t\t\t\tsign = brackets[k] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\t\treturn brackets[k] * sign - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t\t_getLineStyle: function(lineIndex) {\n\t\t\tif (this._highlightCaretLine) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar model = view.getModel();\n\t\t\t\tvar selections = view.getSelections();\n\t\t\t\tvar hasCaret = false;\n\t\t\t\tif (!selections.some(function(selection) {\n\t\t\t\t\tif (selection.start === selection.end) {\n\t\t\t\t\t\thasCaret = hasCaret || model.getLineAtOffset(selection.start) === lineIndex;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}) && hasCaret) return this._caretLineStyle;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_getStyles: function(block, model, text, offset, startIndex) {\n\t\t\tvar end = offset + text.length;\n\n\t\t\tvar styles = [];\n\t\t\tvar start = offset + startIndex, blocks = block.getBlocks();\n\t\t\tvar startBlockIndex = binarySearch(blocks, start, true);\n\t\t\tfor (var i = startBlockIndex; i < blocks.length; i++) {\n\t\t\t\tif (blocks[i].start >= end) { break; }\n\t\t\t\tvar blockStart = blocks[i].start;\n\t\t\t\tvar blockEnd = blocks[i].end;\n\t\t\t\tif (start < blockStart) {\n\t\t\t\t\t/* content on that line that preceeds the start of the block */\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(start);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, blockStart - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\t}\n\t\t\t\tvar s = Math.max(start, blockStart);\n\t\t\t\tif (s === blockStart) {\n\t\t\t\t\t/* currently in the block's \"start\" segment */\n\t\t\t\t\tvar startString = this._stylerAdapter.getBlockStartStyle(blocks[i], text.substring(s - offset), s, styles);\n\t\t\t\t\tif (startString) {\n\t\t\t\t\t\ts += startString.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * Compute the block end now in order to determine the end-bound of the contained content, but do not add\n\t\t\t\t * its styles to the styles array until content styles have been computed, so that ordering is preserved.\n\t\t\t\t */\n\t\t\t\tvar e = Math.min(end, blockEnd);\n\t\t\t\tvar endStyles = [];\n\t\t\t\tif (e === blockEnd) {\n\t\t\t\t\t/* currently in the block's \"end\" segment */\n\t\t\t\t\tvar testString = text.substring(e - start - (blocks[i].end - blocks[i].contentEnd));\n\t\t\t\t\tvar endString = this._stylerAdapter.getBlockEndStyle(blocks[i], testString, e, endStyles);\n\t\t\t\t\tif (endString) {\n\t\t\t\t\t\te -= endString.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlineIndex = model.getLineAtOffset(s);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tvar blockSubstyles = this._getStyles(blocks[i], model, text.substring(lineStart - offset, e - offset), lineStart, s - lineStart);\n\t\t\t\tvar overrideStyles = [];\n\t\t\t\tthis._stylerAdapter.getBlockOverrideStyles(blocks[i], text.substring(s - offset, e - offset), s, overrideStyles);\n\t\t\t\tif (overrideStyles.length) {\n\t\t\t\t\tArray.prototype.push.apply(blockSubstyles, overrideStyles); /* append overrideStyles into blockSubstyles */\n\t\t\t\t\tif (blockSubstyles.length !== overrideStyles.length) {\n\t\t\t\t\t\t/* substyles came from both sources, so they need to be sorted together */\n\t\t\t\t\t\tblockSubstyles.sort(function(a,b) {\n\t\t\t\t\t\t\tif (a.start < b.start) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (a.start > b.start) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar blockStyleName = this._stylerAdapter.getBlockContentStyleName(blocks[i]);\n\t\t\t\tif (blockStyleName) {\n\t\t\t\t\t/*\n\t\t\t\t\t * If a name was specified for the current block then apply its style throughout its\n\t\t\t\t\t * content wherever a style is not provided by a sub-element.\n\t\t\t\t\t */\n\t\t\t\t\tvar index = s;\n\t\t\t\t\tblockSubstyles.forEach(function(current) {\n\t\t\t\t\t\tif (current.start - index) {\n\t\t\t\t\t\t\tstyles.push({start: index, end: current.start, style: blockStyleName});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (current.mergeable) {\n\t\t\t\t\t\t\tcurrent.style += \",\" + blockStyleName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyles.push(current);\n\t\t\t\t\t\tindex = current.end;\n\t\t\t\t\t});\n\t\t\t\t\tif (e - index) {\n\t\t\t\t\t\tstyles.push({start: index, end: e, style: blockStyleName});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstyles = styles.concat(blockSubstyles);\n\t\t\t\t}\n\t\t\t\tstyles = styles.concat(endStyles);\n\t\t\t\tstart = blockEnd;\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\t/* content on that line that follows the end of the block */\n\t\t\t\tlineIndex = model.getLineAtOffset(start);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, end - offset), lineStart, start - lineStart, block, styles);\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\t_isRenderingWhitespace: function() {\n\t\t\treturn this._whitespacesVisible;\n\t\t},\n\t\t_onDestroy: function() {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onLineStyle: function(e) {\n\t\t\tif (this._rootBlock) {\n\t\t\t\tif (e.textView === this._view) {\n\t\t\t\t\te.style = this._getLineStyle(e.lineIndex);\n\t\t\t\t}\n\t\t\t\tvar offset = e.lineStart;\n\t\t\t\tvar model = e.textView.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\toffset = model.mapOffset(offset);\n\t\t\t\t\tvar baseModel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\te.ranges = this._getStyles(this._rootBlock, baseModel || model, e.lineText, offset, 0);\n\n\t\t\t\tfor (var i = e.ranges.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar current = e.ranges[i];\n\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\tcurrent.style = {styleClass: current.style.replace(/\\./g, \" \")};\n\t\t\t\t\t\tif (baseModel) {\n\t\t\t\t\t\t\tvar length = current.end - current.start;\n\t\t\t\t\t\t\tcurrent.start = model.mapOffset(current.start, true);\n\t\t\t\t\t\t\tcurrent.end = current.start + length;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.ranges.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\te.ranges = [];\n\t\t\t}\n\n\t\t\tif (this._isRenderingWhitespace()) {\n\t\t\t\tthis._spliceStyles(this._spacePattern, e.ranges, e.lineText, e.lineStart);\n\t\t\t\tthis._spliceStyles(this._tabPattern, e.ranges, e.lineText, e.lineStart);\n\t\t\t}\n\t\t},\n\t\t_onModelChanged: function(e) {\n\t\t\tvar start = e.start;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar changeCount = addedCharCount - removedCharCount;\n\t\t\tvar viewModel = this._view.getModel();\n\t\t\tvar baseModel = viewModel.getBaseModel ? viewModel.getBaseModel() : viewModel;\n\t\t\tvar end = start + removedCharCount;\n\t\t\tvar charCount = baseModel.getCharCount();\n\n\t\t\t/* compute the nearest ancestor block to the start and end indices */\n\t\t\tvar lineStart = baseModel.getLineStart(baseModel.getLineAtOffset(start));\n\t\t\tvar ancestorBlock = this._findBlock(this._rootBlock, start);\n\n\t\t\tvar blockExtended, blocks, parentBlock, redraw, text, te, ts;\n\t\t\tdo {\n\t\t\t\tparentBlock = ancestorBlock.parent;\n\n\t\t\t\t/*\n\t\t\t\t * Determine whether ancestorBlock contains the full range of\n\t\t\t\t * text whose styling may be affected by this model change.\n\t\t\t\t */\n\t\t\t\tif (!blockExtended && parentBlock) {\n\t\t\t\t\t/* verify that ancestorBlock's start and end bounds are not affected by this change */\n\t\t\t\t\tif (changeCount < 0 && ancestorBlock.end - start <= -changeCount) {\n\t\t\t\t\t\t/* the end bound has definitely been affected, no verifyBlock() required, move up to the parent */\n\t\t\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ttext = baseModel.getText(ancestorBlock.start, Math.min(charCount, ancestorBlock.end + changeCount + 1));\n\t\t\t\t\tif (!this._stylerAdapter.verifyBlock(baseModel, text, ancestorBlock, changeCount)) {\n\t\t\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * The change has not directly changed ancestorBlock's start/end strings, now verify that its end\n\t\t\t\t * bound is still valid (ie.- ensure that a new block is not extending beyond the end bound).\n\t\t\t\t */\n\n\t\t\t\tblocks = ancestorBlock.getBlocks();\n\t\t\t\tvar blockCount = blocks.length;\n\t\t\t\tvar blockStart = binarySearch(blocks, lineStart, true);\n\t\t\t\tvar blockEnd = binarySearch(blocks, end, false, blockStart - 1, blockCount);\n\n\t\t\t\t/*\n\t\t\t\t * If the change immediately follows the preceding block then test whether\n\t\t\t\t * the block should be extended.\n\t\t\t\t */\n\t\t\t\tblockExtended = false;\n\t\t\t\tif (blockStart && blocks.length && blocks[blockStart - 1].end === start) {\n\t\t\t\t\ttext = baseModel.getText(blocks[blockStart - 1].start, Math.min(charCount, start + 1));\n\t\t\t\t\tvar tempBlocks = this.computeBlocks(baseModel, text, ancestorBlock, blocks[blockStart - 1].start, null, null, null);\n\t\t\t\t\tif (tempBlocks.length && tempBlocks[0].end !== blocks[blockStart - 1].end) {\n\t\t\t\t\t\t/* the change has affected the preceding block's end, so include this block */\n\t\t\t\t\t\tblockStart--;\n\t\t\t\t\t\tblockExtended = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (blockStart < blockCount && blocks[blockStart].start <= lineStart && (lineStart < blocks[blockStart].end || blockExtended)) {\n\t\t\t\t\tts = blocks[blockStart].start;\n\t\t\t\t\tif (ts > start) { ts += changeCount; }\n\t\t\t\t} else if (blockStart === blockCount && blockCount > 0 && ancestorBlock.end - changeCount === blocks[blockCount - 1].end) {\n\t\t\t\t\tts = blocks[--blockStart].start;\n\t\t\t\t\tif (ts > start) { ts += changeCount; }\n\t\t\t\t} else {\n\t\t\t\t\tts = Math.max(lineStart, ancestorBlock.contentStart);\n\t\t\t\t}\n\n\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\tte = blocks[blockEnd].end;\n\t\t\t\t} else {\n\t\t\t\t\tte = ancestorBlock.contentEnd;\n\t\t\t\t}\n\t\t\t\tif (start <= te) { te += changeCount; }\n\t\t\t\tte = Math.min(te, charCount - 1);\n\t\t\t\ttext = baseModel.getText(ts, te + 1);\n\t\t\t\tvar newBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\n\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\t/* ensure that blockEnd's end is preserved */\n\t\t\t\t\tif (newBlocks.length && newBlocks[newBlocks.length - 1].end === te && newBlocks[newBlocks.length - 1].typeId === blocks[blockEnd].typeId) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t/*\n\t\t\t\t\t * ancestorBlock's end match is no longer valid because it is being spanned by a block from\n\t\t\t\t\t * within.  Attempt to find a subsequent sibling block with the same type, as its end match\n\t\t\t\t\t * will serve as the end match for this spanning block as well.\n\t\t\t\t\t */\n\t\t\t\t\tif (newBlocks.length && this._stylerAdapter.blockSpansBeyondEnd(newBlocks[newBlocks.length - 1])) {\n\t\t\t\t\t\tblockEnd++;\n\t\t\t\t\t\tvar subBlocks = newBlocks[newBlocks.length - 1].getBlocks();\n\t\t\t\t\t\tvar spanningTypeId = (subBlocks.length ? subBlocks[subBlocks.length - 1] : newBlocks[newBlocks.length - 1]).typeId;\n\t\t\t\t\t\twhile (blockEnd < blockCount) {\n\t\t\t\t\t\t\tif (blocks[blockEnd].typeId === spanningTypeId) {\n\t\t\t\t\t\t\t\t/* found a potential end block, must verify it */\n\t\t\t\t\t\t\t\tvar tempTe = blocks[blockEnd].end + changeCount;\n\t\t\t\t\t\t\t\ttempTe = Math.min(tempTe, charCount - 1);\n\t\t\t\t\t\t\t\ttext = baseModel.getText(ts, tempTe + 1);\n\t\t\t\t\t\t\t\tvar tempNewBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\t\t\t\t\t\t\t\tif (tempNewBlocks.length && tempNewBlocks[tempNewBlocks.length - 1].end === tempTe) {\n\t\t\t\t\t\t\t\t\t/* verified, can now stop looking */\n\t\t\t\t\t\t\t\t\tte = tempTe;\n\t\t\t\t\t\t\t\t\tnewBlocks = tempNewBlocks;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblockEnd++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t/* ensure that ancestorBlock's end is preserved */\n\t\t\t\t\tif (!newBlocks.length || newBlocks[newBlocks.length - 1].end <= ancestorBlock.contentEnd + changeCount) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * The end block's end bound is spanned by a block from within, so move up to the ancestor\n\t\t\t\t * block, or extend end to the end of the content if already at the root-level block.\n\t\t\t\t */\n\n\t\t\t\tif (!parentBlock) {\n\t\t\t\t\tte = charCount;\n\t\t\t\t\tblockEnd = blockCount;\n\t\t\t\t\ttext = baseModel.getText(ts, te);\n\t\t\t\t\tnewBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\tredraw = true; /* blocks may not appear to be changed in the context of the parent block */\n\t\t\t} while (true);\n\n\t\t\tthis._rootBlock.adjustBounds(start, changeCount);\n\t\t\tblockEnd = Math.min(blockEnd + 1, blockCount);\n\n\t\t\tvar block;\n\t\t\tif (!redraw) {\n\t\t\t\tredraw = (blockEnd - blockStart) !== newBlocks.length;\n\t\t\t}\n\t\t\tif (!redraw) {\n\t\t\t\tfor (var i = 0; i < newBlocks.length; i++) {\n\t\t\t\t\tblock = blocks[blockStart + i];\n\t\t\t\t\tvar newBlock = newBlocks[i];\n\t\t\t\t\tif (block.start !== newBlock.start || block.end !== newBlock.end || block.typeId !== newBlock.typeId) {\n\t\t\t\t\t\tredraw = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!blocks.length && !newBlocks.length) {\n\t\t\t\tvar eventOldBlocks = [ancestorBlock];\n\t\t\t\tvar eventNewBlocks = [ancestorBlock];\n\t\t\t\tthis.dispatchEvent({\n\t\t\t\t\ttype: \"BlocksChanged\", //$NON-NLS-0$\n\t\t\t\t\toldBlocks: eventOldBlocks,\n\t\t\t\t\tnewBlocks: eventNewBlocks\n\t\t\t\t});\n\t\t\t\tancestorBlock = eventNewBlocks[0]; /* enables the markdown styler to return a modified ancestorBlock */\n\t\t\t} else {\n\t\t\t\tthis.dispatchEvent({\n\t\t\t\t\ttype: \"BlocksChanged\", //$NON-NLS-0$\n\t\t\t\t\toldBlocks: blocks.slice(blockStart, blockEnd),\n\t\t\t\t\tnewBlocks: newBlocks\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar args = [blockStart, blockEnd - blockStart].concat(newBlocks);\n\t\t\tArray.prototype.splice.apply(blocks, args);\n\t\t\tif (redraw) {\n\t\t\t\tvar redrawStart = ts;\n\t\t\t\tvar redrawEnd = te;\n\t\t\t\tif (viewModel !== baseModel) {\n\t\t\t\t\tredrawStart = viewModel.mapOffset(redrawStart, true);\n\t\t\t\t\tredrawEnd = viewModel.mapOffset(redrawEnd, true);\n\t\t\t\t}\n\t\t\t\tthis._view.redrawRange(redrawStart, redrawEnd);\n\t\t\t}\n\n\t\t\tif (this._annotationModel) {\n\t\t\t\tvar remove = [], add = [];\n\t\t\t\tvar allFolding = [];\n\t\t\t\tvar iter = this._annotationModel.getAnnotations(ts, te);\n\t\t\t\tvar doFolding = this._foldingEnabled && baseModel !== viewModel;\n\t\t\t\tvar parent = ancestorBlock.parent || ancestorBlock;\n\t\t\t\twhile (iter.hasNext()) {\n\t\t\t\t\tvar annotation = iter.next();\n\t\t\t\t\tif (doFolding && annotation.type === mAnnotations.AnnotationType.ANNOTATION_FOLDING) {\n\t\t\t\t\t\tallFolding.push(annotation);\n\t\t\t\t\t\tblock = this._findBlock(parent, annotation.start);\n\t\t\t\t\t\twhile (block) {\n\t\t\t\t\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\t\t\t\t\tif (annotation.start === foldBounds.start && annotation.end === foldBounds.end) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblock = block.parent;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (block && annotation.start === foldBounds.start && annotation.end === foldBounds.end) {\n\t\t\t\t\t\t\tvar annotationStart = annotation.start;\n\t\t\t\t\t\t\tvar annotationEnd = annotation.end;\n\t\t\t\t\t\t\tif (annotationStart > start) {\n\t\t\t\t\t\t\t\tannotationStart -= changeCount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (annotationEnd > start) {\n\t\t\t\t\t\t\t\tannotationEnd -= changeCount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (annotationStart <= start && start < annotationEnd && annotationStart <= end && end < annotationEnd) {\n\t\t\t\t\t\t\t\tvar startLine = baseModel.getLineAtOffset(annotation.start);\n\t\t\t\t\t\t\t\tvar endLine = baseModel.getLineAtOffset(annotation.end);\n\t\t\t\t\t\t\t\tif (startLine !== endLine) {\n\t\t\t\t\t\t\t\t\tif (!annotation.expanded) {\n\t\t\t\t\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (annotation.type === mAnnotations.AnnotationType.ANNOTATION_TASK) {\n\t\t\t\t\t\tif (ancestorBlock.start <= annotation.start && annotation.end <= ancestorBlock.end) {\n\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (doFolding) {\n\t\t\t\t\tparent.getBlocks().forEach(function(block) {\n\t\t\t\t\t\tthis._updateFolding(block, baseModel, viewModel, allFolding, add, ts, te);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t\tif (this._detectTasks) {\n\t\t\t\t\tthis._computeTasks(ancestorBlock, baseModel, add, ts, te);\n\t\t\t\t}\n\t\t\t\tthis._annotationProviders.forEach(function(current) {\n\t\t\t\t\tvar providerRemove = [];\n\t\t\t\t\tvar providerAdd = [];\n\t\t\t\t\tcurrent(this._annotationModel, baseModel, ancestorBlock, ts, te, providerRemove, providerAdd);\n\t\t\t\t\tremove = remove.concat(providerRemove);\n\t\t\t\t\tadd = add.concat(providerAdd);\n\t\t\t\t}.bind(this));\n\t\t\t\tthis._replaceAnnotations(remove, add);\n\t\t\t}\n\t\t},\n\t\t_onMouseDown: function(e) {\n\t\t\tif (e.clickCount !== 2) { return; }\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar offset = this._view.getOffsetAtLocation(e.x, e.y);\n\t\t\tif (offset > 0) {\n\t\t\t\tvar mapOffset = offset - 1;\n\t\t\t\tvar baseModel = model;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmapOffset = model.mapOffset(mapOffset);\n\t\t\t\t\tbaseModel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, mapOffset);\n\t\t\t\tvar bracket = this._findMatchingBracket(baseModel, block, mapOffset);\n\t\t\t\tif (bracket !== -1) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar mapBracket = bracket;\n\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\tmapBracket = model.mapOffset(mapBracket, true);\n\t\t\t\t\t}\n\t\t\t\t\tif (offset > mapBracket) {\n\t\t\t\t\t\toffset--;\n\t\t\t\t\t\tmapBracket++;\n\t\t\t\t\t}\n\t\t\t\t\tthis._view.setSelection(mapBracket, offset);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onSelection: function(e) {\n\t\t\tvar oldSelections = Array.isArray(e.oldValue) ? e.oldValue : [e.oldValue];\n\t\t\tvar newSelections = Array.isArray(e.newValue) ? e.newValue : [e.newValue];\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar lineIndex;\n\t\t\tif (this._highlightCaretLine) {\n\t\t\t\tfunction getHighlightLines(selections) {\n\t\t\t\t\tvar lines = {};\n\t\t\t\t\tif (selections.some(function(selection) {\n\t\t\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\t\t\tlines[model.getLineAtOffset(selection.start).toString()] = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})) return {};\n\t\t\t\t\treturn lines;\n\t\t\t\t}\n\t\t\t\tvar oldLines = getHighlightLines(oldSelections);\n\t\t\t\tvar newLines = getHighlightLines(newSelections);\n\t\t\t\tfunction redraw(o, n) {\n\t\t\t\t\tfor (var p in o) {\n\t\t\t\t\t\tif (!n[p]) {\n\t\t\t\t\t\t\tlineIndex = p >> 0;\n\t\t\t\t\t\t\tview.redrawLines(lineIndex, lineIndex + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tredraw(oldLines, newLines);\n\t\t\t\tredraw(newLines, oldLines);\n\t\t\t}\n\t\t\tif (!this._annotationModel) { return; }\n\n\t\t\tvar remove = this._bracketAnnotations, add, caret;\n\t\t\tif (newSelections.length === 1 && newSelections[0].isEmpty() && (caret = newSelections[0].getCaret()) > 0) {\n\t\t\t\tvar mapCaret = caret - 1;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmapCaret = model.mapOffset(mapCaret);\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, mapCaret);\n\t\t\t\tvar bracket = this._findMatchingBracket(model, block, mapCaret);\n\t\t\t\tif (bracket !== -1) {\n\t\t\t\t\tadd = [\n\t\t\t\t\t\tthis._createAnnotation(mAnnotations.AnnotationType.ANNOTATION_MATCHING_BRACKET, bracket, bracket + 1),\n\t\t\t\t\t\tthis._createAnnotation(mAnnotations.AnnotationType.ANNOTATION_CURRENT_BRACKET, mapCaret, mapCaret + 1)\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._bracketAnnotations = add;\n\t\t\tthis._replaceAnnotations(remove, add);\n\t\t},\n\t\t_replaceAnnotations: function(remove, add) {\n\t\t\tvar filteredRemove;\n\t\t\tif (remove) {\n\t\t\t\tfilteredRemove = [];\n\t\t\t\tremove.forEach(function(current) {\n\t\t\t\t\tif (current.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING || current.source === this._TEXTSTYLER) {\n\t\t\t\t\t\tfilteredRemove.push(current);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\tthis._annotationModel.replaceAnnotations(filteredRemove, add);\n\t\t},\n\t\t_spliceStyles: function(whitespacePattern, ranges, text, offset) {\n\t\t\tvar regex = whitespacePattern.regex;\n\t\t\tregex.lastIndex = 0;\n\t\t\tvar rangeIndex = 0;\n\t\t\tvar result = regex.exec(text);\n\t\t\twhile (result) {\n\t\t\t\tvar charIndex = offset + result.index;\n\t\t\t\twhile (rangeIndex < ranges.length) {\n\t\t\t\t\tif (charIndex < ranges[rangeIndex].end) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\trangeIndex++;\n\t\t\t\t}\n\t\t\t\tvar newStyle = {\n\t\t\t\t\tstart: charIndex,\n\t\t\t\t\tend: charIndex + 1,\n\t\t\t\t\tstyle: copy(whitespacePattern.style)\n\t\t\t\t};\n\t\t\t\tif (rangeIndex < ranges.length && ranges[rangeIndex].start <= charIndex) {\n\t\t\t\t\tvar endStyle = {start: charIndex + 1, end: ranges[rangeIndex].end, style: ranges[rangeIndex].style};\n\t\t\t\t\tranges[rangeIndex].end = charIndex;\n\t\t\t\t\tranges.splice(rangeIndex + 1, 0, endStyle);\n\t\t\t\t\tranges.splice(rangeIndex + 1, 0, newStyle);\n\t\t\t\t\trangeIndex += 2;\n\t\t\t\t\tnewStyle.style.styleClass += \" \" + ranges[rangeIndex].style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tranges.splice(rangeIndex, 0, newStyle);\n\t\t\t\t\trangeIndex++;\n\t\t\t\t}\n\t\t\t\tresult = regex.exec(text);\n\t\t\t}\n\t\t},\n\t\t_updateFolding: function(block, baseModel, viewModel, allFolding, _add, start, end) {\n\t\t\tstart = start || block.start;\n\t\t\tend = end || block.end;\n\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\tif (!block.doNotFold && foldBounds.start <= end && start <= foldBounds.end) {\n\t\t\t\tvar index = binarySearch(allFolding, foldBounds.start, true);\n\t\t\t\tif (!(index < allFolding.length && allFolding[index].start === foldBounds.start && allFolding[index].end === foldBounds.end)) {\n\t\t\t\t\tvar annotation = this._createFoldingAnnotation(viewModel, baseModel, foldBounds.start, foldBounds.end);\n\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t_add.push(annotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tblock.getBlocks().forEach(function(current) {\n\t\t\t\t\tthis._updateFolding(current, baseModel, viewModel, allFolding, _add, start, end);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t_caretLineStyle: {styleClass: \"meta annotation currentLine\"}, //$NON-NLS-0$\n\t\t_spacePattern: {regex: /[ ]/g, style: {styleClass: \"punctuation separator space\", unmergeable: true}}, //$NON-NLS-0$\n\t\t_tabPattern: {regex: /\\t/g, style: {styleClass: \"punctuation separator tab\", unmergeable: true}}, //$NON-NLS-0$\n\t\t_TEXTSTYLER: \"textStyler\"\n\t};\n\n\tmEventTarget.EventTarget.addMixin(TextStyler.prototype);\n\n\treturn {\n\t\tTextStyler: TextStyler,\n\t\tBlock: Block,\n\t\tcreatePatternBasedAdapter: createPatternBasedAdapter\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2013, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine('orion/editor/edit', [ //$NON-NLS-0$\n\t\"require\", //$NON-NLS-0$\n\n\t\"orion/editor/textView\", //$NON-NLS-0$\n\t\"orion/editor/textModel\", //$NON-NLS-0$\n\t\"orion/editor/textTheme\", //$NON-NLS-0$\n\t\"orion/editor/projectionTextModel\", //$NON-NLS-0$\n\t\"orion/editor/editor\", //$NON-NLS-0$\n\t\"orion/editor/editorFeatures\", //$NON-NLS-0$\n\t\n\t\"orion/editor/contentAssist\", //$NON-NLS-0$\n\t\"orion/editor/textStyler\" //$NON-NLS-0$\n\n], function(require, mTextView, mTextModel, mTextTheme, mProjModel, mEditor, mEditorFeatures, mContentAssist, mTextStyler) {\n\n\t/**\t@private */\n\tfunction getDisplay(window, document, element) {\n\t\tvar display;\n\t\tvar temp = element;\n\t\twhile (temp && temp !== document && display !== \"none\") { //$NON-NLS-0$\n\t\t\tif (window.getComputedStyle) {\n\t\t\t\tvar style = window.getComputedStyle(temp, null);\n\t\t\t\tdisplay = style.getPropertyValue(\"display\"); //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\tdisplay = temp.currentStyle.display;\n\t\t\t}\n\t\t\ttemp = temp.parentNode;\n\t\t}\n\t\tif (!temp || !display) {\n\t\t\treturn \"none\"; //$NON-NLS-0$\n\t\t}\n\t\treturn display;\n\t}\n\n\t/**\t@private */\n\tfunction getTextFromElement(element) {\n\t\tvar firstChild = element.firstChild;\n\t\tif (firstChild && firstChild.tagName === \"TEXTAREA\") { //$NON-NLS-0$\n\t\t\treturn firstChild.value;\n\t\t}\n\t\tvar document = element.ownerDocument;\n\t\tvar window = document.defaultView || document.parentWindow;\n\t\tif (!window.getSelection ||\n\t\t\t(element.childNodes.length === 1 && firstChild.nodeType === Node.TEXT_NODE) ||\n\t\t\tgetDisplay(window, document, element) === \"none\") //$NON-NLS-0$\n\t\t{\n\t\t\treturn element.innerText || element.textContent;\n\t\t}\n\t\tvar newRange = document.createRange();\n\t\tnewRange.selectNode(element);\n\t\tvar selection = window.getSelection();\n\t\tvar oldRanges = [], i;\n\t\tfor (i = 0; i < selection.rangeCount; i++) {\n\t\t\toldRanges.push(selection.getRangeAt(i));\n\t\t}\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(newRange);\n\t\tvar text = selection.toString();\n\t\tselection.removeAllRanges();\n\t\tfor (i = 0; i < oldRanges.length; i++) {\n\t\t\tselection.addRange(oldRanges[i]);\n\t\t}\n\t\treturn text;\n\t}\n\n\t/**\t@private */\t\n\tfunction optionName(name) {\n\t\tvar prefix = \"data-editor-\"; //$NON-NLS-0$\n\t\tif (name.substring(0, prefix.length) === prefix) {\n\t\t\tvar key = name.substring(prefix.length);\n\t\t\tkey = key.replace(/-([a-z])/ig, /* @callback */ function(all, character) {\n\t\t\t\treturn character.toUpperCase();\n\t\t\t});\n\t\t\treturn key;\n\t\t}\n\t\treturn undefined;\n\t}\n\t\n\t/**\t@private */\n\tfunction merge(obj1, obj2) {\n\t\tfor (var p in obj2) {\n\t\t\tif (obj2.hasOwnProperty(p)) {\n\t\t\t\tobj1[p] = obj2[p];\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\t@private */\n\tfunction mergeOptions(parent, defaultOptions) {\n\t\tvar options = {};\n\t\tmerge(options, defaultOptions);\n\t\tfor (var attr, j = 0, attrs = parent.attributes, l = attrs.length; j < l; j++) {\n\t\t\tattr = attrs.item(j);\n\t\t\tvar key = optionName(attr.nodeName);\n\t\t\tif (key) {\n\t\t\t\tvar value = attr.nodeValue;\n\t\t\t\tif (value === \"true\" || value === \"false\") { //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\tvalue = value === \"true\"; //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\toptions[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\t\n\t/**\t@private */\n\tfunction getParents(document, className) {\n\t\tif (document.getElementsByClassName) {\n\t\t\treturn document.getElementsByClassName(className);\n\t\t}\n\t\tclassName = className.replace(/ *$/, '');\n\t\tif (document.querySelectorAll) {\n\t\t\treturn document.querySelectorAll((' ' + className).replace(/ +/g, '.')); //$NON-NLS-1$ //$NON-NLS-0$\n\t\t}\n\t\treturn null;\n\t}\n\t\n\t/**\t@private */\n\tfunction getHeight(node) {\n\t\treturn node.clientHeight;\n\t}\n\t\n\t/**\n\t * @class This object describes the options for <code>edit</code>.\n\t * @name orion.editor.EditOptions\n\t *\n\t * @property {String|DOMElement} parent the parent element for the view, it can be either a DOM element or an ID for a DOM element.\n\t * @property {Boolean} [readonly=false] whether or not the view is read-only.\n\t * @property {Boolean} [fullSelection=true] whether or not the view is in full selection mode.\n\t * @property {Boolean} [tabMode=true] whether or not the tab keypress is consumed by the view or is used for focus traversal.\n\t * @property {Boolean} [expandTab=false] whether or not the tab key inserts white spaces.\n\t * @property {String} [themeClass] the CSS class for the view theming.\n\t * @property {Number} [tabSize=4] The number of spaces in a tab.\n\t * @property {Boolean} [singleMode=false] whether or not the editor is in single line mode.\n\t * @property {Boolean} [wrapMode=false] whether or not the view wraps lines.\n\t * @property {Boolean} [wrapable=false] whether or not the view is wrappable.\n\t * @property {Function} [statusReporter] a status reporter.\n\t * @property {Function} [hoverFactory] a factory for hovers.\n\t * @property {String} [title=\"\"] the editor title.\n\t * @property {String} [contents=\"\"] the editor contents.\n\t * @property {String} [lang] @deprecated use contentType instead\n\t * @property {String} [contentType] the type of the content (eg.- application/javascript, text/html, etc.)\n\t * @property {Function} [grammarProvider] a callback for providing grammars for a content type\n\t * @property {Boolean} [showLinesRuler=true] whether or not the lines ruler is shown.\n\t * @property {Boolean} [showAnnotationRuler=true] whether or not the annotation ruler is shown.\n\t * @property {Boolean} [showOverviewRuler=true] whether or not the overview ruler is shown.\n\t * @property {Boolean} [showFoldingRuler=true] whether or not the folding ruler is shown.\n\t * @property {Boolean} [showZoomRuler=false] whether or not the zoom ruler is shown.\n\t * @property {Boolean} [noFocus=false] whether or not to focus the editor on creation.\n\t * @property {Number} [firstLineIndex=1] the line index displayed for the first line of text.\n\t */\n\t/**\n\t * Creates an editor instance configured with the given options.\n\t * \n\t * @param {orion.editor.EditOptions} options the editor options.\n\t */\n\tfunction edit(options) {\n\t\tvar doc = options.document || document;\n\t\tvar parent = options.parent;\n\t\tif (!parent) { parent = \"editor\"; } //$NON-NLS-0$\n\t\tif (typeof(parent) === \"string\") { //$NON-NLS-0$\n\t\t\tparent = doc.getElementById(parent);\n\t\t}\n\t\tif (!parent) {\n\t\t\tif (options.className) {\n\t\t\t\tvar parents = getParents(doc, options.className);\n\t\t\t\tif (parents) {\n\t\t\t\t\toptions.className = undefined;\n\t\t\t\t\t// Do not focus editors by default when creating multiple editors\n\t\t\t\t\tif (parents.length > 1 && options.noFocus === undefined) { options.noFocus = true; }\n\t\t\t\t\tvar editors = [];\n\t\t\t\t\tfor (var i = parents.length - 1; i >= 0; i--) {\n\t\t\t\t\t\toptions.parent = parents[i];\n\t\t\t\t\t\teditors.push(edit(options));\n\t\t\t\t\t}\n\t\t\t\t\treturn editors;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!parent) { throw new Error(\"no parent\"); } //$NON-NLS-0$\n\t\toptions = mergeOptions(parent, options);\n\t\n\t\tif (typeof options.theme === \"string\") { //$NON-NLS-0$\n\t\t\tvar theme = mTextTheme.TextTheme.getTheme(options.theme);\n\t\t\tvar index = options.theme.lastIndexOf(\"/\"); //$NON-NLS-0$\n\t\t\tvar themeClass = options.theme; \n\t\t\tif (index !== -1) {\n\t\t\t\tthemeClass = themeClass.substring(index + 1);\n\t\t\t}\n\t\t\tvar extension = \".css\"; //$NON-NLS-0$\n\t\t\tif (themeClass.substring(themeClass.length - extension.length) === extension) {\n\t\t\t\tthemeClass = themeClass.substring(0, themeClass.length - extension.length);\n\t\t\t}\n\t\t\ttheme.setThemeClass(themeClass, {href: options.theme});\n\t\t\toptions.theme = theme;\n\t\t}\n\t\tvar textViewFactory = function() {\n\t\t\treturn new mTextView.TextView({\n\t\t\t\tparent: parent,\n\t\t\t\tmodel: new mProjModel.ProjectionTextModel(options.model ? options.model : new mTextModel.TextModel(\"\")),\n\t\t\t\ttabSize: options.tabSize ? options.tabSize : 4,\n\t\t\t\treadonly: options.readonly,\n\t\t\t\tfullSelection: options.fullSelection,\n\t\t\t\ttabMode: options.tabMode,\n\t\t\t\texpandTab: options.expandTab,\n\t\t\t\tsingleMode: options.singleMode,\n\t\t\t\tthemeClass: options.themeClass,\n\t\t\t\ttheme: options.theme,\n\t\t\t\twrapMode: options.wrapMode,\n\t\t\t\twrappable: options.wrappable\n\t\t\t});\n\t\t};\n\n\t\tvar contentAssist, contentAssistFactory;\n\t\tif (!options.readonly) {\n\t\t\tcontentAssistFactory = {\n\t\t\t\tcreateContentAssistMode: function(editor) {\n\t\t\t\t\tcontentAssist = new mContentAssist.ContentAssist(editor.getTextView());\n\t\t\t\t\tvar contentAssistWidget = new mContentAssist.ContentAssistWidget(contentAssist);\n\t\t\t\t\tvar result = new mContentAssist.ContentAssistMode(contentAssist, contentAssistWidget);\n\t\t\t\t\tcontentAssist.setMode(result);\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tvar syntaxHighlighter = {\n\t\t\tstyler: null, \n\t\t\t\n\t\t\thighlight: function(contentType, grammarProvider, editor) {\n\t\t\t\tif (this.styler && this.styler.destroy) {\n\t\t\t\t\tthis.styler.destroy();\n\t\t\t\t}\n\t\t\t\tthis.styler = null;\n\n\t\t\t\t/* to maintain backwards-compatibility convert previously-supported lang values to types */\n\t\t\t\tif (contentType === \"js\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"application/javascript\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"css\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/css\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"html\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/html\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"java\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/x-java-source\"; //$NON-NLS-0$\n\t\t\t\t}\n\n\t\t\t\tvar textView = editor.getTextView();\n\t\t\t\tvar annotationModel = editor.getAnnotationModel();\n\t\t\t\tvar loadGrammar = function(contentType) {\n\t\t\t\t\t/* attempt to locate an included file containing the grammar for contentType */\n\t\t\t\t\tvar folderName = contentType.replace(/[*|:/\".<>?+]/g, '_');\n\t\t\t\t\trequire([\"./stylers/\" + folderName + \"/syntax\"], //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t\tfunction(grammar) {\n\t\t\t\t\t\t\tvar stylerAdapter = new mTextStyler.createPatternBasedAdapter(grammar.grammars, grammar.id, contentType);\n\t\t\t\t\t\t\tthis.styler = new mTextStyler.TextStyler(textView, annotationModel, stylerAdapter);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t/* @callback */ function(error) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t * A grammar file was not found for the specified contentType, so syntax styling will\n\t\t\t\t\t\t\t * not be shown (the editor will still work fine otherwise).  requireJS has already\n\t\t\t\t\t\t\t * written an error message to the console regarding the missing grammar file.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tif (contentType) {\n\t\t\t\t\tif (grammarProvider && (typeof grammarProvider === \"function\")) { //$NON-NLS-0$\n\t\t\t\t\t\tgrammarProvider(contentType).then(\n\t\t\t\t\t\t\tfunction(result) {\n\t\t\t\t\t\t\t\tif (result && result.grammars && result.id) {\n\t\t\t\t\t\t\t\t\tvar stylerAdapter = new mTextStyler.createPatternBasedAdapter(result.grammars, result.id, contentType);\n\t\t\t\t\t\t\t\t\tthis.styler = new mTextStyler.TextStyler(textView, annotationModel, stylerAdapter);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\t\t/* @callback */ function(error) {\n\t\t\t\t\t\t\t\tloadGrammar(contentType); /* fall back to default grammar file lookup */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloadGrammar(contentType);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (contentType === \"text/css\") { //$NON-NLS-0$\n\t\t\t\t\teditor.setFoldingRulerVisible(options.showFoldingRuler === undefined || options.showFoldingRuler);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar editor = new mEditor.Editor({\n\t\t\ttextViewFactory: textViewFactory,\n\t\t\tundoStackFactory: new mEditorFeatures.UndoFactory(),\n\t\t\tannotationFactory: new mEditorFeatures.AnnotationFactory(),\n\t\t\tlineNumberRulerFactory: new mEditorFeatures.LineNumberRulerFactory(),\n\t\t\tfoldingRulerFactory: new mEditorFeatures.FoldingRulerFactory(),\n\t\t\ttextDNDFactory: new mEditorFeatures.TextDNDFactory(),\n\t\t\tcontentAssistFactory: contentAssistFactory,\n\t\t\tkeyBindingFactory: new mEditorFeatures.KeyBindingsFactory(), \n\t\t\tstatusReporter: options.statusReporter,\n\t\t\thoverFactory: options.hoverFactory,\n\t\t\tdomNode: parent\n\t\t});\n\t\teditor.addEventListener(\"TextViewInstalled\", function() { //$NON-NLS-0$\n\t\t\tvar ruler = editor.getLineNumberRuler();\n\t\t\tif (ruler && options.firstLineIndex !== undefined) {\n\t\t\t\truler.setFirstLine(options.firstLineIndex);\n\t\t\t}\n\t\t\tvar sourceCodeActions = editor.getSourceCodeActions();\n\t\t\tif (sourceCodeActions) {\n\t\t\t\tsourceCodeActions.setAutoPairParentheses(options.autoPairParentheses);\n\t\t\t\tsourceCodeActions.setAutoPairBraces(options.autoPairBraces);\n\t\t\t\tsourceCodeActions.setAutoPairSquareBrackets(options.autoPairSquareBrackets);\n\t\t\t\tsourceCodeActions.setAutoPairAngleBrackets(options.autoPairAngleBrackets);\n\t\t\t\tsourceCodeActions.setAutoPairQuotations(options.autoPairQuotations);\n\t\t\t\tsourceCodeActions.setAutoCompleteComments(options.autoCompleteComments);\n\t\t\t\tsourceCodeActions.setSmartIndentation(options.smartIndentation);\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar contents = options.contents;\n\t\tif (contents === undefined) {\n\t\t\tcontents = getTextFromElement(parent); \n\t\t}\n\t\tif (!contents) { contents=\"\"; }\n\t\t\n\t\teditor.installTextView();\n\t\teditor.setLineNumberRulerVisible(options.showLinesRuler === undefined || options.showLinesRuler);\n\t\teditor.setAnnotationRulerVisible(options.showAnnotationRuler === undefined || options.showFoldingRuler);\n\t\teditor.setOverviewRulerVisible(options.showOverviewRuler === undefined || options.showOverviewRuler);\n\t\teditor.setZoomRulerVisible(options.showZoomRuler === undefined || options.showZoomRuler);\n\t\teditor.setFoldingRulerVisible(options.showFoldingRuler === undefined || options.showFoldingRuler);\n\t\teditor.setInput(options.title, null, contents, false, options.noFocus);\n\t\t\n\t\tsyntaxHighlighter.highlight(options.contentType || options.lang, options.grammarProvider, editor);\n\t\t/*\n\t\t * The minimum height of the editor is 50px. Do not compute size if the editor is not\n\t\t * attached to the DOM or it is display=none.\n\t\t */\n\t\tvar window = doc.defaultView || doc.parentWindow;\n\t\tif (!options.noComputeSize && getDisplay(window, doc, parent) !== \"none\" && getHeight(parent) <= 50) { //$NON-NLS-0$\n\t\t\tvar height = editor.getTextView().computeSize().height;\n\t\t\tparent.style.height = height + \"px\"; //$NON-NLS-0$\n\t\t}\n\t\treturn editor;\n\t}\n\n\tvar editorNS = window.orion ? window.orion.editor : undefined;\n\tif (editorNS) {\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tmerge(editorNS, arguments[i]);\n\t\t}\n\t\teditorNS.edit = edit;\n\t}\n\n\treturn edit;\n});\n\n\n"]}